import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
if (global) { global.datascript = datascript } else if (window) { window.datascript = datascript } else { var datascript = {}}const shadow_esm_import = function(x) { return import(x) };
var z_a,B_a,Z_,D_a,C_a,$_,a0,b0,c0,E_a,F_a,G_a,H_a,e0,f0,g0,I_a,h0,i0,j0,k0,l0,M_a,N_a,O_a,P_a,m0,n0,Q_a,o0,R_a,p0,q0,r0,s0,t0,u0,v0,S_a,x0,y0,z0,B0,A0,T_a,C0,E0,F0,G0,H0,J0,U_a,M0,V_a,N0,L0,O0,W_a,X_a,Y_a,$_a,Q0,R0,S0,a0a,V0,b0a,c0a,f0a,g0a,$0,h0a,i0a,j0a,k0a,l0a,g1,h1,i1,k1,m0a,n0a,o0a,p0a,q0a,l1,m1,n1,o1,p1,q1,t1,u1,v1,w1,u0a,H1,v0a,x0a,y0a,R1,U1,X1,Y1,D0a,$1,F0a,c2,G0a,i2,j2,k2,l2,m2,H0a,n2,p2,I0a,s2,J0a,t2,d0,u2,v2,w2,M0a,y2,O0a,P0a,Q0a,U0a,V0a,C2,W0a,Z0a,$0a,a1a,I2,c1a,e1a,f1a,g1a,h1a,k1a,l1a,
O2,P2,m1a,Q2,n1a,R2,S2,V2,u1a,v1a,x1a,X2,Y2,y1a,$2,a3,z1a,b3,A1a,f3,C1a,D1a,g3,F1a,G1a,h3,j3,k3,E1a,H1a,l3,I1a,J1a,K1a,i3,L1a,M1a,N1a,m3,O1a,w3,P1a,D3,T1a,U1a,W1a,E3,X1a,Y1a,F3,G3,H3,b2a,c2a,I3,d2a,e2a,f2a,J3,K3,L3,M3,N3,g2a,P3,O3,Q3,S3,T3,U3,V3,i2a,j2a,k2a,l2a,o2a,W3,p2a,q2a,X3,Y3,$3,Z3,a4,b4,c4,d4,e4,f4,g4,h4,i4,j4,k4,s2a,l4,t2a,m4,u2a,v2a,n4,x2a,p4,y2a,q4,r4,s4,t4,z2a,A2a,C2a,u4,v4,w4,x4,y4,z4,A4,B4,C4,D2a,E2a,D4,J2a,E4,K2a,L2a,N2a,F4,G4,H4,I4,J4,K4,L4,O2a,M4,P2a,Q2a,R2a,S2a,T2a,V2a,P4,W2a,S4,
T4,X2a,Z2a,$2a,V4,a3a,b3a,c3a,g3a,j3a,c5,d5,k3a,l3a,m3a,e5,f5,n3a,o3a,p3a,q3a,g5,r3a,u3a,v3a,m5,w3a,o5,x3a,p5,y3a,z3a,A3a,B3a,C3a,D3a,q5,E3a,F3a,G3a,H3a,I3a,J3a,K3a,M3a,N3a,O3a,v5,P3a,R3a,S3a,C5,D5,E5,T3a,U3a,V3a,W3a,Q3a,B5,X3a,Y3a,G5,Z3a,$3a,a4a,b4a,c4a,d4a,e4a,f4a,g4a,h4a,i4a,H5,j4a,J1,L2,k4a,l4a,m4a,n4a,f3a,C0a,E2,Y4,i1a,o4a,p4a,q4a,I5,r4a,U4,s4a,t4a,e3,u4a,H2a,v4a,B3,H2,w4a,x4a,y4a,a5,z4a,z3,Y0a,A4a,B4a,C4a,D4a,p3,E4a,M1,F4a,G4a,H4a,I4a,F2,J4a,K4a,L4a,M4a,N4a,O4a,J5,P4a,Q4a,f2,z5,R4a,S4a,T4a,
$4,Q1,g2,W4,U4a,y5,V4a,L1,B2,W4a,X4a,e2,N4,Y4a,K5,Z4a,w0a,$4a,d1a,L5,a5a,b5a,c5a,R4,d5a,e5a,f5a,i3a,g5a,h5a,i5a,j5a,r1,M5,j1a,k5a,l5a,M2a,E0a,m5a,W0,G1,n5a,t3,Q1a,N5,o5a,d3,p5a,O4,V1,N0a,A1,q5a,O5,r5a,P5,X0a,F2a,X0,s5a,t5a,Q5,u5a,u5,N1,R5,v5a,S5,w5a,O1,q3,x5a,y5a,A5,z5a,r1a,d3a,A5a,n5,B5a,T5,C5a,U5,D5a,E5a,F5a,G5a,B1,H5a,I5a,J5a,K5a,T1,L5a,M5a,N5a,O5a,P5a,V5,a2a,n2a,P1,Q5a,K1,p1a,m2a,R5a,B1a,S5a,T5a,d0a,I1,U5a,s1a,i5,V5a,W5,q1a,h2,W5a,X5a,Y5a,Z5a,o3,r2a,J2,$5a,a6a,s0a,b6a,c6a,z2,d6a,e6a,f6a,C1,g6a,
y3,u3,h6a,X5,R3,Y5,i6a,s5,j6a,D2,k6a,l6a,m6a,j5,n6a,d2,o6a,N2,S0a,e0a,R0a,p6a,q6a,r6a,s6a,Z2,t6a,h2a,E1,u6a,v6a,w6a,x6a,h5,y6a,z6a,A0a,v3,G2a,I2a,G2,F1,w1a,B2a,A6a,B6a,Z5,C6a,$5,D6a,x2,E6a,a6,x3,t0a,U0,F6a,Z0,G6a,H6a,s3,U2a,X4,h3a,I6a,w2a,J6a,K6a,A3,S1,t3a,b6,r3,s3a,W1,L6a,M6a,N6a,O6a,c6,P6a,Q6a,R6a,S6a,d6,T6a,x5,U6a,V6a,W6a,L0a,X6a,Y6a,Z6a,$6a,r0a,a7a,Z4,e6,b5,b7a,C3,c7a,M2,D1,d7a,f6,e7a,f7a,g7a,h7a,i7a,Z1,o2,g6,e3a,A2,j7a,$1a,o4,k7a,Y0,l7a,Y2a,m7a,n7a,o7a,p7a,q7a,r7a,n3,s7a,t7a,h6;
z_a=function(a,b){a=a.split(".");var c=$APP.Cu;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}:c[d]=b};B_a=function(a){return $APP.pg(function(b){return $APP.Te(a,b)},A_a)};Z_=function(a,b,c,d,e){this.Pf=a;this.Kj=b;this.Lj=c;this.nf=d;this.Db=e;this.J=2147484416;this.K=0};
D_a=function(a,b,c){var d=a.Pf,e=a.Kj,f=a.Lj,h=a.nf;a=a.Db;var n=f.h?f.h(b,null):f.call(null,b,null);if($APP.l(n))return new Z_(d,$APP.vi.j($APP.Nl.h(e,n),h,b),$APP.vi.j(f,b,h),h+1,a);b=new Z_($APP.vi.j(d,b,c),$APP.vi.j(e,h,b),$APP.vi.j(f,b,h),h+1,a);return C_a.g?C_a.g(b):C_a.call(null,b)};C_a=function(a){if($APP.ce(a.Pf)>a.Db){var b=a.Pf,c=a.Kj,d=a.Lj,e=a.nf;a=a.Db;var f=$APP.v(c),h=$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);return new Z_($APP.Nl.h(b,f),$APP.Nl.h(c,h),$APP.Nl.h(d,f),e,a)}return a};
$_=function(a,b,c){if(null!=a&&null!=a.Gj)a=a.Gj(a,b,c);else{var d=$_[$APP.fa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=$_._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Lb("ICache.-get",a);}return a};a0=function(a,b,c){this.Db=a;this.$f=b;this.lm=c;this.J=393216;this.K=0};b0=function(){var a=new Z_($APP.Xf,$APP.fy(),$APP.Xf,0,100);return new a0(100,$APP.Eg(a),$APP.Xf)};
c0=function(a,b){a=a.toString(16);var c=$APP.ce(a);return c>b?$APP.Zi.j(a,0,b):c<b?[$APP.m.g($APP.sg.h($APP.m,$APP.gn.h(b-c,"0"))),$APP.m.g(a)].join(""):a};E_a=function(a,b){return $APP.Vc($APP.he($APP.bf.j(function(c,d){var e=$APP.A.j(c,0,null),f=$APP.A.j(c,1,null),h=a.g?a.g(d):a.call(null,d);return $APP.Te(e,h)?c:new $APP.H(null,2,5,$APP.I,[$APP.Rg.h(e,h),$APP.Rg.h(f,d)],null)},new $APP.H(null,2,5,$APP.I,[$APP.Tc($APP.Ci),$APP.Tc($APP.Sg)],null),b)))};
F_a=function(a,b){return $APP.bf.j(function(c,d){return $APP.l(a.g?a.g(d):a.call(null,d))?$APP.Td(d):null},null,b)};G_a=function(a){var b=d0;return $APP.Vc($APP.ef(function(c,d,e){return $APP.l(b.g?b.g(d):b.call(null,d))?c:$APP.Hh.j(c,d,e)},$APP.Tc($APP.oe(a)),a))};
H_a=function(a,b,c){return $APP.v($APP.bf.j(function(d,e){var f=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);e=a.j?a.j(f,e,d):a.call(null,f,e,d);return $APP.Ud(e)?$APP.Td(new $APP.H(null,2,5,$APP.I,[e,d],null)):new $APP.H(null,2,5,$APP.I,[e,d+1],null)},new $APP.H(null,2,5,$APP.I,[b,0],null),c))};e0=function(a){return $APP.bf.j(function(b,c){b.push(c);return b},[],a)};f0=function(a){return a instanceof Array};
g0=function(a,b){if(null!=a&&null!=a.Pj)a=a.Pj(a,b);else{var c=g0[$APP.fa(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=g0._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("IStorage.restore",a);}return a};I_a=function(a,b){if(null==a||null==a.Pl){var c=I_a[$APP.fa(null==a?null:a)];if(null!=c)c.h?c.h(a,b):c.call(null,a,b);else if(c=I_a._,null!=c)c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("IStorage.accessed",a);}};
h0=function(a,b,c){if(null!=a&&null!=a.Qj)a=a.Qj(a,b,c);else{var d=h0[$APP.fa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=h0._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Lb("IStorage.store",a);}return a};i0=function(a,b){if(null!=a&&null!=a.Oj)a.Oj(a,b);else{var c=i0[$APP.fa(null==a?null:a)];if(null!=c)c.h?c.h(a,b):c.call(null,a,b);else if(c=i0._,null!=c)c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("IStorage.delete",a);}};
j0=function(a,b){return 6>b?a>>>5*b&J_a:Math.floor(a/K_a[b])&J_a};k0=function(a,b,c){var d=a<L_a&&6>b,e=j0(a,b);return a-(d?e<<5*b:e*K_a[b])+(d?c<<5*b:c*K_a[b])};l0=function(a,b,c,d){for(var e=0,f=$APP.kf(c);;)if(e<=f){c=e+f>>>1;var h=b[c];0>(a.h?a.h(h,d):a.call(null,h,d))?e=c+1:f=c-1}else return e};M_a=function(a,b,c,d){for(var e=0,f=$APP.kf(c);;)if(e<=f){c=e+f>>>1;var h=b[c];0<(a.h?a.h(h,d):a.call(null,h,d))?f=c-1:e=c+1}else return e};
N_a=function(a,b,c){var d=b.length,e=l0(a,b,d-1,c);if(d=e<d)b=b[e],d=0===(a.h?a.h(b,c):a.call(null,b,c));return d?e:-1};O_a=function(a,b,c){var d=b.length;a=l0(a,b,d-1,c);return a===d?-1:a};P_a=function(a,b,c,d,e,f){var h=f.length,n=d-b,t=n+h,q=Array(n+h+(c-e));d-=b;for(var x=0;;)if(x<d)q[x+0]=a[x+b],x+=1;else break;b=h-0;for(h=0;;)if(h<b)q[h+n]=f[h+0],h+=1;else break;c-=e;for(f=0;;)if(f<c)q[f+t]=a[f+e],f+=1;else break;return q};m0=function(a,b,c,d){return P_a(a,0,a.length,b,c,d)};
n0=function(a,b){var c=a.length,d=b.length,e=c+d,f=e>>>1,h=Array(f);e=Array(e-f);if(c<=f){for(var n=c-0,t=0;;)if(t<n)h[t+0]=a[t+0],t+=1;else break;a=f-c;for(n=0;;)if(n<a)h[n+c]=b[n+0],n+=1;else break;d-=f-c;for(a=0;;)if(a<d)e[a+0]=b[a+(f-c)],a+=1;else break}else{n=f-0;for(t=0;;)if(t<n)h[t+0]=a[t+0],t+=1;else break;n=c-f;for(t=0;;)if(t<n)e[t+0]=a[t+f],t+=1;else break;d-=0;for(a=0;;)if(a<d)e[a+(c-f)]=b[a+0],a+=1;else break}return[h,e]};
Q_a=function(a,b,c,d,e,f){d-=c;if(f=d===f-0)for(f=0;;){if(f===d)return!0;var h=b[f+c],n=e[f+0];if(0!==(a.h?a.h(h,n):a.call(null,h,n)))return!1;f+=1}else return f};o0=function(a,b){return $APP.l(a)?$APP.l(b)?[a,b]:[a]:[b]};R_a=function(a,b,c){return $APP.l(a)?$APP.l(b)?$APP.l(c)?[a,b,c]:[a,b]:$APP.l(c)?[a,c]:[a]:$APP.l(b)?$APP.l(c)?[b,c]:[b]:[c]};
p0=function(a){if(null!=a&&null!=a.Pi)a=a.Pi(a);else{var b=p0[$APP.fa(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=p0._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.Lb("INode.node-lim-key",a);}return a};q0=function(a){if(null!=a&&null!=a.Nj)a=a.keys.length;else{var b=q0[$APP.fa(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=q0._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.Lb("INode.node-len",a);}return a};
r0=function(a,b,c){if(null!=a&&null!=a.Ri)a=a.Ri(a,b,c);else{var d=r0[$APP.fa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=r0._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Lb("INode.node-merge",a);}return a};s0=function(a,b){if(null!=a&&null!=a.Si)a=a.Si(a,b);else{var c=s0[$APP.fa(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=s0._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("INode.node-merge-n-split",a);}return a};
t0=function(a,b,c,d){if(null!=a&&null!=a.Qi)a=a.Qi(a,b,c,d);else{var e=t0[$APP.fa(null==a?null:a)];if(null!=e)a=e.D?e.D(a,b,c,d):e.call(null,a,b,c,d);else if(e=t0._,null!=e)a=e.D?e.D(a,b,c,d):e.call(null,a,b,c,d);else throw $APP.Lb("INode.node-lookup",a);}return a};
u0=function(a,b,c,d){if(null!=a&&null!=a.Ni)a=a.Ni(a,b,c,d);else{var e=u0[$APP.fa(null==a?null:a)];if(null!=e)a=e.D?e.D(a,b,c,d):e.call(null,a,b,c,d);else if(e=u0._,null!=e)a=e.D?e.D(a,b,c,d):e.call(null,a,b,c,d);else throw $APP.Lb("INode.node-conj",a);}return a};
v0=function(a,b,c,d,e,f,h){if(null!=a&&null!=a.Oi)a=a.Oi(a,b,c,d,e,f,h);else{var n=v0[$APP.fa(null==a?null:a)];if(null!=n)a=n.Da?n.Da(a,b,c,d,e,f,h):n.call(null,a,b,c,d,e,f,h);else if(n=v0._,null!=n)a=n.Da?n.Da(a,b,c,d,e,f,h):n.call(null,a,b,c,d,e,f,h);else throw $APP.Lb("INode.node-disj",a);}return a};
S_a=function(a,b,c,d,e){if($APP.l(b))return[a];if(q0(a)>w0)return R_a(c,a,d);if($APP.l($APP.l(c)?q0(c)<=w0:c))return o0(r0(c,a,e),d);if($APP.l($APP.l(d)?q0(d)<=w0:d))return o0(c,r0(a,d,e));if($APP.l($APP.l(c)?null==d||q0(c)<q0(d):c))return a=s0(c,a),R_a(a[0],a[1],d);a=s0(a,d);return R_a(c,a[0],a[1])};
x0=function(a,b){if(null!=a&&null!=a.Sf)a=a.Sf(a,b);else{var c=x0[$APP.fa(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=x0._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("IStore.store-aux",a);}return a};y0=function(a){a=$APP.fj.h(function(b){return b.vb},a);return e0(a)};z0=function(a,b){$APP.we(a.fd)&&(b=$APP.u(a.children)?y0(a.children):Array(b),a.fd=b)};B0=function(a,b,c,d,e){c=null==c?$APP.u(b)?y0(b):Array(a.length):c;return new A0(a,b,c,d,e)};
A0=function(a,b,c,d,e){this.keys=a;this.children=b;this.fd=c;this.vb=d;this.rg=e};T_a=function(a,b,c){this.keys=a;this.vb=b;this.rg=c};C0=function(a){if(null!=a&&null!=a.Re)a=a.Re(a);else{var b=C0[$APP.fa(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=C0._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.Lb("IRoot.-ensure-root-node",a);}return a};
$APP.D0=function(a,b,c,d,e,f,h,n){this.storage=a;this.root=b;this.shift=c;this.P=d;this.ad=e;this.M=f;this.gd=h;this.vb=n;this.J=2297303311;this.K=8332};E0=function(a,b,c){return a instanceof A0?a.qf(b,c):null};F0=function(a,b){for(var c=a.shift,d=C0(a);;)if(0<c){var e=c-1;d=E0(d,j0(b,c),a.storage);c=e}else return d.keys};G0=function(a,b,c,d){return new $APP.D0(a.storage,b,c,d,a.ad,a.M,null,null)};
H0=function(a,b,c,d){for(;;)if(0<c){var e=a.children.length-1;var f=a.children;f=f[f.length-1];a=$APP.l(f)?f:E0(a,e,d);b=k0(b,c,e);--c}else return $APP.l(a)?k0(b,0,a.keys.length-1):null};J0=function(a,b){if(0>b)return 0;b=I0(a,C0(a),b,a.shift);return $APP.l(b)?b:H0(C0(a),0,a.shift,a.storage)+1};U_a=function(a,b){if(0<j0(b,a.shift+1))return H0(C0(a),b,a.shift,a.storage);a=K0(a,C0(a),b,a.shift);return $APP.l(a)?a:-1};
M0=function(a){if(0<q0(C0(a))){var b=H0(C0(a),0,a.shift,a.storage);b=J0(a,b);return L0.j?L0.j(a,0,b):L0.call(null,a,0,b)}return null};V_a=function(a,b,c){this.I=a;this.yb=b;this.end=c;this.J=524306;this.K=0};N0=function(a,b,c,d,e){this.set=a;this.left=b;this.right=c;this.keys=d;this.idx=e;this.J=2309488832;this.K=1536};L0=function(a,b,c){return new N0(a,b,c,F0(a,b),j0(b,0))};O0=function(a,b,c,d,e){this.set=a;this.left=b;this.right=c;this.keys=d;this.idx=e;this.J=2308964544;this.K=0};
W_a=function(a,b,c){return new O0(a,b,c,F0(a,c),j0(c,0))};
X_a=function(a,b,c,d){a:if(null==b)b=0;else for(var e=a.Re(null),f=0,h=a.shift;;)if($APP.l(e)){var n=q0(e);if(0===h){var t=e.keys;t=l0(d,t,n-1,b);b=n===t?null:k0(f,0,t);break a}t=e.keys;t=l0(d,t,n-2,b);e=E0(e,t,a.storage);f=k0(f,h,t);--h}else{b=null;break a}if(null==b)return null;a:if(null==c)c=H0(a.Re(null),0,a.shift,a.storage)+1;else for(e=a.Re(null),h=0,f=a.shift;;)if($APP.l(e)){n=q0(e);if(0===f){t=e.keys;n=M_a(d,t,n-1,c);c=h=k0(h,0,n);break a}t=e.keys;n=M_a(d,t,n-2,c);h=k0(h,f,n);e=E0(e,n,a.storage);
--f}else{c=null;break a}return b<c?new N0(a,b,c,F0(a,b),j0(b,0)):null};Y_a=function(a,b){for(var c=b.length,d=0;;)if(d<c){var e=d;var f=b[d];f=a.g?a.g(f):a.call(null,f);b[e]=f;d+=1}else break;return b};$_a=function(a){var b=a.length,c=$APP.Tc($APP.Sg);if(0<b)for(var d=0;;){var e=b-d;if(e<=P0){$APP.Rg.h(c,a.slice(d));break}else e>=Z_a+w0?($APP.Rg.h(c,a.slice(d,d+Z_a)),d+=Z_a):(e>>>=1,$APP.Rg.h(c,a.slice(d,d+e)),d+=e)}return $APP.cf($APP.Vc(c))};
Q0=function(a,b,c){b=u0(a.Re(null),c,b,a.storage);if(null!=b)if(1===b.length)a=G0(a,b[0],a.shift,a.P+1);else{c=b.map(p0);var d=y0(b);b=B0(c,b,d,null,!0);a=G0(a,b,a.shift+1,a.P+1)}return a};R0=function(a,b,c){b=v0(a.Re(null),c,b,!0,null,null,a.storage);if(null==b)return a;b=b[0];return b instanceof A0&&1===b.children.length?G0(a,b.children[0],a.shift-1,a.P-1):G0(a,b,a.shift,a.P-1)};S0=function(a,b,c){return X_a(a,b,c,a.ad)};a0a=function(a,b,c){a=X_a(a,c,b,a.ad);return null==a?null:$APP.Hc(a)};
V0=function(a,b,c){var d=Y_a(T0,$_a(b));c=U0.g(c);for(var e=d,f=0;;){var h=$APP.ce(e);switch(h){case 0:return new $APP.D0(c,T0.g([]),0,0,a,null,null,null);case 1:return new $APP.D0(c,$APP.v(e),f,b.length,a,null,null,null);default:e=Y_a(function(){return function(n){var t=n.map(p0);return B0(t,n,null,null,!0)}}(e,f,h,d,c),$_a(e)),f+=1}}};b0a=function(a){var b=U0.g(a),c=T0.g([]),d=W0.g(a);return new $APP.D0(b,c,0,0,$APP.l(d)?d:$APP.Xe,$APP.nb.g(a),null,null)};
c0a=function(a,b,c,d){d=$APP.Yf(d);d=$APP.C.h(d,X0);return new $APP.D0(c,null,Y0.g(d),$APP.NL.g(d),a,null,null,b)};f0a=function(){return new $APP.k(null,2,[Z0,P0,d0a,e0a],null)};g0a=function(a){return"string"!==typeof a&&($APP.Me(a)||f0(a))};$0=function(a,b){return $APP.zd(a,b)};
$APP.a1=function(a){if(null!=a&&null!=a.mb)a=a.mb(a);else{var b=$APP.a1[$APP.fa(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=$APP.a1._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.Lb("IDatom.datom-tx",a);}return a};$APP.b1=function(a){if(null!=a&&null!=a.wd)a=a.wd(a);else{var b=$APP.b1[$APP.fa(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=$APP.b1._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.Lb("IDatom.datom-added",a);}return a};
$APP.c1=function(a,b,c,d,e,f){this.e=a;this.a=b;this.v=c;this.tx=d;this.idx=e;this.gd=f;this.J=2162164496;this.K=0};h0a=function(a){return a instanceof $APP.c1};$APP.e1=function(a){return $APP.sg.h(d1,a)};i0a=function(a,b){return null==a?0:null==b?0:$APP.kf($APP.Xe(a,b))};j0a=function(a,b){return $APP.Sa($APP.Mb($APP.Kb(a)),$APP.Mb($APP.Kb(b)))};
k0a=function(a,b){var c=$APP.ce(a),d=$APP.ce(b);if(c<d)return-1;if(c>d)return 1;for(;;){if($APP.we(a))return 0;c=$APP.v(a);d=$APP.v(b);if(null==c&&null==d)a=$APP.w(a),b=$APP.w(b);else{if(null==c)return-1;if(null==d)return 1;c=f1(c,d);if($APP.y.h(c,0))a=$APP.w(a),b=$APP.w(b);else return c}}};l0a=function(a,b){return null==a?0:null==b?0:f1(a,b)};g1=function(a,b){var c=a.e-b.e;return 0===c?(c=i0a(a.a,b.a),0===c?(c=l0a(a.v,b.v),0===c?(a=a.mb(null)-b.mb(null),0===a?0:a):c):c):c};
h1=function(a,b){var c=i0a(a.a,b.a);return 0===c?(c=a.e-b.e,0===c?(c=l0a(a.v,b.v),0===c?(a=a.mb(null)-b.mb(null),0===a?0:a):c):c):c};i1=function(a,b){var c=i0a(a.a,b.a);return 0===c?(c=l0a(a.v,b.v),0===c?(c=a.e-b.e,0===c?(a=a.mb(null)-b.mb(null),0===a?0:a):c):c):c};k1=function(a,b){return a instanceof $APP.G?$APP.ad(a,b):$APP.Sa(a,b)};m0a=function(a,b){var c=a.e-b.e;return 0===c?(c=k1(a.a,b.a),0===c?(a=f1(a.v,b.v),0===a?0:a):c):c};
n0a=function(a,b){var c=a.e-b.e;return 0===c?(c=k1(a.a,b.a),0===c?(c=f1(a.v,b.v),0===c?(a=a.mb(null)-b.mb(null),0===a?0:a):c):c):c};o0a=function(a,b){var c=k1(a.a,b.a);return 0===c?(c=a.e-b.e,0===c?(c=f1(a.v,b.v),0===c?(a=a.mb(null)-b.mb(null),0===a?0:a):c):c):c};p0a=function(a,b){var c=k1(a.a,b.a);return 0===c?(c=f1(a.v,b.v),0===c?(c=a.e-b.e,0===c?(a=a.mb(null)-b.mb(null),0===a?0:a):c):c):c};q0a=function(){};
l1=function(a,b){if(null!=a&&null!=a.Gi)a=a.Gi(a,b);else{var c=l1[$APP.fa(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=l1._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("ISearch.-search",a);}return a};m1=function(a,b){return $APP.v(l1(a,b))};
n1=function(a,b,c,d,e,f){if(null!=a&&null!=a.Ci)a=a.Ci(a,b,c,d,e,f);else{var h=n1[$APP.fa(null==a?null:a)];if(null!=h)a=h.ha?h.ha(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else if(h=n1._,null!=h)a=h.ha?h.ha(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else throw $APP.Lb("IIndexAccess.-datoms",a);}return a};
o1=function(a,b,c,d,e,f){if(null!=a&&null!=a.Fi)a=a.Fi(a,b,c,d,e,f);else{var h=o1[$APP.fa(null==a?null:a)];if(null!=h)a=h.ha?h.ha(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else if(h=o1._,null!=h)a=h.ha?h.ha(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else throw $APP.Lb("IIndexAccess.-seek-datoms",a);}return a};
p1=function(a,b,c,d,e,f){if(null!=a&&null!=a.Ei)a=a.Ei(a,b,c,d,e,f);else{var h=p1[$APP.fa(null==a?null:a)];if(null!=h)a=h.ha?h.ha(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else if(h=p1._,null!=h)a=h.ha?h.ha(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else throw $APP.Lb("IIndexAccess.-rseek-datoms",a);}return a};
q1=function(a,b,c,d){if(null!=a&&null!=a.Di)a=a.Di(a,b,c,d);else{var e=q1[$APP.fa(null==a?null:a)];if(null!=e)a=e.D?e.D(a,b,c,d):e.call(null,a,b,c,d);else if(e=q1._,null!=e)a=e.D?e.D(a,b,c,d):e.call(null,a,b,c,d);else throw $APP.Lb("IIndexAccess.-index-range",a);}return a};
t1=function(a,b,c,d,e,f){if($APP.y.h(b,r1)&&null!=c&&!s1(a,c))throw $APP.Zl.h(["Attribute ",$APP.zj.l($APP.B([c]))," should be marked as :db/index true"].join(""),new $APP.k(null,3,[$APP.Hn,r0a,s0a,r1,t0a,new $APP.H(null,4,5,$APP.I,[c,d,e,f],null)],null));};u1=function(){};v1=function(a){if(null!=a&&null!=a.Bi)a=a.Bi(a);else{var b=v1[$APP.fa(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=v1._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.Lb("IDB.-schema",a);}return a};
w1=function(a,b){if(null!=a&&null!=a.Ai)a=a.Ai(a,b);else{var c=w1[$APP.fa(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=w1._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("IDB.-attrs-by",a);}return a};$APP.x1=function(a,b,c,d,e,f,h,n,t,q,x,z,E){this.uc=a;this.ac=b;this.wc=c;this.jc=d;this.Nc=e;this.Oc=f;this.xc=h;this.Dc=n;this.Cc=t;this.hash=q;this.B=x;this.o=z;this.G=E;this.J=2230716170;this.K=139264};
u0a=function(a){var b=$APP.Nl.l(a,$APP.y1,$APP.B([$APP.z1,A1,r1,B1,C1,D1,E1,F1,G1]));b=$APP.Ee(a)?$APP.Fh.h($APP.Xf,b):b;return new $APP.x1($APP.y1.g(a),$APP.z1.g(a),A1.g(a),r1.g(a),B1.g(a),C1.g(a),D1.g(a),E1.g(a),F1.g(a),G1.g(a),null,$APP.$f(b),null)};H1=function(a,b,c,d,e,f){this.yc=a;this.fb=b;this.hash=c;this.B=d;this.o=e;this.G=f;this.J=2230716170;this.K=139264};v0a=function(a){return a instanceof H1?a.yc:a};
x0a=function(a,b){switch(b instanceof $APP.G?b.S:null){case "db.unique/identity":return new $APP.H(null,3,5,$APP.I,[I1,J1,K1],null);case "db.unique/value":return new $APP.H(null,3,5,$APP.I,[I1,w0a,K1],null);case "db.cardinality/many":return new $APP.H(null,1,5,$APP.I,[L1],null);case "db.type/ref":return new $APP.H(null,2,5,$APP.I,[M1,K1],null);default:return $APP.y.h(N1,a)&&!0===b?new $APP.H(null,1,5,$APP.I,[N1],null):$APP.y.h(K1,a)&&!0===b?new $APP.H(null,1,5,$APP.I,[K1],null):$APP.y.h(O1,a)?new $APP.H(null,
2,5,$APP.I,[P1,K1],null):$APP.Sg}};y0a=function(a,b){return $APP.bf.j(function(c,d){return H_a(function(e,f,h){return $APP.Zm.N(e,f,$APP.vi,d,h)},c,O1.g($APP.C.h(a,d)))},$APP.Xf,P1.g(b))};R1=function(a){var b=$APP.ef(function(c,d,e){return e instanceof $APP.G?c:$APP.ef(function(f,h,n){return $APP.bf.j(function(t,q){return $APP.Zm.D(t,q,z0a,d)},f,x0a(h,n))},$APP.Zm.j(c,Q1,function(f){return $APP.l(f)?$APP.wf.h(f,d):$APP.Di([d])}),e)},$APP.Xf,a);return $APP.vi.j(b,A0a,y0a(a,b))};
U1=function(a,b,c,d){if(null!=c&&!$APP.Te(d,c))throw $APP.Zl.h(["Bad attribute specification for ",$APP.zj.l($APP.B([$APP.Wf([a,$APP.Wf([b,c])])])),", expected one of ",$APP.m.g(d)].join(""),new $APP.k(null,4,[$APP.Hn,S1,T1,a,$APP.RE,b,$APP.zM,c],null));};
X1=function(a){for(var b=$APP.u(a),c=null,d=0,e=0;;)if(e<d){var f=c.ca(null,e),h=$APP.A.j(f,0,null),n=$APP.A.j(f,1,null),t=N1.h(n,!1);U1(h,N1,N1.g(n),new $APP.Bi(null,new $APP.k(null,2,[!0,null,!1,null],null),null));if($APP.l(function(){var Y=t;return $APP.l(Y)?$APP.ui.h(V1.g(n),M1):Y}()))throw $APP.Zl.h(["Bad attribute specification for ",$APP.zj.l($APP.B([h])),": {:db/isComponent true} should also have {:db/valueType :db.type/ref}"].join(""),new $APP.k(null,3,[$APP.Hn,S1,T1,h,$APP.RE,N1],null));
U1(h,I1,I1.g(n),new $APP.Bi(null,new $APP.k(null,2,[J1,null,w0a,null],null),null));U1(h,V1,V1.g(n),B0a);U1(h,W1,W1.g(n),new $APP.Bi(null,new $APP.k(null,2,[L1,null,C0a,null],null),null));if($APP.y.h(P1,V1.g(n))&&!$APP.Te(n,O1))throw $APP.Zl.h(["Bad attribute specification for ",$APP.zj.l($APP.B([h])),": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs"].join(""),new $APP.k(null,3,[$APP.Hn,S1,T1,h,$APP.RE,V1],null));if($APP.Te(n,O1)){f=new $APP.k(null,3,[$APP.Hn,S1,T1,h,$APP.RE,O1],null);
if($APP.y.h(L1,W1.g(n)))throw $APP.Zl.h([$APP.zj.l($APP.B([h]))," has :db/tupleAttrs, must be :db.cardinality/one"].join(""),f);var q=O1.g(n);if(!$APP.Be(q))throw $APP.Zl.h([$APP.zj.l($APP.B([h]))," :db/tupleAttrs must be a sequential collection, got: ",$APP.zj.l($APP.B([q]))].join(""),f);if($APP.we(q))throw $APP.Zl.h([$APP.zj.l($APP.B([h]))," :db/tupleAttrs can’t be empty"].join(""),f);q=$APP.u(q);for(var x=null,z=0,E=0;;)if(E<z){var F=x.ca(null,E),N=$APP.vi.j(f,$APP.zM,F);if($APP.Te($APP.C.h(a,
F),O1))throw $APP.Zl.h([$APP.zj.l($APP.B([h]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.zj.l($APP.B([F]))].join(""),N);if($APP.y.h(L1,W1.g($APP.C.h(a,F))))throw $APP.Zl.h([$APP.zj.l($APP.B([h]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.zj.l($APP.B([F]))].join(""),N);E+=1}else if(q=$APP.u(q)){if($APP.Ge(q))z=$APP.cd(q),q=$APP.dd(q),x=z,z=$APP.ce(z);else{x=$APP.v(q);z=$APP.vi.j(f,$APP.zM,x);if($APP.Te($APP.C.h(a,x),O1))throw $APP.Zl.h([$APP.zj.l($APP.B([h])),
" :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.zj.l($APP.B([x]))].join(""),z);if($APP.y.h(L1,W1.g($APP.C.h(a,x))))throw $APP.Zl.h([$APP.zj.l($APP.B([h]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.zj.l($APP.B([x]))].join(""),z);q=$APP.w(q);x=null;z=0}E=0}else break}e+=1}else if(h=$APP.u(b)){b=h;if($APP.Ge(b))c=$APP.cd(b),b=$APP.dd(b),h=c,d=$APP.ce(c),c=h;else{c=$APP.v(b);h=$APP.A.j(c,0,null);n=$APP.A.j(c,1,null);var S=N1.h(n,!1);U1(h,N1,N1.g(n),new $APP.Bi(null,
new $APP.k(null,2,[!0,null,!1,null],null),null));if($APP.l(function(){var Y=S;return $APP.l(Y)?$APP.ui.h(V1.g(n),M1):Y}()))throw $APP.Zl.h(["Bad attribute specification for ",$APP.zj.l($APP.B([h])),": {:db/isComponent true} should also have {:db/valueType :db.type/ref}"].join(""),new $APP.k(null,3,[$APP.Hn,S1,T1,h,$APP.RE,N1],null));U1(h,I1,I1.g(n),new $APP.Bi(null,new $APP.k(null,2,[J1,null,w0a,null],null),null));U1(h,V1,V1.g(n),B0a);U1(h,W1,W1.g(n),new $APP.Bi(null,new $APP.k(null,2,[L1,null,C0a,
null],null),null));if($APP.y.h(P1,V1.g(n))&&!$APP.Te(n,O1))throw $APP.Zl.h(["Bad attribute specification for ",$APP.zj.l($APP.B([h])),": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs"].join(""),new $APP.k(null,3,[$APP.Hn,S1,T1,h,$APP.RE,V1],null));if($APP.Te(n,O1)){c=new $APP.k(null,3,[$APP.Hn,S1,T1,h,$APP.RE,O1],null);if($APP.y.h(L1,W1.g(n)))throw $APP.Zl.h([$APP.zj.l($APP.B([h]))," has :db/tupleAttrs, must be :db.cardinality/one"].join(""),c);d=O1.g(n);if(!$APP.Be(d))throw $APP.Zl.h([$APP.zj.l($APP.B([h])),
" :db/tupleAttrs must be a sequential collection, got: ",$APP.zj.l($APP.B([d]))].join(""),c);if($APP.we(d))throw $APP.Zl.h([$APP.zj.l($APP.B([h]))," :db/tupleAttrs can’t be empty"].join(""),c);d=$APP.u(d);e=null;for(q=f=0;;)if(q<f){x=e.ca(null,q);z=$APP.vi.j(c,$APP.zM,x);if($APP.Te($APP.C.h(a,x),O1))throw $APP.Zl.h([$APP.zj.l($APP.B([h]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.zj.l($APP.B([x]))].join(""),z);if($APP.y.h(L1,W1.g($APP.C.h(a,x))))throw $APP.Zl.h([$APP.zj.l($APP.B([h])),
" :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.zj.l($APP.B([x]))].join(""),z);q+=1}else if(d=$APP.u(d)){if($APP.Ge(d))f=$APP.cd(d),d=$APP.dd(d),e=f,f=$APP.ce(f);else{e=$APP.v(d);f=$APP.vi.j(c,$APP.zM,e);if($APP.Te($APP.C.h(a,e),O1))throw $APP.Zl.h([$APP.zj.l($APP.B([h]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.zj.l($APP.B([e]))].join(""),f);if($APP.y.h(L1,W1.g($APP.C.h(a,e))))throw $APP.Zl.h([$APP.zj.l($APP.B([h]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",
$APP.zj.l($APP.B([e]))].join(""),f);d=$APP.w(d);e=null;f=0}q=0}else break}b=$APP.w(b);c=null;d=0}e=0}else return null};Y1=function(a,b){X1(a);return u0a($APP.gi([$APP.y1,C1,G1,A1,r1,B1,$APP.z1,F1,E1,D1],[a,536870912,$APP.Bj.g(0),b0a($APP.vi.j(b,W0,h1)),b0a($APP.vi.j(b,W0,i1)),0,b0a($APP.vi.j(b,W0,g1)),b0(),b0(),R1($APP.Ml.l($APP.B([new $APP.k(null,1,[Q1,new $APP.k(null,1,[I1,J1],null)],null),a])))]))};
D0a=function(a,b,c){var d=function(){var e=a0a(b,d1.D(536870911,null,null,2147483647),d1.D(0,null,null,536870912));e=null==e?null:$APP.v(e);return null==e?null:$APP.SO.g(e)}();d=$APP.l($APP.l(d)?0<d:d)?d:0;a=M1.g(a);return $APP.bf.j(function(e,f){f=a0a(c,d1.D(536870911,f,536870911,2147483647),d1.D(0,f,0,536870912));f=null==f?null:$APP.v(f);f=null==f?null:Z1.g(f);return $APP.l($APP.l(f)?f>e:f)?f:e},d,a)};
$1=function(a,b,c){var d=$APP.v($APP.Qi.h(h0a,a));if(null!=d)throw $APP.Zl.h(["init-db expects list of Datoms, got ",$APP.zj.l($APP.B([$APP.Kb(d)]))].join(""),new $APP.k(null,1,[$APP.Hn,E0a],null));X1(b);d=R1($APP.Ml.l($APP.B([new $APP.k(null,1,[Q1,new $APP.k(null,1,[I1,J1],null)],null),b])));var e=K1.g(d),f=f0(a)?a:e0(a);f.sort(n0a);var h=V0(g1,f,c);f.sort(o0a);f=V0(h1,f,c);a=$APP.Pg.h(function(t){return $APP.Te(e,t.a)},a);a=$APP.cf(a);a.sort(p0a);c=V0(i1,a,c);a=D0a(d,h,c);var n=$APP.ox.D($APP.fj.g(function(t){return t.mb(null)}),
$APP.hn,536870912,h);return u0a($APP.gi([$APP.y1,C1,G1,A1,r1,B1,$APP.z1,F1,E1,D1],[b,n,$APP.Bj.g(0),f,c,a,h,b0(),b0(),d]))};F0a=function(a,b){return $APP.vi.l(a,$APP.y1,b,$APP.B([D1,R1($APP.Ml.l($APP.B([new $APP.k(null,1,[Q1,new $APP.k(null,1,[I1,J1],null)],null),b]))),E1,b0(),F1,b0(),G1,$APP.Bj.g(0)]))};
$APP.b2=function(a){var b=$APP.Yf(a);a=$APP.C.h(b,$APP.y1);b=$APP.C.h(b,$APP.a2);return $1($APP.fj.h(function(c){var d=$APP.A.j(c,0,null),e=$APP.A.j(c,1,null),f=$APP.A.j(c,2,null);c=$APP.A.j(c,3,null);return d1.D(d,e,f,c)},b),a,$APP.Xf)};c2=function(a,b,c,d,e,f,h,n){this.Ld=a;this.Kd=b;this.Pd=c;this.Nd=d;this.Qd=e;this.B=f;this.o=h;this.G=n;this.J=2230716170;this.K=139264};
G0a=function(a){var b=$APP.Nl.l(a,d2,$APP.B([e2,f2,g2,h2]));b=$APP.Ee(a)?$APP.Fh.h($APP.Xf,b):b;return new c2(d2.g(a),e2.g(a),f2.g(a),g2.g(a),h2.g(a),null,$APP.$f(b),null)};i2=function(){return null};j2=function(){return null};k2=function(){return null};l2=function(){return null};m2=function(){return null};H0a=function(){return null};n2=function(){return null};
p2=function(a){if(a instanceof $APP.G)return n2(a)?$APP.gj.h($APP.Cf(a),$APP.Zi.h($APP.Hi(a),1)):$APP.gj.h($APP.Cf(a),["_",$APP.Hi(a)].join(""));if("string"===typeof a){var b=$APP.Ti(/(?:([^\/]+)\/)?([^\/]+)/,a);$APP.A.j(b,0,null);a=$APP.A.j(b,1,null);b=$APP.A.j(b,2,null);return $APP.y.h("_",$APP.A.h(b,0))?$APP.l(a)?[$APP.m.g(a),"/",$APP.Zi.h(b,1)].join(""):$APP.Zi.h(b,1):$APP.l(a)?[$APP.m.g(a),"/_",$APP.m.g(b)].join(""):["_",$APP.m.g(b)].join("")}throw $APP.Zl.h(["Bad attribute type: ",$APP.zj.l($APP.B([a])),
", expected keyword or string"].join(""),new $APP.k(null,2,[$APP.Hn,o2,T1,a],null));};I0a=function(a,b,c){return $APP.mn.j(function(d,e){return q2(a,d)&&$APP.Be(e)?r2(a,e):e},O1.g($APP.C.h(v1(a),b)),c)};s2=function(){return null};J0a=function(){return null};t2=function(){this.id=$APP.Cj.h(K0a,$APP.Rd);this.J=2147483648;this.K=0};d0=function(){return null};u2=function(a){return $APP.kf(C1.g(d2.g(a)))+1};
v2=function(a){return $APP.y.h(a,L0a)||$APP.y.h(a,":db/current-tx")||$APP.y.h(a,"datomic.tx")||$APP.y.h(a,"datascript.tx")};w2=function(a){return"number"===typeof a&&0>a||"string"===typeof a||d0(a)};M0a=function(a,b){return b>B1.g(a)&&536870912>b?$APP.vi.j(a,B1,b):a};
y2=function(a,b,c){var d=v2(b)?$APP.Zm.ha($APP.Zm.N(a,g2,$APP.vi,b,c),x2,$APP.Zm,c,z0a,b):a;d=w2(b)?$APP.Zm.ha($APP.Zm.N(d,g2,$APP.vi,b,c),x2,$APP.Zm,c,z0a,b):d;if(b=!w2(b))a=e2.g(a),b=c>B1.g(a)&&536870912>c;a=b?$APP.Zm.N(d,g2,$APP.vi,c,c):d;return $APP.Zm.D(a,e2,M0a,c)};
O0a=function(a,b){var c=$APP.y1.g(a),d=b.e,e=b.a,f=b.v;if($APP.y.h(e,Q1)){if($APP.Cb(c.g?c.g(f):c.call(null,f)))throw a=["Schema with attribute ",$APP.m.g(f)," does not exist"].join(""),d=new $APP.k(null,2,[$APP.Hn,N0a,T1,f],null),$APP.Zl.h(a,d);return $APP.Kl.j($APP.Dq(a,new $APP.H(null,2,5,$APP.I,[$APP.y1,d],null),$APP.Nl.h(c.g?c.g(f):c.call(null,f),e)),new $APP.H(null,1,5,$APP.I,[$APP.y1],null),function(h){return $APP.Nl.h(h,f)})}b=c.g?c.g(d):c.call(null,d);if($APP.l(b))return $APP.l(c.g?c.g(b):
c.call(null,b))?$APP.Kl.j(a,new $APP.H(null,2,5,$APP.I,[$APP.y1,b],null),function(h){return $APP.Nl.h(h,e)}):$APP.Kl.j(a,new $APP.H(null,2,5,$APP.I,[$APP.y1,d],null),function(h){return $APP.Nl.l(h,e,$APP.B([f]))});a=["Schema with entity id ",$APP.m.g(d)," does not exist"].join("");d=new $APP.k(null,4,[$APP.Hn,N0a,z2,d,T1,e,$APP.zM,d],null);throw $APP.Zl.h(a,d);};P0a=function(a){a=$APP.y1.g(a);return $APP.l(a)?a:$APP.Xf};
Q0a=function(a){return $APP.vi.j(a,D1,R1($APP.Ml.l($APP.B([new $APP.k(null,1,[Q1,new $APP.k(null,1,[I1,J1],null)],null),P0a(a)]))))};
U0a=function(a,b){var c=b.wd(null);c=$APP.l(c)?i2(a,b.a,I1):c;if($APP.l(c)&&(c=$APP.$f(n1(a,r1,b.a,b.v,null,null)),null!=c))throw $APP.Zl.h(["Cannot add ",$APP.zj.l($APP.B([b]))," because of unique constraint: ",$APP.zj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.Hn,R0a,T1,b.a,S0a,b],null));var d=s1(a,b.a);c=b.a;c=T0a.g?T0a.g(c):T0a.call(null,c);if($APP.l(b.wd(null))){a=$APP.Zm.N(a,$APP.z1,Q0,b,n0a);a=$APP.Zm.N(a,A1,Q0,b,o0a);d=d?$APP.Zm.N(a,r1,Q0,b,p0a):a;d=M0a(d,b.e);d=$APP.vi.j(d,G1,$APP.Bj.g(0));
if($APP.l(c)){var e=P0a(d);c=b.e;a=b.a;b=b.v;if($APP.y.h(a,Q1)){var f=new $APP.H(null,2,5,$APP.I,[$APP.y1,b],null),h=$APP.Ml.l,n=e.g?e.g(c):e.call(null,c);e=e.g?e.g(b):e.call(null,b);e=$APP.Ce(n)?$APP.Ml.l($APP.B([n,e])):e;b=$APP.Dq($APP.Dq(d,f,h.call($APP.Ml,$APP.B([$APP.l(e)?e:$APP.Xf,$APP.gi([a],[b])]))),new $APP.H(null,2,5,$APP.I,[$APP.y1,c],null),b)}else f=e.g?e.g(c):e.call(null,c),b=$APP.l(f)?$APP.l(e.g?e.g(f):e.call(null,f))?$APP.Dq(d,new $APP.H(null,3,5,$APP.I,[$APP.y1,f,a],null),b):$APP.Dq(d,
new $APP.H(null,3,5,$APP.I,[$APP.y1,c,a],null),b):$APP.Dq(d,new $APP.H(null,2,5,$APP.I,[$APP.y1,c],null),$APP.gi([a],[b]));b=Q0a(b)}else b=d;return b}e=m1(a,new $APP.H(null,3,5,$APP.I,[b.e,b.a,b.v],null));if(null==e)return a;a=$APP.Zm.N(a,$APP.z1,R0,e,n0a);a=$APP.Zm.N(a,A1,R0,e,o0a);d=d?$APP.Zm.N(a,r1,R0,e,p0a):a;d=$APP.vi.j(d,G1,$APP.Bj.g(0));return $APP.l(c)?Q0a(O0a(d,b)):d};
V0a=function(a,b,c,d,e){return $APP.ef(function(f,h,n){var t=$APP.C.h(f,h);$APP.l(t)||(t=Z1.g($APP.v(n1(c,$APP.z1,d,h,null,null))),t=$APP.l(t)?t:$APP.df($APP.gn.h($APP.ce(O1.g($APP.C.h(v1(c),h))),null)));n=$APP.vi.j(t,n,e);return $APP.vi.j(f,h,n)},a,b)};
C2=function(a,b){var c=e2.g(a),d=A2.g(b);a=$APP.Zm.D($APP.vi.j(a,e2,U0a(c,b)),f2,$APP.wf,b);if(H0a(c,d)){var e=$APP.SO.g(b);b=$APP.l($APP.b1(b))?Z1.g(b):null;var f=$APP.C.h(B2.g(a),e);f=$APP.l(f)?f:$APP.Xf;d=$APP.C.h(w1(c,A0a),d);c=V0a(f,d,c,e,b);return $APP.Zm.N(a,B2,$APP.vi,e,c)}return a};
W0a=function(a,b){function c(f,h){return $APP.bf.j(function(n,t){var q=d(f,t);return null==q?$APP.Zm.D(n,0,$APP.wf,t):$APP.Zm.N(n,1,$APP.vi,t,q)},new $APP.H(null,2,5,$APP.I,[$APP.Sg,$APP.Xf],null),h)}function d(f,h){return q2(a,f)?w2(h)?null:$APP.SO.g($APP.v(n1(a,r1,f,s2(a,h),null,null))):$APP.SO.g($APP.v(n1(a,r1,f,h,null,null)))}var e=$APP.$f(w1(a,J1));return null==e?new $APP.H(null,2,5,$APP.I,[b,null],null):$APP.ef(function(f,h,n){var t=$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);if(!(h instanceof $APP.G||
"string"===typeof h))throw $APP.Zl.h(["Bad entity attribute ",$APP.zj.l($APP.B([h]))," at ",$APP.zj.l($APP.B([b])),", expected keyword or string"].join(""),new $APP.k(null,3,[T1,h,D2,b,$APP.Hn,o2],null));if(null==n)throw $APP.Zl.h(["Cannot store nil as a value at ",$APP.zj.l($APP.B([b]))].join(""),new $APP.k(null,3,[$APP.zM,null,D2,b,$APP.Hn,o2],null));if($APP.Te(e,h)){if(k2(a,h,n)){var q=c(h,n);n=$APP.A.j(q,0,null);q=$APP.A.j(q,1,null);return new $APP.H(null,2,5,$APP.I,[$APP.we(n)?t:$APP.vi.j(t,
h,n),$APP.we(q)?f:$APP.vi.j(f,h,q)],null)}q=d(h,n);return null==q?new $APP.H(null,2,5,$APP.I,[$APP.vi.j(t,h,n),f],null):new $APP.H(null,2,5,$APP.I,[t,$APP.vi.j(f,h,$APP.Wf([n,q]))],null)}return new $APP.H(null,2,5,$APP.I,[$APP.vi.j(t,h,n),f],null)},new $APP.H(null,2,5,$APP.I,[$APP.Xf,$APP.Xf],null),b)};
Z0a=function(a,b){var c=$APP.ef(function(h,n,t){return $APP.ef(function(q,x,z){return $APP.vi.j(q,z,new $APP.H(null,2,5,$APP.I,[n,x],null))},h,t)},$APP.Xf,b);if(2<=$APP.ce(c)){b=$APP.v(c);a=$APP.A.j(b,0,null);var d=$APP.A.j(b,1,null);b=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);var e=$APP.he(c);c=$APP.A.j(e,0,null);var f=$APP.A.j(e,1,null);e=$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);throw $APP.Zl.h(["Conflicting upserts: ",$APP.zj.l($APP.B([new $APP.H(null,2,5,$APP.I,[b,d],null)]))," resolves to ",$APP.zj.l($APP.B([a])),
", but ",$APP.zj.l($APP.B([new $APP.H(null,2,5,$APP.I,[e,f],null)]))," resolves to ",$APP.zj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.Hn,E2,X0a,new $APP.H(null,3,5,$APP.I,[a,b,d],null),Y0a,new $APP.H(null,3,5,$APP.I,[c,e,f],null)],null));}d=$APP.v(c);b=$APP.A.j(d,0,null);c=$APP.A.j(d,1,null);d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);a=F2.g(a);if(null!=b&&null!=a&&!w2(a)&&$APP.ui.h(b,a))throw $APP.Zl.h(["Conflicting upsert: ",$APP.zj.l($APP.B([new $APP.H(null,2,5,$APP.I,[d,c],null)]))," resolves to ",
$APP.zj.l($APP.B([b])),", but entity already has :db/id ",$APP.zj.l($APP.B([a]))].join(""),new $APP.k(null,3,[$APP.Hn,E2,X0a,new $APP.H(null,3,5,$APP.I,[b,d,c],null),Y0a,new $APP.k(null,1,[F2,a],null)],null));return b};$0a=function(a,b,c){return n2(b)||j2(a,b)?f0(c)||$APP.xe(c)&&!$APP.Ce(c)?$APP.y.h($APP.ce(c),2)&&i2(a,$APP.v(c),J1)?new $APP.H(null,1,5,$APP.I,[c],null):c:new $APP.H(null,1,5,$APP.I,[c],null):new $APP.H(null,1,5,$APP.I,[c],null)};
a1a=function(a,b){var c=F2.g(b),d=$APP.sg.h($APP.K,$APP.bf.j(function(e,f){var h=$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);return $APP.Zm.D(e,m2(a,h)?1:0,$APP.wf,new $APP.H(null,2,5,$APP.I,[h,f],null))},new $APP.H(null,2,5,$APP.I,[$APP.Sg,$APP.Sg],null),b));return function h(f){return new $APP.Jf(null,function(){for(var n=f;;){var t=$APP.u(n);if(t){var q=t,x=$APP.v(q),z=$APP.A.j(x,0,null),E=$APP.A.j(x,1,null);if($APP.ui.h(z,F2)){var F=function(){var Y=z;if(Y instanceof $APP.G||"string"===typeof Y)return null;
var aa=$APP.Wf([F2,c,z,E]);throw $APP.Zl.h(["Bad entity attribute ",$APP.zj.l($APP.B([Y]))," at ",$APP.zj.l($APP.B([aa])),", expected keyword or string"].join(""),new $APP.k(null,3,[T1,Y,D2,aa,$APP.Hn,o2],null));}(),N=n2(z),S=N?p2(z):z;if(N&&!q2(a,S))throw $APP.Zl.h(["Bad attribute ",$APP.zj.l($APP.B([z])),": reverse attribute name requires {:db/valueType :db.type/ref} in schema"].join(""),new $APP.k(null,3,[$APP.Hn,o2,T1,z,D2,$APP.Wf([F2,c,z,E])],null));if(t=$APP.u(function(Y,aa,ca,ha,la,ua,pa,W,
R,V,U,X){return function da(va){return new $APP.Jf(null,function(na,ra,ta,Ia,Ra,Wa,$a,Xa,eb,db,fb){return function(){for(;;){var qb=$APP.u(va);if(qb){if($APP.Ge(qb)){var Eb=$APP.cd(qb),Vb=$APP.ce(Eb),$b=$APP.Lf(Vb);a:for(var wc=0;;)if(wc<Vb){var hc=$APP.pe(Eb,wc);$APP.Pf($b,q2(a,Ia)&&$APP.Ce(hc)?$APP.vi.j(hc,p2($a),fb):ta?new $APP.H(null,4,5,$APP.I,[G2,hc,Ia,fb],null):new $APP.H(null,4,5,$APP.I,[G2,fb,Ia,hc],null));wc+=1}else{Eb=!0;break a}return Eb?$APP.Of($APP.Qf($b),da($APP.dd(qb))):$APP.Of($APP.Qf($b),
null)}$b=$APP.v(qb);return $APP.zf(q2(a,Ia)&&$APP.Ce($b)?$APP.vi.j($b,p2($a),fb):ta?new $APP.H(null,4,5,$APP.I,[G2,$b,Ia,fb],null):new $APP.H(null,4,5,$APP.I,[G2,fb,Ia,$b],null),da($APP.Ld(qb)))}return null}}}(Y,aa,ca,ha,la,ua,pa,W,R,V,U,X),null,null)}}(n,F,N,S,null,x,z,E,q,t,c,d)($0a(a,z,E))))return $APP.K.h(t,h($APP.Ld(n)))}n=$APP.Ld(n)}else return null}},null,null)}(d)};
I2=function(a,b){$APP.A.j(b,0,null);var c=$APP.A.j(b,1,null),d=$APP.A.j(b,2,null),e=$APP.A.j(b,3,null),f=$APP.A.j(b,4,null);if(!(d instanceof $APP.G||"string"===typeof d))throw $APP.Zl.h(["Bad entity attribute ",$APP.zj.l($APP.B([d]))," at ",$APP.zj.l($APP.B([b])),", expected keyword or string"].join(""),new $APP.k(null,3,[T1,d,D2,b,$APP.Hn,o2],null));if(null==e)throw $APP.Zl.h(["Cannot store nil as a value at ",$APP.zj.l($APP.B([b]))].join(""),new $APP.k(null,3,[$APP.zM,null,D2,b,$APP.Hn,o2],null));
b=$APP.l(f)?f:u2(a);f=e2.g(a);c=r2(f,c);e=q2(f,d)?r2(f,e):e;var h=d1.D(c,d,e,b);f=j2(f,d)?m1(f,new $APP.H(null,3,5,$APP.I,[c,d,e],null)):m1(f,new $APP.H(null,2,5,$APP.I,[c,d],null));return null==f?C2(a,h):$APP.y.h(f.v,e)?$APP.Zm.D(a,H2,b1a,h):C2(C2(a,d1.N(c,d,f.v,b,!1)),h)};c1a=function(a,b){var c=u2(a);return C2(a,d1.N(b.e,b.a,b.v,c,!1))};
e1a=function(a,b){return $APP.Fh.j($APP.Ci,$APP.kq.h($APP.Pg.g(function(c){return l2(a,c.a)}),$APP.fj.g(function(c){return new $APP.H(null,2,5,$APP.I,[d1a,c.v],null)})),b)};
f1a=function(a,b,c,d,e){var f=$APP.C.h(J2.g(a),d);if(null==f)return b=$APP.vi.j(g2.g(b),d,e),a=$APP.Zm.N($APP.vi.j(a,g2,b),J2,$APP.vi,d,e),K2(a,c);throw $APP.Zl.h(["Conflicting upsert: ",$APP.zj.l($APP.B([d]))," resolves both to ",$APP.zj.l($APP.B([e]))," and ",$APP.zj.l($APP.B([f]))].join(""),new $APP.k(null,1,[$APP.Hn,E2],null));};
g1a=function(a){var b=e2.g(a);return $APP.ef(function(c,d,e){return $APP.ef(function(f,h,n){n=$APP.og($APP.zb,n)?null:n;var t=Z1.g($APP.v(n1(b,$APP.z1,d,h,null,null)));return $APP.y.h(n,t)?f:null==n?$APP.wf.h(f,$APP.se(new $APP.H(null,4,5,$APP.I,[L2,d,h,t],null),new $APP.k(null,1,[M2,!0],null))):$APP.wf.h(f,$APP.se(new $APP.H(null,4,5,$APP.I,[G2,d,h,n],null),new $APP.k(null,1,[M2,!0],null)))},c,e)},$APP.Sg,B2.g(a))};
h1a=function(a){var b=N2.g(a);if($APP.l(b)){var c=$APP.Tc(b);b=function(d,e){return $APP.l($APP.b1(e))?$APP.Mx.h(d,$APP.SO.g(e)):d};c=$APP.bf.j(b,c,f2.g(a));b=$APP.bf.j(b,c,H2.g(a));if(0===$APP.ce(b))return $APP.Nl.l(a,N2,$APP.B([H2]));throw $APP.Zl.h(["Tempids used only as value in transaction: ",$APP.zj.l($APP.B([$APP.Hk.g($APP.ti($APP.Vc(b)))]))].join(""),new $APP.k(null,2,[$APP.Hn,o2,g2,b],null));}return $APP.Nl.l(a,N2,$APP.B([H2]))};
k1a=function(a){if($APP.l(B_a(a))){var b;if(b=$APP.Te(a,Q1)){b=Q1.g(a);var c=b instanceof $APP.G||"string"===typeof b;c?(b=$APP.Cf($APP.gj.g(b)),b=$APP.l(b)?$APP.y.h("db",$APP.v($APP.hl.h(b,/\./))):!1):b=c}if(b)throw $APP.Zl.h("Using namespace 'db' for attribute identifiers is not allowed",new $APP.k(null,2,[$APP.Hn,i1a,j1a,a],null));b=W1.g(a);b=$APP.l(b)?b:V1.g(a);if(b=$APP.l(b))b=Q1.g(a),b=$APP.l(b)?W1.g(a):b,b=!$APP.l(b);if(b)throw $APP.Zl.h("Incomplete schema transaction attributes, expected :db/ident, :db/cardinality",
new $APP.k(null,2,[$APP.Hn,i1a,j1a,a],null));}};l1a=function(){};O2=function(a,b,c){if(null!=a&&null!=a.xl)a=a.xl(a,b,c);else{var d=O2[$APP.fa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=O2._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Lb("IStorage.-store",a);}return a};
P2=function(a,b){if(null!=a&&null!=a.wl)a=a.wl(a,b);else{var c=P2[$APP.fa(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=P2._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("IStorage.-restore",a);}return a};m1a=function(a){return new $APP.H(null,4,5,$APP.I,[a.e,a.a,a.v,a.tx],null)};Q2=function(a,b,c,d){this.storage=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};n1a=function(a){return new Q2(a,null,null,null)};
R2=function(a){return $APP.l(a)?$APP.z1.g(a).storage:null};S2=function(a){a=R2(a);return null==a?null:U0.g(a)};
V2=function(a,b,c){$APP.Cj.j(o1a,$APP.wf,a);var d=T2;T2=$APP.Eg($APP.Tc($APP.Sg));try{var e=$APP.z1.g(a),f=A1.g(a),h=r1.g(a),n=e.Sf(null,b),t=f.Sf(null,b),q=h.Sf(null,b),x=$APP.Ml.l($APP.B([$APP.gi([$APP.y1,C1,A1,p1a,r1,B1,$APP.z1,q1a,r1a,s1a],[$APP.y1.g(a),C1.g(a),t,$APP.p(U2),q,B1.g(a),n,new $APP.k(null,2,[$APP.NL,f.P,Y0,f.shift],null),new $APP.k(null,2,[$APP.NL,h.P,Y0,h.shift],null),new $APP.k(null,2,[$APP.NL,e.P,Y0,e.shift],null)]),f0a($APP.z1.g(a))]));if($APP.l($APP.l(c)?c:0<$APP.ce($APP.p(T2)))){$APP.kd(T2,
$APP.Rg.h($APP.p(T2),new $APP.H(null,2,5,$APP.I,[0,x],null)));$APP.kd(T2,$APP.Rg.h($APP.p(T2),new $APP.H(null,2,5,$APP.I,[1,$APP.Sg],null)));var z=U0.g(b),E=$APP.iy.g($APP.C.h($APP.p(t1a),z));$APP.Cj.D(t1a,$APP.vi,z,null);O2(z,$APP.Vc($APP.p(T2)),E)}return a}finally{T2=d}};u1a=function(a,b){return O2(S2(a),new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[1,$APP.mn.h(function(c){return $APP.mn.h(m1a,c)},b)],null)],null),null)};
v1a=function(a,b){var c=P2(a,0);if(null==c)return null;var d=P2(a,1),e=$APP.Yf(c),f=$APP.C.h(e,r1a),h=$APP.C.h(e,s1a),n=$APP.C.h(e,$APP.y1),t=$APP.C.h(e,C1),q=$APP.C.h(e,A1),x=$APP.C.h(e,p1a),z=$APP.C.h(e,r1),E=$APP.C.h(e,B1),F=$APP.C.h(e,$APP.z1);e=$APP.C.h(e,q1a);U2.kc(null,function(){var S=U2.Ja(null);return S>x?S:x}());b=$APP.Ml.l($APP.B([c,b]));a=n1a(a,b);var N=W2(new $APP.k(null,6,[$APP.y1,n,$APP.z1,c0a(g1,F,a,$APP.vi.j(b,X0,h)),A1,c0a(h1,q,a,$APP.vi.j(b,X0,e)),r1,c0a(i1,z,a,$APP.vi.j(b,X0,
f)),B1,E,C1,t],null));$APP.Cj.j(o1a,$APP.wf,N);return new $APP.H(null,2,5,$APP.I,[N,$APP.mn.h(function(S){return $APP.qn.h(function(Y){var aa=$APP.A.j(Y,0,null),ca=$APP.A.j(Y,1,null),ha=$APP.A.j(Y,2,null);Y=$APP.A.j(Y,3,null);return null!=n1(N,$APP.z1,aa,ca,ha,null)&&0<Y?null:d1.D(aa,ca,ha,Y)},S)},d)],null)};x1a=function(a,b){return $APP.bf.j(function(c,d){if($APP.we(d))return c;try{var e=$APP.bf.j(U0a,c,d);return $APP.vi.j(e,C1,w1a.g($APP.v(d)))}catch(f){return console.error(f),c}},a,b)};
X2=function(a){return null==U0.g(a)?a:$APP.Zm.D(a,U0,n1a,a)};Y2=function(a,b,c,d){this.ug=a;this.Xf=b;this.jb=c;this.M=d;this.K=98306;this.J=6455552};y1a=function(a,b){if(null!=a&&!$APP.l(a.g?a.g(b):a.call(null,b)))throw $APP.Zl.h("Invalid reference state",new $APP.k(null,1,[$APP.zM,b],null));};
$2=function(a,b,c){var d=$APP.p(a);b=$APP.sg.j(b,d,c);y1a(a.Xf,b);$APP.Rba(a.ug,$APP.vi.j($APP.p(a.ug),Z2,d),$APP.vi.j($APP.p(a.ug),Z2,b));a:{c=$APP.u(a.jb);for(var e=null,f=0,h=0;;)if(h<f){var n=e.ca(null,h),t=$APP.A.j(n,0,null);n=$APP.A.j(n,1,null);n.D?n.D(t,a,d,b):n.call(null,t,a,d,b);h+=1}else if(c=$APP.u(c))$APP.Ge(c)?(e=$APP.cd(c),c=$APP.dd(c),t=e,f=$APP.ce(e),e=t):(e=$APP.v(c),t=$APP.A.j(e,0,null),n=$APP.A.j(e,1,null),n.D?n.D(t,a,d,b):n.call(null,t,a,d,b),c=$APP.w(c),e=null,f=0),h=0;else break a}return new $APP.H(null,
2,5,$APP.I,[d,b],null)};a3=function(a,b,c,d){return new Y2(a,b,c,d)};z1a=function(a){a=$APP.Bj.g(a);return a3.g?a3.g(a):a3.call(null,a)};b3=function(a){switch(arguments.length){case 2:return b3.h(arguments[0],arguments[1]);case 3:return b3.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};A1a=function(a,b){return e2.g(b3.h(a,b))};
f3=function(a){if(null==S2(a))return z1a(new $APP.k(null,1,[Z2,a],null));c3.g(a);return z1a(new $APP.k(null,3,[Z2,a,d3,$APP.Sg,e3,a],null))};
C1a=function(a,b,c){var d=$APP.Eg(null),e=B1a.g(c),f=$APP.Nl.h(c,B1a);$APP.Cj.h(a,function(t){t=b3.j(t,b,f);$APP.kd(d,t);return e2.g(t)});if(null!=S2($APP.p(a))){c=$APP.p(d);var h=$APP.Yf(c);c=$APP.C.h(h,e2);var n=$APP.C.h(h,f2);h=f0a($APP.z1.g(c));a=$APP.VH.g(a);n=d3.g($APP.Cj.l(a,$APP.Zm,d3,$APP.wf,$APP.B([n])));$APP.l(e)||($APP.ox.D($APP.fj.g($APP.ce),$APP.px,0,n)>Z0.g(h)?(V2(c,R2(c),!1),$APP.Cj.l(a,$APP.vi,d3,$APP.Sg,$APP.B([e3,c]))):u1a(c,n))}return $APP.p(d)};
D1a=function(a,b){b=$APP.Cj.j(a,F0a,b);null!=S2($APP.p(a))&&(V2(b,R2(b),!0),$APP.Cj.l($APP.VH.g(a),$APP.vi,d3,$APP.Sg,$APP.B([e3,b])));return b};g3=function(a,b){b="number"===typeof b||$APP.Be(b)||b instanceof $APP.G?s2(a,b):null;if($APP.l(b)&&J0a(a,b)){var c=$APP.Eg(!1),d=$APP.Eg($APP.Xf);return E1a.D?E1a.D(a,b,c,d):E1a.call(null,a,b,c,d)}return null};
F1a=function(a,b,c){return j2(a,b)?q2(a,b)?$APP.bf.j(function(d,e){return $APP.wf.h(d,g3(a,Z1.g(e)))},$APP.Ci,c):$APP.bf.j(function(d,e){return $APP.wf.h(d,Z1.g(e))},$APP.Ci,c):q2(a,b)?g3(a,Z1.g($APP.v(c))):Z1.g($APP.v(c))};G1a=function(a,b,c,d){b=$APP.$f(l1(a,new $APP.H(null,3,5,$APP.I,[null,c,b],null)));return $APP.l(b)?l2(a,c)?g3(a,$APP.SO.g($APP.v(b))):$APP.bf.j(function(e,f){return $APP.wf.h(e,g3(a,$APP.SO.g(f)))},$APP.Ci,b):d};h3=function(a){return $APP.l(a)?$APP.cf(a):null};
j3=function(a){i3.g?i3.g(a):i3.call(null,a);return function d(c){return new $APP.Jf(null,function(){for(;;){var e=$APP.u(c);if(e){if($APP.Ge(e)){var f=$APP.cd(e),h=$APP.ce(f),n=$APP.Lf(h);a:for(var t=0;;)if(t<h){var q=$APP.pe(f,t),x=$APP.A.j(q,0,null);q=$APP.A.j(q,1,null);$APP.Pf(n,j2(a.db,x)?new $APP.H(null,2,5,$APP.I,[x,h3(q)],null):new $APP.H(null,2,5,$APP.I,[x,q],null));t+=1}else{f=!0;break a}return f?$APP.Of($APP.Qf(n),d($APP.dd(e))):$APP.Of($APP.Qf(n),null)}f=$APP.v(e);n=$APP.A.j(f,0,null);
f=$APP.A.j(f,1,null);return $APP.zf(j2(a.db,n)?new $APP.H(null,2,5,$APP.I,[n,h3(f)],null):new $APP.H(null,2,5,$APP.I,[n,f],null),d($APP.Ld(e)))}return null}},null,null)}($APP.p(a.cache))};k3=function(a,b,c,d){this.db=a;this.eid=b;this.cj=c;this.cache=d;this.J=2162164483;this.K=0};E1a=function(a,b,c,d){return new k3(a,b,c,d)};H1a=function(a){return a instanceof k3};l3=function(a,b){return b instanceof k3&&a.db===b.db&&$APP.y.h(a.eid,b.eid)};I1a=function(a){return $0($APP.yd(a.eid),$APP.oa(a.db))};
J1a=function(a,b){return $APP.ef(function(c,d,e){return $APP.vi.j(c,d,l2(a,d)?j2(a,d)?$APP.Fi($APP.fj.h(i3,e)):i3.g?i3.g(e):i3.call(null,e):e)},$APP.Xf,b)};K1a=function(a,b){return $APP.bf.j(function(c,d){var e=A2.g($APP.v(d));return $APP.vi.j(c,e,F1a(a,e,d))},$APP.Xf,$APP.py.h(A2,b))};i3=function(a){if(null!=a){if(!$APP.l($APP.p(a.cj))){var b=$APP.$f(l1(a.db,new $APP.H(null,1,5,$APP.I,[a.eid],null)));$APP.l(b)&&($APP.Fg(a.cache,J1a(a.db,K1a(a.db,b))),$APP.kd(a.cj,!0))}return a}return null};
L1a=function(a){return $APP.bf.j($APP.px,0,a)};M1a=function(a){return L1a(a)/$APP.ce(a)};
N1a=function(a){var b=M1a(a);return L1a(function(){return function e(d){return new $APP.Jf(null,function(){for(;;){var f=$APP.u(d);if(f){if($APP.Ge(f)){var h=$APP.cd(f),n=$APP.ce(h),t=$APP.Lf(n);a:for(var q=0;;)if(q<n){var x=$APP.pe(h,q)-b;t.add(x*x);q+=1}else{h=!0;break a}return h?$APP.Of($APP.Qf(t),e($APP.dd(f))):$APP.Of($APP.Qf(t),null)}t=$APP.v(f)-b;return $APP.zf(t*t,e($APP.Ld(f)))}return null}},null,null)}(a)}())/$APP.ce(a)};
m3=function(a,b,c,d,e,f,h,n,t,q,x,z,E,F,N){this.as=a;this.Hc=b;this.Db=c;this.name=d;this.pattern=e;this.pc=f;this.Aa=h;this.tc=n;this.Eb=t;this.oc=q;this.qc=x;this.lc=z;this.B=E;this.o=F;this.G=N;this.J=2230716170;this.K=139264};
O1a=function(a){var b=$APP.Nl.l(a,$APP.ko,$APP.B([$APP.Lm,n3,$APP.O,o3,p3,q3,r3,s3,t3,u3,v3]));b=$APP.Ee(a)?$APP.Fh.h($APP.Xf,b):b;return new m3($APP.ko.g(a),$APP.Lm.g(a),n3.g(a),$APP.O.g(a),o3.g(a),p3.g(a),q3.g(a),r3.g(a),s3.g(a),t3.g(a),u3.g(a),v3.g(a),null,$APP.$f(b),null)};w3=function(a,b,c,d,e,f,h,n){this.ra=a;this.od=b;this.zd=c;this.cd=d;this.zc=e;this.B=f;this.o=h;this.G=n;this.J=2230716170;this.K=139264};
P1a=function(a){var b=$APP.Nl.l(a,x3,$APP.B([y3,z3,A3,B3]));b=$APP.Ee(a)?$APP.Fh.h($APP.Xf,b):b;return new w3(x3.g(a),y3.g(a),z3.g(a),A3.g(a),B3.g(a),null,$APP.$f(b),null)};D3=function(a,b,c){if($APP.l(a))return null;throw $APP.Zl.h(["Expected ",$APP.m.g(b),", got: ",$APP.zj.l($APP.B([c]))].join(""),new $APP.k(null,2,[$APP.Hn,Q1a,C3,c],null));};
T1a=function(a,b){var c=n2(b),d=c?p2(b):b,e=q2(a,d),f=l2(a,d);a=j2(a,d);if(c){D3(e,"reverse attribute having :db.type/ref",b);var h=!0}else h=null;return O1a($APP.gi([s3,n3,r3,$APP.O,$APP.ko,v3,u3,t3,o3],[$APP.ff,a?1E3:null,h,d,b,f?!0:null,e?!0:null,a?!0:null,e?c?R1a:f?S1a:R1a:null]))};U1a=function(a,b,c){D3("number"===typeof c&&0<c||null==c,"(positive-number | nil)",c);D3(j2(a,$APP.O.g(b)),"limit attribute having :db.cardinality/many",$APP.O.g(b))};
W1a=function(a,b){var c=function(){var d=$APP.v(b);return E3.h?E3.h(a,d):E3.call(null,a,d)}();if(null==c)return null;D3($APP.rg($APP.ce($APP.w(b))),"even number of opts",b);return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);switch(f instanceof $APP.G?f.S:null){case "as":return $APP.vi.j(d,$APP.ko,e);case "limit":return U1a(a,d,e),$APP.vi.j(d,n3,e);case "default":return $APP.vi.j(d,$APP.Lm,e);case "xform":f=$APP.vi.j;var h=$APP.qe(e)?e:null;if($APP.l(h))e=h;else if(h=$APP.C.h(V1a,
e),$APP.l(h))e=h;else throw $APP.Zl.h(["Can't resolve symbol ",$APP.zj.l($APP.B([e]))].join(""),new $APP.k(null,2,[$APP.Hn,Q1a,C3,e],null));return f.call($APP.vi,d,s3,e);default:return D3(!1,"one of :as, :limit, :default, :xform",b)}},c,$APP.lq.h(2,$APP.w(b)))};
E3=function(a,b){var c;!(c=b instanceof $APP.G)&&(c="string"===typeof b)&&(c=new $APP.Bi(null,new $APP.k(null,2,["limit",null,"default",null],null),null),c=c.g?c.g(b):c.call(null,b),c=$APP.Cb(c));if(c)return T1a(a,b);if($APP.Be(b)){c=W1a(a,b);if($APP.l(c))return c;c=$APP.v(b);var d=new $APP.Bi(null,new $APP.k(null,2,[$APP.gpa,null,"limit",null],null),null);c=d.g?d.g(c):d.call(null,c);$APP.l(c)?(D3($APP.y.h($APP.ce(b),3),"['limit attr-name (positive-number | nil)]",b),$APP.A.j(b,0,null),d=$APP.A.j(b,
1,null),c=$APP.A.j(b,2,null),d=E3.h?E3.h(a,d):E3.call(null,a,d),U1a(a,d,c),c=$APP.vi.j(d,n3,c)):c=null;if($APP.l(c))return c;c=$APP.v(b);d=new $APP.Bi(null,new $APP.k(null,2,[$APP.kO,null,"default",null],null),null);c=d.g?d.g(c):d.call(null,c);$APP.l(c)?(D3($APP.y.h($APP.ce(b),3),"['default attr-name any-value]",b),$APP.A.j(b,0,null),d=$APP.A.j(b,1,null),c=$APP.A.j(b,2,null),a=E3.h?E3.h(a,d):E3.call(null,a,d),a=$APP.vi.j(a,$APP.Lm,c)):a=null;return $APP.l(a)?a:D3(!1,"[attr-name attr-option+] | ['limit attr-name (positive-num | nil)] | ['default attr-name any-val]",
b)}return null};X1a=function(a,b){return $APP.pg(function(c){var d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);return $APP.l(a.g?a.g(d):a.call(null,d))?c:null},$APP.fj.j($APP.Bw,b,$APP.Rn.C()))};Y1a=function(a,b){var c=$APP.l(r3.g(b))?A3:x3,d=X1a(function(e){return $APP.y.h($APP.ko.g(e),$APP.ko.g(b))},$APP.C.h(a,c));return null==d?$APP.Zm.D(a,c,$APP.wf,b):$APP.Zm.N(a,c,$APP.vi,d,b)};
F3=function(a,b){D3($APP.Be(b),"pattern to be sequential?",b);for(var c=P1a(new $APP.k(null,3,[x3,$APP.Sg,A3,$APP.Sg,B3,null],null));;){if($APP.we(b)){var d=c.ra,e=function(){return function(n){n=n.name;var t=new $APP.Bi(null,new $APP.k(null,2,[F2,null,":db/id",null],null),null);return t.g?t.g(n):t.call(null,n)}}(b,c,d);b=function(){return function(n){n=$APP.O.g(n);return n instanceof $APP.G?n:$APP.y.h(":",$APP.Zi.j(n,0,1))?$APP.gj.g($APP.Zi.h(n,1)):$APP.gj.g(n)}}(b,c,d,e);d=$APP.l(function(){var n=
c.zc;return $APP.l(n)?$APP.Cb($APP.pg(e,c.ra)):n}())?$APP.wf.h(d,Z1a):d;d=$APP.ys.g($APP.mx.h(b,d));var f=$APP.as.h(e,d),h=$APP.v(f);f=$APP.ne(f);return P1a(new $APP.k(null,5,[x3,d,y3,h,z3,f,A3,$APP.ys.g($APP.mx.h(b,c.cd)),B3,c.zc],null))}h=$APP.v(b);if($APP.y.h($APP.hK,h)||$APP.y.h("*",h)||$APP.y.h($1a,h))b=$APP.w(b),c=d=$APP.vi.j(c,B3,!0);else if($APP.Ce(h))d=$APP.ef(function(){return function(n,t,q){var x=E3(a,t);D3(null!=x,"attr-name | attr-expr",t);D3(q2(a,$APP.O.g(x)),"attribute having :db.type/ref",
t);$APP.y.h(a2a,q)||$APP.y.h("...",q)?t=$APP.vi.l(x,o3,null,$APP.B([q3,!0,p3,null])):"number"===typeof q?(D3(0<q,"(positive-num | ...)",$APP.Wf([t,q])),t=$APP.vi.l(x,o3,null,$APP.B([q3,!0,p3,q]))):t=$APP.vi.j(x,o3,F3.h?F3.h(a,q):F3.call(null,a,q));return Y1a(n,t)}}(b,c,h),c,h),b=$APP.w(b),c=d;else{d=E3(a,h);if(null==d)return D3(!1,"attr-name | attr-expr | map-spec | *",h);b=$APP.w(b);c=d=Y1a(c,d)}}};G3=function(a){return null==a?null:$APP.Zb(a)};H3=function(a){return null==a?null:$APP.cc(a)};
b2a=function(a,b){return null==a?new $APP.D(null,b,null,1,null):$APP.Wb(a,b)};c2a=function(a,b,c){return null==c?a:$APP.Hh.j(a,b,c)};I3=function(a,b,c,d,e){this.db=a;this.He=b;this.B=c;this.o=d;this.G=e;this.J=2230716170;this.K=139264};d2a=function(a,b,c,d,e){a=a.He;null==a||(a.D?a.D(b,c,d,e):a.call(null,b,c,d,e))};
e2a=function(a,b){if(null!=a&&null!=a.Fh)a=a.Fh(a,b);else{var c=e2a[$APP.fa(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=e2a._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("IFrame.-merge",a);}return a};f2a=function(a,b){if(null!=a&&null!=a.Kg)a=a.Kg(a,b);else{var c=f2a[$APP.fa(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=f2a._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("IFrame.-run",a);}return a};
J3=function(a,b,c,d,e){this.value=a;this.wa=b;this.B=c;this.o=d;this.G=e;this.J=2230716170;this.K=139264};K3=function(a,b,c,d,e,f){this.na=a;this.ka=b;this.wa=c;this.B=d;this.o=e;this.G=f;this.J=2230716170;this.K=139264};L3=function(a,b,c,d,e,f,h,n,t){this.sa=a;this.xa=b;this.na=c;this.pattern=d;this.ka=e;this.wa=f;this.B=h;this.o=n;this.G=t;this.J=2230716170;this.K=139264};
M3=function(a,b,c,d,e,f,h,n,t,q,x){this.sa=a;this.xa=b;this.na=c;this.pattern=d;this.ka=e;this.ra=f;this.wa=h;this.id=n;this.B=t;this.o=q;this.G=x;this.J=2230716170;this.K=139264};N3=function(a,b,c,d,e,f,h,n,t,q){this.sa=a;this.xa=b;this.na=c;this.pattern=d;this.ka=e;this.ra=f;this.id=h;this.B=n;this.o=t;this.G=q;this.J=2230716170;this.K=139264};g2a=function(a,b,c,d,e,f,h){return new N3(a,b,c,d,e,f,h,null,null,null)};
P3=function(a,b,c,d,e,f){var h=e.Aa;$APP.l(h)||(h=e.lc,h=$APP.l(h)?e.pattern.zc:h);if($APP.Cb(h))return d=e.pattern,O3.N?O3.N(a,b,c,d,f):O3.call(null,a,b,c,d,f);if($APP.l(b.g?b.g(f):b.call(null,f)))return new J3(new $APP.k(null,1,[F2,f],null),null,null,null,null);h=c.g?c.g(e):c.call(null,e);if($APP.l($APP.l(h)?0>=h&&!0:h))return new J3(null,null,null,null,null);b=$APP.wf.h(b,f);c=$APP.l(h)?$APP.Zm.j(c,e,$APP.gf):$APP.l(e.pc)?$APP.vi.j(c,e,e.pc-1):c;d=$APP.l(e.Aa)?d:e.pattern;return O3.N?O3.N(a,b,
c,d,f):O3.call(null,a,b,c,d,f)};
O3=function(a,b,c,d,e){var f=a.db,h=function(){var n=d.zc;if($APP.l($APP.l(n)?f instanceof $APP.x1&&!0:n))return S0(f.ac,d1.D(e,null,null,536870912),d1.D(e,null,null,2147483647));if($APP.l(d.zc))return l1(f,new $APP.H(null,1,5,$APP.I,[e],null));if(null==d.od)return null;n=d.od.name;var t=d.zd.name;return f instanceof $APP.x1?S0(f.ac,d1.D(e,n,null,536870912),d1.D(e,t,null,2147483647)):o1(f,$APP.z1,e,null,null,null)}();$APP.l(d.zc)&&d2a(a,h2a,e,null,null);return new M3(b,c,$APP.Tc($APP.Xf),d,G3(d.ra),
H3(d.ra),h,e,null,null,null)};Q3=function(a,b){var c=$APP.Yf(a);a=$APP.C.h(c,D2);c=$APP.C.h(c,o3);b=s2(a.db,b);if(null==b)return null;for(c=new $APP.D(null,O3(a,$APP.Ci,$APP.Xf,c,b),null,1,null);;){b=G3(c);var d=H3(c);if(b instanceof J3){if(null==d)return b.value;c=G3(d);d=H3(d);c=b2a(d,e2a(c,b))}else c=$APP.bf.j(b2a,d,f2a(b,a))}};S3=function(a,b,c){c=$APP.Yf(c);c=$APP.C.h(c,R3);return new $APP.k(null,2,[o3,$_(v0a(a).Dc,b,function(){return F3(a,b)}),D2,new I3(a,c,null,null,null)],null)};
T3=function(a,b){return $APP.Ab(a)?a[b]:$APP.A.h(a,b)};U3=function(a,b){return $APP.Ce(a)?a.g?a.g(b):a.call(null,b):a[b]};V3=function(a,b){var c=Array($APP.ce(b));$APP.bf.j(function(d,e){c[d]=a.g?a.g(e):a.call(null,e);return d+1},0,b);return c};i2a=function(a,b){var c=Array($APP.ce(b));$APP.bf.j(function(d,e){c[d]=a.h?a.h(d,e):a.call(null,d,e);return d+1},0,b);return c};j2a=function(a,b){return null==b.a?-1:0>=$APP.Xe(a.a,b.a)?-1:1};
k2a=function(a){if($APP.we(A1.g(a)))return $APP.Sg;for(var b=$APP.Tc(new $APP.H(null,1,5,$APP.I,[A2.g($APP.v(A1.g(a)))],null));;){var c=$APP.A.h(b,$APP.ce(b)-1),d=d1.j(0,c,null),e=d1.j(2147483647,null,null);c=A2;var f=c.g,h=A1.g(a);d=X_a(h,d,e,j2a);c=f.call(c,$APP.v(d));if(null!=c)b=$APP.Rg.h(b,c);else return $APP.Vc(b)}};l2a=function(a){return $APP.Ea(a,":")?$APP.gj.g($APP.Zi.h(a,1)):a};
o2a=function(a,b){b=$APP.Yf(b);var c=$APP.C.j(b,m2a,$APP.zj),d=$APP.C.j(b,n2a,$APP.m);if($APP.l(S2(a)))throw $APP.Zl.h("serializable doesn't work with databases that have :storage",$APP.Xf);var e=k2a(a),f=$APP.Fh.h($APP.Xf,$APP.fj.j($APP.Bw,e,$APP.Rn.C())),h=$APP.Eg($APP.Tc($APP.Sg)),n=$APP.Eg($APP.Tc($APP.Xf));b=i2a(function(z,E){E.idx=z|0;z=E.e;var F=E.a;F=f.g?f.g(F):f.call(null,F);var N=E.v;if("string"!==typeof N)if("number"===typeof N)N=Infinity===N?[2]:-Infinity===N?[3]:$APP.l(isNaN(N))?[4]:
N;else if(!$APP.Ke(N))if(N instanceof $APP.G){var S=$APP.C.h($APP.p(n),N);$APP.l(S)?N=S:(S=h.kc(null,$APP.Rg.h(h.Ja(null),N)),S=$APP.ce(S)-1,n.kc(null,$APP.Hh.j(n.Ja(null),N,S)),N=S);N=[0,N]}else N=[1,c.g?c.g(N):c.call(null,N)];return[z,F,N,E.tx-536870912]},$APP.z1.g(a));var t=i2a(function(z,E){return E.idx},A1.g(a)),q=i2a(function(z,E){return E.idx},r1.g(a)),x=function(){var z=$APP.y1.g(a);return c.g?c.g(z):c.call(null,z)}();e=V3(d,e);d=V3(d,$APP.Vc($APP.p(h)));return{count:$APP.ce($APP.z1.g(a)),
tx0:536870912,"max-eid":B1.g(a),"max-tx":C1.g(a),schema:x,attrs:e,keywords:d,eavt:b,aevt:t,avet:q}};W3=function(){};p2a=function(a,b,c){if(null!=a&&null!=a.Bb)a=a.Bb(a,b,c);else{var d=p2a[$APP.fa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=p2a._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Lb("ITraversable.-collect",a);}return a};
q2a=function(a,b){if(null!=a&&null!=a.Cb)a=a.Cb(a,b);else{var c=q2a[$APP.fa(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=q2a._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("ITraversable.-collect-vars",a);}return a};X3=function(a,b){return $APP.Be(a)&&$APP.y.h($APP.ce(a),b)};Y3=function(a,b){return $APP.Be(b)?$APP.bf.j(function(c,d){d=a.g?a.g(d):a.call(null,d);return $APP.l(d)?$APP.wf.h(c,d):$APP.Td(null)},$APP.Sg,b):null};$3=function(a,b){return Z3(a,b,$APP.Sg)};
Z3=function(a,b,c){return $APP.l(a.g?a.g(b):a.call(null,b))?$APP.wf.h(c,b):(null!=b?$APP.xd===b.Ab||(b.Jd?0:$APP.Jb(W3,b)):$APP.Jb(W3,b))?p2a(b,a,c):g0a(b)?$APP.bf.j(function(d,e){return Z3(a,e,d)},c,b):c};a4=function(a){var b=$APP.we(a);return b?b:$APP.sg.h($APP.Wo,a)};b4=function(a,b){return $APP.se(a,new $APP.k(null,1,[$APP.Ll,b],null))};c4=function(a){var b=$APP.Ll.g($APP.te(a));return $APP.l(b)?b:a};d4=function(a,b,c){this.B=a;this.o=b;this.G=c;this.J=2230716170;this.K=139264};
e4=function(a,b,c,d){this.Na=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};f4=function(a,b,c,d){this.Na=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};g4=function(a,b,c){this.B=a;this.o=b;this.G=c;this.J=2230716170;this.K=139264};h4=function(a,b,c){this.B=a;this.o=b;this.G=c;this.J=2230716170;this.K=139264};i4=function(a,b,c,d){this.value=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};
j4=function(a,b,c,d){this.Na=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};k4=function(a){return a instanceof $APP.r&&$APP.y.h($APP.v($APP.Hi(a)),"?")?new e4(a,null,null,null):null};s2a=function(a){var b=k4(a);if($APP.l(b))return b;throw $APP.Zl.h(["Cannot parse var, expected symbol starting with ?, got: ",$APP.zj.l($APP.B([a]))].join(""),new $APP.k(null,2,[$APP.Hn,r2a,$APP.ZA,a],null));};
l4=function(a){return a instanceof $APP.r&&$APP.y.h($APP.v($APP.Hi(a)),"$")?new f4(a,null,null,null):null};t2a=function(a){return a instanceof $APP.r&&$APP.y.h($APP.v($APP.Hi(a)),"?")?null:new i4(a,null,null,null)};m4=function(a){return a instanceof $APP.r&&$APP.Cb(k4(a))&&$APP.Cb(l4(a))&&$APP.Cb($APP.y.h($APP.Nv,a)?new h4(null,null,null):null)&&$APP.Cb($APP.y.h($APP.oK,a)?new d4(null,null,null):null)?new j4(a,null,null,null):null};u2a=function(a){return $APP.l(m4(a))?new e4(a,null,null,null):null};
v2a=function(a){var b=k4(a);if($APP.l(b))return b;b=l4(a);return $APP.l(b)?b:t2a(a)};n4=function(a,b,c,d,e){this.required=a;this.ce=b;this.B=c;this.o=d;this.G=e;this.J=2230716170;this.K=139264};
x2a=function(a){if($APP.Be(a)){var b=$APP.Be($APP.v(a))?new $APP.H(null,2,5,$APP.I,[$APP.v(a),$APP.w(a)],null):new $APP.H(null,2,5,$APP.I,[null,a],null),c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c=Y3(s2a,c);b=Y3(s2a,b);if($APP.we(c)&&$APP.we(b))throw $APP.Zl.h("Cannot parse rule-vars, expected [ variable+ | ([ variable+ ] variable*) ]",new $APP.k(null,2,[$APP.Hn,w2a,$APP.ZA,a],null));if(!$APP.l(a4($APP.K.h(c,b))))throw $APP.Zl.h("Rule variables should be distinct",new $APP.k(null,2,[$APP.Hn,w2a,$APP.ZA,
a],null));return new n4(c,b,null,null,null)}throw $APP.Zl.h("Cannot parse rule-vars, expected [ variable+ | ([ variable+ ] variable*) ]",new $APP.k(null,2,[$APP.Hn,w2a,$APP.ZA,a],null));};p4=function(a){return $APP.K.h($APP.l($APP.jJ.g(a))?new $APP.H(null,1,5,$APP.I,[$APP.mn.h($APP.Am,$APP.jJ.g(a))],null):null,$APP.mn.h($APP.Am,o4.g(a)))};y2a=function(a){return new $APP.H(null,2,5,$APP.I,[$APP.ce($APP.jJ.g(a)),$APP.ce(o4.g(a))],null)};
q4=function(a,b,c){this.B=a;this.o=b;this.G=c;this.J=2230716170;this.K=139264};r4=function(a,b,c,d){this.Yb=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};s4=function(a,b,c,d){this.Ac=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};t4=function(a,b,c,d){this.Wb=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};z2a=function(a){return $APP.y.h($APP.oK,a)?b4(new q4(null,null,null),a):null};
A2a=function(a){var b=z2a(a);return $APP.l(b)?b:u4.g?u4.g(a):u4.call(null,a)};C2a=function(a){var b=Y3(A2a,a);if($APP.l(b)){if($APP.we(b))throw $APP.Zl.h("Tuple binding cannot be empty",new $APP.k(null,2,[$APP.Hn,B2a,$APP.ZA,a],null));return b4(new s4(b,null,null,null),a)}return null};
u4=function(a){a:{if(X3(a,2)&&$APP.y.h($APP.he(a),a2a)){var b=$APP.v(a);b=u4.g?u4.g(b):u4.call(null,b);if($APP.l(b)){b=b4(new t4(b,null,null,null),a);break a}throw $APP.Zl.h("Cannot parse collection binding",new $APP.k(null,2,[$APP.Hn,B2a,$APP.ZA,a],null));}b=null}if($APP.l(b))return b;b=X3(a,1)&&$APP.Be($APP.v(a))?b4(new t4(C2a($APP.v(a)),null,null,null),a):null;if($APP.l(b))return b;b=C2a(a);if($APP.l(b))return b;b=z2a(a);if($APP.l(b))return b;b=k4(a);b=$APP.l(b)?b4(new r4(b,null,null,null),a):
null;if($APP.l(b))return b;throw $APP.Zl.h("Cannot parse binding, expected (bind-scalar | bind-tuple | bind-coll | bind-rel)",new $APP.k(null,2,[$APP.Hn,B2a,$APP.ZA,a],null));};v4=function(a){if(null!=a&&null!=a.Eh)a=a.Eh(a);else{var b=v4[$APP.fa(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=v4._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.Lb("IFindVars.-find-vars",a);}return a};
w4=function(a,b,c,d,e){this.ja=a;this.ya=b;this.B=c;this.o=d;this.G=e;this.J=2230716170;this.K=139264};x4=function(a,b,c,d,e,f){this.source=a;this.Yb=b;this.pattern=c;this.B=d;this.o=e;this.G=f;this.J=2230716170;this.K=139264};y4=function(a){if(null!=a&&null!=a.Jg)a=a.Jg(a);else{var b=y4[$APP.fa(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=y4._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.Lb("IFindElements.find-elements",a);}return a};
z4=function(a,b,c,d){this.elements=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};A4=function(a,b,c,d){this.element=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};B4=function(a,b,c,d){this.element=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};C4=function(a,b,c,d){this.elements=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};D2a=function(a){return a instanceof w4};E2a=function(a){return a instanceof x4};
D4=function(a){var b=k4(a);if($APP.l(b))return b;a:{if($APP.Be(a)&&$APP.y.h($APP.v(a),F2a)){if(3<=$APP.ce(a)&&4>=$APP.ce(a)){var c=(b=$APP.y.h($APP.ce(a),4))?$APP.A.h(a,1):G2a;b=b?$APP.me(a):$APP.w(a);var d=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c=l4(c);d=k4(d);var e=k4(b);$APP.l(e)?b=e:(e=u2a(b),b=$APP.l(e)?e:t2a(b));if($APP.l($APP.l(c)?$APP.l(d)?b:d:c)){b=new x4(c,d,b,null,null,null);break a}}throw $APP.Zl.h("Cannot parse pull expression, expect ['pull' src-var? variable (constant | variable | plain-symbol)]",
new $APP.k(null,2,[$APP.Hn,H2a,C3,a],null));}b=null}if($APP.l(b))return b;a:{if($APP.Be(a)&&$APP.y.h($APP.v(a),I2a)){if(3<=$APP.ce(a)&&(b=$APP.u(a),$APP.v(b),c=$APP.w(b),b=$APP.v(c),c=$APP.w(c),b=k4(b),c=Y3(v2a,c),$APP.l($APP.l(b)?c:b))){b=new w4(b,c,null,null,null);break a}throw $APP.Zl.h("Cannot parse custom aggregate call, expect ['aggregate' variable fn-arg+]",new $APP.k(null,2,[$APP.Hn,H2a,C3,a],null));}b=null}$APP.l(b)?a=b:$APP.Be(a)&&2<=$APP.ce(a)?(b=$APP.u(a),a=$APP.v(b),b=$APP.w(b),a=m4(a),
b=Y3(v2a,b),a=$APP.l($APP.l(a)?b:a)?new w4(a,b,null,null,null):null):a=null;return a};
J2a=function(a){var b=Y3(D4,a);b=null==b?null:new z4(b,null,null,null);if($APP.l(b))return b;a:{if($APP.Be(a)&&$APP.y.h($APP.ce(a),1)&&(b=$APP.v(a),$APP.Be(b)&&$APP.y.h($APP.ce(b),2)&&$APP.y.h($APP.he(b),a2a))){b=D4($APP.v(b));b=null==b?null:new A4(b,null,null,null);break a}b=null}if($APP.l(b))return b;$APP.Be(a)&&$APP.y.h($APP.ce(a),2)&&$APP.y.h($APP.he(a),$APP.xk)?(b=D4($APP.v(a)),b=null==b?null:new B4(b,null,null,null)):b=null;if($APP.l(b))return b;$APP.Be(a)&&$APP.y.h($APP.ce(a),1)?(b=$APP.v(a),
b=Y3(D4,b),b=null==b?null:new C4(b,null,null,null)):b=null;if($APP.l(b))return b;throw $APP.Zl.h("Cannot parse :find, expected: (find-rel | find-coll | find-tuple | find-scalar)",new $APP.k(null,2,[$APP.Hn,H2a,C3,a],null));};E4=function(a,b,c,d,e){this.type=a;this.ke=b;this.B=c;this.o=d;this.G=e;this.J=2230716170;this.K=139264};
K2a=function(a,b){if(!$APP.we(b)&&$APP.og($APP.Ad,b))switch(a instanceof $APP.G?a.S:null){case "keys":return new E4(a,$APP.mn.h($APP.gj,b),null,null,null);case "syms":return new E4(a,$APP.df(b),null,null,null);case "strs":return new E4(a,$APP.mn.h($APP.m,b),null,null,null);default:return null}else return null};L2a=function(a){var b=l4(a);$APP.l(b)||(b=$APP.y.h($APP.Nv,a)?new h4(null,null,null):null,b=$APP.l(b)?b:u2a(a));return $APP.l(b)?b4(new r4(b,null,null,null),a):u4(a)};
N2a=function(a){var b=Y3(L2a,a);if($APP.l(b))return b;throw $APP.Zl.h("Cannot parse :in clause, expected (src-var | % | plain-symbol | bind-scalar | bind-tuple | bind-coll | bind-rel)",new $APP.k(null,2,[$APP.Hn,M2a,$APP.ZA,a],null));};F4=function(a,b,c,d,e){this.source=a;this.pattern=b;this.B=c;this.o=d;this.G=e;this.J=2230716170;this.K=139264};G4=function(a,b,c,d,e){this.ja=a;this.ya=b;this.B=c;this.o=d;this.G=e;this.J=2230716170;this.K=139264};
H4=function(a,b,c,d,e,f){this.ja=a;this.ya=b;this.Wb=c;this.B=d;this.o=e;this.G=f;this.J=2230716170;this.K=139264};I4=function(a,b,c,d,e,f){this.source=a;this.name=b;this.ya=c;this.B=d;this.o=e;this.G=f;this.J=2230716170;this.K=139264};J4=function(a,b,c,d,e,f){this.source=a;this.Zb=b;this.Ga=c;this.B=d;this.o=e;this.G=f;this.J=2230716170;this.K=139264};K4=function(a,b,c,d,e,f){this.source=a;this.Bd=b;this.Ga=c;this.B=d;this.o=e;this.G=f;this.J=2230716170;this.K=139264};
L4=function(a,b,c,d){this.Ga=a;this.B=b;this.o=c;this.G=d;this.J=2230716170;this.K=139264};O2a=function(a){var b=$APP.y.h($APP.oK,a)?new d4(null,null,null):null;if($APP.l(b))return b;b=k4(a);return $APP.l(b)?b:t2a(a)};M4=function(a){if($APP.Be(a)){var b=l4($APP.v(a));return $APP.l(b)?new $APP.H(null,2,5,$APP.I,[b,$APP.w(a)],null):new $APP.H(null,2,5,$APP.I,[new g4(null,null,null),a],null)}return null};
P2a=function(a){if($APP.Be(a)){var b=$APP.u(a);a=$APP.v(b);b=$APP.w(b);b=null==b?$APP.Sg:b;var c=m4(a);a=$APP.l(c)?c:k4(a);b=Y3(v2a,b);return $APP.l($APP.l(a)?b:a)?new $APP.H(null,2,5,$APP.I,[a,b],null):null}return null};Q2a=function(a,b,c){if($APP.we(a)&&$APP.we(b))throw $APP.Zl.h("Join variables should not be empty",new $APP.k(null,2,[$APP.Hn,N4,$APP.ZA,c],null));};R2a=function(a,b){Q2a(null,$APP.iL.g(a),b);return a};
S2a=function(a,b){var c=$APP.Yf(a);c=$APP.C.h(c,O4);var d=$APP.Yf(c);c=$APP.C.h(d,$APP.jJ);d=$APP.C.h(d,o4);Q2a(c,d,b);return a};T2a=function(a){if($APP.Be(a)&&$APP.y.h($APP.dt,$APP.v(a))){var b=$APP.w(a);b=P4.g?P4.g(b):P4.call(null,b);if($APP.l($APP.$f(b)))return new L4(b,null,null,null);throw $APP.Zl.h("Cannot parse 'and' clause, expected [ 'and' clause+ ]",new $APP.k(null,2,[$APP.Hn,N4,$APP.ZA,a],null));}return null};
V2a=function(a){a:{var b=M4(a);if($APP.l(b)){var c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);var d=$APP.u(b);b=$APP.v(d);d=$APP.w(d);if($APP.y.h($APP.fC,b)){b=P4.g?P4.g(d):P4.call(null,d);if($APP.l(b)){c=R2a(b4(new J4(c,$APP.df($APP.iy.g(Q4($APP.Sg,b))),b,null,null,null),a),a);break a}throw $APP.Zl.h("Cannot parse 'not' clause, expected [ src-var? 'not' clause+ ]",new $APP.k(null,2,[$APP.Hn,N4,$APP.ZA,a],null));}}c=null}if($APP.l(c))return c;a:{b=M4(a);if($APP.l(b)){c=$APP.A.j(b,0,null);b=$APP.A.j(b,
1,null);d=$APP.u(b);b=$APP.v(d);var e=$APP.w(d);d=$APP.v(e);e=$APP.w(e);if($APP.y.h(U2a,b)){b=Y3(k4,d);d=P4.g?P4.g(e):P4.call(null,e);if($APP.l($APP.l(b)?d:b)){c=R2a(b4(new J4(c,b,d,null,null,null),a),a);break a}throw $APP.Zl.h("Cannot parse 'not-join' clause, expected [ src-var? 'not-join' [variable+] clause+ ]",new $APP.k(null,2,[$APP.Hn,N4,$APP.ZA,a],null));}}c=null}if($APP.l(c))return c;a:{b=M4(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),d=$APP.u(b),b=$APP.v(d),d=$APP.w(d),$APP.y.h($APP.it,
b))){b=Y3($APP.Tx.h(T2a,V2a),d);if($APP.l(b)){c=S2a(b4(new K4(c,new n4(null,$APP.df($APP.iy.g(Q4($APP.Sg,b))),null,null,null),b,null,null,null),a),a);break a}throw $APP.Zl.h("Cannot parse 'or' clause, expected [ src-var? 'or' clause+ ]",new $APP.k(null,2,[$APP.Hn,N4,$APP.ZA,a],null));}c=null}if($APP.l(c))return c;a:{b=M4(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),d=$APP.u(b),b=$APP.v(d),e=$APP.w(d),d=$APP.v(e),e=$APP.w(e),$APP.y.h(R4,b))){b=x2a(d);d=Y3($APP.Tx.h(T2a,V2a),e);if($APP.l($APP.l(b)?
d:b)){c=S2a(b4(new K4(c,b,d,null,null,null),a),a);break a}throw $APP.Zl.h("Cannot parse 'or-join' clause, expected [ src-var? 'or-join' [variable+] clause+ ]",new $APP.k(null,2,[$APP.Hn,N4,$APP.ZA,a],null));}c=null}if($APP.l(c))return c;a:{if(X3(a,1)&&(b=P2a($APP.v(a)),$APP.l(b))){c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c=b4(new G4(c,b,null,null,null),a);break a}c=null}if($APP.l(c))return c;a:{if(X3(a,2)&&(b=$APP.A.j(a,0,null),c=$APP.A.j(a,1,null),d=P2a(b),$APP.l(d))){b=$APP.A.j(d,0,null);d=$APP.A.j(d,
1,null);c=u4(c);c=$APP.l(c)?b4(new H4(b,d,c,null,null,null),a):null;break a}c=null}if($APP.l(c))return c;a:{b=M4(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),b=$APP.u(b),d=$APP.v(b),b=$APP.w(b),d=m4(d),e=Y3(O2a,b),$APP.l(d))){if($APP.we(b))throw $APP.Zl.h("rule-expr requires at least one argument",new $APP.k(null,2,[$APP.Hn,N4,$APP.ZA,a],null));if(null==e)throw $APP.Zl.h("Cannot parse rule-expr arguments, expected [ (variable | constant | '_')+ ]",new $APP.k(null,2,[$APP.Hn,N4,$APP.ZA,
a],null));c=new I4(c,d,e,null,null,null);break a}c=null}if($APP.l(c))return c;a:{b=M4(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),b=Y3(O2a,b),$APP.l(b))){if($APP.we(b))throw $APP.Zl.h("Pattern could not be empty",new $APP.k(null,2,[$APP.Hn,N4,$APP.ZA,a],null));c=b4(new F4(c,b,null,null,null),a);break a}c=null}if($APP.l(c))return c;throw $APP.Zl.h("Cannot parse clause, expected (data-pattern | pred-expr | fn-expr | rule-expr | not-clause | not-join-clause | or-clause | or-join-clause)",
new $APP.k(null,2,[$APP.Hn,N4,$APP.ZA,a],null));};P4=function(a){return Y3(V2a,a)};W2a=function(a){var b=P4(a);if($APP.l(b))return b;throw $APP.Zl.h("Cannot parse :where clause, expected [clause+]",new $APP.k(null,2,[$APP.Hn,N4,$APP.ZA,a],null));};S4=function(a,b,c,d,e){this.Zb=a;this.Ga=b;this.B=c;this.o=d;this.G=e;this.J=2230716170;this.K=139264};T4=function(a,b,c,d,e){this.name=a;this.Ud=b;this.B=c;this.o=d;this.G=e;this.J=2230716170;this.K=139264};
X2a=function(a){if($APP.Be(a)){var b=$APP.u(a),c=$APP.v(b),d=$APP.w(b);if($APP.Be(c)){b=$APP.u(c);var e=$APP.v(b);c=$APP.w(b);b=function(){var h=m4(e);if($APP.l(h))return h;throw $APP.Zl.h("Cannot parse rule name, expected plain-symbol",new $APP.k(null,2,[$APP.Hn,U4,$APP.ZA,a],null));}();c=x2a(c);var f=function(){var h=$APP.$f(P4(d));if($APP.l(h))return h;throw $APP.Zl.h("Rule branch should have clauses",new $APP.k(null,2,[$APP.Hn,U4,$APP.ZA,a],null));}();return new $APP.k(null,3,[$APP.O,b,$APP.iL,
c,$APP.oP,f],null)}throw $APP.Zl.h(["Cannot parse rule head, expected [rule-name rule-vars], got: ",$APP.zj.l($APP.B([c]))].join(""),new $APP.k(null,2,[$APP.Hn,U4,$APP.ZA,a],null));}throw $APP.Zl.h("Cannot parse rule, expected [rule-head clause+]",new $APP.k(null,2,[$APP.Hn,U4,$APP.ZA,a],null));};
Z2a=function(a,b){var c=$APP.iL.g($APP.v(b)),d=y2a(c);b=$APP.u($APP.w(b));for(var e=null,f=0,h=0;;)if(h<f){var n=e.ca(null,h);n=$APP.iL.g(n);if($APP.ui.h(d,y2a(n)))throw $APP.Zl.h(["Arity mismatch for rule '",$APP.zj.l($APP.B([$APP.Am.g(a)])),"': ",$APP.zj.l($APP.B([p4(c)]))," vs. ",$APP.zj.l($APP.B([p4(n)]))].join(""),new $APP.k(null,2,[$APP.Hn,U4,Y2a,a],null));h+=1}else if(b=$APP.u(b)){if($APP.Ge(b))f=$APP.cd(b),b=$APP.dd(b),e=f,f=$APP.ce(f);else{n=$APP.v(b);e=$APP.iL.g(n);if($APP.ui.h(d,y2a(e)))throw $APP.Zl.h(["Arity mismatch for rule '",
$APP.zj.l($APP.B([$APP.Am.g(a)])),"': ",$APP.zj.l($APP.B([p4(c)]))," vs. ",$APP.zj.l($APP.B([p4(e)]))].join(""),new $APP.k(null,2,[$APP.Hn,U4,Y2a,a],null));b=$APP.w(b);e=null;f=0}h=0}else break};
$2a=function(a){$APP.df(function(){return function d(c){return new $APP.Jf(null,function(){for(;;){var e=$APP.u(c);if(e){var f=e;if($APP.Ge(f)){var h=$APP.cd(f),n=$APP.ce(h),t=$APP.Lf(n);return function(){for(var E=0;;)if(E<n){var F=$APP.pe(h,E),N=$APP.A.j(F,0,null),S=$APP.A.j(F,1,null);F=$APP.mn.h(function(){return function(Y){return new S4($APP.iL.g(Y),$APP.oP.g(Y),null,null,null)}}(E,F,N,S,h,n,t,f,e),S);S=t;Z2a(N,F);S.add(new T4(N,F,null,null,null));E+=1}else return!0}()?$APP.Of($APP.Qf(t),d($APP.dd(f))):
$APP.Of($APP.Qf(t),null)}var q=$APP.v(f),x=$APP.A.j(q,0,null),z=$APP.A.j(q,1,null);q=$APP.mn.h(function(){return function(E){return new S4($APP.iL.g(E),$APP.oP.g(E),null,null,null)}}(q,x,z,f,e),z);Z2a(x,q);return $APP.zf(new T4(x,q,null,null,null),d($APP.Ld(f)))}return null}},null,null)}($APP.Ij($APP.O,Y3(X2a,a)))}())};V4=function(a,b,c,d,e,f,h,n){this.qd=a;this.ud=b;this.sd=c;this.rd=d;this.td=e;this.B=f;this.o=h;this.G=n;this.J=2230716170;this.K=139264};
a3a=function(a){var b=$APP.Nl.l(a,W4,$APP.B([X4,Y4,Z4,$4]));b=$APP.Ee(a)?$APP.Fh.h($APP.Xf,b):b;return new V4(W4.g(a),X4.g(a),Y4.g(a),Z4.g(a),$4.g(a),null,$APP.$f(b),null)};b3a=function(a){for(var b=$APP.Xf,c=null;;){var d=$APP.v(a);if($APP.l(d))d instanceof $APP.G?(c=d,a=$APP.w(a)):(b=$APP.Kl.D(b,new $APP.H(null,1,5,$APP.I,[c],null),$APP.Xm.h($APP.wf,$APP.Sg),d),a=$APP.w(a));else return b}};c3a=function(a){var b=$APP.Ll.g(a);return a instanceof F4?b:null!=b?b instanceof g4?null:b:null};
g3a=function(a,b,c){var d=$APP.Fi(Q4($APP.Sg,W4.g(a))),e=$APP.Fi(X4.g(a)),f=$APP.Fi(Q4($APP.Sg,Z4.g(a))),h=$APP.Fi(Q4($APP.Sg,$4.g(a)));f=$APP.Ww.h($APP.rQ.h(d,e),$APP.rQ.h(h,f));d=$APP.Xw.h(d,e);if(!$APP.we(f))throw $APP.Zl.h(["Query for unknown vars: ",$APP.zj.l($APP.B([$APP.mn.h($APP.Am,f)]))].join(""),new $APP.k(null,3,[$APP.Hn,a5,$APP.iL,f,$APP.ZA,b],null));if(!$APP.we(d))throw $APP.Zl.h([":find and :with should not use same variables: ",$APP.zj.l($APP.B([$APP.mn.h($APP.Am,d)]))].join(""),new $APP.k(null,
3,[$APP.Hn,a5,$APP.iL,d,$APP.ZA,b],null));d=Y4.g(a);if(null!=d){if(W4.g(a)instanceof B4)throw $APP.Zl.h([$APP.zj.l($APP.B([$APP.Ul.g(d)]))," does not work with single-scalar :find"].join(""),new $APP.k(null,2,[$APP.Hn,a5,$APP.ZA,b],null));if(W4.g(a)instanceof A4)throw $APP.Zl.h([$APP.zj.l($APP.B([$APP.Ul.g(d)]))," does not work with collection :find"].join(""),new $APP.k(null,2,[$APP.Hn,a5,$APP.ZA,b],null));}d=b5.g(Y4.g(a));if(null!=d&&(e=y4(W4.g(a)),!$APP.y.h($APP.ce(d),$APP.ce(e))))throw $APP.Zl.h(["Count of ",
$APP.zj.l($APP.B([$APP.Ul.g(Y4.g(a))]))," must match count of :find"].join(""),new $APP.k(null,4,[$APP.Hn,a5,d3a,$APP.zf($APP.Ul.g(Y4.g(a)),d),e3a,e,$APP.ZA,b],null));if(1<$APP.ce($APP.Pg.h($APP.Db,new $APP.H(null,3,5,$APP.I,[$APP.uB.g(c),$APP.ls.g(c),f3a.g(c)],null))))throw $APP.Zl.h("Only one of :keys/:syms/:strs must be present",new $APP.k(null,2,[$APP.Hn,a5,$APP.ZA,b],null));var n=Q4($APP.Sg,Z4.g(a)),t=$3(function(x){return x instanceof f4},Z4.g(a)),q=$3(function(x){return x instanceof h4},Z4.g(a));
if(!$APP.l(function(){var x=a4(n);return $APP.l(x)?(x=a4(t),$APP.l(x)?a4(q):x):x}()))throw $APP.Zl.h("Vars used in :in should be distinct",new $APP.k(null,2,[$APP.Hn,a5,$APP.ZA,b],null));c=Q4($APP.Sg,X4.g(a));if(!$APP.l(a4(c)))throw $APP.Zl.h("Vars used in :with should be distinct",new $APP.k(null,2,[$APP.Hn,a5,$APP.ZA,b],null));c=Z3(function(x){return x instanceof f4},Z4.g(a),$APP.Ci);d=Z3(function(x){return x instanceof f4},$4.g(a),$APP.Ci);c=$APP.Ww.h(d,c);if(!$APP.we(c))throw $APP.Zl.h(["Where uses unknown source vars: ",
$APP.zj.l($APP.B([$APP.mn.h($APP.Am,c)]))].join(""),new $APP.k(null,3,[$APP.Hn,a5,$APP.iL,c,$APP.ZA,b],null));c=$3(function(x){return x instanceof I4},$4.g(a));a=$3(function(x){return x instanceof h4},Z4.g(a));if(!$APP.we(c)&&$APP.we(a))throw $APP.Zl.h("Missing rules var '%' in :in",new $APP.k(null,2,[$APP.Hn,a5,$APP.ZA,b],null));};
j3a=function(a){if($APP.Ce(a))var b=a;else if($APP.Be(a))b=b3a(a);else throw $APP.Zl.h("Query should be a vector or a map",new $APP.k(null,2,[$APP.Hn,a5,$APP.ZA,a],null));var c=b,d=W2a($APP.CF.h(c,$APP.Sg));b=a3a(new $APP.k(null,5,[W4,J2a(e3a.g(c)),X4,function(){var e=h3a.g(c);if($APP.l(e)){var f=Y3(k4,e);if($APP.l(f))e=f;else throw $APP.Zl.h("Cannot parse :with clause, expected [ variable+ ]",new $APP.k(null,2,[$APP.Hn,i3a,$APP.ZA,e],null));}else e=null;return e}(),Y4,function(){var e=K2a($APP.uB,
$APP.uB.g(c));if($APP.l(e))return e;e=K2a($APP.ls,$APP.ls.g(c));return $APP.l(e)?e:K2a(f3a,f3a.g(c))}(),Z4,N2a(function(){var e=$APP.Zv.g(c);return $APP.l(e)?e:$APP.we($3(c3a,d))?$APP.Sg:new $APP.H(null,1,5,$APP.I,[G2a],null)}()),$4,d],null));g3a(b,a,c);return b};c5=function(a,b,c,d,e,f){this.De=a;this.sources=b;this.rules=c;this.B=d;this.o=e;this.G=f;this.J=2230716170;this.K=139264};d5=function(a,b,c,d,e){this.ra=a;this.Ve=b;this.B=c;this.o=d;this.G=e;this.J=2230716170;this.K=139264};
k3a=function(a,b){return $APP.Xw.h($APP.Fi($APP.ri(a)),$APP.Fi($APP.ri(b)))};l3a=function(a,b){return $APP.y.h($APP.ce(a),$APP.ce(b))&&$APP.og(function(c){return $APP.Te(b,c)},$APP.ri(a))&&$APP.og(function(c){return $APP.Te(a,c)},$APP.ri(b))};m3a=function(a){return a instanceof $APP.r&&$APP.y.h("$",$APP.v($APP.Hi(a)))};e5=function(a){return a instanceof $APP.r&&$APP.y.h("?",$APP.v($APP.Hi(a)))};f5=function(a){return a instanceof $APP.G||"string"===typeof a};
n3a=function(a){return($APP.Be(a)||f0(a))&&$APP.y.h(2,$APP.ce(a))&&f5($APP.v(a))};o3a=function(a,b,c,d){for(var e=b.length,f=d.length,h=Array(e+f),n=0;;)if(n<e)h[n]=a[b[n]],n+=1;else break;for(a=0;;)if(a<f)h[e+a]=c[d[a]],a+=1;else break;return h};
p3a=function(a,b,c,d){var e=$APP.df(function(){return function t(n){return new $APP.Jf(null,function(){for(;;){var q=$APP.u(n);if(q){if($APP.Ge(q)){var x=$APP.cd(q),z=$APP.ce(x),E=$APP.Lf(z);a:for(var F=0;;)if(F<z){var N=$APP.pe(x,F),S=$APP.A.j(N,0,null);N=$APP.A.j(N,1,null);$APP.Pf(E,new $APP.H(null,2,5,$APP.I,[N,a.g?a.g(S):a.call(null,S)],null));F+=1}else{x=!0;break a}return x?$APP.Of($APP.Qf(E),t($APP.dd(q))):$APP.Of($APP.Qf(E),null)}x=$APP.v(q);E=$APP.A.j(x,0,null);x=$APP.A.j(x,1,null);return $APP.zf(new $APP.H(null,
2,5,$APP.I,[x,a.g?a.g(E):a.call(null,E)],null),t($APP.Ld(q)))}return null}},null,null)}(c)}()),f=$APP.bf.h($APP.hn,$APP.ti(a))+1;b=$APP.Vc($APP.bf.j(function(h,n){for(var t=Array(f),q=$APP.u(e),x=null,z=0,E=0;;)if(E<z){var F=x.ca(null,E),N=$APP.A.j(F,0,null);F=$APP.A.j(F,1,null);t[F]=n[N];E+=1}else if(q=$APP.u(q))$APP.Ge(q)?(z=$APP.cd(q),q=$APP.dd(q),x=z,z=$APP.ce(z)):(z=$APP.v(q),x=$APP.A.j(z,0,null),z=$APP.A.j(z,1,null),t[z]=n[x],q=$APP.w(q),x=null,z=0),E=0;else break;return $APP.Rg.h(h,t)},$APP.Tc($APP.df(b)),
d));return new d5(a,b,null,null,null)};q3a=function(a){a=$APP.fj.h($APP.Am,$APP.df($APP.iy.g(Q4($APP.Sg,a))));return new d5($APP.Ii(a,$APP.Rn.C()),$APP.Sg,null,null,null)};g5=function(a,b){if(null!=a&&null!=a.Lg)a=a.Lg(a,b);else{var c=g5[$APP.fa(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=g5._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("IBinding.in-\x3erel",a);}return a};
r3a=function(a,b){var c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c instanceof r4&&h5.g(c)instanceof f4?a=$APP.Zm.N(a,i5,$APP.vi,$APP.rp.h(c,new $APP.H(null,2,5,$APP.I,[h5,$APP.Am],null)),b):c instanceof r4&&h5.g(c)instanceof h4?(c=$APP.vi.j,b="string"===typeof b?$APP.Wm.g(b):b,$2a(b),b=$APP.Ij($APP.ie,b),a=c.call($APP.vi,a,$APP.QH,b)):a=$APP.Zm.D(a,j5,$APP.wf,g5(c,b));return a};
u3a=function(a,b,c){var d=$APP.ce(b),e=$APP.ce(c);if(d<e)throw $APP.Zl.h(["Extra inputs passed, expected: ",$APP.zj.l($APP.B([$APP.mn.h(function(f){return $APP.Ll.g($APP.te(f))},b)])),", got: ",$APP.zj.l($APP.B([e]))].join(""),new $APP.k(null,3,[$APP.Hn,s3a,$APP.MJ,b,t3a,c],null));if(d>e)throw $APP.Zl.h(["Too few inputs passed, expected: ",$APP.zj.l($APP.B([$APP.mn.h(function(f){return $APP.Ll.g($APP.te(f))},b)])),", got: ",$APP.zj.l($APP.B([e]))].join(""),new $APP.k(null,3,[$APP.Hn,s3a,$APP.MJ,b,
t3a,c],null));return $APP.bf.j(r3a,a,$APP.Ii(b,c))};v3a=function(a,b){var c=a.g?a.g(b):a.call(null,b);if($APP.Te(k5,b)){if($APP.Pe(c)){var d=c|0;return function(e){e=e[d];return"number"===typeof e?e:$APP.Be(e)?s2(l5,e):f0(e)?s2(l5,e):e}}return function(e){e=e[c];return"number"===typeof e?e:$APP.Be(e)?s2(l5,e):f0(e)?s2(l5,e):e}}return $APP.Pe(c)?(d=c|0,function(e){return e[d]}):function(e){return e[c]}};
m5=function(a,b){var c=$APP.ce(b);if(1===c)return v3a(a,$APP.v(b));b=$APP.qs.g(b);for(var d=0;;)if(d<c)b[d]=v3a(a,b[d]),d+=1;else return function(e,f,h){return function(n){return $APP.ys.g(f.map(function(){return function(t){return t.g?t.g(n):t.call(null,n)}}(e,f,h)))}}(d,b,c)};w3a=function(a,b){var c=$APP.Kd;return $APP.Vc($APP.bf.j(function(d,e){var f=a.g?a.g(e):a.call(null,e);return $APP.Hh.j(d,f,$APP.wf.h($APP.C.j(d,f,c),e))},$APP.Tc($APP.Xf),b))};
o5=function(a,b){var c=n5.g(a),d=n5.g(b),e=x3.g(a),f=x3.g(b),h=$APP.df(k3a(x3.g(a),x3.g(b)));a=$APP.ri(e);b=$APP.Vc($APP.ef(function(E,F){return $APP.l(e.g?e.g(F):e.call(null,F))?E:$APP.Rg.h(E,F)},$APP.Tc($APP.Sg),f));var n=$APP.cf($APP.ti(e)),t=$APP.cf($APP.uj($APP.fj.g(f),b)),q=m5(e,h),x=m5(f,h),z=w3a(q,c);c=$APP.Vc($APP.bf.j(function(E,F){var N=x(F);N=$APP.C.h(z,N);return null==N?E:$APP.bf.j(function(S,Y){return $APP.Rg.h(S,o3a(Y,n,F,t))},E,N)},$APP.Tc($APP.Sg),d));return new d5($APP.Ii($APP.K.h(a,
b),$APP.Rn.C()),c,null,null,null)};x3a=function(a,b){var c=$APP.Yf(a),d=$APP.C.h(c,x3);c=$APP.C.h(c,n5);var e=$APP.Yf(b);b=$APP.C.h(e,x3);e=$APP.C.h(e,n5);var f=$APP.df(k3a(d,b));b=m5(b,f);var h=w3a(b,e),n=m5(d,f);return $APP.vi.j(a,n5,$APP.Tg(function(t){t=n(t);return null==(h.g?h.g(t):h.call(null,t))},c))};p5=function(a,b){return $APP.pg(function(c){return $APP.Te(x3.g(c),b)?c:null},j5.g(a))};
y3a=function(a,b){if(e5(b)){var c=p5(a,b);if(null==c)return null;a=$APP.v(n5.g(c));if(null==a)return null;if(null==$APP.le(n5.g(c)))return b=$APP.C.h(x3.g(c),b),a[b]}return null};z3a=function(a,b){return $APP.mn.h(function(c){var d=y3a(a,c);return $APP.l(d)?d:c},b)};
A3a=function(a,b){if(null!=a?$APP.xd===a.zi||(a.Jd?0:$APP.Jb(u1,a)):$APP.Jb(u1,a)){var c=$APP.A.j(b,0,null),d=$APP.A.j(b,1,null),e=$APP.A.j(b,2,null),f=$APP.A.j(b,3,null);c=n3a(c)||f5(c)?r2(a,c):c;e=$APP.l($APP.l(e)?f5(d)&&q2(a,d)&&(n3a(e)||f5(e)):e)?r2(a,e):e;a=n3a(f)?r2(a,f):f;return $APP.gl.j(new $APP.H(null,4,5,$APP.I,[c,d,e,a],null),0,$APP.ce(b))}return b};
B3a=function(a,b,c){a=$APP.mn.h(function(d){return $APP.y.h(d,$APP.oK)||e5(d)?null:d},A3a(b,z3a(a,c)));b=l1(b,a);c=$APP.Fh.h($APP.Xf,$APP.Pg.h(function(d){var e=$APP.A.j(d,0,null);$APP.A.j(d,1,null);return e5(e)},$APP.fj.j($APP.Bw,c,new $APP.H(null,4,5,$APP.I,["e","a","v","tx"],null))));return new d5(c,b,null,null,null)};
C3a=function(a,b){a=$APP.Pg.h(function(d){a:for(var e=b;;){var f=d;if($APP.l($APP.l(f)?e:f)){f=$APP.v(d);var h=$APP.v(e);if($APP.y.h(h,$APP.oK)||e5(h)||$APP.y.h(f,h))d=$APP.w(d),e=$APP.w(e);else{d=!1;break a}}else{d=!0;break a}}return d},a);var c=$APP.Fh.h($APP.Xf,$APP.Pg.h(function(d){var e=$APP.A.j(d,0,null);$APP.A.j(d,1,null);return e5(e)},$APP.fj.j($APP.Bw,b,$APP.Rn.C())));return new d5(c,$APP.mn.h($APP.cf,a),null,null,null)};
D3a=function(a,b,c){return(null!=b?$APP.xd===b.Fj||(b.Jd?0:$APP.Jb(q0a,b)):$APP.Jb(q0a,b))?B3a(a,b,c):C3a(b,c)};q5=function(a,b){for(var c=$APP.Sg;;){var d=$APP.v(a);if(null==d)return $APP.wf.h(c,b);$APP.l($APP.$f(k3a(x3.g(b),x3.g(d))))?(a=$APP.w(a),b=o5(d,b)):(a=$APP.w(a),c=$APP.wf.h(c,d))}};E3a=function(a,b){var c=p5(a,b);if(null==c)return null;a=$APP.v(n5.g(c));null==a?b=null:(c=x3.g(c),b=c.g?c.g(b):c.call(null,b),b=a[b]);return b};
F3a=function(a,b){return $APP.pg(function(c){return $APP.Te(x3.g(a),c)},b)};G3a=function(a,b){var c=$APP.Pg.h(function(e){return F3a(e,b)},j5.g(a)),d=$APP.bf.h(r5,c);return new $APP.H(null,2,5,$APP.I,[$APP.Zm.j(a,j5,function(e){return $APP.as.h($APP.Fi(c),e)}),d],null)};
H3a=function(a,b,c,d){a=i5.g(a);b=x3.g(b);for(var e=$APP.ce(d),f=Array(e),h=Array(e),n=0;;)if(n<e){var t=$APP.A.h(d,n);if(t instanceof $APP.r){var q=$APP.C.h(a,t);null==q?h[n]=$APP.C.h(b,t):f[n]=q}else f[n]=t;n+=1}else break;return c===$APP.Bw?function(x){for(var z=f.slice(0),E=0;;)if(E<e){var F=h[E];null!=F&&(z[E]=x[F]);E+=1}else break;return $APP.sg.h(c,z)}:function(x){for(var z=0;;)if(z<e){var E=h[z];null!=E&&(f[z]=x[E]);z+=1}else break;return $APP.sg.h(c,f)}};
I3a=function(a,b){var c=$APP.A.j(b,0,null);c=$APP.u(c);var d=$APP.v(c),e=$APP.w(c),f=function(){var t=$APP.C.h(V1a,d);if($APP.l(t))return t;t=E3a(a,d);if($APP.l(t))return t;if($APP.l(null))return null;if(null==p5(a,d))throw $APP.Zl.h(["Unknown predicate '",$APP.zj.l($APP.B([d]))," in ",$APP.zj.l($APP.B([b]))].join(""),new $APP.k(null,3,[$APP.Hn,s5,$APP.ZA,b,$APP.Uo,d],null));return null}();c=G3a(a,$APP.Pg.h($APP.Ad,e));var h=$APP.A.j(c,0,null),n=$APP.A.j(c,1,null);c=$APP.l(f)?function(){var t=H3a(h,
n,f,e);return $APP.Zm.j(n,n5,function(q){return $APP.Pg.h(t,q)})}():$APP.vi.j(n,n5,$APP.Sg);return $APP.Zm.D(h,j5,$APP.wf,c)};
J3a=function(a,b){var c=$APP.A.j(b,0,null);c=$APP.u(c);var d=$APP.v(c),e=$APP.w(c);c=$APP.A.j(b,1,null);var f=u4(c),h=function(){var q=$APP.C.h(V1a,d);if($APP.l(q))return q;q=E3a(a,d);if($APP.l(q))return q;if($APP.l(null))return null;if(null==p5(a,d))throw $APP.Zl.h(["Unknown function '",$APP.zj.l($APP.B([d]))," in ",$APP.zj.l($APP.B([b]))].join(""),new $APP.k(null,3,[$APP.Hn,s5,$APP.ZA,b,$APP.Uo,d],null));return null}();c=G3a(a,$APP.Pg.h($APP.Ad,e));var n=$APP.A.j(c,0,null),t=$APP.A.j(c,1,null);
c=$APP.l(h)?function(){var q=H3a(n,t,h,e),x=function(){return function F(E){return new $APP.Jf(null,function(){for(var N=E;;)if(N=$APP.u(N)){if($APP.Ge(N)){var S=$APP.cd(N),Y=$APP.ce(S),aa=$APP.Lf(Y);a:for(var ca=0;;)if(ca<Y){var ha=$APP.pe(S,ca),la=q(ha);null!=la&&$APP.Pf(aa,r5.h(new d5(x3.g(t),new $APP.H(null,1,5,$APP.I,[ha],null),null,null,null),g5(f,la)));ca+=1}else{S=!0;break a}return S?$APP.Of($APP.Qf(aa),F($APP.dd(N))):$APP.Of($APP.Qf(aa),null)}aa=$APP.v(N);S=q(aa);if(null!=S)return $APP.zf(r5.h(new d5(x3.g(t),
new $APP.H(null,1,5,$APP.I,[aa],null),null,null,null),g5(f,S)),F($APP.Ld(N)));N=$APP.Ld(N)}else return null},null,null)}(n5.g(t))}();return $APP.we(x)?r5.h(t,q3a(f)):$APP.bf.h(t5,x)}():r5.h($APP.vi.j(t,n5,$APP.Sg),q3a(f));return $APP.Zm.D(n,j5,q5,c)};
K3a=function(a,b){if($APP.Be(b)){var c=m3a($APP.v(b))?$APP.he(b):$APP.v(b);if(c instanceof $APP.r){if(e5(c)||$APP.Te(new $APP.Bi(null,new $APP.k(null,6,[$APP.dt,null,$APP.fC,null,U2a,null,R4,null,$APP.it,null,$APP.oK,null],null),null),c))return!1;if($APP.Te($APP.QH.g(a),c))return!0;throw $APP.Zl.h(["Unknown rule '",$APP.zj.l($APP.B([c]))," in ",$APP.zj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.Hn,s5,$APP.ZA,b],null));}}return!1};
M3a=function(a,b){var c=$APP.u(a),d=$APP.v(c),e=$APP.w(c),f=$APP.Cj.h(L3a,$APP.Rd),h=$APP.C.h($APP.QH.g(b),d);return function q(t){return new $APP.Jf(null,function(){for(;;){var x=$APP.u(t);if(x){var z=x;if($APP.Ge(z)){var E=$APP.cd(z),F=$APP.ce(E),N=$APP.Lf(F);return function(){for(var ma=0;;)if(ma<F){var va=$APP.pe(E,ma),da=va,na=$APP.u(da),ra=$APP.v(na),ta=$APP.w(na),Ia=ra,Ra=$APP.u(Ia),Wa=$APP.v(Ra),$a=$APP.w(Ra),Xa=Wa,eb=$a,db=ta,fb=$APP.Ii(eb,e);$APP.Pf(N,$APP.wt(function(qb,Eb,Vb,$b,wc,hc,
Dd,je,Zf,tg,ph,Ui,hg,qh,Ef,Id,Ej,mj,Vi,rc,ld,ye,ug,sf,yi,Jg){return function($d){if(e5($d)){var qg=hg.g?hg.g($d):hg.call(null,$d);return null==qg?$APP.lj.g([$APP.Hi($d),"__auto__",$APP.m.g(Jg)].join("")):qg}return $d}}(ma,da,na,ra,ta,Ia,Ra,Wa,$a,Xa,eb,db,fb,va,E,F,N,z,x,a,c,d,e,d,e,f,h),db));ma+=1}else return!0}()?$APP.Of($APP.Qf(N),q($APP.dd(z))):$APP.Of($APP.Qf(N),null)}var S=$APP.v(z),Y=S,aa=$APP.u(Y),ca=$APP.v(aa),ha=$APP.w(aa),la=ca,ua=$APP.u(la),pa=$APP.v(ua),W=$APP.w(ua),R=pa,V=W,U=ha,X=$APP.Ii(V,
e);return $APP.zf($APP.wt(function(ma,va,da,na,ra,ta,Ia,Ra,Wa,$a,Xa,eb,db,fb,qb,Eb,Vb,$b,wc,hc,Dd,je){return function(Zf){if(e5(Zf)){var tg=eb.g?eb.g(Zf):eb.call(null,Zf);return null==tg?$APP.lj.g([$APP.Hi(Zf),"__auto__",$APP.m.g(je)].join("")):tg}return Zf}}(Y,aa,ca,ha,la,ua,pa,W,R,V,U,X,S,z,x,a,c,d,e,d,e,f,h),U),q($APP.Ld(z)))}return null}},null,null)}(h)};
N3a=function(a,b){a=$APP.as.h(function(c){var d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);return $APP.y.h(d,c)},$APP.fj.j($APP.Bw,a,b));return new $APP.H(null,2,5,$APP.I,[$APP.fj.h($APP.v,a),$APP.fj.h($APP.he,a)],null)};
O3a=function(a,b){a=$APP.u(a);var c=$APP.v(a),d=$APP.w(a);return function h(f){return new $APP.Jf(null,function(){for(;;){var n=$APP.u(f);if(n){if($APP.Ge(n)){var t=$APP.cd(n),q=$APP.ce(t),x=$APP.Lf(q);a:for(var z=0;;)if(z<q){var E=$APP.pe(t,z),F=N3a(d,E);E=$APP.A.j(F,0,null);F=$APP.A.j(F,1,null);$APP.Pf(x,new $APP.H(null,1,5,$APP.I,[$APP.K.l(new $APP.H(null,1,5,$APP.I,[u5],null),E,$APP.B([F]))],null));z+=1}else{t=!0;break a}return t?$APP.Of($APP.Qf(x),h($APP.dd(n))):$APP.Of($APP.Qf(x),null)}x=$APP.v(n);
t=N3a(d,x);x=$APP.A.j(t,0,null);t=$APP.A.j(t,1,null);return $APP.zf(new $APP.H(null,1,5,$APP.I,[$APP.K.l(new $APP.H(null,1,5,$APP.I,[u5],null),x,$APP.B([t]))],null),h($APP.Ld(n)))}return null}},null,null)}($APP.C.h(b,c))};v5=function(a){var b=$APP.Bj.g($APP.Sg);$APP.wt(function(c){$APP.l(e5.g?e5.g(c):e5.call(null,c))&&$APP.Cj.j(b,$APP.wf,c);return c},a);return $APP.p(b)};
P3a=function(a,b){function c(e){e=$APP.A.j(e,0,null);e=$APP.u(e);$APP.v(e);e=$APP.w(e);return $APP.og(d,e)}var d=$APP.Fi(v5(a));return new $APP.H(null,2,5,$APP.I,[$APP.Pg.h(c,b),$APP.as.h(c,b)],null)};
R3a=function(a,b){function c(ta){return $APP.pg(function(Ia){return $APP.we(n5.g(Ia))},j5.g(ta))}function d(ta,Ia){return $APP.bf.j(w5,ta,Ia)}for(var e=$APP.Pg.h(e5,b),f=$APP.Ii(e,$APP.Rn.C()),h=new $APP.D(null,new $APP.k(null,5,[x5,$APP.Sg,y5,a,$APP.oP,new $APP.H(null,1,5,$APP.I,[b],null),z5,$APP.Xf,A5,$APP.Xf],null),null,1,null),n=new d5(f,$APP.Sg,null,null,null);;){var t=$APP.v(h);if(null==t)return n;var q=t,x=$APP.Ri(function(){return function(ta){return!K3a(a,ta)}}(h,n,q,t,e,f,d,c),$APP.oP.g(q)),
z=$APP.A.j(x,0,null),E=$APP.A.j(x,1,null),F=$APP.u(E),N=$APP.v(F),S=$APP.w(F),Y=N,aa=S;if(null==Y){b=d(y5.g(q),z);b=E_a($APP.df,B5?B5(b,e):Q3a.call(null,b,e));var ca=new d5(f,b,null,null,null);b=$APP.w(h);ca=t5(n,ca);h=b;n=ca}else{var ha=Y,la=$APP.u(ha),ua=$APP.v(la),pa=$APP.w(la),W=ua,R=pa,V=O3a(Y,z5.g(q)),U=P3a($APP.K.h(x5.g(q),z),$APP.K.h(V,A5.g(q))),X=$APP.A.j(U,0,null),ma=$APP.A.j(U,1,null);if($APP.l($APP.pg(function(){return function(ta){return $APP.y.h(ta,new $APP.H(null,1,5,$APP.I,[$APP.J(u5)],
null))}}(h,n,ha,la,ua,pa,W,R,V,U,X,ma,x,z,E,F,N,S,Y,aa,q,t,e,f,d,c),X)))b=$APP.w(h),ca=n,h=b,n=ca;else{var va=$APP.K.h(z,X),da=d(y5.g(q),va);if($APP.l(c(da)))b=$APP.w(h),ca=n,h=b,n=ca;else{var na=$APP.vi.j(z5.g(q),W,$APP.wf.h($APP.C.j(z5.g(q),W,$APP.Sg),R)),ra=M3a(Y,a);b=$APP.K.h(function(){return function(ta,Ia,Ra,Wa,$a,Xa,eb,db,fb,qb,Eb,Vb,$b,wc,hc,Dd,je,Zf,tg,ph,Ui,hg,qh,Ef,Id,Ej,mj,Vi,rc,ld){return function sf(ug){return new $APP.Jf(null,function(yi,Jg,$d,qg,Yk,fh,hi,Km,Fj,fp,Gj,Zn,nj,gp,De,Zk,
$n,Ql,zi,vg,wg,md,Ue,Cc){return function(){for(;;){var Ff=$APP.u(ug);if(Ff){if($APP.Ge(Ff)){var hp=$APP.cd(Ff),Os=$APP.ce(hp),Gf=$APP.Lf(Os);a:for(var ao=0;;)if(ao<Os){var mv=$APP.pe(hp,ao);$APP.Pf(Gf,new $APP.k(null,5,[x5,Yk,y5,fh,$APP.oP,$APP.Fh.j($APP.Sg,$APP.sj,$APP.B([mv,Cc])),z5,$d,A5,Zk],null));ao+=1}else{hp=!0;break a}return hp?$APP.Of($APP.Qf(Gf),sf($APP.dd(Ff))):$APP.Of($APP.Qf(Gf),null)}Gf=$APP.v(Ff);return $APP.zf(new $APP.k(null,5,[x5,Yk,y5,fh,$APP.oP,$APP.Fh.j($APP.Sg,$APP.sj,$APP.B([Gf,
Cc])),z5,$d,A5,Zk],null),sf($APP.Ld(Ff)))}return null}}}(ta,Ia,Ra,Wa,$a,Xa,eb,db,fb,qb,Eb,Vb,$b,wc,hc,Dd,je,Zf,tg,ph,Ui,hg,qh,Ef,Id,Ej,mj,Vi,rc,ld),null,null)}}(h,n,na,ra,va,da,ha,la,ua,pa,W,R,V,U,X,ma,x,z,E,F,N,S,Y,aa,q,t,e,f,d,c)(ra)}(),$APP.w(h));ca=n;h=b;n=ca}}}}};S3a=function(a,b){var c=$APP.A.j(b,0,null),d=$APP.A.j(b,1,null),e=$APP.A.j(b,2,null);b=$APP.A.j(b,3,null);c=e5(c)?$APP.wf.h($APP.Ci,c):$APP.Ci;c=e5(b)?$APP.wf.h(c,b):c;return e5(e)&&!e5(d)&&q2(a,d)?$APP.wf.h(c,e):c};
C5=function(a,b){return $APP.vi.j(a,j5,$APP.qn.h(function(c){var d=$APP.$f($APP.wi(x3.g(c),b));return null==d?null:$APP.vi.j(c,x3,d)},j5.g(a)))};D5=function(a){return $APP.Fh.h($APP.Ci,$APP.Og.l(function(b){return $APP.ri(x3.g(b))},$APP.B([j5.g(a)])))};
E5=function(a,b,c){if($APP.gia(b,a))return null;a=$APP.Ww.h($APP.Fi(b),a);throw $APP.Zl.h(["Insufficient bindings: ",$APP.zj.l($APP.B([a]))," not bound in ",$APP.zj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.Hn,s5,$APP.ZA,c,$APP.iL,a],null));};
T3a=function(a,b,c){b=$APP.mn.h(function(d){return $APP.Ww.h($APP.Fi(v5(d)),a)},b);if($APP.l($APP.sg.h($APP.y,b)))return null;throw $APP.Zl.h(["All clauses in 'or' must use same set of free vars, had ",$APP.zj.l($APP.B([b]))," in ",$APP.zj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.Hn,s5,$APP.ZA,c,$APP.iL,b],null));};
U3a=function(a,b,c){for(var d=$APP.Fi($APP.as.h(a,b)),e=$APP.u(c),f=null,h=0,n=0;;)if(n<h){c=f.ca(null,n);var t=$APP.$f($APP.Ww.h(d,$APP.Fi(v5(c))));if(null!=t)throw e=t,$APP.su.l($APP.B([c,a,b,d])),$APP.Zl.h(["All clauses in 'or' must use same set of free vars, had ",$APP.zj.l($APP.B([e]))," not bound in ",$APP.zj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.Hn,s5,$APP.ZA,c,$APP.iL,e],null));n+=1}else if(c=$APP.u(e)){e=c;if($APP.Ge(e))f=$APP.cd(e),e=$APP.dd(e),c=f,h=$APP.ce(f),f=c;else{c=$APP.v(e);
f=$APP.$f($APP.Ww.h(d,$APP.Fi(v5(c))));if(null!=f)throw e=f,$APP.su.l($APP.B([c,a,b,d])),$APP.Zl.h(["All clauses in 'or' must use same set of free vars, had ",$APP.zj.l($APP.B([e]))," not bound in ",$APP.zj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.Hn,s5,$APP.ZA,c,$APP.iL,e],null));e=$APP.w(e);f=null;h=0}n=0}else return null};V3a=function(a,b){var c=l5;l5=$APP.C.h(i5.g(a),G2a);try{return $APP.bf.j(F5,a,b)}finally{l5=c}};
W3a=function(a,b,c,d){return $APP.uj($APP.kq.h($APP.fj.g(function(e){return $APP.uj($APP.fj.g(function(f){for(var h=$APP.Ob(e),n=0;;)if(n<c){var t=d[n];null!=t&&(h[n]=f[t]);n+=1}else break;return h}),n5.g(b))}),$APP.sj),a)};Q3a=function(a){switch(arguments.length){case 2:return B5(arguments[0],arguments[1]);case 3:return X3a(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};
B5=function(a,b){a=j5.g(a);return X3a(new $APP.H(null,1,5,$APP.I,[Array($APP.ce(b))],null),a,b)};X3a=function(a,b,c){for(;;){var d=$APP.v(b);if(null==d)return a;if($APP.we(n5.g(d)))return $APP.Sg;var e=$APP.wi(x3.g(d),c);if($APP.we(e))b=$APP.w(b);else{e=$APP.cf($APP.fj.h(function(h,n,t,q){return function(x){return $APP.C.h(q,x)}}(a,b,c,e,d),c));var f=$APP.ce(c);a=W3a(a,d,f,e);b=$APP.w(b)}}};Y3a=function(a,b){return $APP.Fh.j($APP.Ci,$APP.fj.g($APP.df),B5(a,b))};
G5=function(a,b){if(null!=a&&null!=a.Mg)a=a.Mg(a,b);else{var c=G5[$APP.fa(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=G5._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.Lb("IContextResolve.-context-resolve",a);}return a};
Z3a=function(a,b,c){return $APP.mn.D(function(d,e,f){if(D2a(d)){e=G5($APP.En.g(d),b);d=$APP.fj.h(function(n){return G5(n,b)},$APP.Gi($APP.an.g(d)));var h=$APP.fj.h(function(n){return $APP.A.h(n,f)},c);return $APP.sg.h(e,$APP.K.h(d,new $APP.H(null,1,5,$APP.I,[h],null)))}return e},a,$APP.v(c),$APP.Rn.C())};$3a=function(a){var b=$APP.yg(D2a);return $APP.as.h($APP.zb,$APP.fj.j(function(c,d){return $APP.l(b.g?b.g(c):b.call(null,c))?d:null},a,$APP.Rn.C()))};
a4a=function(a,b,c){var d=$3a(a);return function h(f){return new $APP.Jf(null,function(){for(;;){var n=$APP.u(f);if(n){if($APP.Ge(n)){var t=$APP.cd(n),q=$APP.ce(t),x=$APP.Lf(q);a:for(var z=0;;)if(z<q){var E=$APP.pe(t,z);$APP.A.j(E,0,null);E=$APP.A.j(E,1,null);$APP.Pf(x,Z3a(a,b,E));z+=1}else{t=!0;break a}return t?$APP.Of($APP.Qf(x),h($APP.dd(n))):$APP.Of($APP.Qf(x),null)}x=$APP.v(n);$APP.A.j(x,0,null);x=$APP.A.j(x,1,null);return $APP.zf(Z3a(a,b,x),h($APP.Ld(n)))}return null}},null,null)}($APP.Ij(function(f){return $APP.fj.h(function(h){return $APP.A.h(f,
h)},d)},c))};b4a=function(a,b){return $APP.bf.j(function(c,d){return $APP.wf.h(c,a.g?a.g(d):a.call(null,d))},$APP.oe(b),b)};c4a=function(a,b){var c=b5.g(a),d=$APP.Rn.h(0,$APP.ce(c));return b4a(function(e){return $APP.bf.j(function(f,h){return $APP.vi.j(f,$APP.A.h(c,h),$APP.A.h(e,h))},$APP.Xf,d)},b)};
d4a=function(a,b,c){if(null!=a&&null!=a.Ng)a=a.Ng(a,b,c);else{var d=d4a[$APP.fa(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=d4a._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.Lb("IPostProcess.-post-process",a);}return a};
e4a=function(a,b,c){var d=function(){return function h(f){return new $APP.Jf(null,function(){for(;;){var n=$APP.u(f);if(n){if($APP.Ge(n)){var t=$APP.cd(n),q=$APP.ce(t),x=$APP.Lf(q);return function(){for(var E=0;;)if(E<q){var F=$APP.pe(t,E),N=x;if(E2a(F)){var S=G5($APP.Ll.g(F),b);F=G5(o3.g(F),b);S=S3(S,F,null)}else S=null;N.add(S);E+=1}else return!0}()?$APP.Of($APP.Qf(x),h($APP.dd(n))):$APP.Of($APP.Qf(x),null)}var z=$APP.v(n);return $APP.zf(E2a(z)?function(){var E=G5($APP.Ll.g(z),b),F=G5(o3.g(z),b);
return S3(E,F,null)}():null,h($APP.Ld(n)))}return null}},null,null)}(a)}();return function h(f){return new $APP.Jf(null,function(){for(;;){var n=$APP.u(f);if(n){var t=n;if($APP.Ge(t)){var q=$APP.cd(t),x=$APP.ce(q),z=$APP.Lf(x);return function(){for(var F=0;;)if(F<x){var N=$APP.pe(q,F);$APP.Pf(z,$APP.mn.j(function(){return function(S,Y){return $APP.l(S)?Q3(S,Y):Y}}(F,N,q,x,z,t,n,d),d,N));F+=1}else return!0}()?$APP.Of($APP.Qf(z),h($APP.dd(t))):$APP.Of($APP.Qf(z),null)}var E=$APP.v(t);return $APP.zf($APP.mn.j(function(){return function(F,
N){return $APP.l(F)?Q3(F,N):N}}(E,t,n,d),d,E),h($APP.Ld(t)))}return null}},null,null)}(c)};f4a=function(a,b){if(a instanceof H1){var c=a.fb,d=a.yc;return new H1(d,function(e){var f=c.g?c.g(e):c.call(null,e);return $APP.l(f)?b.h?b.h(d,e):b.call(null,d,e):f},$APP.Bj.g(0),null,null,null)}return new H1(a,function(e){return b.h?b.h(a,e):b.call(null,a,e)},$APP.Bj.g(0),null,null,null)};g4a=function(a,b,c,d){return q1(a,b,c,d)};h4a=function(a){return $APP.p(a)};i4a=function(a){return f0a($APP.z1.g(a))};
H5=function H5(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return H5.l(0<c.length?new $APP.Fd(c.slice(0),0,null):null)};H5.l=function(a){return $APP.xca(a,$APP.vi.j($APP.tb(),$APP.lb,!1))};H5.A=0;H5.F=function(a){return this.l($APP.u(a))};j4a=new $APP.r("datascript.core","squuid","datascript.core/squuid",-408746813,null);J1=new $APP.G("db.unique","identity","db.unique/identity",1675950722);L2=new $APP.G("db","retract","db/retract",-1549825231);
k4a=new $APP.r("datascript.db","IDatom","datascript.db/IDatom",293960966,null);l4a=new $APP.G(null,"-store","-store",86010660);m4a=new $APP.G(null,"incomparable","incomparable",1634329662);n4a=new $APP.r(null,"datom-tx","datom-tx",1349109608,null);f3a=new $APP.G(null,"strs","strs",1175537277);C0a=new $APP.G("db.cardinality","one","db.cardinality/one",1428352190);E2=new $APP.G("transact","upsert","transact/upsert",412688078);Y4=new $APP.G(null,"qreturn-map","qreturn-map",1841215994);
i1a=new $APP.G("transact","schema","transact/schema",1426844139);o4a=new $APP.r(null,"datom-added","datom-added",-363961980,null);p4a=new $APP.r(null,"entity?","entity?",555338193,null);q4a=new $APP.r("datascript.core","filter","datascript.core/filter",-1276765471,null);I5=new $APP.G(null,"acc","acc",838566312);r4a=new $APP.G("lookup-ref","unique","lookup-ref/unique",-960647710);U4=new $APP.G("parser","rule","parser/rule",-464044566);
s4a=new $APP.r("datascript.impl.entity","lookup-entity","datascript.impl.entity/lookup-entity",243995956,null);t4a=new $APP.r("datascript.core","q","datascript.core/q",2106686416,null);e3=new $APP.G(null,"db-last-stored","db-last-stored",-2068760702);u4a=new $APP.r(null,"added","added",-596784081,null);H2a=new $APP.G("parser","find","parser/find",-801023103);v4a=new $APP.r(null,"entity","entity",1189561251,null);B3=new $APP.G(null,"wildcard?","wildcard?",-686044101);
H2=new $APP.G("datascript.db","tx-redundant","datascript.db/tx-redundant",-1117921977);w4a=new $APP.r("datascript.storage","restore-impl","datascript.storage/restore-impl",1300814044,null);x4a=new $APP.r(null,"tail-addr","tail-addr",1565233666,null);y4a=new $APP.r("datascript.core","restore","datascript.core/restore",-655548009,null);a5=new $APP.G("parser","query","parser/query",1877320671);z4a=new $APP.r(null,"_opts","_opts",1634624069,null);z3=new $APP.G(null,"last-attr","last-attr",-526000708);
Y0a=new $APP.G(null,"conflict","conflict",1978796605);A4a=new $APP.r(null,"G__40700","G__40700",610810393,null);B4a=new $APP.G("db","fn","db/fn",-1175261470);C4a=new $APP.r("datascript.core","touch","datascript.core/touch",632058772,null);D4a=new $APP.r(null,"nbb.impl.datascript","nbb.impl.datascript",-1651830048,null);p3=new $APP.G(null,"recursion-limit","recursion-limit",52345639);E4a=new $APP.r("datascript.storage","-restore","datascript.storage/-restore",708714346,null);
M1=new $APP.G("db.type","ref","db.type/ref",-1728373079);F4a=new $APP.r(null,"variance","variance",-1522424942,null);G4a=new $APP.r("datascript.core","reset-conn!","datascript.core/reset-conn!",-458464444,null);H4a=new $APP.r("datascript.core","with","datascript.core/with",-1124098173,null);I4a=new $APP.G(null,"-restore","-restore",-515892319);F2=new $APP.G("db","id","db/id",-1388397098);J4a=new $APP.G("db.fn","retractAttribute","db.fn/retractAttribute",937402164);
K4a=new $APP.r("datascript.db","datom-added","datascript.db/datom-added",-560586371,null);L4a=new $APP.G("lookup-ref","syntax","lookup-ref/syntax",-317304012);M4a=new $APP.r("datascript.storage","serializable-datom","datascript.storage/serializable-datom",33076367,null);N4a=new $APP.r("nbb.impl.datascript","-store","nbb.impl.datascript/-store",2093703726,null);O4a=new $APP.r("datascript.core","db","datascript.core/db",667170070,null);J5=new $APP.r(null,"addr","addr",42880790,null);
P4a=new $APP.r(null,"-index-range","-index-range",898114142,null);Q4a=new $APP.r(null,"settings","settings",-1098290894,null);f2=new $APP.G(null,"tx-data","tx-data",934159761);z5=new $APP.G(null,"used-args","used-args",23596256);R4a=new $APP.r("datascript.core","rseek-datoms","datascript.core/rseek-datoms",-1377097474,null);S4a=new $APP.r("nbb.impl.datascript","-restore","nbb.impl.datascript/-restore",1970738477,null);T4a=new $APP.r(null,"make-storage-adapter","make-storage-adapter",937815346,null);
$4=new $APP.G(null,"qwhere","qwhere",-1645067378);Q1=new $APP.G("db","ident","db/ident",-737096);g2=new $APP.G(null,"tempids","tempids",1767509089);W4=new $APP.G(null,"qfind","qfind",1529332972);U4a=new $APP.r("datascript.core","serializable","datascript.core/serializable",-630048076,null);y5=new $APP.G(null,"prefix-context","prefix-context",-1269613591);V4a=new $APP.r(null,"store-impl!","store-impl!",901017629,null);L1=new $APP.G("db.cardinality","many","db.cardinality/many",772806234);
B2=new $APP.G("datascript.db","queued-tuples","datascript.db/queued-tuples",-762852029);W4a=new $APP.r("datascript.core","pull","datascript.core/pull",-1213970902,null);X4a=new $APP.r("datascript.impl.entity","entity?","datascript.impl.entity/entity?",1686472137,null);e2=new $APP.G(null,"db-after","db-after",-571884666);N4=new $APP.G("parser","where","parser/where",-966053850);Y4a=new $APP.r(null,"restore-impl","restore-impl",1420181842,null);K5=new $APP.G(null,"seen","seen",-518999789);
Z4a=new $APP.r("clojure.string","starts-with?","clojure.string/starts-with?",656256322,null);w0a=new $APP.G("db.unique","value","db.unique/value",276903088);$4a=new $APP.G("db","tupleTypes","db/tupleTypes",1512507626);d1a=new $APP.G("db.fn","retractEntity","db.fn/retractEntity",-1423535441);L5=new $APP.r(null,"attr","attr",1036399174,null);a5a=new $APP.r(null,"storage-adapter","storage-adapter",-1255219640,null);b5a=new $APP.G("entity-id","missing","entity-id/missing",1234588374);
c5a=new $APP.r("datascript.storage","storage-adapter","datascript.storage/storage-adapter",-1942259762,null);R4=new $APP.r(null,"or-join","or-join",591375469,null);d5a=new $APP.G("db.pull","reverse","db.pull/reverse",1999788297);e5a=new $APP.r(null,"db-from-reader","db-from-reader",1527469533,null);f5a=new $APP.r(null,"println-str","println-str",-2049216703,null);i3a=new $APP.G("parser","with","parser/with",-386255821);g5a=new $APP.r(null,"missing?","missing?",-1710383910,null);
h5a=new $APP.r("clojure.string","ends-with?","clojure.string/ends-with?",-745964149,null);i5a=new $APP.r("datascript.core","reset-schema!","datascript.core/reset-schema!",-331506672,null);j5a=new $APP.r("datascript.core","transact!","datascript.core/transact!",1506351773,null);r1=new $APP.G(null,"avet","avet",1383857032);M5=new $APP.r(null,"schema","schema",58529736,null);j1a=new $APP.G(null,"entity","entity",-450970276);k5a=new $APP.r(null,"serializable-datom","serializable-datom",451141133,null);
l5a=new $APP.r("datascript.db","datom-tx","datascript.db/datom-tx",2084964209,null);M2a=new $APP.G("parser","in","parser/in",1617442048);E0a=new $APP.G(null,"init-db","init-db",1595181278);m5a=new $APP.G(null,"addresses","addresses",-559529694);W0=new $APP.G(null,"cmp","cmp",575646375);G1=new $APP.G(null,"hash","hash",-13781596);n5a=new $APP.r(null,"with","with",104234651,null);t3=new $APP.G(null,"multival?","multival?",1072388383);Q1a=new $APP.G("parser","pull","parser/pull",-2147427204);
N5=new $APP.r(null,"tx","tx",2107161945,null);o5a=new $APP.r("datascript.core","store","datascript.core/store",1386427333,null);d3=new $APP.G(null,"tx-tail","tx-tail",1116487556);p5a=new $APP.r(null,"reset-conn!","reset-conn!",1315177148,null);O4=new $APP.G(null,"rule-vars","rule-vars",1665972520);V1=new $APP.G("db","valueType","db/valueType",1827971944);N0a=new $APP.G("retract","schema","retract/schema",1546437764);A1=new $APP.G(null,"aevt","aevt",-585148059);
q5a=new $APP.G("datascript","db","datascript/db",-1190971692);O5=new $APP.r(null,"-store","-store",1726542187,null);r5a=new $APP.G(null,"thaw-fn","thaw-fn",-240544261);P5=new $APP.G(null,"binding","binding",539932593);X0a=new $APP.G(null,"assertion","assertion",-1645134882);$APP.a2=new $APP.G(null,"datoms","datoms",-290874434);F2a=new $APP.r(null,"pull","pull",779986722,null);X0=new $APP.G(null,"set-metadata","set-metadata",1293757705);
s5a=new $APP.r("datascript.core","conn-from-datoms","datascript.core/conn-from-datoms",253878827,null);t5a=new $APP.r(null,"untuple","untuple",-606149900,null);Q5=new $APP.r(null,"c0","c0",2105080311,null);u5a=new $APP.r(null,"index-range","index-range",1044940937,null);u5=new $APP.r(null,"-differ?","-differ?",1465687357,null);N1=new $APP.G("db","isComponent","db/isComponent",423352398);R5=new $APP.r(null,"db","db",-1661185010,null);v5a=new $APP.r(null,"sample","sample",1719555128,null);
S5=new $APP.r(null,"datom","datom",1268975437,null);w5a=new $APP.G(null,"serialize","serialize",-69216574);O1=new $APP.G("db","tupleAttrs","db/tupleAttrs",250080092);q3=new $APP.G(null,"recursive?","recursive?",1340075244);x5a=new $APP.r(null,"conn","conn",1918841190,null);y5a=new $APP.G(null,"thaw-kw","thaw-kw",1076733097);A5=new $APP.G(null,"pending-guards","pending-guards",-1255527308);z5a=new $APP.G("query","binding","query/binding",698240489);
r1a=new $APP.G(null,"avet-metadata","avet-metadata",1556019837);d3a=new $APP.G(null,"return-map","return-map",1620104901);A5a=new $APP.r("datascript.core","seek-datoms","datascript.core/seek-datoms",1389812273,null);n5=new $APP.G(null,"tuples","tuples",-676032639);B5a=new $APP.r("datascript.core","settings","datascript.core/settings",273729994,null);T5=new $APP.G(null,"branches","branches",-1240337268);
C5a=new $APP.r("datascript.storage","maybe-adapt-storage","datascript.storage/maybe-adapt-storage",-1480358933,null);U5=new $APP.r(null,"datoms","datoms",1349657093,null);D5a=new $APP.G("transact","cas","transact/cas",816687170);E5a=new $APP.r("clojure.string","blank?","clojure.string/blank?",1772874244,null);F5a=new $APP.G(null,"listeners","listeners",394544445);G5a=new $APP.r(null,"validate-schema","validate-schema",758884380,null);$APP.z1=new $APP.G(null,"eavt","eavt",-666437073);
B1=new $APP.G(null,"max-eid","max-eid",2134868075);H5a=new $APP.r("datascript.storage","store","datascript.storage/store",-769865397,null);I5a=new $APP.r("datascript.core","index-range","datascript.core/index-range",-1484576383,null);J5a=new $APP.G("db","retractEntity","db/retractEntity",-1452737935);K5a=new $APP.r("datascript.core","listen!","datascript.core/listen!",1659161258,null);T1=new $APP.G(null,"attribute","attribute",-2074029119);$APP.y1=new $APP.G(null,"schema","schema",-1582001791);
L5a=new $APP.r(null,"maybe-adapt-storage","maybe-adapt-storage",-554097303,null);M5a=new $APP.r("datascript.db","DB","datascript.db/DB",348347258,null);N5a=new $APP.r("datascript.storage","store-tail","datascript.storage/store-tail",-1145162646,null);O5a=new $APP.r("datascript.storage","-\x3eStorageAdapter","datascript.storage/-\x3eStorageAdapter",152620751,null);P5a=new $APP.r("datascript.db","Datom","datascript.db/Datom",1951800754,null);
V5=new $APP.G(null,"recursion-limits","recursion-limits",1762857814);a2a=new $APP.r(null,"...","...",-1926939749,null);n2a=new $APP.G(null,"freeze-kw","freeze-kw",391758233);P1=new $APP.G("db.type","tuple","db.type/tuple",938234914);Q5a=new $APP.r(null,"lookup-entity","lookup-entity",-936060612,null);K1=new $APP.G("db","index","db/index",-1531680669);p1a=new $APP.G(null,"max-addr","max-addr",1373100454);m2a=new $APP.G(null,"freeze-fn","freeze-fn",-575885995);
R5a=new $APP.r("datascript.core","db-with","datascript.core/db-with",-1263574350,null);B1a=new $APP.G(null,"skip-store?","skip-store?",-484019625);S5a=new $APP.r(null,"db-with-tail","db-with-tail",-1072910014,null);T5a=new $APP.r("datascript.impl.entity","Entity","datascript.impl.entity/Entity",920807502,null);d0a=new $APP.G(null,"ref-type","ref-type",-1367328851);I1=new $APP.G("db","unique","db/unique",329396388);U5a=new $APP.G("entity-id","syntax","entity-id/syntax",1921317045);
s1a=new $APP.G(null,"eavt-metadata","eavt-metadata",-1384819842);i5=new $APP.G(null,"sources","sources",-321166424);V5a=new $APP.G("datascript.db","flush-tuples","datascript.db/flush-tuples",-797350002);W5=new $APP.r(null,"delete-addrs","delete-addrs",742195107,null);q1a=new $APP.G(null,"aevt-metadata","aevt-metadata",-1844063817);h2=new $APP.G(null,"tx-meta","tx-meta",1159283194);W5a=new $APP.r(null,"pull-many","pull-many",1857679657,null);
X5a=new $APP.r(null,"conn-from-db","conn-from-db",-184109372,null);Y5a=new $APP.r(null,"ground","ground",-1460862835,null);Z5a=new $APP.r("datascript","Datom","datascript/Datom",-901340080,null);o3=new $APP.G(null,"pattern","pattern",242135423);r2a=new $APP.G("parser","rule-var","parser/rule-var",-1584354459);J2=new $APP.G("datascript.db","upserted-tempids","datascript.db/upserted-tempids",-1939648402);$5a=new $APP.r("datascript.core","create-conn","datascript.core/create-conn",-768042587,null);
a6a=new $APP.G(null,"new","new",-2085437848);s0a=new $APP.G(null,"index","index",-1531685915);b6a=new $APP.r("datascript.core","empty-db","datascript.core/empty-db",-807971396,null);c6a=new $APP.r(null,"stddev","stddev",775056588,null);z2=new $APP.G(null,"entity-id","entity-id",1485898093);d6a=new $APP.r(null,"store-tail","store-tail",-757879320,null);e6a=new $APP.G("db","cas","db/cas",-451542322);
f6a=new $APP.r("datascript.core","from-serializable","datascript.core/from-serializable",-1560031101,null);C1=new $APP.G(null,"max-tx","max-tx",1119558339);g6a=new $APP.G("db","tupleType","db/tupleType",448013354);y3=new $APP.G(null,"first-attr","first-attr",-1993039831);u3=new $APP.G(null,"ref?","ref?",1932693720);h6a=new $APP.r(null,"sum","sum",1777518341,null);X5=new $APP.G(null,"attr","attr",-604132353);R3=new $APP.G(null,"visitor","visitor",-1026865865);
Y5=new $APP.G(null,"elements","elements",657646735);i6a=new $APP.G("datascript.impl.entity","nf","datascript.impl.entity/nf",-953741353);s5=new $APP.G("query","where","query/where",-1935159429);j6a=new $APP.r("datascript.storage","-store","datascript.storage/-store",-1879938067,null);D2=new $APP.G(null,"context","context",-830191113);k6a=new $APP.r("datascript.db","validate-schema","datascript.db/validate-schema",-783030261,null);
l6a=new $APP.r("datascript.storage","store-impl!","datascript.storage/store-impl!",1553932187,null);m6a=new $APP.r(null,"!\x3d","!\x3d",-201205829,null);j5=new $APP.G(null,"rels","rels",1770187185);n6a=new $APP.r("datascript.core","init-db","datascript.core/init-db",1493526573,null);d2=new $APP.G(null,"db-before","db-before",-553691536);o6a=new $APP.r(null,"adapter","adapter",444204808,null);N2=new $APP.G("datascript.db","value-tempids","datascript.db/value-tempids",244806162);
S0a=new $APP.G(null,"datom","datom",-371556090);e0a=new $APP.G(null,"strong","strong",269529E3);R0a=new $APP.G("transact","unique","transact/unique",-940992320);p6a=new $APP.r("datascript.db","datom","datascript.db/datom",399198004,null);q6a=new $APP.r(null,"seek-datoms","seek-datoms",-1423344839,null);r6a=new $APP.G(null,"old","old",-1825222690);s6a=new $APP.G("db.pull","attr","db.pull/attr",-533298746);Z2=new $APP.G(null,"db","db",993250759);
t6a=new $APP.r("datascript.core","conn-from-db","datascript.core/conn-from-db",1590561228,null);h2a=new $APP.G("db.pull","wildcard","db.pull/wildcard",116316031);E1=new $APP.G(null,"pull-patterns","pull-patterns",-343695048);u6a=new $APP.r("datascript.storage","restore","datascript.storage/restore",1486895617,null);v6a=new $APP.r(null,"init-db","init-db",-1059254491,null);w6a=new $APP.G(null,"internal-ctor","internal-ctor",937392560);
x6a=new $APP.r(null,"datom-from-reader","datom-from-reader",1334075127,null);h5=new $APP.G(null,"variable","variable",-281346492);y6a=new $APP.r(null,"restore-conn","restore-conn",-1560700042,null);z6a=new $APP.r(null,"transact!","transact!",817805717,null);A0a=new $APP.G("db","attrTuples","db/attrTuples",860541631);v3=new $APP.G(null,"component?","component?",407783990);G2a=new $APP.r(null,"$","$",-1580747756,null);I2a=new $APP.r(null,"aggregate","aggregate",-1142967327,null);
G2=new $APP.G("db","add","db/add",235286841);F1=new $APP.G(null,"pull-attrs","pull-attrs",-974863177);w1a=new $APP.G(null,"tx","tx",466630418);B2a=new $APP.G("parser","binding","parser/binding",-346395752);A6a=new $APP.r("datascript.db","datom-from-reader","datascript.db/datom-from-reader",2070683374,null);B6a=new $APP.r(null,"map-\x3eStorageAdapter","map-\x3eStorageAdapter",1827547664,null);Z5=new $APP.G(null,"element","element",1974019749);
C6a=new $APP.r("datascript.storage","map-\x3eStorageAdapter","datascript.storage/map-\x3eStorageAdapter",1938064274,null);$5=new $APP.r(null,"DB","DB",1622874957,null);D6a=new $APP.r(null,"get-some","get-some",409442058,null);x2=new $APP.G("datascript.db","reverse-tempids","datascript.db/reverse-tempids",1165824950);E6a=new $APP.r(null,"avg","avg",1837937727,null);a6=new $APP.G(null,"unfiltered-db","unfiltered-db",-1363720391);x3=new $APP.G(null,"attrs","attrs",-2090668713);
t0a=new $APP.G(null,"components","components",-1073188942);U0=new $APP.G(null,"storage","storage",1867247511);F6a=new $APP.r(null,"StorageAdapter","StorageAdapter",106942083,null);Z0=new $APP.G(null,"branching-factor","branching-factor",1903198601);G6a=new $APP.r(null,"create-conn","create-conn",2071410861,null);H6a=new $APP.r("datascript.storage","tail-addr","datascript.storage/tail-addr",1147435392,null);s3=new $APP.G(null,"xform","xform",-1725711008);
U2a=new $APP.r(null,"not-join","not-join",-645515756,null);X4=new $APP.G(null,"qwith","qwith",-45809392);h3a=new $APP.G(null,"with","with",-1536296876);I6a=new $APP.r("datascript.core","datoms","datascript.core/datoms",961250077,null);w2a=new $APP.G("parser","rule-vars","parser/rule-vars",-1493174969);J6a=new $APP.r("datascript.core","tx0","datascript.core/tx0",1432817831,null);K6a=new $APP.r("datascript.core","entity","datascript.core/entity",-1406213973,null);
A3=new $APP.G(null,"reverse-attrs","reverse-attrs",630097702);S1=new $APP.G("schema","validation","schema/validation",1178447161);t3a=new $APP.G(null,"got","got",-1674745710);b6=new $APP.r(null,"Datom","Datom",1208901035,null);r3=new $APP.G(null,"reverse?","reverse?",-1672868474);s3a=new $APP.G("query","inputs","query/inputs",1042810394);W1=new $APP.G("db","cardinality","db/cardinality",-104975659);L6a=new $APP.r(null,"serializable","serializable",1941609404,null);
M6a=new $APP.r("datascript.db","db-from-reader","datascript.db/db-from-reader",266573302,null);N6a=new $APP.r(null,"count-distinct","count-distinct",-1566572514,null);O6a=new $APP.r("datascript.storage","storage","datascript.storage/storage",-366769060,null);c6=new $APP.r(null,"datascript.impl.entity","datascript.impl.entity",1561405407,null);P6a=new $APP.r(null,"listen!","listen!",-115577950,null);Q6a=new $APP.r("datascript.storage","IStorage","datascript.storage/IStorage",247541567,null);
R6a=new $APP.r("datascript.storage","make-storage-adapter","datascript.storage/make-storage-adapter",521032624,null);S6a=new $APP.r(null,"db-with","db-with",233242042,null);d6=new $APP.G("db.fn","call","db.fn/call",-151594418);T6a=new $APP.r(null,"force?","force?",-815397094,null);x5=new $APP.G(null,"prefix-clauses","prefix-clauses",1294180028);U6a=new $APP.G("db","doc","db/doc",1913350069);V6a=new $APP.r(null,"touch","touch",-1158163300,null);
W6a=new $APP.r("datascript.core","datom","datascript.core/datom",-1596234155,null);L0a=new $APP.G("db","current-tx","db/current-tx",1600722132);X6a=new $APP.r(null,"reset-schema!","reset-schema!",1937111832,null);Y6a=new $APP.r("datascript.core","restore-conn","datascript.core/restore-conn",-877528562,null);Z6a=new $APP.r("datascript.storage","db-with-tail","datascript.storage/db-with-tail",-1156179008,null);$6a=new $APP.G(null,"operation","operation",-1267664310);
r0a=new $APP.G(null,"index-access","index-access",-1548960265);a7a=new $APP.r(null,"datascript.storage","datascript.storage",315947890,null);Z4=new $APP.G(null,"qin","qin",1372651151);e6=new $APP.r(null,"storage","storage",-787188258,null);b5=new $APP.G(null,"symbols","symbols",1211743);b7a=new $APP.r(null,"squuid","squuid",-1898207797,null);C3=new $APP.G(null,"fragment","fragment",826775688);c7a=new $APP.G("transaction","filtered","transaction/filtered",1699706605);
M2=new $APP.G("datascript.db","internal","datascript.db/internal",-249301114);D1=new $APP.G(null,"rschema","rschema",-1196134054);d7a=new $APP.r(null,"conn-from-datoms","conn-from-datoms",-1502002909,null);f6=new $APP.r(null,"addr+data-seq","addr+data-seq",1516602343,null);e7a=new $APP.r(null,"store","store",-1142205747,null);f7a=new $APP.r(null,"median","median",-2084869638,null);g7a=new $APP.r("clojure.string","includes?","clojure.string/includes?",-1842146260,null);
h7a=new $APP.r(null,"restore","restore",1907703951,null);i7a=new $APP.r(null,"empty-db","empty-db",1486862004,null);Z1=new $APP.G(null,"v","v",21465059);o2=new $APP.G("transact","syntax","transact/syntax",-299207078);g6=new $APP.r(null,"-restore","-restore",1124639208,null);e3a=new $APP.G(null,"find","find",496279456);A2=new $APP.G(null,"a","a",-2123407586);j7a=new $APP.r("datascript","DB","datascript/DB",-487332776,null);$1a=new $APP.G(null,"*","*",-1294732318);o4=new $APP.G(null,"free","free",801364328);
k7a=new $APP.G("db.fn","cas","db.fn/cas",-379352172);Y0=new $APP.G(null,"shift","shift",997140064);l7a=new $APP.r(null,"tx0","tx0",-4656209,null);Y2a=new $APP.G(null,"rule","rule",729973257);m7a=new $APP.r(null,"rseek-datoms","rseek-datoms",857788390,null);n7a=new $APP.r(null,"from-serializable","from-serializable",945516427,null);o7a=new $APP.r(null,"resolve-datom","resolve-datom",-294110827,null);p7a=new $APP.r(null,"datascript.storage.IStorage","datascript.storage.IStorage",348000814,null);
q7a=new $APP.r(null,"IStorage","IStorage",668238001,null);r7a=new $APP.r(null,"get-else","get-else",1312024065,null);n3=new $APP.G(null,"limit","limit",-1355822363);s7a=new $APP.r(null,"-\x3eStorageAdapter","-\x3eStorageAdapter",269379393,null);t7a=new $APP.r("datascript.core","pull-many","datascript.core/pull-many",394351057,null);h6=new $APP.r(null,"Entity","Entity",1953938502,null);var A_a=new $APP.Bi(null,new $APP.k(null,12,[K1,null,I1,null,V1,null,g6a,null,$4a,null,new $APP.G("db","noHistory","db/noHistory",-1975127444),null,N1,null,new $APP.G("db.install","_attribute","db.install/_attribute",1853441294),null,W1,null,U6a,null,Q1,null,O1,null],null),null),T0a=new $APP.Bi(null,new $APP.k(null,11,[K1,null,I1,null,V1,null,g6a,null,$4a,null,N1,null,W1,null,U6a,null,F2,null,Q1,null,O1,null],null),null),B0a=new $APP.Bi(null,new $APP.k(null,7,[new $APP.G("db.type","number","db.type/number",
-508502688),null,new $APP.G("db.type","instant","db.type/instant",-1024769248),null,P1,null,new $APP.G("db.type","uuid","db.type/uuid",1543195203),null,new $APP.G("db.type","string","db.type/string",1432572808),null,new $APP.G("db.type","keyword","db.type/keyword",205926793),null,M1,null],null),null);$APP.g=Z_.prototype;$APP.g.U=function(a,b,c){return D_a.j?D_a.j(this,b,c):D_a.call(null,this,b,c)};$APP.g.la=function(a,b){return $APP.ec(this.Pf,b)};$APP.g.ea=function(a,b){return $APP.gx(this.Pf,b,null)};$APP.g.O=function(a,b,c){return $APP.gx(this.Pf,b,c)};$APP.g.W=function(a,b,c){return $APP.Oc(this.Pf,b,c)};a0.prototype.X=function(a,b){return new a0(this.Db,this.$f,b)};a0.prototype.V=function(){return this.lm};
a0.prototype.Gj=function(a,b,c){a=$APP.C.j($APP.p(this.$f),b,null);if(null==a)return c=c.C?c.C():c.call(null),$APP.kd(this.$f,$APP.vi.j($APP.p(this.$f),b,c)),c;$APP.kd(this.$f,$APP.vi.j($APP.p(this.$f),b,a));return a};var i6=function i6(a){switch(arguments.length){case 0:return i6.C();case 1:return i6.g(arguments[0]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};i6.C=function(){return i6.g((new Date).getTime())};
i6.g=function(a){return $APP.ek([$APP.m.g(c0(a/1E3|0,8)),"-",$APP.m.g(c0($APP.Dj(65536),4)),"-",$APP.m.g(c0($APP.Dj(65536)&4095|16384,4)),"-",$APP.m.g(c0($APP.Dj(65536)&16383|32768,4)),"-",$APP.m.g(c0($APP.Dj(65536),4)),$APP.m.g(c0($APP.Dj(65536),4)),$APP.m.g(c0($APP.Dj(65536),4))].join(""))};i6.A=1;var b1a=$APP.Xm.h($APP.wf,$APP.Sg),z0a=$APP.Xm.h($APP.wf,$APP.Ci);var L_a=Math.pow(2,31),P0=Math.pow(2,5),w0=P0/2,Z_a=P0+w0>>>1,J_a=P0-1,K_a=e0($APP.fj.h(function(a){return Math.pow(2,a)},$APP.Rn.j(0,52,5)));$APP.g=A0.prototype;$APP.g.Sf=function(a,b){var c=this;z0(this,$APP.ce(c.children));$APP.sy.g($APP.ru.h(function(d,e){var f=c.children[d];e=$APP.l(f)?(e=null==e)?e:f.rg:f;return $APP.l(e)?(f=x0(f,b),c.fd[d]=f):null},c.fd));a=h0(b,this,c.vb);c.rg=!1;return c.vb=a};$APP.g.Pi=function(){var a=this.keys;return a[a.length-1]};$APP.g.Nj=function(){return this.keys.length};
$APP.g.Ri=function(a,b,c){z0(this,$APP.ce(this.children));z0(b,$APP.ce(b.children));a=b.vb;$APP.l(a)&&i0(c,new $APP.H(null,1,5,$APP.I,[a],null));return B0(this.keys.concat(b.keys),this.children.concat(b.children),this.fd.concat(b.fd),this.vb,!0)};$APP.g.Si=function(a,b){z0(this,$APP.ce(this.children));z0(b,$APP.ce(b.children));a=n0(this.keys,b.keys);var c=n0(this.children,b.children),d=n0(this.fd,b.fd);return o0(B0(a[0],c[0],d[0],this.vb,!0),B0(a[1],c[1],d[1],b.vb,!0))};
$APP.g.qf=function(a,b){if($APP.y.h(-1,a))return null;var c=$APP.l(this.fd)?this.fd[a]:null;$APP.Cb(this.children[a])?(b=g0(b,c),this.children[a]=b):$APP.l($APP.l(b)?c:b)&&I_a(b,c);return this.children[a]};$APP.g.Qi=function(a,b,c,d){a=O_a(b,this.keys,c);a=this.qf(a,d);return $APP.l(a)?t0(a,b,c,d):null};
$APP.g.Ni=function(a,b,c,d){z0(this,$APP.ce(this.children));a=l0(b,this.keys,this.keys.length-2,c);var e=this.qf(a,d);c=$APP.l(e)?u0(e,b,c,d):null;if($APP.l(c)){d=this.keys;e=a+1;var f=c.map(p0);b=Q_a(b,d,a,e,f,f.length)?d:m0(d,a,e,f);d=m0(this.children,a,a+1,c);a=m0(this.fd,a,a+1,y0(c));if(d.length<=P0)return[B0(b,d,a,this.vb,!0)];c=d.length>>>1;return[B0(b.slice(0,c),d.slice(0,c),a.slice(0,c),this.vb,!0),B0(b.slice(c),d.slice(c),a.slice(c),null,!0)]}return null};
$APP.g.Oi=function(a,b,c,d,e,f,h){z0(this,$APP.ce(this.children));var n=O_a(b,this.keys,c);if(-1===n)return null;var t=this.qf(n,h);a=0<=n-1?this.qf(n-1,h):null;var q=n+1<this.children.length?this.qf(n+1,h):null;c=v0(t,b,c,!1,a,q,h);return $APP.l(c)?(a=$APP.l(a)?n-1:n,n=$APP.l(q)?2+n:1+n,q=this.keys,t=c.map(p0),b=Q_a(b,q,a,n,t,t.length)?q:m0(q,a,n,t),q=m0(this.children,a,n,c),c=m0(this.fd,a,n,y0(c)),n>a&&(a=$APP.Ww.h($APP.Fi($APP.as.h($APP.zb,this.fd.slice(a,n))),$APP.Fi($APP.as.h($APP.zb,c))),$APP.l($APP.l(h)?
$APP.u(a):h)&&i0(h,a)),S_a(B0(b,q,c,this.vb,!0),d,e,f,h)):null};var T0=function T0(a){switch(arguments.length){case 1:return T0.g(arguments[0]);case 2:return T0.h(arguments[0],arguments[1]);case 3:return T0.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};T0.g=function(a){return T0.h(a,null)};T0.h=function(a,b){return T0.j(a,b,!0)};T0.j=function(a,b,c){return new T_a(a,b,c)};T0.A=3;$APP.g=T_a.prototype;
$APP.g.Sf=function(a,b){a=this.rg;return $APP.l($APP.l(a)?a:null==this.vb)?(b=h0(b,this,this.vb),this.rg=!1,this.vb=b):this.vb};$APP.g.Pi=function(){var a=this.keys;return a[a.length-1]};$APP.g.Nj=function(){return this.keys.length};$APP.g.Ri=function(a,b,c){a=b.vb;$APP.l(a)&&i0(c,new $APP.H(null,1,5,$APP.I,[a],null));return T0.h(this.keys.concat(b.keys),this.vb)};$APP.g.Si=function(a,b){a=n0(this.keys,b.keys);return o0(T0.h(a[0],this.vb),T0.h(a[1],b.vb))};$APP.g.qf=function(a){return this.keys[a]};
$APP.g.Qi=function(a,b,c,d){a=N_a(b,this.keys,c);return-1===a?null:this.qf(a,d)};$APP.g.Ni=function(a,b,c){a=l0(b,this.keys,this.keys.length-1,c);var d=this.keys.length,e;if(e=a<d)e=this.keys[a],e=0===(b.h?b.h(c,e):b.call(null,c,e));return e?null:d===P0?(b=d+1>>>1,a>b?[T0.h(this.keys.slice(0,b),this.vb),T0.g(P_a(this.keys,b,d,a,a,[c]))]:[T0.h(P_a(this.keys,0,b,a,a,[c]),this.vb),T0.g(this.keys.slice(b,d))]):[T0.h(m0(this.keys,a,a,[c]),this.vb)]};
$APP.g.Oi=function(a,b,c,d,e,f,h){a=N_a(b,this.keys,c);if(-1===a)return null;a=m0(this.keys,a,a+1,[]);return S_a(T0.h(a,this.vb),d,e,f,h)};$APP.g=$APP.D0.prototype;$APP.g.Re=function(){var a=this.root;return $APP.l(a)?a:$APP.l(this.vb)?this.root=a=g0(this.storage,this.vb):null};$APP.g.toString=function(){return $APP.qd(this)};$APP.g.ea=function(a,b){this.Re(null);return t0(this.root,this.ad,b,this.storage)};
$APP.g.O=function(a,b,c){this.Re(null);a=t0(this.root,this.ad,b,this.storage);return $APP.l(a)?a:c};$APP.g.W=function(a,b,c){return $APP.bj(b,$APP.ej,"#{"," ","}",c,$APP.u(this))};$APP.g.V=function(){return this.M};$APP.g.ba=function(){return new $APP.D0(this.storage,this.root,this.shift,this.P,this.ad,this.M,this.gd,this.vb)};$APP.g.aa=function(){return this.P};$APP.g.hd=function(){return $APP.Hc(M0.g?M0.g(this):M0.call(null,this))};$APP.g.Y=function(){var a=this.gd;return null!=a?a:this.gd=a=$APP.Pd(this)};
$APP.g.R=function(a,b){var c=this;return $APP.ze(b)&&this.P===$APP.ce(b)&&$APP.og(function(d){return $APP.Te(c,d)},b)};$APP.g.Ke=function(){return this};$APP.g.La=function(){return new $APP.D0(this.storage,T0.g([]),0,0,this.ad,this.M,null,null)};$APP.g.rh=function(a,b){return R0.j?R0.j(this,b,this.ad):R0.call(null,this,b,this.ad)};$APP.g.hb=function(a,b){a=M0.g?M0.g(this):M0.call(null,this);return $APP.l(a)?$APP.hx(a,b):b.C?b.C():b.call(null)};
$APP.g.eb=function(a,b,c){a=M0.g?M0.g(this):M0.call(null,this);return $APP.l(a)?$APP.hx(a,b,c):c};$APP.g.re=function(a,b){return Q0.j?Q0.j(this,b,this.ad):Q0.call(null,this,b,this.ad)};$APP.g.Ze=function(){return this};$APP.g.Sf=function(a,b){null==this.storage&&(this.storage=b);this.Re(null);null==this.vb&&(this.vb=x0(this.root,this.storage));return this.vb};$APP.g.Z=function(){return M0.g?M0.g(this):M0.call(null,this)};
$APP.g.si=function(a,b){return R0.j?R0.j(this,b,this.ad):R0.call(null,this,b,this.ad)};$APP.g.X=function(a,b){return new $APP.D0(this.storage,this.root,this.shift,this.P,this.ad,b,this.gd,this.vb)};$APP.g.da=function(a,b){return Q0.j?Q0.j(this,b,this.ad):Q0.call(null,this,b,this.ad)};$APP.g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length-1)].join(""));}};
$APP.g.apply=function(a,b){return this.call.apply(this,[this].concat($APP.Ob(b)))};$APP.g.g=function(a){return this.ea(null,a)};$APP.g.h=function(a,b){return this.O(null,a,b)};
var I0=function I0(a,b,c,d){var f=j0(c,d);if(0<d){var h=E0(b,f,a.storage),n=d-1;a=I0.D?I0.D(a,h,c,n):I0.call(null,a,h,c,n);return null==a?f+1<b.children.length?k0(0,d,f+1):null:k0(a,d,f)}return f+1<b.keys.length?k0(0,0,f+1):null},K0=function K0(a,b,c,d){var f=j0(c,d);if(0===d&&0===f)return null;if(0===d)return k0(0,0,f-1);if(f>=q0(b))return H0(b,c,d,a.storage);var h=E0(b,f,a.storage);var n=d-1;h=K0.D?K0.D(a,h,c,n):K0.call(null,a,h,c,n);if(null!=h)return k0(h,d,f);if(0===f)return null;a=H0(E0(b,f-
1,a.storage),c,d-1,a.storage);return k0(a,d,f-1)};$APP.g=V_a.prototype;$APP.g.aa=function(){return this.end-this.yb};$APP.g.ca=function(a,b){return this.I[this.yb+b]};$APP.g.kb=function(a,b,c){return 0<=b&&b<this.end-this.yb?this.I[this.yb+b]:c};$APP.g.yg=function(){if(this.yb===this.end)throw Error("-drop-first of empty chunk");return new $APP.Mf(this.I,this.yb+1,this.end)};$APP.g.hb=function(a,b){return this.yb===this.end?b.C?b.C():b.call(null):$APP.hx(this.yg(null),b,this.I[this.yb])};
$APP.g.eb=function(a,b,c){for(a=this.yb;;)if(a<this.end){var d=this.I[a];c=b.h?b.h(c,d):b.call(null,c,d);if($APP.Ud(c))return $APP.p(c);a+=1}else return c};$APP.g=N0.prototype;$APP.g.toString=function(){return $APP.qd(this)};$APP.g.W=function(a,b,c){return $APP.bj(b,$APP.ej,"("," ",")",c,$APP.u(this))};
$APP.g.cb=function(){if($APP.l(this.keys)){if(this.idx+1<this.keys.length){var a=this.left+1;return a<this.right?new N0(this.set,a,this.right,this.keys,this.idx+1):null}a=J0(this.set,this.left);return a<this.right?this.Lh(a,this.right):null}return null};$APP.g.hd=function(){if($APP.l(this.keys)){var a=this.set,b=U_a(this.set,this.left),c=U_a(this.set,this.right);return W_a.j?W_a.j(a,b,c):W_a.call(null,a,b,c)}return null};$APP.g.R=function(a,b){return $APP.tf(this,b)};
$APP.g.hb=function(a,b){if(null==this.keys)return b.C?b.C():b.call(null);a=this.ib(null);var c=this.cb(null);return null==c?a:$APP.hx(c,b,a)};$APP.g.eb=function(a,b,c){a=this.left;for(var d=this.keys,e=this.idx;;){if(null==d)return c;var f=d[e];c=b.h?b.h(c,f):b.call(null,c,f);if($APP.Ud(c))return $APP.p(c);if(e+1<d.length)if(a+=1,a<this.right)e+=1;else return c;else if(a=J0(this.set,a),a<this.right)f=a,d=F0(this.set,a),e=j0(a,0),a=f;else return c}};
$APP.g.ib=function(){return $APP.l(this.keys)?this.keys[this.idx]:null};$APP.g.sb=function(){var a=this.cb(null);return $APP.l(a)?a:$APP.Kd};$APP.g.Z=function(){return $APP.l(this.keys)?this:null};$APP.g.cg=function(){var a=this.left,b=this.right;return new V_a(this.keys,this.idx,(a<L_a&&b<L_a?a>>>5===b>>>5:Math.floor(a/P0)===Math.floor(b/P0))?j0(this.right,0):this.keys.length)};$APP.g.Ye=function(){var a=this.zf();return $APP.l(a)?a:$APP.Kd};
$APP.g.Lh=function(a,b){return new N0(this.set,a,b,F0(this.set,a),j0(a,0))};$APP.g.zf=function(){var a=J0(this.set,k0(this.left,0,this.keys.length-1));return a<this.right?this.Lh(a,this.right):null};$APP.g=O0.prototype;$APP.g.toString=function(){return $APP.qd(this)};$APP.g.W=function(a,b,c){return $APP.bj(b,$APP.ej,"("," ",")",c,$APP.u(this))};
$APP.g.cb=function(){if($APP.l(this.keys)){if(0<this.idx){var a=this.right-1;return this.left<a?new O0(this.set,this.left,a,this.keys,this.idx-1):null}a=U_a(this.set,this.right);return this.left<a?this.Lh(this.left,a):null}return null};$APP.g.hd=function(){return $APP.l(this.keys)?L0(this.set,J0(this.set,this.left),J0(this.set,this.right)):null};$APP.g.R=function(a,b){return $APP.tf(this,b)};$APP.g.ib=function(){return $APP.l(this.keys)?this.keys[this.idx]:null};
$APP.g.sb=function(){var a=this.cb(null);return $APP.l(a)?a:$APP.Kd};$APP.g.Z=function(){return $APP.l(this.keys)?this:null};$APP.g.Lh=function(a,b){return new O0(this.set,a,b,F0(this.set,b),j0(b,0))};var u7a=Error,j6=function j6(a){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(j6),$APP.kn.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.Xf);},k6=function k6(a,b){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(k6),$APP.kn.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.Xf);},l6=function l6(a){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(l6),$APP.kn.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.Xf);},m6=function m6(a){switch(arguments.length){case 2:return m6.h(arguments[0],
arguments[1]);case 3:return m6.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};m6.h=function(a,b){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(m6),$APP.kn.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.Xf);};m6.j=function(a,b,c){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(m6),$APP.kn.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.Xf);};m6.A=3;
var n6=function n6(a,b,c){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(n6),$APP.kn.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.Xf);},o6=function o6(a,b,c){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(o6),$APP.kn.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.Xf);};$APP.g=$APP.c1.prototype;$APP.g.mb=function(){return 0<this.tx?this.tx:-this.tx};$APP.g.wd=function(){return 0<this.tx};$APP.g.Y=function(){return 0===this.gd?this.gd=j6(this):this.gd};
$APP.g.R=function(a,b){return b instanceof $APP.c1&&k6(this,b)};$APP.g.Z=function(){return l6(this)};$APP.g.ea=function(a,b){return o6(this,b,null)};$APP.g.O=function(a,b,c){return o6(this,b,c)};$APP.g.ca=function(a,b){return m6.h(this,b)};$APP.g.kb=function(a,b,c){return m6.j(this,b,c)};$APP.g.U=function(a,b,c){return n6(this,b,c)};$APP.g.W=function(a,b,c){return $APP.bj(b,$APP.ej,"#datascript/Datom ["," ","]",c,new $APP.H(null,5,5,$APP.I,[this.e,this.a,this.v,this.mb(null),this.wd(null)],null))};
z_a("datascript.db.Datom",$APP.c1);var d1=function d1(a){switch(arguments.length){case 3:return d1.j(arguments[0],arguments[1],arguments[2]);case 4:return d1.D(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return d1.N(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};d1.j=function(a,b,c){return new $APP.c1(a,b,c,536870912,0,0)};d1.D=function(a,b,c,d){return new $APP.c1(a,b,c,d,0,0)};
d1.N=function(a,b,c,d,e){return new $APP.c1(a,b,c,$APP.l(e)?d:-d,0,0)};d1.A=5;j6=function(){return null};j6=function(a){return $0($0($APP.yd(a.e),$APP.yd(a.a)),$APP.yd(a.v))};k6=function(){return null};k6=function(a,b){return a.e===b.e&&$APP.y.h(a.a,b.a)&&$APP.y.h(a.v,b.v)};l6=function(){return null};l6=function(a){return new $APP.D(null,a.e,new $APP.D(null,a.a,new $APP.D(null,a.v,new $APP.D(null,a.mb(null),new $APP.D(null,a.wd(null),null,1,null),2,null),3,null),4,null),5,null)};o6=function(){return null};
o6=function(a,b,c){if(b instanceof $APP.G)switch(b instanceof $APP.G?b.S:null){case "e":return a.e;case "a":return a.a;case "v":return a.v;case "tx":return a.mb(null);case "added":return a.wd(null);default:return c}else if("string"===typeof b)switch(b){case "e":return a.e;case "a":return a.a;case "v":return a.v;case "tx":return a.mb(null);case "added":return a.wd(null);default:return c}else return c};
m6=function(a){switch(arguments.length){case 2:return m6.h(arguments[0],arguments[1]);case 3:return m6.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};m6.h=function(){return null};m6.j=function(){return null};m6.A=3;
m6=function(a){switch(arguments.length){case 2:return m6.h(arguments[0],arguments[1]);case 3:return m6.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};m6.h=function(a,b){switch(b){case 0:return a.e;case 1:return a.a;case 2:return a.v;case 3:return a.mb(null);case 4:return a.wd(null);default:throw Error(["Datom/-nth: Index out of bounds: ",$APP.m.g(b)].join(""));}};
m6.j=function(a,b,c){switch(b){case 0:return a.e;case 1:return a.a;case 2:return a.v;case 3:return a.mb(null);case 4:return a.wd(null);default:return c}};m6.A=3;n6=function(){return null};
n6=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "e":return d1.N(c,a.a,a.v,a.mb(null),a.wd(null));case "a":return d1.N(a.e,c,a.v,a.mb(null),a.wd(null));case "v":return d1.N(a.e,a.a,c,a.mb(null),a.wd(null));case "tx":return d1.N(a.e,a.a,a.v,c,a.wd(null));case "added":return d1.N(a.e,a.a,a.v,a.mb(null),c);default:throw new u7a(["invalid key for #datascript/Datom: ",$APP.m.g(b)].join(""));}};
var f1=function f1(a,b){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(f1),$APP.kn.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.Xf);};f1=function(){return null};
f1=function(a,b){try{return $APP.y.h(a,b)?0:$APP.Be(a)&&$APP.Be(b)?k0a(a,b):(null!=a?a.K&2048||$APP.xd===a.oe||(a.K?0:$APP.Jb($APP.$c,a)):$APP.Jb($APP.$c,a))?$APP.ad(a,b):$APP.Kb(a)===$APP.Kb(b)?"number"===typeof a||"string"===typeof a||$APP.Ab(a)||!0===a||!1===a?$APP.Sa(a,b):$APP.yd(a)-$APP.yd(b):j0a(a,b)}catch(d){if(d instanceof Error){var c=d;if($APP.Kb(a)===$APP.Kb(b))throw c;return j0a(a,b)}throw d;}};
var p6=function p6(a){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(p6),$APP.kn.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.Xf);},q6=function q6(a){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(q6),$APP.kn.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.Xf);},r6=function r6(a,b){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(r6),$APP.kn.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.Xf);},W2=function W2(a){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(W2),
$APP.kn.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.Xf);},s1=function s1(a,b){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(s1),$APP.kn.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.Xf);},s6=function s6(a,b,c){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(s6),$APP.kn.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.Xf);},t6=function t6(a,b,c,d,e,f,h){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(t6),$APP.kn.h(" ",new $APP.H(null,7,5,$APP.I,[a,b,c,d,e,
f,h],null))].join(""),$APP.Xf);},u6=function u6(a,b,c,d,e,f,h,n){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(u6),$APP.kn.h(" ",new $APP.H(null,8,5,$APP.I,[a,b,c,d,e,f,h,n],null))].join(""),$APP.Xf);};$APP.g=$APP.x1.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "schema":return this.uc;case "eavt":return this.ac;case "aevt":return this.wc;case "avet":return this.jc;case "max-eid":return this.Nc;case "max-tx":return this.Oc;case "rschema":return this.xc;case "pull-patterns":return this.Dc;case "pull-attrs":return this.Cc;case "hash":return this.hash;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.db.DB{",", ","}",c,$APP.K.h(new $APP.H(null,10,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.y1,this.uc],null),new $APP.H(null,2,5,$APP.I,[$APP.z1,this.ac],null),new $APP.H(null,2,5,$APP.I,[A1,this.wc],null),new $APP.H(null,2,5,$APP.I,[r1,this.jc],null),new $APP.H(null,2,5,$APP.I,[B1,this.Nc],null),new $APP.H(null,2,5,$APP.I,[C1,this.Oc],null),new $APP.H(null,2,5,$APP.I,[D1,this.xc],null),new $APP.H(null,
2,5,$APP.I,[E1,this.Dc],null),new $APP.H(null,2,5,$APP.I,[F1,this.Cc],null),new $APP.H(null,2,5,$APP.I,[G1,this.hash],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,10,new $APP.H(null,10,5,$APP.I,[$APP.y1,$APP.z1,A1,r1,B1,C1,D1,E1,F1,G1],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new $APP.x1(this.uc,this.ac,this.wc,this.jc,this.Nc,this.Oc,this.xc,this.Dc,this.Cc,this.hash,this.B,this.o,this.G)};
$APP.g.aa=function(){return 10+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-1515640948^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.uc,b.uc)&&$APP.y.h(this.ac,b.ac)&&$APP.y.h(this.wc,b.wc)&&$APP.y.h(this.jc,b.jc)&&$APP.y.h(this.Nc,b.Nc)&&$APP.y.h(this.Oc,b.Oc)&&$APP.y.h(this.xc,b.xc)&&$APP.y.h(this.Dc,b.Dc)&&$APP.y.h(this.Cc,b.Cc)&&$APP.y.h(this.hash,b.hash)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,10,[$APP.y1,null,C1,null,G1,null,A1,null,r1,null,B1,null,$APP.z1,null,F1,null,E1,null,D1,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new $APP.x1(this.uc,this.ac,this.wc,this.jc,this.Nc,this.Oc,this.xc,this.Dc,this.Cc,this.hash,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "schema":case "eavt":case "aevt":case "avet":case "max-eid":case "max-tx":case "rschema":case "pull-patterns":case "pull-attrs":case "hash":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.y1,b):$APP.Bf.call(null,$APP.y1,b))?new $APP.x1(c,this.ac,this.wc,this.jc,this.Nc,this.Oc,this.xc,this.Dc,this.Cc,this.hash,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.z1,b):$APP.Bf.call(null,$APP.z1,b))?new $APP.x1(this.uc,c,this.wc,this.jc,this.Nc,this.Oc,this.xc,this.Dc,this.Cc,this.hash,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(A1,b):$APP.Bf.call(null,A1,b))?new $APP.x1(this.uc,this.ac,c,this.jc,this.Nc,this.Oc,this.xc,
this.Dc,this.Cc,this.hash,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(r1,b):$APP.Bf.call(null,r1,b))?new $APP.x1(this.uc,this.ac,this.wc,c,this.Nc,this.Oc,this.xc,this.Dc,this.Cc,this.hash,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(B1,b):$APP.Bf.call(null,B1,b))?new $APP.x1(this.uc,this.ac,this.wc,this.jc,c,this.Oc,this.xc,this.Dc,this.Cc,this.hash,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(C1,b):$APP.Bf.call(null,C1,b))?new $APP.x1(this.uc,this.ac,this.wc,this.jc,this.Nc,c,this.xc,this.Dc,
this.Cc,this.hash,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(D1,b):$APP.Bf.call(null,D1,b))?new $APP.x1(this.uc,this.ac,this.wc,this.jc,this.Nc,this.Oc,c,this.Dc,this.Cc,this.hash,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(E1,b):$APP.Bf.call(null,E1,b))?new $APP.x1(this.uc,this.ac,this.wc,this.jc,this.Nc,this.Oc,this.xc,c,this.Cc,this.hash,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(F1,b):$APP.Bf.call(null,F1,b))?new $APP.x1(this.uc,this.ac,this.wc,this.jc,this.Nc,this.Oc,this.xc,this.Dc,
c,this.hash,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(G1,b):$APP.Bf.call(null,G1,b))?new $APP.x1(this.uc,this.ac,this.wc,this.jc,this.Nc,this.Oc,this.xc,this.Dc,this.Cc,c,this.B,this.o,null):new $APP.x1(this.uc,this.ac,this.wc,this.jc,this.Nc,this.Oc,this.xc,this.Dc,this.Cc,this.hash,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,10,5,$APP.I,[new $APP.Ve($APP.y1,this.uc,null),new $APP.Ve($APP.z1,this.ac,null),new $APP.Ve(A1,this.wc,null),new $APP.Ve(r1,this.jc,null),new $APP.Ve(B1,this.Nc,null),new $APP.Ve(C1,this.Oc,null),new $APP.Ve(D1,this.xc,null),new $APP.Ve(E1,this.Dc,null),new $APP.Ve(F1,this.Cc,null),new $APP.Ve(G1,this.hash,null)],null),this.o))};
$APP.g.X=function(a,b){return new $APP.x1(this.uc,this.ac,this.wc,this.jc,this.Nc,this.Oc,this.xc,this.Dc,this.Cc,this.hash,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};
$APP.g.Dj=function(a,b){a:for(var c=this.ac,d=$APP.z1.g(b),e=a=b=$APP.Sg;;){if($APP.we(c)){var f=new $APP.H(null,3,5,$APP.I,[$APP.$f(b),$APP.$f($APP.Fh.h(a,d)),$APP.$f(e)],null);break a}if($APP.we(d)){f=new $APP.H(null,3,5,$APP.I,[$APP.$f($APP.Fh.h(b,c)),$APP.$f(a),$APP.$f(e)],null);break a}var h=$APP.v(c),n=$APP.v(d);try{f=m0a.h?m0a.h(h,n):m0a.call(null,h,n)}catch(t){if(t instanceof Error)f=m4a;else throw t;}if($APP.y.h(f,m4a))b=$APP.wf.h(b,h),a=$APP.wf.h(a,n),c=$APP.w(c),d=$APP.w(d);else if(0===
f)e=$APP.wf.h(e,h),c=$APP.w(c),d=$APP.w(d);else if(0>f)b=$APP.wf.h(b,h),c=$APP.w(c);else if(0<f)a=$APP.wf.h(a,n),d=$APP.w(d);else{f=null;break a}}return f};$APP.g.Ma=$APP.xd;$APP.g.W=function(a,b,c){return s6(this,b,c)};$APP.g.qh=$APP.xd;$APP.g.aa=function(){return $APP.ce(this.ac)};$APP.g.ll=$APP.xd;$APP.g.hd=function(){return $APP.Hc(this.ac)};$APP.g.zg=$APP.xd;$APP.g.Y=function(){return p6(this)};$APP.g.R=function(a,b){return r6(this,b)};$APP.g.ii=$APP.xd;
$APP.g.Ke=function(){return $APP.Zm.j($APP.Zm.j($APP.Zm.j(this,$APP.z1,$APP.Sf),A1,$APP.Sf),r1,$APP.Sf)};$APP.g.ji=$APP.xd;$APP.g.La=function(){return $APP.se(W2(new $APP.k(null,5,[$APP.y1,this.uc,D1,this.xc,$APP.z1,$APP.oe(this.ac),A1,$APP.oe(this.wc),r1,$APP.oe(this.jc)],null)),$APP.te(this))};$APP.g.re=function(){throw $APP.Zl.h("datascript.DB/conj! is not supported",$APP.Xf);};$APP.g.Ze=function(){return $APP.Zm.j($APP.Zm.j($APP.Zm.j(this,$APP.z1,$APP.Tf),A1,$APP.Tf),r1,$APP.Tf)};$APP.g.Ej=function(){return q5a};
$APP.g.Ci=function(a,b,c,d,e,f){t1(this,b,c,d,e,f);return S0($APP.C.h(this,b),u6(this,b,c,d,e,f,0,536870912),u6(this,b,c,d,e,f,2147483647,2147483647))};$APP.g.Fi=function(a,b,c,d,e,f){t1(this,b,c,d,e,f);return S0($APP.C.h(this,b),u6(this,b,c,d,e,f,0,536870912),d1.D(2147483647,null,null,2147483647))};$APP.g.Ei=function(a,b,c,d,e,f){t1(this,b,c,d,e,f);return a0a($APP.C.h(this,b),u6(this,b,c,d,e,f,2147483647,2147483647),d1.D(0,null,null,536870912))};
$APP.g.Di=function(a,b,c,d){t1(this,r1,b,null,null,null);if(!(b instanceof $APP.G||"string"===typeof b))throw a=new $APP.D(null,P4a,new $APP.D(null,R5,new $APP.D(null,b,new $APP.D(null,c,new $APP.D(null,d,null,1,null),2,null),3,null),4,null),5,null),$APP.Zl.h(["Bad entity attribute ",$APP.zj.l($APP.B([b]))," at ",$APP.zj.l($APP.B([a])),", expected keyword or string"].join(""),new $APP.k(null,3,[T1,b,D2,a,$APP.Hn,o2],null));return S0(this.jc,t6(this,null,b,c,null,0,536870912),t6(this,null,b,d,null,
2147483647,2147483647))};$APP.g.zi=$APP.xd;$APP.g.Bi=function(){return this.uc};$APP.g.Ai=function(a,b){a=this.xc;return a.g?a.g(b):a.call(null,b)};$APP.g.Fj=$APP.xd;
$APP.g.Gi=function(a,b){a=$APP.A.j(b,0,null);var c=$APP.A.j(b,1,null),d=$APP.A.j(b,2,null),e=$APP.A.j(b,3,null);b=this.ac;var f=this.wc,h=this.jc;$APP.Te(w1(this,L1),c);return $APP.l(a)?$APP.l(c)?null!=d?$APP.l(e)?S0(b,d1.D(a,c,d,e),d1.D(a,c,d,e)):S0(b,d1.D(a,c,d,536870912),d1.D(a,c,d,2147483647)):$APP.l(e)?$APP.uj($APP.Pg.g(function(n){return $APP.y.h(e,n.mb(null))}),S0(b,d1.D(a,c,null,536870912),d1.D(a,c,null,2147483647))):S0(b,d1.D(a,c,null,536870912),d1.D(a,c,null,2147483647)):null!=d?$APP.l(e)?
$APP.uj($APP.Pg.g(function(n){return $APP.y.h(d,n.v)&&$APP.y.h(e,n.mb(null))}),S0(b,d1.D(a,null,null,536870912),d1.D(a,null,null,2147483647))):$APP.uj($APP.Pg.g(function(n){return $APP.y.h(d,n.v)}),S0(b,d1.D(a,null,null,536870912),d1.D(a,null,null,2147483647))):$APP.l(e)?$APP.uj($APP.Pg.g(function(n){return $APP.y.h(e,n.mb(null))}),S0(b,d1.D(a,null,null,536870912),d1.D(a,null,null,2147483647))):S0(b,d1.D(a,null,null,536870912),d1.D(a,null,null,2147483647)):$APP.l(c)?null!=d?$APP.l(e)?s1(this,c)?$APP.uj($APP.Pg.g(function(n){return $APP.y.h(e,
n.mb(null))}),S0(h,d1.D(0,c,d,536870912),d1.D(2147483647,c,d,2147483647))):$APP.uj($APP.Pg.g(function(n){return $APP.y.h(d,n.v)&&$APP.y.h(e,n.mb(null))}),S0(f,d1.D(0,c,null,536870912),d1.D(2147483647,c,null,2147483647))):s1(this,c)?S0(h,d1.D(0,c,d,536870912),d1.D(2147483647,c,d,2147483647)):$APP.uj($APP.Pg.g(function(n){return $APP.y.h(d,n.v)}),S0(f,d1.D(0,c,null,536870912),d1.D(2147483647,c,null,2147483647))):$APP.l(e)?$APP.uj($APP.Pg.g(function(n){return $APP.y.h(e,n.mb(null))}),S0(f,d1.D(0,c,null,
536870912),d1.D(2147483647,c,null,2147483647))):S0(f,d1.D(0,c,null,536870912),d1.D(2147483647,c,null,2147483647)):null!=d?$APP.l(e)?$APP.Pg.h(function(n){return $APP.y.h(d,n.v)&&$APP.y.h(e,n.mb(null))},b):$APP.Pg.h(function(n){return $APP.y.h(d,n.v)},b):$APP.l(e)?$APP.Pg.h(function(n){return $APP.y.h(e,n.mb(null))},b):b};$APP.g=H1.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "unfiltered-db":return this.yc;case "pred":return this.fb;case "hash":return this.hash;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.db.FilteredDB{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[a6,this.yc],null),new $APP.H(null,2,5,$APP.I,[$APP.Xv,this.fb],null),new $APP.H(null,2,5,$APP.I,[G1,this.hash],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,3,new $APP.H(null,3,5,$APP.I,[a6,$APP.Xv,G1],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};
$APP.g.ba=function(){return new H1(this.yc,this.fb,this.hash,this.B,this.o,this.G)};$APP.g.aa=function(){return 3+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-351969977^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.yc,b.yc)&&$APP.y.h(this.fb,b.fb)&&$APP.y.h(this.hash,b.hash)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,3,[G1,null,$APP.Xv,null,a6,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new H1(this.yc,this.fb,this.hash,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "unfiltered-db":case "pred":case "hash":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(a6,b):$APP.Bf.call(null,a6,b))?new H1(c,this.fb,this.hash,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.Xv,b):$APP.Bf.call(null,$APP.Xv,b))?new H1(this.yc,c,this.hash,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(G1,b):$APP.Bf.call(null,G1,b))?new H1(this.yc,this.fb,c,this.B,this.o,null):new H1(this.yc,this.fb,this.hash,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.Ve(a6,this.yc,null),new $APP.Ve($APP.Xv,this.fb,null),new $APP.Ve(G1,this.hash,null)],null),this.o))};$APP.g.X=function(a,b){return new H1(this.yc,this.fb,this.hash,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.qj=$APP.xd;$APP.g.ea=function(){throw Error("-lookup is not supported on FilteredDB");};
$APP.g.O=function(){throw Error("-lookup is not supported on FilteredDB");};$APP.g.Ma=$APP.xd;$APP.g.W=function(a,b,c){return s6(this,b,c)};$APP.g.qh=$APP.xd;$APP.g.aa=function(){return $APP.ce(n1(this,$APP.z1,null,null,null,null))};$APP.g.zg=$APP.xd;$APP.g.Y=function(){return q6(this)};$APP.g.R=function(a,b){return r6(this,b)};$APP.g.ji=$APP.xd;$APP.g.La=function(){throw Error("-empty is not supported on FilteredDB");};$APP.g.hi=$APP.xd;
$APP.g.la=function(){throw Error("-contains-key? is not supported on FilteredDB");};$APP.g.U=function(){throw Error("-assoc is not supported on FilteredDB");};$APP.g.Ci=function(a,b,c,d,e,f){return $APP.Pg.h(this.fb,n1(this.yc,b,c,d,e,f))};$APP.g.Fi=function(a,b,c,d,e,f){return $APP.Pg.h(this.fb,o1(this.yc,b,c,d,e,f))};$APP.g.Ei=function(a,b,c,d,e,f){return $APP.Pg.h(this.fb,p1(this.yc,b,c,d,e,f))};$APP.g.Di=function(a,b,c,d){return $APP.Pg.h(this.fb,q1(this.yc,b,c,d))};$APP.g.zi=$APP.xd;
$APP.g.Bi=function(){return v1(this.yc)};$APP.g.Ai=function(a,b){return w1(this.yc,b)};$APP.g.Fj=$APP.xd;$APP.g.Gi=function(a,b){return $APP.Pg.h(this.fb,l1(this.yc,b))};W2=function(a){a=$APP.Yf(a);$APP.C.h(a,$APP.y1);$APP.C.h(a,$APP.z1);$APP.C.h(a,A1);$APP.C.h(a,r1);$APP.C.h(a,B1);$APP.C.h(a,C1);return null};
W2=function(a){var b=$APP.Yf(a);a=$APP.C.h(b,$APP.y1);var c=$APP.C.h(b,$APP.z1),d=$APP.C.h(b,A1),e=$APP.C.h(b,r1),f=$APP.C.h(b,B1),h=$APP.C.h(b,C1);h=$APP.l(h)?h:536870912;var n=$APP.Bj.g(0);f=$APP.l(f)?f:0;var t=b0(),q=b0();b=D1.g(b);b=$APP.l(b)?b:R1($APP.Ml.l($APP.B([new $APP.k(null,1,[Q1,new $APP.k(null,1,[I1,J1],null)],null),a])));return u0a($APP.gi([$APP.y1,C1,G1,A1,r1,B1,$APP.z1,F1,E1,D1],[a,h,n,d,e,f,c,t,q,b]))};p6=function(){return null};
p6=function(a){var b=$APP.p(a.hash);return 0===b?$APP.Bg(a.hash,$0($APP.yd(a.uc),$APP.yd(a.ac))):b};q6=function(){return null};q6=function(a){var b=$APP.p(a.hash);(function(){var c=n1(a,$APP.z1,null,null,null,null);return $APP.l(c)?c:$APP.Ci})();return 0===b?(b=function(){var c=n1(a,$APP.z1,null,null,null,null);return $APP.l(c)?c:$APP.Ci}(),$APP.Bg(a.hash,$0($APP.yd(v1(a)),$APP.Pd(b)))):b};r6=function(){return null};
r6=function(a,b){var c;if(c=b instanceof $APP.x1||b instanceof H1)if(c=$APP.y.h(v1(a),v1(b)))a:for(a=n1(a,$APP.z1,null,null,null,null),c=n1(b,$APP.z1,null,null,null,null),b=$APP.u(a),a=$APP.u(c);;){if(null==b){c=null==a;break a}if($APP.y.h($APP.v(b),$APP.v(a)))b=$APP.w(b),a=$APP.w(a);else{c=!1;break a}}return c};s6=function(){return null};
s6=function(a,b,c){$APP.Mc(b,"#datascript/DB {");$APP.Mc(b,":schema ");$APP.ej(v1(a),b,c);$APP.Mc(b,", :datoms ");$APP.bj(b,function(d,e,f){return $APP.bj(e,$APP.ej,"["," ","]",f,new $APP.H(null,4,5,$APP.I,[d.e,d.a,d.v,$APP.a1(d)],null))},"["," ","]",c,n1(a,$APP.z1,null,null,null,null));return $APP.Mc(b,"}")};
var r2=function r2(a,b){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(r2),$APP.kn.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.Xf);},q2=function q2(a,b){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(q2),$APP.kn.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.Xf);};t6=function(){return null};
t6=function(a,b,c,d,e,f,h){if(null!=c&&!(c instanceof $APP.G||"string"===typeof c))throw a=new $APP.D(null,o7a,new $APP.D(null,R5,new $APP.D(null,b,new $APP.D(null,c,new $APP.D(null,d,new $APP.D(null,e,null,1,null),2,null),3,null),4,null),5,null),6,null),$APP.Zl.h(["Bad entity attribute ",$APP.zj.l($APP.B([c]))," at ",$APP.zj.l($APP.B([a])),", expected keyword or string"].join(""),new $APP.k(null,3,[T1,c,D2,a,$APP.Hn,o2],null));return d1.D(null!=b?r2(a,b):f,c,null!=d&&q2(a,c)?r2(a,d):d,null!=e?r2(a,
e):h)};u6=function(){return null};u6=function(a,b,c,d,e,f,h,n){b=b instanceof $APP.G?b.S:null;switch(b){case "eavt":return t6(a,c,d,e,f,h,n);case "aevt":return t6(a,d,c,e,f,h,n);case "avet":return t6(a,e,c,d,f,h,n);default:throw Error(["No matching clause: ",$APP.m.g(b)].join(""));}};$APP.g=c2.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "db-before":return this.Ld;case "db-after":return this.Kd;case "tx-data":return this.Pd;case "tempids":return this.Nd;case "tx-meta":return this.Qd;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.db.TxReport{",", ","}",c,$APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[d2,this.Ld],null),new $APP.H(null,2,5,$APP.I,[e2,this.Kd],null),new $APP.H(null,2,5,$APP.I,[f2,this.Pd],null),new $APP.H(null,2,5,$APP.I,[g2,this.Nd],null),new $APP.H(null,2,5,$APP.I,[h2,this.Qd],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,5,new $APP.H(null,5,5,$APP.I,[d2,e2,f2,g2,h2],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new c2(this.Ld,this.Kd,this.Pd,this.Nd,this.Qd,this.B,this.o,this.G)};$APP.g.aa=function(){return 5+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-2022644885^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.Ld,b.Ld)&&$APP.y.h(this.Kd,b.Kd)&&$APP.y.h(this.Pd,b.Pd)&&$APP.y.h(this.Nd,b.Nd)&&$APP.y.h(this.Qd,b.Qd)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,5,[g2,null,e2,null,d2,null,f2,null,h2,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new c2(this.Ld,this.Kd,this.Pd,this.Nd,this.Qd,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "db-before":case "db-after":case "tx-data":case "tempids":case "tx-meta":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(d2,b):$APP.Bf.call(null,d2,b))?new c2(c,this.Kd,this.Pd,this.Nd,this.Qd,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(e2,b):$APP.Bf.call(null,e2,b))?new c2(this.Ld,c,this.Pd,this.Nd,this.Qd,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(f2,b):$APP.Bf.call(null,f2,b))?new c2(this.Ld,this.Kd,c,this.Nd,this.Qd,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(g2,b):$APP.Bf.call(null,g2,b))?new c2(this.Ld,this.Kd,this.Pd,c,this.Qd,this.B,this.o,
null):$APP.l($APP.Bf.h?$APP.Bf.h(h2,b):$APP.Bf.call(null,h2,b))?new c2(this.Ld,this.Kd,this.Pd,this.Nd,c,this.B,this.o,null):new c2(this.Ld,this.Kd,this.Pd,this.Nd,this.Qd,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.Ve(d2,this.Ld,null),new $APP.Ve(e2,this.Kd,null),new $APP.Ve(f2,this.Pd,null),new $APP.Ve(g2,this.Nd,null),new $APP.Ve(h2,this.Qd,null)],null),this.o))};
$APP.g.X=function(a,b){return new c2(this.Ld,this.Kd,this.Pd,this.Nd,this.Qd,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};i2=function(a,b,c){return $APP.Te(w1(a,c),b)};j2=function(a,b){return i2(a,b,L1)};k2=function(a,b,c){return i2(a,b,L1)&&(f0(c)||$APP.xe(c)&&!$APP.Ce(c))};q2=function(){return null};q2=function(a,b){return i2(a,b,M1)};l2=function(a,b){return i2(a,b,N1)};s1=function(){return null};
s1=function(a,b){return i2(a,b,K1)};m2=function(a,b){return i2(a,b,P1)};H0a=function(a,b){return i2(a,b,A0a)};n2=function(a){if(a instanceof $APP.G)return $APP.y.h("_",$APP.A.h($APP.Hi(a),0));if("string"===typeof a)return $APP.kb($APP.Ti(/(?:([^\/]+)\/)?_([^\/]+)/,a));throw $APP.Zl.h(["Bad attribute type: ",$APP.zj.l($APP.B([a])),", expected keyword or string"].join(""),new $APP.k(null,2,[$APP.Hn,o2,T1,a],null));};
s2=function(a,b){for(;;){if("number"===typeof b&&0<b){if(2147483647<b)throw $APP.Zl.h(["Highest supported entity id is ",$APP.zj.l($APP.B([2147483647])),", got ",$APP.zj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.Hn,z2,$APP.zM,b],null));return b}if($APP.Be(b)){var c=b,d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);if($APP.ui.h($APP.ce(b),2))throw $APP.Zl.h(["Lookup ref should contain 2 elements: ",$APP.zj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.Hn,L4a,z2,b],null));if(i2(a,d,I1))return m2(a,
d)?(b=I0a(a,d,c),$APP.SO.g($APP.v(n1(a,r1,d,b,null,null)))):null==c?null:$APP.SO.g($APP.v(n1(a,r1,d,c,null,null)));throw $APP.Zl.h(["Lookup ref attribute should be marked as :db/unique: ",$APP.zj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.Hn,r4a,z2,b],null));}if($APP.Ab(b))b=$APP.B(b);else{if(b instanceof $APP.G)return $APP.SO.g($APP.v(n1(a,r1,Q1,b,null,null)));throw $APP.Zl.h(["Expected number or lookup ref for entity id, got ",$APP.zj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.Hn,U5a,
z2,b],null));}}};J0a=function(a,b){return $APP.y.h(b,$APP.SO.g($APP.v(o1(a,$APP.z1,b,null,null,null))))};r2=function(){return null};r2=function(a,b){a=s2(a,b);if($APP.l(a))return a;throw $APP.Zl.h(["Nothing found for entity id ",$APP.zj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.Hn,b5a,z2,b],null));};var K0a=$APP.Bj.g(0);t2.prototype.W=function(a,b,c){return $APP.bj(b,$APP.ej,"#datascript/AutoTempid ["," ","]",c,new $APP.H(null,1,5,$APP.I,[this.id],null))};
d0=function(a){return a instanceof t2};
var v6=function v6(a,b){return function f(e){return new $APP.Jf(null,function(){for(;;){var h=$APP.u(e);if(h){var n=h;if($APP.Ge(n)){var t=$APP.cd(n),q=$APP.ce(t),x=$APP.Lf(q);return function(){for(var E=0;;)if(E<q){var F=$APP.pe(t,E);$APP.Pf(x,$APP.Ce(F)?$APP.ef(function(){return function(N,S,Y){return S instanceof $APP.G||"string"===typeof S?q2(a,S)&&k2(a,S,Y)?$APP.vi.j(N,S,v6.h?v6.h(a,Y):v6.call(null,a,Y)):q2(a,S)?$APP.vi.j(N,S,$APP.v(function(){var aa=new $APP.H(null,1,5,$APP.I,[Y],null);return v6.h?
v6.h(a,aa):v6.call(null,a,aa)}())):n2(S)&&$APP.Be(Y)?$APP.vi.j(N,S,v6.h?v6.h(a,Y):v6.call(null,a,Y)):n2(S)?$APP.vi.j(N,S,$APP.v(function(){var aa=new $APP.H(null,1,5,$APP.I,[Y],null);return v6.h?v6.h(a,aa):v6.call(null,a,aa)}())):$APP.vi.j(N,S,Y):$APP.vi.j(N,S,Y)}}(E,F,t,q,x,n,h),$APP.Xf,$APP.Te(F,F2)?F:$APP.vi.j(F,F2,new t2)):function(){var N=$APP.Eg(null);if(function(){var la=$APP.Be(F);if(la){la=$APP.kd(N,F);var ua=$APP.A.j(la,0,null);$APP.A.j(la,1,null);var pa=$APP.A.j(la,2,null);$APP.A.j(la,
3,null);return $APP.y.h(G2,ua)&&q2(a,pa)&&!0}return la}()){var S=$APP.p(N),Y=$APP.A.j(S,0,null),aa=$APP.A.j(S,1,null),ca=$APP.A.j(S,2,null),ha=$APP.A.j(S,3,null);return k2(a,ca,ha)?new $APP.H(null,4,5,$APP.I,[Y,aa,ca,v6.h?v6.h(a,ha):v6.call(null,a,ha)],null):new $APP.H(null,4,5,$APP.I,[Y,aa,ca,$APP.v(function(){var la=new $APP.H(null,1,5,$APP.I,[ha],null);return v6.h?v6.h(a,la):v6.call(null,a,la)}())],null)}return F}());E+=1}else return!0}()?$APP.Of($APP.Qf(x),f($APP.dd(n))):$APP.Of($APP.Qf(x),null)}var z=
$APP.v(n);return $APP.zf($APP.Ce(z)?$APP.ef(function(){return function(E,F,N){return F instanceof $APP.G||"string"===typeof F?q2(a,F)&&k2(a,F,N)?$APP.vi.j(E,F,v6.h?v6.h(a,N):v6.call(null,a,N)):q2(a,F)?$APP.vi.j(E,F,$APP.v(function(){var S=new $APP.H(null,1,5,$APP.I,[N],null);return v6.h?v6.h(a,S):v6.call(null,a,S)}())):n2(F)&&$APP.Be(N)?$APP.vi.j(E,F,v6.h?v6.h(a,N):v6.call(null,a,N)):n2(F)?$APP.vi.j(E,F,$APP.v(function(){var S=new $APP.H(null,1,5,$APP.I,[N],null);return v6.h?v6.h(a,S):v6.call(null,
a,S)}())):$APP.vi.j(E,F,N):$APP.vi.j(E,F,N)}}(z,n,h),$APP.Xf,$APP.Te(z,F2)?z:$APP.vi.j(z,F2,new t2)):function(){var E=$APP.Eg(null);if(function(){var ca=$APP.Be(z);if(ca){ca=$APP.kd(E,z);var ha=$APP.A.j(ca,0,null);$APP.A.j(ca,1,null);var la=$APP.A.j(ca,2,null);$APP.A.j(ca,3,null);return $APP.y.h(G2,ha)&&q2(a,la)&&!0}return ca}()){var F=$APP.p(E),N=$APP.A.j(F,0,null),S=$APP.A.j(F,1,null),Y=$APP.A.j(F,2,null),aa=$APP.A.j(F,3,null);return k2(a,Y,aa)?new $APP.H(null,4,5,$APP.I,[N,S,Y,v6.h?v6.h(a,aa):
v6.call(null,a,aa)],null):new $APP.H(null,4,5,$APP.I,[N,S,Y,$APP.v(function(){var ca=new $APP.H(null,1,5,$APP.I,[aa],null);return v6.h?v6.h(a,ca):v6.call(null,a,ca)}())],null)}return z}(),f($APP.Ld(n)))}return null}},null,null)}(b)},K2=function K2(a,b){throw $APP.Zl.h(["Not implemented: (",$APP.m.g(K2),$APP.kn.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.Xf);},v7a=new $APP.Bi(null,new $APP.k(null,8,[d6,null,e6a,null,d1a,null,J5a,null,L2,null,J4a,null,k7a,null,G2,null],null),null);
K2=function(){return null};
K2=function(a,b){for(var c=!$APP.we(w1(e2.g(a),P1)),d=c?$APP.$m.h(b,$APP.gn.g(V5a)):b,e=a,f=d;;){if($APP.we(f))return $APP.Zm.N($APP.Zm.N($APP.Zm.j($APP.Nl.h($APP.Nl.h(h1a(e),J2),x2),g2,function(){return function(Jd){return G_a(Jd)}}(e,f,a,c,d)),g2,$APP.vi,L0a,u2(e)),e2,$APP.Zm,C1,$APP.Rd);var h=f,n=$APP.u(h),t=$APP.v(n),q=$APP.w(n),x=t,z=q;if(null==x)f=z;else if($APP.y.h(V5a,x))if($APP.Te(e,B2)){var E=$APP.Nl.h(e,B2),F=$APP.K.h(g1a(e),z);e=E;f=F}else f=z;else{var N=e2.g(e),S=g2.g(e);if($APP.Ce(x)){var Y=
F2.g(x);k1a(x);if(v2(Y)){var aa=u2(e),ca=y2(e,Y,aa),ha=$APP.zf($APP.vi.j(x,F2,aa),z);e=ca;f=ha}else if($APP.Be(Y)){aa=r2(N,Y);var la=e,ua=$APP.zf($APP.vi.j(x,F2,aa),z);e=la;f=ua}else{var pa=W0a(N,x),W=$APP.A.j(pa,0,null),R=$APP.A.j(pa,1,null),V=Z0a(W,R);if(null!=V){if(w2(Y)&&$APP.Te(S,Y)&&$APP.ui.h(V,$APP.C.h(S,Y)))return f1a(a,e,b,Y,V);var U=$APP.Zm.D(y2(e,Y,V),H2,b1a,d1.D(V,null,null,536870912)),X=$APP.K.h(a1a(N,$APP.vi.j(W,F2,V)),z);e=U;f=X}else if("number"===typeof Y||null==Y||"string"===typeof Y||
d0(Y)){var ma=e,va=$APP.K.h(a1a(N,x),z);e=ma;f=va}else throw $APP.Zl.h(["Expected number, string or lookup ref for :db/id, got ",$APP.zj.l($APP.B([Y]))].join(""),new $APP.k(null,2,[$APP.Hn,U5a,j1a,x],null));}}else if($APP.Be(x)){var da=x,na=$APP.A.j(da,0,null),ra=$APP.A.j(da,1,null),ta=$APP.A.j(da,2,null),Ia=$APP.A.j(da,3,null);if($APP.y.h(na,d6)){var Ra=$APP.u(x),Wa=$APP.v(Ra),$a=$APP.w(Ra),Xa=Wa,eb=$APP.v($a),db=$APP.w($a),fb=e,qb=$APP.K.h(v6(N,$APP.sg.j(eb,N,db)),z);e=fb;f=qb}else if(na instanceof
$APP.G&&$APP.Cb(v7a.g?v7a.g(na):v7a.call(null,na))){var Eb=s2(N,na);if(null==Eb)throw $APP.Zl.h(["Can’t find entity for transaction fn ",$APP.zj.l($APP.B([na]))].join(""),new $APP.k(null,3,[$APP.Hn,o2,$6a,d6,f2,x],null));var Vb=Z1.g(m1(N,new $APP.H(null,2,5,$APP.I,[Eb,B4a],null)));db=$APP.w(x);if($APP.qe(Vb)){var $b=e,wc=$APP.K.h($APP.sg.j(Vb,N,db),z);e=$b;f=wc}else throw $APP.Zl.h(["Entity ",$APP.zj.l($APP.B([na]))," expected to have :db/fn attribute with fn? value"].join(""),new $APP.k(null,3,[$APP.Hn,
o2,$6a,d6,f2,x],null));}else{if(w2(ra)&&$APP.ui.h(na,G2))throw $APP.Zl.h(["Can't use tempid in '",$APP.zj.l($APP.B([x])),"'. Tempids are allowed in :db/add only"].join(""),new $APP.k(null,2,[$APP.Hn,o2,$APP.AJ,x],null));if($APP.y.h(na,k7a)||$APP.y.h(na,e6a)){var hc=x;Xa=$APP.A.j(hc,0,null);var Dd=$APP.A.j(hc,1,null),je=$APP.A.j(hc,2,null),Zf=$APP.A.j(hc,3,null),tg=$APP.A.j(hc,4,null),ph=r2(N,Dd),Ui=function(){var Jd=je;if(Jd instanceof $APP.G||"string"===typeof Jd)return null;var $k=x;throw $APP.Zl.h(["Bad entity attribute ",
$APP.zj.l($APP.B([Jd]))," at ",$APP.zj.l($APP.B([$k])),", expected keyword or string"].join(""),new $APP.k(null,3,[T1,Jd,D2,$k,$APP.Hn,o2],null));}(),hg=q2(N,je)?r2(N,Zf):Zf,qh=q2(N,je)?r2(N,tg):tg,Ef=null==qh?function(){var Jd=x;throw $APP.Zl.h(["Cannot store nil as a value at ",$APP.zj.l($APP.B([Jd]))].join(""),new $APP.k(null,3,[$APP.zM,null,D2,Jd,$APP.Hn,o2],null));}():null,Id=$APP.df(l1(N,new $APP.H(null,2,5,$APP.I,[ph,je],null)));if(j2(N,je))if($APP.l($APP.pg(function(Jd,$k,Ai,XF,$L,aM,bM,YF,
cM,dM,sC){return function(Ps){return $APP.y.h(Ps.v,sC)}}(e,f,hc,Xa,Dd,je,Zf,tg,ph,Ui,hg,qh,Ef,Id,da,na,ra,ta,Ia,N,S,h,n,t,q,x,z,a,c,d),Id))){var Ej=I2(e,new $APP.H(null,4,5,$APP.I,[G2,ph,je,qh],null)),mj=z;e=Ej;f=mj}else throw $APP.Zl.h([":db.fn/cas failed on datom [",$APP.zj.l($APP.B([ph]))," ",$APP.zj.l($APP.B([je]))," ",$APP.zj.l($APP.B([$APP.fj.h(Z1,Id)])),"], expected ",$APP.zj.l($APP.B([hg]))].join(""),new $APP.k(null,4,[$APP.Hn,D5a,r6a,Id,$APP.MJ,hg,a6a,qh],null));else{var Vi=Z1.g($APP.v(Id));
if($APP.y.h(Vi,hg)){var rc=I2(e,new $APP.H(null,4,5,$APP.I,[G2,ph,je,qh],null)),ld=z;e=rc;f=ld}else throw $APP.Zl.h([":db.fn/cas failed on datom [",$APP.zj.l($APP.B([ph]))," ",$APP.zj.l($APP.B([je]))," ",$APP.zj.l($APP.B([Vi])),"], expected ",$APP.zj.l($APP.B([hg]))].join(""),new $APP.k(null,4,[$APP.Hn,D5a,r6a,$APP.v(Id),$APP.MJ,hg,a6a,qh],null));}}else if(v2(ra)){var ye=y2(e,ra,u2(e)),ug=$APP.zf(new $APP.H(null,4,5,$APP.I,[na,u2(e),ta,Ia],null),z);e=ye;f=ug}else if(q2(N,ta)&&v2(Ia)){var sf=y2(e,
Ia,u2(e)),yi=$APP.zf(new $APP.H(null,4,5,$APP.I,[na,ra,ta,u2(e)],null),z);e=sf;f=yi}else if(q2(N,ta)&&w2(Ia))if(Eb=$APP.C.h(S,Ia),null==Eb){var Jg=$APP.kf(B1.g(N))+1,$d=$APP.Zm.N(y2(e,Ia,Jg),N2,$APP.vi,Jg,Ia),qg=f;e=$d;f=qg}else{Jg=Eb;var Yk=$d=$APP.Zm.N(e,N2,$APP.vi,Jg,Ia),fh=$APP.zf(new $APP.H(null,4,5,$APP.I,[na,ra,ta,Jg],null),z);e=Yk;f=fh}else{var hi=$APP.Eg(null);if(function(){var Jd=$APP.y.h(na,G2)||$APP.y.h(na,L2);return Jd?(Jd=$APP.Cb(M2.g($APP.te(x))))?(Jd=m2(N,ta))?(Jd=$APP.Fg(hi,I0a(N,
ta,Ia)),$APP.ui.h(Ia,Jd)&&!0):Jd:Jd:Jd}()){var Km=$APP.p(hi),Fj=e,fp=$APP.zf(new $APP.H(null,4,5,$APP.I,[na,ra,ta,Km],null),z);e=Fj;f=fp}else if(w2(ra)){V=i2(N,ta,J1)?$APP.SO.g($APP.v(n1(N,r1,ta,Ia,null,null))):null;var Gj=$APP.C.h(S,ra);if($APP.l(function(){var Jd=V;return $APP.l(Jd)?(Jd=Gj,$APP.l(Jd)?$APP.ui.h(V,Gj):Jd):Jd}()))return f1a(a,e,b,ra,V);var Zn=function(){var Jd=V;if($APP.l(Jd))return Jd;Jd=Gj;return $APP.l(Jd)?Jd:$APP.kf(B1.g(N))+1}(),nj=y2(e,ra,Zn),gp=$APP.zf(new $APP.H(null,4,5,$APP.I,
[na,Zn,ta,Ia],null),z);e=nj;f=gp}else{var De=$APP.Eg(null);if($APP.l(function(){var Jd=i2(N,ta,J1);if(Jd){if(Jd=$APP.Te(x2.g(e),ra)){Jd=$APP.Fg(De,$APP.SO.g($APP.v(n1(N,r1,ta,Ia,null,null))));var $k=ra;return $APP.l($k)?$APP.l(Jd)?$APP.ui.h(ra,Jd)&&!0:Jd:$k}return Jd}return Jd}())){V=$APP.p(De);var Zk=$APP.C.h(x2.g(e),ra),$n=F_a(function(Jd){return function($k){return!$APP.Te(J2.g(Jd),$k)}}(e,f,Zk,V,De,hi,da,na,ra,ta,Ia,N,S,h,n,t,q,x,z,a,c,d),Zk);if($APP.l($n))return f1a(a,e,b,$n,V);throw $APP.Zl.h(["Conflicting upsert: ",
$APP.zj.l($APP.B([ra]))," resolves to ",$APP.zj.l($APP.B([V]))," via ",$APP.zj.l($APP.B([x]))].join(""),new $APP.k(null,1,[$APP.Hn,E2],null));}if($APP.Cb(M2.g($APP.te(x)))&&m2(N,ta)){var Ql=$APP.rp.h(N,new $APP.H(null,3,5,$APP.I,[$APP.y1,ta,O1],null));if($APP.y.h($APP.ce(Ql),$APP.ce(Ia))&&$APP.og($APP.Db,Ia)&&$APP.og(function(Jd,$k,Ai,XF,$L,aM,bM,YF,cM,dM,sC){return function(Ps){var ly=$APP.A.j(Ps,0,null);Ps=$APP.A.j(Ps,1,null);ly=Z1.g($APP.v(n1(sC,$APP.z1,YF,ly,null,null)));return $APP.y.h(Ps,ly)}}(e,
f,Ql,De,hi,da,na,ra,ta,Ia,N,S,h,n,t,q,x,z,a,c,d),$APP.fj.j($APP.Bw,Ql,Ia)))f=z;else throw $APP.Zl.h(["Can’t modify tuple attrs directly: ",$APP.zj.l($APP.B([x]))].join(""),new $APP.k(null,2,[$APP.Hn,o2,f2,x],null));}else if($APP.y.h(na,G2)){var zi=I2(e,x),vg=z;e=zi;f=vg}else if($APP.y.h(na,L2)&&null!=Ia)if(Eb=s2(N,ra),null==Eb)f=z;else{Dd=Eb;Vi=q2(N,ta)?r2(N,Ia):Ia;var wg=ta;if(!(wg instanceof $APP.G||"string"===typeof wg)){var md=x;throw $APP.Zl.h(["Bad entity attribute ",$APP.zj.l($APP.B([wg])),
" at ",$APP.zj.l($APP.B([md])),", expected keyword or string"].join(""),new $APP.k(null,3,[T1,wg,D2,md,$APP.Hn,o2],null));}if(null==Vi){var Ue=x;throw $APP.Zl.h(["Cannot store nil as a value at ",$APP.zj.l($APP.B([Ue]))].join(""),new $APP.k(null,3,[$APP.zM,null,D2,Ue,$APP.Hn,o2],null));}var Cc=m1(N,new $APP.H(null,3,5,$APP.I,[Dd,ta,Vi],null));if(null==Cc)f=z;else{var Ff=c1a(e,Cc),hp=z;e=Ff;f=hp}}else if($APP.y.h(na,J4a)||$APP.y.h(na,L2))if(Eb=s2(N,ra),null==Eb)f=z;else{Dd=Eb;Xa=function(){var Jd=
ta;if(Jd instanceof $APP.G||"string"===typeof Jd)return null;var $k=x;throw $APP.Zl.h(["Bad entity attribute ",$APP.zj.l($APP.B([Jd]))," at ",$APP.zj.l($APP.B([$k])),", expected keyword or string"].join(""),new $APP.k(null,3,[T1,Jd,D2,$k,$APP.Hn,o2],null));}();Id=$APP.df(l1(N,new $APP.H(null,2,5,$APP.I,[Dd,ta],null)));var Os=$APP.bf.j(c1a,e,Id),Gf=$APP.K.h(e1a(N,Id),z);e=Os;f=Gf}else if($APP.y.h(na,d1a)||$APP.y.h(na,J5a))if(Eb=s2(N,ra),null==Eb)f=z;else{Dd=Eb;var ao=$APP.df(l1(N,new $APP.H(null,1,
5,$APP.I,[Dd],null))),mv=$APP.df($APP.Og.l(function(Jd,$k,Ai,XF,$L,aM,bM,YF,cM,dM,sC,Ps,ly){return function(pS){return l1(ly,new $APP.H(null,3,5,$APP.I,[null,pS,XF],null))}}(e,f,ao,Dd,Eb,De,hi,da,na,ra,ta,Ia,N,S,h,n,t,q,x,z,a,c,d),$APP.B([w1(N,M1)]))),xg=$APP.bf.j(c1a,e,$APP.K.h(ao,mv)),iS=$APP.K.h(e1a(N,ao),z);e=xg;f=iS}else throw $APP.Zl.h(["Unknown operation at ",$APP.zj.l($APP.B([x])),", expected :db/add, :db/retract, :db.fn/call, :db.fn/retractAttribute, :db.fn/retractEntity or an ident corresponding to an installed transaction function (e.g. {:db/ident \x3ckeyword\x3e :db/fn \x3cIfn\x3e}, usage of :db/ident requires {:db/unique :db.unique/identity} in schema)"].join(""),
new $APP.k(null,3,[$APP.Hn,o2,$6a,na,f2,x],null));}}}}else if(h0a(x)){var ky=x;ra=$APP.A.j(ky,0,null);ta=$APP.A.j(ky,1,null);Ia=$APP.A.j(ky,2,null);var jS=$APP.A.j(ky,3,null),kS=$APP.A.j(ky,4,null);if($APP.l(kS)){var lS=I2(e,new $APP.H(null,5,5,$APP.I,[G2,ra,ta,Ia,jS],null)),mS=z;e=lS;f=mS}else{var nS=e,oS=$APP.zf(new $APP.H(null,4,5,$APP.I,[L2,ra,ta,Ia],null),z);e=nS;f=oS}}else throw $APP.Zl.h(["Bad entity type at ",$APP.zj.l($APP.B([x])),", expected map or vector"].join(""),new $APP.k(null,2,[$APP.Hn,
o2,f2,x],null));}}};var T2,t1a=$APP.Bj.g($APP.Xf),U2=$APP.Eg(1E6);$APP.g=Q2.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "storage":return this.storage;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.storage.StorageAdapter{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[U0,this.storage],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[U0],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new Q2(this.storage,this.B,this.o,this.G)};
$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=1627330428^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.storage,b.storage)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[U0,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new Q2(this.storage,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "storage":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(U0,b):$APP.Bf.call(null,U0,b))?new Q2(c,this.B,this.o,null):new Q2(this.storage,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve(U0,this.storage,null)],null),this.o))};$APP.g.X=function(a,b){return new Q2(this.storage,b,this.o,this.G)};
$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Qj=function(a,b,c){a=$APP.l($APP.l(c)?b instanceof A0&&$APP.Te($APP.Fi(b.fd),c):c)?U2.kc(null,U2.Ja(null)+1):$APP.l(c)?c:U2.kc(null,U2.Ja(null)+1);c=$APP.mn.h(m1a,b.keys);c=new $APP.k(null,1,[$APP.uB,c],null);b=b instanceof A0?$APP.vi.j(c,m5a,b.fd):c;$APP.kd(T2,$APP.Rg.h($APP.p(T2),new $APP.H(null,2,5,$APP.I,[a,b],null)));return a};
$APP.g.Pj=function(a,b){if($APP.l(b)){a=P2(this.storage,b);a=$APP.Yf(a);var c=$APP.C.h(a,$APP.uB);a=$APP.C.h(a,m5a);if($APP.l(c)){c=e0($APP.fj.h(function(e){var f=$APP.A.j(e,0,null),h=$APP.A.j(e,1,null),n=$APP.A.j(e,2,null);e=$APP.A.j(e,3,null);return d1.D(f,h,n,e)},c));if($APP.l(a)){var d=Array($APP.ce(a));return B0(c,d,a,b,!1)}return T0.j(c,b,!1)}}return null};$APP.g.Pl=function(){return null};
$APP.g.Oj=function(a,b){return $APP.Cj.D(t1a,$APP.Zm,this.storage,function(c){return $APP.Fh.h(c,$APP.as.h($APP.zb,b))})};var o1a=$APP.Bj.g($APP.Sg),c3=function c3(a){switch(arguments.length){case 1:return c3.g(arguments[0]);case 2:return c3.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};c3.g=function(a){var b=R2(a);if(null==b)throw $APP.Zl.h("Database has no associated storage",$APP.Xf);return V2(a,b,!1)};
c3.h=function(a,b){var c=R2(a);if(null==c)return $APP.z1.g(a),c=new Q2(b,null,null,null),V2(a,c,!1);var d=U0.g(c);if(d===b)return V2(a,c,!1);throw $APP.Zl.h("Database is already stored with another IStorage",new $APP.k(null,1,[U0,d],null));};c3.A=2;var w6=function w6(a){switch(arguments.length){case 1:return w6.g(arguments[0]);case 2:return w6.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};w6.g=function(a){return w6.h(a,$APP.Xf)};
w6.h=function(a,b){b=v1a(a,b);a=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);return x1a(a,b)};w6.A=2;$APP.g=Y2.prototype;$APP.g.equiv=function(a){return this.R(null,a)};$APP.g.gg=function(a,b){for(var c=$APP.u(this.jb),d=null,e=0,f=0;;)if(f<e){var h=d.ca(null,f),n=$APP.A.j(h,0,null);h=$APP.A.j(h,1,null);h.D?h.D(n,this,a,b):h.call(null,n,this,a,b);f+=1}else if(c=$APP.u(c))$APP.Ge(c)?(d=$APP.cd(c),c=$APP.dd(c),n=d,e=$APP.ce(d),d=n):(d=$APP.v(c),n=$APP.A.j(d,0,null),h=$APP.A.j(d,1,null),h.D?h.D(n,this,a,b):h.call(null,n,this,a,b),c=$APP.w(c),d=null,e=0),f=0;else break};
$APP.g.Df=function(a,b,c){this.jb=$APP.vi.j(this.jb,b,c);return this};$APP.g.Ef=function(a,b){return this.jb=$APP.Nl.h(this.jb,b)};$APP.g.R=function(a,b){return this===b};$APP.g.Y=function(){return $APP.oa(this)};$APP.g.Tc=function(a,b){return $APP.A.h($2(this,$APP.zg(b),$APP.Kd),1)};$APP.g.Cg=function(a,b){return $APP.A.h($2(this,b,$APP.Kd),1)};$APP.g.Dg=function(a,b,c){return $APP.A.h($2(this,b,new $APP.D(null,c,null,1,null)),1)};
$APP.g.Eg=function(a,b,c,d){return $APP.A.h($2(this,b,new $APP.D(null,c,new $APP.D(null,d,null,1,null),2,null)),1)};$APP.g.Fg=function(a,b,c,d,e){return $APP.A.h($2(this,b,$APP.zf(c,$APP.zf(d,e))),1)};$APP.g.V=function(){return this.M};$APP.g.Ja=function(){return Z2.g($APP.p(this.ug))};$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "atom":return this.ug;default:return c}};
a3=function(a){switch(arguments.length){case 1:return a3.g(arguments[0]);default:for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;return a3.l(arguments[0],1<b.length?new $APP.Fd(b.slice(1),0,null):null)}};a3.g=function(a){return new Y2(a,null,$APP.Xf,$APP.Xf)};a3.l=function(a,b){b=$APP.sg.h($APP.Xo,b);a=new Y2(a,null,$APP.Xf,$APP.Xf);var c=$APP.Px.g(b);null!=c&&(y1a(c,$APP.p(a)),a.Xf=c);b=$APP.nb.g(b);null!=b&&(a.M=b);return a};
a3.F=function(a){var b=$APP.v(a);a=$APP.w(a);return this.l(b,a)};a3.A=1;b3.h=function(a,b){return b3.j(a,b,null)};b3.j=function(a,b,c){if(a instanceof H1)throw $APP.Zl.h("Filtered DB cannot be modified",new $APP.k(null,1,[$APP.Hn,c7a],null));a=new c2(a,a,$APP.Sg,$APP.Xf,c,null,null,null);if(null!=b&&!$APP.Be(b))throw $APP.Zl.h(["Bad transaction data ",$APP.zj.l($APP.B([b])),", expected sequential collection"].join(""),new $APP.k(null,2,[$APP.Hn,o2,f2,b],null));b=v6(d2.g(a),b);return K2(a,b)};
b3.A=3;var x6=function x6(a){switch(arguments.length){case 1:return x6.g(arguments[0]);case 2:return x6.h(arguments[0],arguments[1]);case 3:return x6.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};x6.g=function(a){return f3($1(a,null,$APP.Xf))};x6.h=function(a,b){return f3($1(a,b,$APP.Xf))};x6.j=function(a,b,c){return f3($1(a,b,X2(c)))};x6.A=3;
var y6=function y6(a){switch(arguments.length){case 0:return y6.C();case 1:return y6.g(arguments[0]);case 2:return y6.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};y6.C=function(){return f3(Y1(null,$APP.Xf))};y6.g=function(a){return f3(Y1(a,$APP.Xf))};y6.h=function(a,b){return f3(Y1(a,X2(b)))};y6.A=2;
var z6=function z6(a){switch(arguments.length){case 1:return z6.g(arguments[0]);case 2:return z6.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};z6.g=function(a){return z6.h(a,$APP.Xf)};z6.h=function(a,b){b=v1a(a,b);if(null==b)return null;a=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);return z1a(new $APP.k(null,3,[Z2,x1a(a,b),d3,b,e3,a],null))};z6.A=2;
var A6=function A6(a){switch(arguments.length){case 2:return A6.h(arguments[0],arguments[1]);case 3:return A6.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};A6.h=function(a,b){return A6.j(a,b,null)};
A6.j=function(a,b,c){b=C1a(a,b,c);a=$APP.u(F5a.g($APP.p($APP.VH.g(a))));c=null;for(var d=0,e=0;;)if(e<d){var f=c.ca(null,e);$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);f.g?f.g(b):f.call(null,b);e+=1}else if(a=$APP.u(a))$APP.Ge(a)?(d=$APP.cd(a),a=$APP.dd(a),c=d,d=$APP.ce(d)):(c=$APP.v(a),$APP.A.j(c,0,null),c=$APP.A.j(c,1,null),c.g?c.g(b):c.call(null,b),a=$APP.w(a),c=null,d=0),e=0;else break;return b};A6.A=3;
var B6=function B6(a){switch(arguments.length){case 2:return B6.h(arguments[0],arguments[1]);case 3:return B6.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};B6.h=function(a,b){return B6.j(a,b,null)};
B6.j=function(a,b,c){var d=$APP.p(a);c=G0a(new $APP.k(null,4,[d2,d,e2,b,f2,$APP.K.h($APP.l(d)?$APP.fj.h(function(n){return $APP.vi.j(n,$APP.GC,!1)},n1(d,$APP.z1,null,null,null,null)):null,n1(b,$APP.z1,null,null,null,null)),h2,c],null));null==S2(d)?$APP.Bg(a,b):(c3.g(b),$APP.Cj.l($APP.VH.g(a),$APP.vi,Z2,b,$APP.B([d3,$APP.Sg,e3,b])));a=$APP.u(F5a.g($APP.p($APP.VH.g(a))));d=null;for(var e=0,f=0;;)if(f<e){var h=d.ca(null,f);$APP.A.j(h,0,null);h=$APP.A.j(h,1,null);h.g?h.g(c):h.call(null,c);f+=1}else if(a=
$APP.u(a))$APP.Ge(a)?(e=$APP.cd(a),a=$APP.dd(a),d=e,e=$APP.ce(e)):(d=$APP.v(a),$APP.A.j(d,0,null),d=$APP.A.j(d,1,null),d.g?d.g(c):d.call(null,c),a=$APP.w(a),d=null,e=0),f=0;else break;return b};B6.A=3;var C6=function C6(a){switch(arguments.length){case 2:return C6.h(arguments[0],arguments[1]);case 3:return C6.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};C6.h=function(a,b){return C6.j(a,$APP.Cy.C(),b)};
C6.j=function(a,b,c){$APP.Cj.l($APP.VH.g(a),$APP.Zm,F5a,$APP.vi,$APP.B([b,c]));return b};C6.A=3;$APP.g=k3.prototype;$APP.g.entry_set=function(){return $APP.cf($APP.fj.h($APP.cf,j3(this)))};
$APP.g.forEach=function(){function a(d,e){for(var f=$APP.u(j3(this)),h=null,n=0,t=0;;)if(t<n){var q=h.ca(null,t),x=$APP.A.j(q,0,null);q=$APP.A.j(q,1,null);d.call(e,q,x,this);t+=1}else if(f=$APP.u(f))$APP.Ge(f)?(h=$APP.cd(f),f=$APP.dd(f),x=h,n=$APP.ce(h),h=x):(h=$APP.v(f),x=$APP.A.j(h,0,null),q=$APP.A.j(h,1,null),d.call(e,q,x,this),f=$APP.w(f),h=null,n=0),t=0;else return null}function b(d){for(var e=$APP.u(j3(this)),f=null,h=0,n=0;;)if(n<h){var t=f.ca(null,n),q=$APP.A.j(t,0,null);t=$APP.A.j(t,1,null);
d.j?d.j(t,q,this):d.call(null,t,q,this);n+=1}else if(e=$APP.u(e))$APP.Ge(e)?(f=$APP.cd(e),e=$APP.dd(e),q=f,h=$APP.ce(f),f=q):(f=$APP.v(e),q=$APP.A.j(f,0,null),t=$APP.A.j(f,1,null),d.j?d.j(t,q,this):d.call(null,t,q,this),e=$APP.w(e),f=null,h=0),n=0;else return null}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.g=b;c.h=a;return c}();
$APP.g.get=function(a){if($APP.y.h(a,":db/id"))return this.eid;if(n2(a))return h3(G1a(this.db,this.eid,p2(a),null));var b=D6.h?D6.h(this,a):D6.call(null,this,a);return j2(this.db,a)?h3(b):b};$APP.g.key_set=function(){return $APP.cf($APP.ri(this))};$APP.g.entries=function(){return $APP.yh(j3(this))};$APP.g.value_set=function(){return $APP.cf($APP.fj.h($APP.he,j3(this)))};$APP.g.toString=function(){return $APP.qd(this)};$APP.g.keys=function(){return $APP.Md($APP.ri(this))};
$APP.g.values=function(){return $APP.Md($APP.fj.h($APP.he,j3(this)))};$APP.g.equiv=function(a){return l3.h?l3.h(this,a):l3.call(null,this,a)};$APP.g.has=function(a){return null!=this.get(a)};$APP.g.ea=function(a,b){return D6.j?D6.j(this,b,null):D6.call(null,this,b,null)};$APP.g.O=function(a,b,c){return D6.j?D6.j(this,b,c):D6.call(null,this,b,c)};$APP.g.W=function(a,b,c){return $APP.Oc($APP.vi.j($APP.p(this.cache),F2,this.eid),b,c)};$APP.g.aa=function(){i3.g?i3.g(this):i3.call(null,this);return $APP.ce($APP.p(this.cache))};
$APP.g.Y=function(){return I1a.g?I1a.g(this):I1a.call(null,this)};$APP.g.R=function(a,b){return l3.h?l3.h(this,b):l3.call(null,this,b)};$APP.g.la=function(a,b){return $APP.ui.h(i6a,D6.j?D6.j(this,b,i6a):D6.call(null,this,b,i6a))};$APP.g.Z=function(){i3.g?i3.g(this):i3.call(null,this);return $APP.u($APP.p(this.cache))};
$APP.g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length-1)].join(""));}};$APP.g.apply=function(a,b){return this.call.apply(this,[this].concat($APP.Ob(b)))};$APP.g.g=function(a){return D6.h?D6.h(this,a):D6.call(null,this,a)};$APP.g.h=function(a,b){return D6.j?D6.j(this,a,b):D6.call(null,this,a,b)};
var D6=function D6(a){switch(arguments.length){case 2:return D6.h(arguments[0],arguments[1]);case 3:return D6.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};D6.h=function(a,b){return D6.j(a,b,null)};
D6.j=function(a,b,c){if($APP.y.h(b,F2))return a.eid;if(n2(b))return G1a(a.db,a.eid,p2(b),c);var d=$APP.p(a.cache);d=d.g?d.g(b):d.call(null,b);if(null==d){if($APP.l($APP.p(a.cj)))return c;d=$APP.$f(l1(a.db,new $APP.H(null,2,5,$APP.I,[a.eid,b],null)));if(null==d)return c;c=F1a(a.db,b,d);$APP.Fg(a.cache,$APP.vi.j($APP.p(a.cache),b,c));return c}return d};D6.A=3;z_a("datascript.impl.entity.Entity",k3);var E6=function E6(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return E6.l(0<c.length?new $APP.Fd(c.slice(0),0,null):null)};E6.l=function(a){var b=$APP.ce(a);return $APP.ui.h($APP.Ig.h(b/2,a),$APP.Kg.h(b/2,a))};E6.A=0;E6.F=function(a){return this.l($APP.u(a))};var F6=function F6(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return F6.l(arguments[0],arguments[1],2<c.length?new $APP.Fd(c.slice(2),0,null):null)};
F6.l=function(a,b,c){return $APP.bf.j(function(d,e){d=$APP.v(l1(a,new $APP.H(null,2,5,$APP.I,[s2(a,b),e],null)));return null==d?null:$APP.Td(new $APP.H(null,2,5,$APP.I,[A2.g(d),Z1.g(d)],null))},null,c)};F6.A=2;F6.F=function(a){var b=$APP.v(a),c=$APP.w(a);a=$APP.v(c);c=$APP.w(c);return this.l(b,a,c)};var G6=function G6(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return G6.l(0<c.length?new $APP.Fd(c.slice(0),0,null):null)};
G6.l=function(a){return $APP.bf.j(function(b,c){return $APP.l(c)?c:$APP.Td(c)},!0,a)};G6.A=0;G6.F=function(a){return this.l($APP.u(a))};var H6=function H6(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return H6.l(0<c.length?new $APP.Fd(c.slice(0),0,null):null)};H6.l=function(a){return $APP.bf.j(function(b,c){return $APP.l(c)?$APP.Td(c):c},null,a)};H6.A=0;H6.F=function(a){return this.l($APP.u(a))};
var I6=function I6(a){switch(arguments.length){case 1:return I6.g(arguments[0]);case 2:return I6.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return I6.l(arguments[0],arguments[1],2<c.length?new $APP.Fd(c.slice(2),0,null):null)}};I6.g=function(){return!0};I6.h=function(a,b){return 0>f1(a,b)};I6.l=function(a,b,c){for(;;)if(I6.h(a,b))if($APP.w(c))a=b,b=$APP.v(c),c=$APP.w(c);else return I6.h(b,$APP.v(c));else return!1};
I6.F=function(a){var b=$APP.v(a),c=$APP.w(a);a=$APP.v(c);c=$APP.w(c);return this.l(b,a,c)};I6.A=2;var J6=function J6(a){switch(arguments.length){case 1:return J6.g(arguments[0]);case 2:return J6.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return J6.l(arguments[0],arguments[1],2<c.length?new $APP.Fd(c.slice(2),0,null):null)}};J6.g=function(){return!0};J6.h=function(a,b){return 0<f1(a,b)};
J6.l=function(a,b,c){for(;;)if(J6.h(a,b))if($APP.w(c))a=b,b=$APP.v(c),c=$APP.w(c);else return J6.h(b,$APP.v(c));else return!1};J6.F=function(a){var b=$APP.v(a),c=$APP.w(a);a=$APP.v(c);c=$APP.w(c);return this.l(b,a,c)};J6.A=2;
var K6=function K6(a){switch(arguments.length){case 1:return K6.g(arguments[0]);case 2:return K6.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return K6.l(arguments[0],arguments[1],2<c.length?new $APP.Fd(c.slice(2),0,null):null)}};K6.g=function(){return!0};K6.h=function(a,b){return!(0<f1(a,b))};K6.l=function(a,b,c){for(;;)if(K6.h(a,b))if($APP.w(c))a=b,b=$APP.v(c),c=$APP.w(c);else return K6.h(b,$APP.v(c));else return!1};
K6.F=function(a){var b=$APP.v(a),c=$APP.w(a);a=$APP.v(c);c=$APP.w(c);return this.l(b,a,c)};K6.A=2;var L6=function L6(a){switch(arguments.length){case 1:return L6.g(arguments[0]);case 2:return L6.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return L6.l(arguments[0],arguments[1],2<c.length?new $APP.Fd(c.slice(2),0,null):null)}};L6.g=function(){return!0};L6.h=function(a,b){return!(0>f1(a,b))};
L6.l=function(a,b,c){for(;;)if(L6.h(a,b))if($APP.w(c))a=b,b=$APP.v(c),c=$APP.w(c);else return L6.h(b,$APP.v(c));else return!1};L6.F=function(a){var b=$APP.v(a),c=$APP.w(a);a=$APP.v(c);c=$APP.w(c);return this.l(b,a,c)};L6.A=2;
var V1a=$APP.gi([$APP.QL,$APP.dt,$APP.Az,r7a,$APP.aL,$APP.CI,$APP.SK,$APP.dI,D6a,$APP.Yy,t5a,$APP.QC,$APP.Bm,$APP.AP,$APP.pF,$APP.fC,$APP.CG,u5,$APP.wF,$APP.$J,$APP.OK,Z4a,$APP.TK,$APP.QM,$APP.jK,$APP.$B,g5a,Y5a,$APP.AA,$APP.IM,$APP.YK,$APP.XG,$APP.sO,$APP.wO,$APP.rO,$APP.Sz,$APP.hK,$APP.jD,f5a,$APP.Xz,$APP.$I,m6a,$APP.BJ,$APP.hO,$APP.CB,$APP.iA,$APP.rC,$APP.$z,$APP.AI,$APP.RK,$APP.qG,$APP.KM,$APP.kK,$APP.pG,$APP.mz,$APP.uJ,$APP.hC,$APP.pD,$APP.Pz,h5a,$APP.gL,$APP.HN,g7a,$APP.KD,$APP.EC,$APP.EH,$APP.GE,
$APP.FH,E5a,$APP.VD,$APP.it,$APP.NM,$APP.aJ,$APP.LA],[$APP.Je,G6,$APP.Qba,function(a,b,c,d){if(null==d)throw $APP.Zl.h("get-else: nil default value is not supported",new $APP.k(null,1,[$APP.Hn,s5],null));a=$APP.v(l1(a,new $APP.H(null,2,5,$APP.I,[s2(a,b),c],null)));return null==a?d:Z1.g(a)},L6,$APP.vy,J6,$APP.ce,F6,$APP.zb,$APP.ff,$APP.Rd,$APP.rx,$APP.lf,$APP.Ie,$APP.Cb,$APP.ff,E6,$APP.Bw,$APP.Yi,K6,$APP.kl,$APP.y,$APP.wx,$APP.px,$APP.Hi,function(a,b,c){return null==$APP.C.h(g3(a,b),c)},$APP.ff,$APP.Dj,
$APP.yg,$APP.fl,$APP.Yo,$APP.Xe,$APP.Rn,$APP.hn,$APP.we,$APP.qx,$APP.zj,H5,$APP.te,$APP.pf,$APP.ui,$APP.ty,$APP.gf,$APP.$i,$APP.Bw,$APP.ui,$APP.C,$APP.m,I6,$APP.Cf,$APP.gj,$APP.Qo,$APP.Db,$APP.of,$APP.Cy,$APP.Ti,$APP.J,$APP.Te,$APP.bda,$APP.Zi,$APP.jf,$APP.ll,$APP.Xo,$APP.mf,$APP.rg,$APP.Kb,$APP.qf,$APP.jl,$APP.$f,H6,$APP.yb,$APP.Fi,$APP.Wi]),M6=function M6(a){switch(arguments.length){case 1:return M6.g(arguments[0]);case 2:return M6.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",
$APP.m.g(arguments.length)].join(""));}};M6.g=function(a){return $APP.bf.j(function(b,c){return 0>$APP.Xe(c,b)?c:b},$APP.v(a),$APP.w(a))};M6.h=function(a,b){return $APP.df($APP.bf.j(function(c,d){return $APP.ce(c)<a?$APP.Hk.h($APP.Xe,$APP.wf.h(c,d)):0>$APP.Xe(d,$APP.ne(c))?$APP.Hk.h($APP.Xe,$APP.wf.h($APP.Gi(c),d)):c},$APP.Sg,b))};M6.A=2;
var N6=function N6(a){switch(arguments.length){case 1:return N6.g(arguments[0]);case 2:return N6.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};N6.g=function(a){return $APP.bf.j(function(b,c){return 0<$APP.Xe(c,b)?c:b},$APP.v(a),$APP.w(a))};N6.h=function(a,b){return $APP.df($APP.bf.j(function(c,d){return $APP.ce(c)<a?$APP.Hk.h($APP.Xe,$APP.wf.h(c,d)):0<$APP.Xe(d,$APP.v(c))?$APP.Hk.h($APP.Xe,$APP.wf.h($APP.w(c),d)):c},$APP.Sg,b))};
N6.A=2;var O6=function O6(a){switch(arguments.length){case 1:return O6.g(arguments[0]);case 2:return O6.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};O6.g=function(a){return $APP.Hj(a)};O6.h=function(a,b){return $APP.df($APP.Cs.h(a,function(){return $APP.Hj(b)}))};O6.A=2;
var w7a=$APP.gi([F4a,$APP.dI,f7a,h6a,$APP.QM,$APP.rO,N6a,$APP.FL,E6a,c6a,$APP.uJ,v5a],[N1a,$APP.ce,function(a){var b=$APP.Hk.g(a);a=$APP.ce(a);var c=a>>1,d=$APP.A.h(b,c);return $APP.rg(a)?(d+$APP.A.h(b,c-1))/2:d},L1a,M6,N6,function(a){return $APP.ce($APP.iy.g(a))},$APP.Fi,M1a,function(a){return Math.sqrt(N1a(a))},O6,function(a,b){return $APP.df($APP.Ig.h(a,$APP.Vaa(b)))}]);$APP.g=m3.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "as":return this.as;case "default":return this.Hc;case "limit":return this.Db;case "name":return this.name;case "pattern":return this.pattern;case "recursion-limit":return this.pc;case "recursive?":return this.Aa;case "reverse?":return this.tc;case "xform":return this.Eb;case "multival?":return this.oc;case "ref?":return this.qc;case "component?":return this.lc;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.pull-parser.PullAttr{",", ","}",c,$APP.K.h(new $APP.H(null,12,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.ko,this.as],null),new $APP.H(null,2,5,$APP.I,[$APP.Lm,this.Hc],null),new $APP.H(null,2,5,$APP.I,[n3,this.Db],null),new $APP.H(null,2,5,$APP.I,[$APP.O,this.name],null),new $APP.H(null,2,5,$APP.I,[o3,this.pattern],null),new $APP.H(null,2,5,$APP.I,[p3,this.pc],null),new $APP.H(null,2,5,$APP.I,
[q3,this.Aa],null),new $APP.H(null,2,5,$APP.I,[r3,this.tc],null),new $APP.H(null,2,5,$APP.I,[s3,this.Eb],null),new $APP.H(null,2,5,$APP.I,[t3,this.oc],null),new $APP.H(null,2,5,$APP.I,[u3,this.qc],null),new $APP.H(null,2,5,$APP.I,[v3,this.lc],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,12,new $APP.H(null,12,5,$APP.I,[$APP.ko,$APP.Lm,n3,$APP.O,o3,p3,q3,r3,s3,t3,u3,v3],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};
$APP.g.ba=function(){return new m3(this.as,this.Hc,this.Db,this.name,this.pattern,this.pc,this.Aa,this.tc,this.Eb,this.oc,this.qc,this.lc,this.B,this.o,this.G)};$APP.g.aa=function(){return 12+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-1743810262^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.as,b.as)&&$APP.y.h(this.default,b.default)&&$APP.y.h(this.Db,b.Db)&&$APP.y.h(this.name,b.name)&&$APP.y.h(this.pattern,b.pattern)&&$APP.y.h(this.pc,b.pc)&&$APP.y.h(this.Aa,b.Aa)&&$APP.y.h(this.tc,b.tc)&&$APP.y.h(this.Eb,b.Eb)&&$APP.y.h(this.oc,b.oc)&&$APP.y.h(this.qc,b.qc)&&$APP.y.h(this.lc,b.lc)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,12,[s3,null,n3,null,r3,null,p3,null,$APP.Lm,null,$APP.O,null,$APP.ko,null,q3,null,v3,null,u3,null,t3,null,o3,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new m3(this.as,this.Hc,this.Db,this.name,this.pattern,this.pc,this.Aa,this.tc,this.Eb,this.oc,this.qc,this.lc,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "as":case "default":case "limit":case "name":case "pattern":case "recursion-limit":case "recursive?":case "reverse?":case "xform":case "multival?":case "ref?":case "component?":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.ko,b):$APP.Bf.call(null,$APP.ko,b))?new m3(c,this.Hc,this.Db,this.name,this.pattern,this.pc,this.Aa,this.tc,this.Eb,this.oc,this.qc,this.lc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.Lm,b):$APP.Bf.call(null,$APP.Lm,b))?new m3(this.as,c,this.Db,this.name,this.pattern,this.pc,this.Aa,this.tc,this.Eb,this.oc,this.qc,this.lc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(n3,b):$APP.Bf.call(null,n3,b))?new m3(this.as,this.Hc,c,this.name,
this.pattern,this.pc,this.Aa,this.tc,this.Eb,this.oc,this.qc,this.lc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.O,b):$APP.Bf.call(null,$APP.O,b))?new m3(this.as,this.Hc,this.Db,c,this.pattern,this.pc,this.Aa,this.tc,this.Eb,this.oc,this.qc,this.lc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(o3,b):$APP.Bf.call(null,o3,b))?new m3(this.as,this.Hc,this.Db,this.name,c,this.pc,this.Aa,this.tc,this.Eb,this.oc,this.qc,this.lc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(p3,b):$APP.Bf.call(null,
p3,b))?new m3(this.as,this.Hc,this.Db,this.name,this.pattern,c,this.Aa,this.tc,this.Eb,this.oc,this.qc,this.lc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(q3,b):$APP.Bf.call(null,q3,b))?new m3(this.as,this.Hc,this.Db,this.name,this.pattern,this.pc,c,this.tc,this.Eb,this.oc,this.qc,this.lc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(r3,b):$APP.Bf.call(null,r3,b))?new m3(this.as,this.Hc,this.Db,this.name,this.pattern,this.pc,this.Aa,c,this.Eb,this.oc,this.qc,this.lc,this.B,this.o,null):$APP.l($APP.Bf.h?
$APP.Bf.h(s3,b):$APP.Bf.call(null,s3,b))?new m3(this.as,this.Hc,this.Db,this.name,this.pattern,this.pc,this.Aa,this.tc,c,this.oc,this.qc,this.lc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(t3,b):$APP.Bf.call(null,t3,b))?new m3(this.as,this.Hc,this.Db,this.name,this.pattern,this.pc,this.Aa,this.tc,this.Eb,c,this.qc,this.lc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(u3,b):$APP.Bf.call(null,u3,b))?new m3(this.as,this.Hc,this.Db,this.name,this.pattern,this.pc,this.Aa,this.tc,this.Eb,this.oc,c,
this.lc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(v3,b):$APP.Bf.call(null,v3,b))?new m3(this.as,this.Hc,this.Db,this.name,this.pattern,this.pc,this.Aa,this.tc,this.Eb,this.oc,this.qc,c,this.B,this.o,null):new m3(this.as,this.Hc,this.Db,this.name,this.pattern,this.pc,this.Aa,this.tc,this.Eb,this.oc,this.qc,this.lc,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,12,5,$APP.I,[new $APP.Ve($APP.ko,this.as,null),new $APP.Ve($APP.Lm,this.Hc,null),new $APP.Ve(n3,this.Db,null),new $APP.Ve($APP.O,this.name,null),new $APP.Ve(o3,this.pattern,null),new $APP.Ve(p3,this.pc,null),new $APP.Ve(q3,this.Aa,null),new $APP.Ve(r3,this.tc,null),new $APP.Ve(s3,this.Eb,null),new $APP.Ve(t3,this.oc,null),new $APP.Ve(u3,this.qc,null),new $APP.Ve(v3,this.lc,null)],null),this.o))};
$APP.g.X=function(a,b){return new m3(this.as,this.Hc,this.Db,this.name,this.pattern,this.pc,this.Aa,this.tc,this.Eb,this.oc,this.qc,this.lc,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g=w3.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "attrs":return this.ra;case "first-attr":return this.od;case "last-attr":return this.zd;case "reverse-attrs":return this.cd;case "wildcard?":return this.zc;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.pull-parser.PullPattern{",", ","}",c,$APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[x3,this.ra],null),new $APP.H(null,2,5,$APP.I,[y3,this.od],null),new $APP.H(null,2,5,$APP.I,[z3,this.zd],null),new $APP.H(null,2,5,$APP.I,[A3,this.cd],null),new $APP.H(null,2,5,$APP.I,[B3,this.zc],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,5,new $APP.H(null,5,5,$APP.I,[x3,y3,z3,A3,B3],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new w3(this.ra,this.od,this.zd,this.cd,this.zc,this.B,this.o,this.G)};$APP.g.aa=function(){return 5+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-795554044^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.ra,b.ra)&&$APP.y.h(this.od,b.od)&&$APP.y.h(this.zd,b.zd)&&$APP.y.h(this.cd,b.cd)&&$APP.y.h(this.zc,b.zc)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,5,[A3,null,y3,null,x3,null,B3,null,z3,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new w3(this.ra,this.od,this.zd,this.cd,this.zc,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "attrs":case "first-attr":case "last-attr":case "reverse-attrs":case "wildcard?":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(x3,b):$APP.Bf.call(null,x3,b))?new w3(c,this.od,this.zd,this.cd,this.zc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(y3,b):$APP.Bf.call(null,y3,b))?new w3(this.ra,c,this.zd,this.cd,this.zc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(z3,b):$APP.Bf.call(null,z3,b))?new w3(this.ra,this.od,c,this.cd,this.zc,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(A3,b):$APP.Bf.call(null,A3,b))?new w3(this.ra,this.od,this.zd,c,this.zc,this.B,this.o,
null):$APP.l($APP.Bf.h?$APP.Bf.h(B3,b):$APP.Bf.call(null,B3,b))?new w3(this.ra,this.od,this.zd,this.cd,c,this.B,this.o,null):new w3(this.ra,this.od,this.zd,this.cd,this.zc,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.Ve(x3,this.ra,null),new $APP.Ve(y3,this.od,null),new $APP.Ve(z3,this.zd,null),new $APP.Ve(A3,this.cd,null),new $APP.Ve(B3,this.zc,null)],null),this.o))};
$APP.g.X=function(a,b){return new w3(this.ra,this.od,this.zd,this.cd,this.zc,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};var Z1a=O1a(new $APP.k(null,3,[$APP.O,F2,$APP.ko,F2,s3,$APP.ff],null)),R1a=P1a(new $APP.k(null,1,[x3,new $APP.D(null,Z1a,null,1,null)],null)),S1a=$APP.vi.j(R1a,B3,!0);$APP.g=I3.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "db":return this.db;case "visitor":return this.He;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.pull-api.Context{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Z2,this.db],null),new $APP.H(null,2,5,$APP.I,[R3,this.He],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,2,new $APP.H(null,2,5,$APP.I,[Z2,R3],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};
$APP.g.ba=function(){return new I3(this.db,this.He,this.B,this.o,this.G)};$APP.g.aa=function(){return 2+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=1727735959^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.db,b.db)&&$APP.y.h(this.He,b.He)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,2,[Z2,null,R3,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new I3(this.db,this.He,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "db":case "visitor":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(Z2,b):$APP.Bf.call(null,Z2,b))?new I3(c,this.He,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(R3,b):$APP.Bf.call(null,R3,b))?new I3(this.db,c,this.B,this.o,null):new I3(this.db,this.He,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.Ve(Z2,this.db,null),new $APP.Ve(R3,this.He,null)],null),this.o))};$APP.g.X=function(a,b){return new I3(this.db,this.He,b,this.o,this.G)};
$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g=J3.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "value":return this.value;case "datoms":return this.wa;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.pull-api.ResultFrame{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.zM,this.value],null),new $APP.H(null,2,5,$APP.I,[$APP.a2,this.wa],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,2,new $APP.H(null,2,5,$APP.I,[$APP.zM,$APP.a2],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};
$APP.g.ba=function(){return new J3(this.value,this.wa,this.B,this.o,this.G)};$APP.g.aa=function(){return 2+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=836381841^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.value,b.value)&&$APP.y.h(this.wa,b.wa)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,2,[$APP.zM,null,$APP.a2,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new J3(this.value,this.wa,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "value":case "datoms":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.zM,b):$APP.Bf.call(null,$APP.zM,b))?new J3(c,this.wa,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.a2,b):$APP.Bf.call(null,$APP.a2,b))?new J3(this.value,c,this.B,this.o,null):new J3(this.value,this.wa,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.Ve($APP.zM,this.value,null),new $APP.Ve($APP.a2,this.wa,null)],null),this.o))};
$APP.g.X=function(a,b){return new J3(this.value,this.wa,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g=K3.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "acc":return this.na;case "attr":return this.ka;case "datoms":return this.wa;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.pull-api.MultivalAttrFrame{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[I5,this.na],null),new $APP.H(null,2,5,$APP.I,[X5,this.ka],null),new $APP.H(null,2,5,$APP.I,[$APP.a2,this.wa],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,3,new $APP.H(null,3,5,$APP.I,[I5,X5,$APP.a2],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new K3(this.na,this.ka,this.wa,this.B,this.o,this.G)};$APP.g.aa=function(){return 3+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=1829867699^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.na,b.na)&&$APP.y.h(this.ka,b.ka)&&$APP.y.h(this.wa,b.wa)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,3,[I5,null,$APP.a2,null,X5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new K3(this.na,this.ka,this.wa,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "acc":case "attr":case "datoms":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(I5,b):$APP.Bf.call(null,I5,b))?new K3(c,this.ka,this.wa,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(X5,b):$APP.Bf.call(null,X5,b))?new K3(this.na,c,this.wa,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.a2,b):$APP.Bf.call(null,$APP.a2,b))?new K3(this.na,this.ka,c,this.B,this.o,null):new K3(this.na,this.ka,this.wa,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.Ve(I5,this.na,null),new $APP.Ve(X5,this.ka,null),new $APP.Ve($APP.a2,this.wa,null)],null),this.o))};$APP.g.X=function(a,b){return new K3(this.na,this.ka,this.wa,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};
$APP.g.Kg=function(){for(var a=this,b=a.na,c=a.wa;;){var d=G3(c);if(null==d||$APP.ui.h(d.a,a.ka.name))return new $APP.H(null,1,5,$APP.I,[new J3($APP.$f($APP.Vc(b)),function(){var h=c;return $APP.l(h)?h:$APP.Kd}(),null,null,null)],null);if($APP.l(function(){var h=a.ka.Db;return $APP.l(h)?$APP.ce(b)>=a.ka.Db&&!0:h}()))for(var e=c;;){d=G3(e);if(null==d||$APP.ui.h(d.a,a.ka.name))return new $APP.H(null,1,5,$APP.I,[new J3($APP.Vc(b),function(){var h=e;return $APP.l(h)?h:$APP.Kd}(),null,null,null)],null);
e=H3(e)}else{d=$APP.Rg.h(b,d.v);var f=H3(c);b=d;c=f}}};$APP.g=L3.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "seen":return this.sa;case "recursion-limits":return this.xa;case "acc":return this.na;case "pattern":return this.pattern;case "attr":return this.ka;case "datoms":return this.wa;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.pull-api.MultivalRefAttrFrame{",", ","}",c,$APP.K.h(new $APP.H(null,6,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[K5,this.sa],null),new $APP.H(null,2,5,$APP.I,[V5,this.xa],null),new $APP.H(null,2,5,$APP.I,[I5,this.na],null),new $APP.H(null,2,5,$APP.I,[o3,this.pattern],null),new $APP.H(null,2,5,$APP.I,[X5,this.ka],null),new $APP.H(null,2,5,$APP.I,[$APP.a2,this.wa],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,6,new $APP.H(null,6,5,$APP.I,[K5,V5,I5,o3,X5,$APP.a2],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new L3(this.sa,this.xa,this.na,this.pattern,this.ka,this.wa,this.B,this.o,this.G)};$APP.g.aa=function(){return 6+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=1769511936^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.sa,b.sa)&&$APP.y.h(this.xa,b.xa)&&$APP.y.h(this.na,b.na)&&$APP.y.h(this.pattern,b.pattern)&&$APP.y.h(this.ka,b.ka)&&$APP.y.h(this.wa,b.wa)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,6,[I5,null,K5,null,V5,null,$APP.a2,null,o3,null,X5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new L3(this.sa,this.xa,this.na,this.pattern,this.ka,this.wa,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "datoms":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(K5,b):$APP.Bf.call(null,K5,b))?new L3(c,this.xa,this.na,this.pattern,this.ka,this.wa,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(V5,b):$APP.Bf.call(null,V5,b))?new L3(this.sa,c,this.na,this.pattern,this.ka,this.wa,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(I5,b):$APP.Bf.call(null,I5,b))?new L3(this.sa,this.xa,c,this.pattern,this.ka,this.wa,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(o3,b):$APP.Bf.call(null,o3,b))?new L3(this.sa,
this.xa,this.na,c,this.ka,this.wa,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(X5,b):$APP.Bf.call(null,X5,b))?new L3(this.sa,this.xa,this.na,this.pattern,c,this.wa,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.a2,b):$APP.Bf.call(null,$APP.a2,b))?new L3(this.sa,this.xa,this.na,this.pattern,this.ka,c,this.B,this.o,null):new L3(this.sa,this.xa,this.na,this.pattern,this.ka,this.wa,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,6,5,$APP.I,[new $APP.Ve(K5,this.sa,null),new $APP.Ve(V5,this.xa,null),new $APP.Ve(I5,this.na,null),new $APP.Ve(o3,this.pattern,null),new $APP.Ve(X5,this.ka,null),new $APP.Ve($APP.a2,this.wa,null)],null),this.o))};$APP.g.X=function(a,b){return new L3(this.sa,this.xa,this.na,this.pattern,this.ka,this.wa,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};
$APP.g.Fh=function(a,b){a=this.sa;var c=this.xa,d=this.na;b=b.value;b=null==b?d:$APP.Rg.h(d,b);return new L3(a,c,b,this.pattern,this.ka,H3(this.wa),null,null,null)};
$APP.g.Kg=function(a,b){var c=this;a=G3(c.wa);if(null==a||$APP.ui.h(a.a,c.ka.name))return new $APP.H(null,1,5,$APP.I,[new J3($APP.$f($APP.Vc(c.na)),function(){var e=c.wa;return $APP.l(e)?e:$APP.Kd}(),null,null,null)],null);if($APP.l(function(){var e=c.ka.Db;return $APP.l(e)?$APP.ce(c.na)>=c.ka.Db&&!0:e}()))for(var d=c.wa;;){b=G3(d);if(null==b||$APP.ui.h(b.a,c.ka.name))return new $APP.H(null,1,5,$APP.I,[new J3($APP.Vc(c.na),function(){var e=d;return $APP.l(e)?e:$APP.Kd}(),null,null,null)],null);d=
H3(d)}else return a=$APP.l(c.ka.tc)?a.e:a.v,new $APP.H(null,2,5,$APP.I,[this,P3.ha?P3.ha(b,c.sa,c.xa,c.pattern,c.ka,a):P3.call(null,b,c.sa,c.xa,c.pattern,c.ka,a)],null)};$APP.g=M3.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "seen":return this.sa;case "recursion-limits":return this.xa;case "acc":return this.na;case "pattern":return this.pattern;case "attr":return this.ka;case "attrs":return this.ra;case "datoms":return this.wa;case "id":return this.id;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.pull-api.AttrsFrame{",", ","}",c,$APP.K.h(new $APP.H(null,8,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[K5,this.sa],null),new $APP.H(null,2,5,$APP.I,[V5,this.xa],null),new $APP.H(null,2,5,$APP.I,[I5,this.na],null),new $APP.H(null,2,5,$APP.I,[o3,this.pattern],null),new $APP.H(null,2,5,$APP.I,[X5,this.ka],null),new $APP.H(null,2,5,$APP.I,[x3,this.ra],null),new $APP.H(null,2,5,$APP.I,[$APP.a2,this.wa],
null),new $APP.H(null,2,5,$APP.I,[$APP.yq,this.id],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,8,new $APP.H(null,8,5,$APP.I,[K5,V5,I5,o3,X5,x3,$APP.a2,$APP.yq],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new M3(this.sa,this.xa,this.na,this.pattern,this.ka,this.ra,this.wa,this.id,this.B,this.o,this.G)};$APP.g.aa=function(){return 8+$APP.ce(this.o)};
$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=1127179791^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.sa,b.sa)&&$APP.y.h(this.xa,b.xa)&&$APP.y.h(this.na,b.na)&&$APP.y.h(this.pattern,b.pattern)&&$APP.y.h(this.ka,b.ka)&&$APP.y.h(this.ra,b.ra)&&$APP.y.h(this.wa,b.wa)&&$APP.y.h(this.id,b.id)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,8,[I5,null,K5,null,$APP.yq,null,V5,null,x3,null,$APP.a2,null,o3,null,X5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new M3(this.sa,this.xa,this.na,this.pattern,this.ka,this.ra,this.wa,this.id,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "attrs":case "datoms":case "id":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(K5,b):$APP.Bf.call(null,K5,b))?new M3(c,this.xa,this.na,this.pattern,this.ka,this.ra,this.wa,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(V5,b):$APP.Bf.call(null,V5,b))?new M3(this.sa,c,this.na,this.pattern,this.ka,this.ra,this.wa,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(I5,b):$APP.Bf.call(null,I5,b))?new M3(this.sa,this.xa,c,this.pattern,this.ka,this.ra,this.wa,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(o3,
b):$APP.Bf.call(null,o3,b))?new M3(this.sa,this.xa,this.na,c,this.ka,this.ra,this.wa,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(X5,b):$APP.Bf.call(null,X5,b))?new M3(this.sa,this.xa,this.na,this.pattern,c,this.ra,this.wa,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(x3,b):$APP.Bf.call(null,x3,b))?new M3(this.sa,this.xa,this.na,this.pattern,this.ka,c,this.wa,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.a2,b):$APP.Bf.call(null,$APP.a2,b))?new M3(this.sa,this.xa,this.na,
this.pattern,this.ka,this.ra,c,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.yq,b):$APP.Bf.call(null,$APP.yq,b))?new M3(this.sa,this.xa,this.na,this.pattern,this.ka,this.ra,this.wa,c,this.B,this.o,null):new M3(this.sa,this.xa,this.na,this.pattern,this.ka,this.ra,this.wa,this.id,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,8,5,$APP.I,[new $APP.Ve(K5,this.sa,null),new $APP.Ve(V5,this.xa,null),new $APP.Ve(I5,this.na,null),new $APP.Ve(o3,this.pattern,null),new $APP.Ve(X5,this.ka,null),new $APP.Ve(x3,this.ra,null),new $APP.Ve($APP.a2,this.wa,null),new $APP.Ve($APP.yq,this.id,null)],null),this.o))};$APP.g.X=function(a,b){return new M3(this.sa,this.xa,this.na,this.pattern,this.ka,this.ra,this.wa,this.id,b,this.o,this.G)};
$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Fh=function(a,b){var c=this;return new M3(c.sa,c.xa,c2a(c.na,c.ka.as,function(){var d=b.value,e=c.ka.Eb;return e.g?e.g(d):e.call(null,d)}()),c.pattern,G3(c.ra),H3(c.ra),$APP.$f(function(){var d=b.wa;return $APP.l(d)?d:H3(c.wa)}()),c.id,null,null,null)};
$APP.g.Kg=function(a,b){var c=this,d=c.na,e=c.ka;a=c.ra;for(var f=c.wa;;){if(null==f&&null==e)return new $APP.H(null,1,5,$APP.I,[function(){var E=c.sa,F=c.xa,N=d,S=c.pattern,Y=G3(c.pattern.cd),aa=H3(c.pattern.cd),ca=c.id;return g2a.Da?g2a.Da(E,F,N,S,Y,aa,ca):g2a.call(null,E,F,N,S,Y,aa,ca)}()],null);if(null!=e&&$APP.y.h(F2,e.name)){var h=$APP.Hh.j(d,e.as,function(){var E=e.Eb;return E.g?E.g(c.id):E.call(null,c.id)}()),n=G3(a);a=H3(a);d=h;e=n}else{var t=G3(f),q=$APP.l(function(){var E=t;return $APP.l(E)?
e:E}())?$APP.Xe(e.name,t.a):null,x=function(){var E=null==e;if(E)return E;E=q;return $APP.l(E)?0<q:E}(),z=function(){var E=null==t;if(E)return E;E=q;return $APP.l(E)?0>q:E}();if($APP.l(function(){var E=c.pattern.zc;return $APP.l(E)?(E=null!=t)?(E=x,$APP.l(E)?!0:E):E:E}()))n=$_(v0a(b.db).Cc,t.a,function(E,F,N,S,Y){return function(){return T1a(b.db,Y.a)}}(d,e,a,f,t,q,x,z,this)),h=d,a=$APP.l(e)?b2a(a,e):null,d=h,e=n;else if($APP.l(x))h=d,n=e,f=H3(f),d=h,e=n;else if(d2a(b,s6a,c.id,e.name,null),$APP.l(function(){var E=
z;return $APP.l(E)?null==e&&!0:E}()))h=d,n=G3(a),a=H3(a),d=h,e=n;else if($APP.l(function(){var E=z;return $APP.l(E)?null!=$APP.Lm.g(e)&&!0:E}()))h=$APP.Hh.j(d,e.as,$APP.Lm.g(e)),n=G3(a),a=H3(a),d=h,e=n;else if($APP.l(z))h=function(){var E=e.Eb;return E.g?E.g(null):E.call(null,null)}(),null==h?(h=d,n=G3(a),a=H3(a),d=h,e=n):(h=$APP.Hh.j(d,e.as,h),n=G3(a),a=H3(a),d=h,e=n);else{if($APP.l(function(){var E=e.oc;return $APP.l(E)?(E=e.qc,$APP.l(E)?!0:E):E}()))return new $APP.H(null,2,5,$APP.I,[new M3(c.sa,
c.xa,d,c.pattern,e,a,f,c.id,null,null,null),new L3(c.sa,c.xa,$APP.Tc($APP.Sg),c.pattern,e,f,null,null,null)],null);if($APP.l(e.oc))return new $APP.H(null,2,5,$APP.I,[new M3(c.sa,c.xa,d,c.pattern,e,a,f,c.id,null,null,null),new K3($APP.Tc($APP.Sg),e,f,null,null,null)],null);if($APP.l(e.qc))return new $APP.H(null,2,5,$APP.I,[new M3(c.sa,c.xa,d,c.pattern,e,a,f,c.id,null,null,null),function(){var E=c.sa,F=c.xa,N=c.pattern,S=e,Y=t.v;return P3.ha?P3.ha(b,E,F,N,S,Y):P3.call(null,b,E,F,N,S,Y)}()],null);h=
$APP.Hh.j(d,e.as,function(){var E=t.v,F=e.Eb;return F.g?F.g(E):F.call(null,E)}());n=G3(a);a=H3(a);f=H3(f);d=h;e=n}}}};$APP.g=N3.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "seen":return this.sa;case "recursion-limits":return this.xa;case "acc":return this.na;case "pattern":return this.pattern;case "attr":return this.ka;case "attrs":return this.ra;case "id":return this.id;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.pull-api.ReverseAttrsFrame{",", ","}",c,$APP.K.h(new $APP.H(null,7,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[K5,this.sa],null),new $APP.H(null,2,5,$APP.I,[V5,this.xa],null),new $APP.H(null,2,5,$APP.I,[I5,this.na],null),new $APP.H(null,2,5,$APP.I,[o3,this.pattern],null),new $APP.H(null,2,5,$APP.I,[X5,this.ka],null),new $APP.H(null,2,5,$APP.I,[x3,this.ra],null),new $APP.H(null,2,5,$APP.I,[$APP.yq,
this.id],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,7,new $APP.H(null,7,5,$APP.I,[K5,V5,I5,o3,X5,x3,$APP.yq],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new N3(this.sa,this.xa,this.na,this.pattern,this.ka,this.ra,this.id,this.B,this.o,this.G)};$APP.g.aa=function(){return 7+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=470210558^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.sa,b.sa)&&$APP.y.h(this.xa,b.xa)&&$APP.y.h(this.na,b.na)&&$APP.y.h(this.pattern,b.pattern)&&$APP.y.h(this.ka,b.ka)&&$APP.y.h(this.ra,b.ra)&&$APP.y.h(this.id,b.id)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,7,[I5,null,K5,null,$APP.yq,null,V5,null,x3,null,o3,null,X5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new N3(this.sa,this.xa,this.na,this.pattern,this.ka,this.ra,this.id,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "attrs":case "id":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(K5,b):$APP.Bf.call(null,K5,b))?new N3(c,this.xa,this.na,this.pattern,this.ka,this.ra,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(V5,b):$APP.Bf.call(null,V5,b))?new N3(this.sa,c,this.na,this.pattern,this.ka,this.ra,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(I5,b):$APP.Bf.call(null,I5,b))?new N3(this.sa,this.xa,c,this.pattern,this.ka,this.ra,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(o3,b):$APP.Bf.call(null,
o3,b))?new N3(this.sa,this.xa,this.na,c,this.ka,this.ra,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(X5,b):$APP.Bf.call(null,X5,b))?new N3(this.sa,this.xa,this.na,this.pattern,c,this.ra,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(x3,b):$APP.Bf.call(null,x3,b))?new N3(this.sa,this.xa,this.na,this.pattern,this.ka,c,this.id,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.yq,b):$APP.Bf.call(null,$APP.yq,b))?new N3(this.sa,this.xa,this.na,this.pattern,this.ka,this.ra,c,this.B,
this.o,null):new N3(this.sa,this.xa,this.na,this.pattern,this.ka,this.ra,this.id,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,7,5,$APP.I,[new $APP.Ve(K5,this.sa,null),new $APP.Ve(V5,this.xa,null),new $APP.Ve(I5,this.na,null),new $APP.Ve(o3,this.pattern,null),new $APP.Ve(X5,this.ka,null),new $APP.Ve(x3,this.ra,null),new $APP.Ve($APP.yq,this.id,null)],null),this.o))};
$APP.g.X=function(a,b){return new N3(this.sa,this.xa,this.na,this.pattern,this.ka,this.ra,this.id,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Fh=function(a,b){a=this.sa;var c=this.xa,d=this.na,e=this.ka.as;b=b.value;var f=this.ka.Eb;b=f.g?f.g(b):f.call(null,b);return new N3(a,c,c2a(d,e,b),this.pattern,G3(this.ra),H3(this.ra),this.id,null,null,null)};
$APP.g.Kg=function(a,b){var c=this.na;a=this.ka;for(var d=this.ra;;){if(null==a)return new $APP.H(null,1,5,$APP.I,[new J3($APP.$f($APP.Vc(c)),null,null,null,null)],null);var e=a.name,f=b.db;f=f instanceof $APP.x1?S0(f.jc,d1.D(0,e,this.id,536870912),d1.D(2147483647,e,this.id,2147483647)):l1(f,new $APP.H(null,3,5,$APP.I,[null,e,this.id],null));d2a(b,d5a,null,e,this.id);if($APP.we(f)&&null!=$APP.Lm.g(a))c=$APP.Hh.j(c,a.as,$APP.Lm.g(a)),a=G3(d),d=e=H3(d);else if($APP.we(f))a=G3(d),d=e=H3(d);else{if($APP.l(a.lc)){e=
$APP.I;c=new N3(this.sa,this.xa,c,this.pattern,a,d,this.id,null,null,null);d=this.sa;var h=this.xa,n=this.pattern;f=G3(f).e;b=P3.ha?P3.ha(b,d,h,n,a,f):P3.call(null,b,d,h,n,a,f);b=new $APP.H(null,2,5,e,[c,b],null)}else b=new $APP.H(null,2,5,$APP.I,[new N3(this.sa,this.xa,c,this.pattern,a,d,this.id,null,null,null),new L3(this.sa,this.xa,$APP.Tc($APP.Sg),this.pattern,a,f,null,null,null)],null);return b}}};
var P6=function P6(a){switch(arguments.length){case 3:return P6.j(arguments[0],arguments[1],arguments[2]);case 4:return P6.D(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};P6.j=function(a,b,c){return P6.D(a,b,c,$APP.Xf)};P6.D=function(a,b,c,d){a=S3(a,b,d);return Q3(a,c)};P6.A=4;
var Q6=function Q6(a){switch(arguments.length){case 3:return Q6.j(arguments[0],arguments[1],arguments[2]);case 4:return Q6.D(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};Q6.j=function(a,b,c){return Q6.D(a,b,c,$APP.Xf)};Q6.D=function(a,b,c,d){var e=S3(a,b,d);return $APP.mn.h(function(f){return Q3(e,f)},c)};Q6.A=4;var R6=function R6(a){switch(arguments.length){case 1:return R6.g(arguments[0]);case 2:return R6.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};R6.g=function(a){return o2a(a,$APP.Xf)};R6.h=function(a,b){return o2a(a,b)};R6.A=2;var S6=function S6(a){switch(arguments.length){case 1:return S6.g(arguments[0]);case 2:return S6.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};
S6.g=function(a){return S6.h(a,$APP.Xf)};
S6.h=function(a,b){b=$APP.Yf(b);var c=$APP.C.j(b,r5a,$APP.SP),d=$APP.C.j(b,y5a,l2a),e=U3(a,"tx0"),f=function(){var x=U3(a,"schema");return c.g?c.g(x):c.call(null,x)}();(function(){var x=new $APP.Cd(function(){return X1},k6a,$APP.gi([$APP.Kt,$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[!0,$APP.$O,G5a,"datascript/db.cljc",23,1,931,931,$APP.J(new $APP.H(null,1,5,$APP.I,[M5],null)),null,$APP.l(X1)?X1.H:null]));return x.g?x.g(f):x.call(null,f)})();var h=$APP.mn.h(d,U3(a,
"attrs")),n=$APP.mn.h(d,U3(a,"keywords")),t=V3(function(x){var z=T3(x,0),E=$APP.A.h(h,T3(x,1)),F=T3(x,2);if("number"===typeof F)var N=F;else if("string"===typeof F)N=F;else if($APP.Ke(F))N=F;else if($APP.Ab(F)||$APP.Fe(F))N=function(){var S=T3(F,0);if($APP.l($APP.fl.h?$APP.fl.h(0,S):$APP.fl.call(null,0,S)))return $APP.A.h(n,T3(F,1));if($APP.l($APP.fl.h?$APP.fl.h(1,S):$APP.fl.call(null,1,S)))return S=T3(F,1),c.g?c.g(S):c.call(null,S);if($APP.l($APP.fl.h?$APP.fl.h(2,S):$APP.fl.call(null,2,S)))return Infinity;
if($APP.l($APP.fl.h?$APP.fl.h(3,S):$APP.fl.call(null,3,S)))return-Infinity;if($APP.l($APP.fl.h?$APP.fl.h(4,S):$APP.fl.call(null,4,S)))return NaN;throw $APP.Zl.h(["Unexpected value marker ",$APP.zj.l($APP.B([S]))," in ",$APP.zj.l($APP.B([$APP.zj.l($APP.B([F]))]))].join(""),new $APP.k(null,2,[$APP.Hn,w5a,$APP.zM,F],null));}();else throw $APP.Zl.h(["Unexpected value type ",$APP.zj.l($APP.B([$APP.Kb(F)]))," (",$APP.zj.l($APP.B([$APP.zj.l($APP.B([F]))])),")"].join(""),new $APP.k(null,2,[$APP.Hn,w5a,$APP.zM,
F],null));x=e+T3(x,3);return d1.D(z,E,N,x)},U3(a,"eavt"));d=function(){var x=U3(a,"aevt");return null==x?null:V3(function(z){return t[z]},x)}();var q=function(){var x=U3(a,"avet");return null==x?null:V3(function(z){return t[z]},x)}();b=$APP.Ml.l($APP.B([new $APP.k(null,2,[Z0,U3(a,"branching-factor"),d0a,function(){var x=U3(a,"ref-type");return null==x?null:$APP.gj.g(x)}()],null),$APP.wi(b,new $APP.H(null,2,5,$APP.I,[Z0,d0a],null))]));return W2(new $APP.k(null,6,[$APP.y1,f,$APP.z1,V0(g1,t,b),A1,V0(h1,
d,b),r1,V0(i1,q,b),B1,U3(a,"max-eid"),C1,U3(a,"max-tx")],null))};S6.A=2;$APP.g=d4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){return $APP.C.j(this.o,b,c)};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Placeholder{",", ","}",c,$APP.K.h($APP.Sg,this.o))};
$APP.g.ia=function(){return new $APP.xh(this,0,$APP.Sg,$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new d4(this.B,this.o,this.G)};$APP.g.aa=function(){return 0+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-528488587^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te($APP.Ci,b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new d4(this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){return $APP.Te(this.o,b)};$APP.g.U=function(a,b,c){return new d4(this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.Sg,this.o))};$APP.g.X=function(a,b){return new d4(b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};
$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return c};$APP.g.Cb=function(a,b){return b};$APP.g=e4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "symbol":return this.Na;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Variable{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Am,this.Na],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[$APP.Am],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new e4(this.Na,this.B,this.o,this.G)};
$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=736891289^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.Na,b.Na)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[$APP.Am,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new e4(this.Na,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "symbol":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.Am,b):$APP.Bf.call(null,$APP.Am,b))?new e4(c,this.B,this.o,null):new e4(this.Na,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve($APP.Am,this.Na,null)],null),this.o))};$APP.g.X=function(a,b){return new e4(this.Na,b,this.o,this.G)};
$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.Na,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.Na):Q4.call(null,b,this.Na)};$APP.g=f4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "symbol":return this.Na;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.SrcVar{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Am,this.Na],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[$APP.Am],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new f4(this.Na,this.B,this.o,this.G)};$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-1648766309^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.Na,b.Na)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[$APP.Am,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new f4(this.Na,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "symbol":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.Am,b):$APP.Bf.call(null,$APP.Am,b))?new f4(c,this.B,this.o,null):new f4(this.Na,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve($APP.Am,this.Na,null)],null),this.o))};$APP.g.X=function(a,b){return new f4(this.Na,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;
$APP.g.Bb=function(a,b,c){return Z3(b,this.Na,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.Na):Q4.call(null,b,this.Na)};$APP.g=g4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){return $APP.C.j(this.o,b,c)};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.DefaultSrc{",", ","}",c,$APP.K.h($APP.Sg,this.o))};$APP.g.ia=function(){return new $APP.xh(this,0,$APP.Sg,$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new g4(this.B,this.o,this.G)};$APP.g.aa=function(){return 0+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-350962559^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te($APP.Ci,b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new g4(this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){return $APP.Te(this.o,b)};$APP.g.U=function(a,b,c){return new g4(this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.Sg,this.o))};$APP.g.X=function(a,b){return new g4(b,this.o,this.G)};
$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return c};$APP.g.Cb=function(a,b){return b};$APP.g=h4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){return $APP.C.j(this.o,b,c)};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.RulesVar{",", ","}",c,$APP.K.h($APP.Sg,this.o))};$APP.g.ia=function(){return new $APP.xh(this,0,$APP.Sg,$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new h4(this.B,this.o,this.G)};$APP.g.aa=function(){return 0+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-1504050517^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te($APP.Ci,b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new h4(this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){return $APP.Te(this.o,b)};$APP.g.U=function(a,b,c){return new h4(this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.Sg,this.o))};$APP.g.X=function(a,b){return new h4(b,this.o,this.G)};
$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return c};$APP.g.Cb=function(a,b){return b};$APP.g=i4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "value":return this.value;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Constant{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.zM,this.value],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[$APP.zM],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new i4(this.value,this.B,this.o,this.G)};$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-812884714^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.value,b.value)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[$APP.zM,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new i4(this.value,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "value":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.zM,b):$APP.Bf.call(null,$APP.zM,b))?new i4(c,this.B,this.o,null):new i4(this.value,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve($APP.zM,this.value,null)],null),this.o))};$APP.g.X=function(a,b){return new i4(this.value,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;
$APP.g.Bb=function(a,b,c){return Z3(b,this.value,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.value):Q4.call(null,b,this.value)};$APP.g=j4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "symbol":return this.Na;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.PlainSymbol{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Am,this.Na],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[$APP.Am],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new j4(this.Na,this.B,this.o,this.G)};
$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=1509921913^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.Na,b.Na)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[$APP.Am,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new j4(this.Na,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "symbol":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.Am,b):$APP.Bf.call(null,$APP.Am,b))?new j4(c,this.B,this.o,null):new j4(this.Na,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve($APP.Am,this.Na,null)],null),this.o))};$APP.g.X=function(a,b){return new j4(this.Na,b,this.o,this.G)};
$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.Na,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.Na):Q4.call(null,b,this.Na)};$APP.g=n4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "required":return this.required;case "free":return this.ce;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.RuleVars{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.jJ,this.required],null),new $APP.H(null,2,5,$APP.I,[o4,this.ce],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,2,new $APP.H(null,2,5,$APP.I,[$APP.jJ,o4],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new n4(this.required,this.ce,this.B,this.o,this.G)};$APP.g.aa=function(){return 2+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=892963297^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.required,b.required)&&$APP.y.h(this.ce,b.ce)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,2,[o4,null,$APP.jJ,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new n4(this.required,this.ce,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "required":case "free":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.jJ,b):$APP.Bf.call(null,$APP.jJ,b))?new n4(c,this.ce,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(o4,b):$APP.Bf.call(null,o4,b))?new n4(this.required,c,this.B,this.o,null):new n4(this.required,this.ce,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.Ve($APP.jJ,this.required,null),new $APP.Ve(o4,this.ce,null)],null),this.o))};$APP.g.X=function(a,b){return new n4(this.required,this.ce,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.ce,Z3(b,this.required,c))};
$APP.g.Cb=function(a,b){a=Q4.h?Q4.h(b,this.required):Q4.call(null,b,this.required);b=this.ce;return Q4.h?Q4.h(a,b):Q4.call(null,a,b)};$APP.g=q4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){return $APP.C.j(this.o,b,c)};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.BindIgnore{",", ","}",c,$APP.K.h($APP.Sg,this.o))};$APP.g.ia=function(){return new $APP.xh(this,0,$APP.Sg,$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new q4(this.B,this.o,this.G)};$APP.g.aa=function(){return 0+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-890522983^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te($APP.Ci,b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new q4(this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){return $APP.Te(this.o,b)};$APP.g.U=function(a,b,c){return new q4(this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.Sg,this.o))};$APP.g.X=function(a,b){return new q4(b,this.o,this.G)};
$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return c};$APP.g.Cb=function(a,b){return b};$APP.g=r4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "variable":return this.Yb;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.BindScalar{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[h5,this.Yb],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[h5],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new r4(this.Yb,this.B,this.o,this.G)};$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-1522792445^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.Yb,b.Yb)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[h5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new r4(this.Yb,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "variable":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(h5,b):$APP.Bf.call(null,h5,b))?new r4(c,this.B,this.o,null):new r4(this.Yb,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve(h5,this.Yb,null)],null),this.o))};$APP.g.X=function(a,b){return new r4(this.Yb,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.Yb,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.Yb):Q4.call(null,b,this.Yb)};$APP.g=s4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "bindings":return this.Ac;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.BindTuple{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.vq,this.Ac],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[$APP.vq],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new s4(this.Ac,this.B,this.o,this.G)};
$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-1637239347^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.Ac,b.Ac)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[$APP.vq,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new s4(this.Ac,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "bindings":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.vq,b):$APP.Bf.call(null,$APP.vq,b))?new s4(c,this.B,this.o,null):new s4(this.Ac,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve($APP.vq,this.Ac,null)],null),this.o))};$APP.g.X=function(a,b){return new s4(this.Ac,b,this.o,this.G)};
$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.Ac,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.Ac):Q4.call(null,b,this.Ac)};$APP.g=t4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "binding":return this.Wb;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.BindColl{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[P5,this.Wb],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[P5],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new t4(this.Wb,this.B,this.o,this.G)};$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-1930368089^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.Wb,b.Wb)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[P5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new t4(this.Wb,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "binding":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(P5,b):$APP.Bf.call(null,P5,b))?new t4(c,this.B,this.o,null):new t4(this.Wb,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve(P5,this.Wb,null)],null),this.o))};$APP.g.X=function(a,b){return new t4(this.Wb,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.Wb,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.Wb):Q4.call(null,b,this.Wb)};
e4.prototype.Eh=function(){return new $APP.H(null,1,5,$APP.I,[this.Na],null)};$APP.g=w4.prototype;$APP.g.Eh=function(){return v4($APP.ne(this.ya))};$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "fn":return this.ja;case "args":return this.ya;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Aggregate{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.En,this.ja],null),new $APP.H(null,2,5,$APP.I,[$APP.an,this.ya],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,2,new $APP.H(null,2,5,$APP.I,[$APP.En,$APP.an],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};
$APP.g.ba=function(){return new w4(this.ja,this.ya,this.B,this.o,this.G)};$APP.g.aa=function(){return 2+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-91097383^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.ja,b.ja)&&$APP.y.h(this.ya,b.ya)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,2,[$APP.an,null,$APP.En,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new w4(this.ja,this.ya,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "fn":case "args":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.En,b):$APP.Bf.call(null,$APP.En,b))?new w4(c,this.ya,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.an,b):$APP.Bf.call(null,$APP.an,b))?new w4(this.ja,c,this.B,this.o,null):new w4(this.ja,this.ya,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.Ve($APP.En,this.ja,null),new $APP.Ve($APP.an,this.ya,null)],null),this.o))};
$APP.g.X=function(a,b){return new w4(this.ja,this.ya,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.ya,Z3(b,this.ja,c))};$APP.g.Cb=function(a,b){a=Q4.h?Q4.h(b,this.ja):Q4.call(null,b,this.ja);b=this.ya;return Q4.h?Q4.h(a,b):Q4.call(null,a,b)};$APP.g=x4.prototype;$APP.g.Eh=function(){return v4(this.Yb)};$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "source":return this.source;case "variable":return this.Yb;case "pattern":return this.pattern;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Pull{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Ll,this.source],null),new $APP.H(null,2,5,$APP.I,[h5,this.Yb],null),new $APP.H(null,2,5,$APP.I,[o3,this.pattern],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,3,new $APP.H(null,3,5,$APP.I,[$APP.Ll,h5,o3],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};
$APP.g.ba=function(){return new x4(this.source,this.Yb,this.pattern,this.B,this.o,this.G)};$APP.g.aa=function(){return 3+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-2108867663^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.source,b.source)&&$APP.y.h(this.Yb,b.Yb)&&$APP.y.h(this.pattern,b.pattern)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,3,[h5,null,$APP.Ll,null,o3,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new x4(this.source,this.Yb,this.pattern,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "source":case "variable":case "pattern":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.Ll,b):$APP.Bf.call(null,$APP.Ll,b))?new x4(c,this.Yb,this.pattern,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(h5,b):$APP.Bf.call(null,h5,b))?new x4(this.source,c,this.pattern,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(o3,b):$APP.Bf.call(null,o3,b))?new x4(this.source,this.Yb,c,this.B,this.o,null):new x4(this.source,this.Yb,this.pattern,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.Ve($APP.Ll,this.source,null),new $APP.Ve(h5,this.Yb,null),new $APP.Ve(o3,this.pattern,null)],null),this.o))};$APP.g.X=function(a,b){return new x4(this.source,this.Yb,this.pattern,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.pattern,Z3(b,this.Yb,Z3(b,this.source,c)))};
$APP.g.Cb=function(a,b){a=Q4.h?Q4.h(b,this.source):Q4.call(null,b,this.source);b=this.Yb;a=Q4.h?Q4.h(a,b):Q4.call(null,a,b);b=this.pattern;return Q4.h?Q4.h(a,b):Q4.call(null,a,b)};$APP.g=z4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "elements":return this.elements;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.FindRel{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Y5,this.elements],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[Y5],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new z4(this.elements,this.B,this.o,this.G)};$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=744809563^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.elements,b.elements)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[Y5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new z4(this.elements,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.Jg=function(){return this.elements};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "elements":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(Y5,b):$APP.Bf.call(null,Y5,b))?new z4(c,this.B,this.o,null):new z4(this.elements,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve(Y5,this.elements,null)],null),this.o))};$APP.g.X=function(a,b){return new z4(this.elements,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;
$APP.g.Bb=function(a,b,c){return Z3(b,this.elements,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.elements):Q4.call(null,b,this.elements)};$APP.g=A4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "element":return this.element;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.FindColl{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Z5,this.element],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[Z5],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new A4(this.element,this.B,this.o,this.G)};
$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=124241361^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.element,b.element)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[Z5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new A4(this.element,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.Jg=function(){return new $APP.H(null,1,5,$APP.I,[this.element],null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "element":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(Z5,b):$APP.Bf.call(null,Z5,b))?new A4(c,this.B,this.o,null):new A4(this.element,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve(Z5,this.element,null)],null),this.o))};
$APP.g.X=function(a,b){return new A4(this.element,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.element,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.element):Q4.call(null,b,this.element)};$APP.g=B4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "element":return this.element;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.FindScalar{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Z5,this.element],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[Z5],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new B4(this.element,this.B,this.o,this.G)};
$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-661542332^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.element,b.element)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[Z5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new B4(this.element,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.Jg=function(){return new $APP.H(null,1,5,$APP.I,[this.element],null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "element":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(Z5,b):$APP.Bf.call(null,Z5,b))?new B4(c,this.B,this.o,null):new B4(this.element,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve(Z5,this.element,null)],null),this.o))};
$APP.g.X=function(a,b){return new B4(this.element,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.element,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.element):Q4.call(null,b,this.element)};$APP.g=C4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "elements":return this.elements;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.FindTuple{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Y5,this.elements],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[Y5],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new C4(this.elements,this.B,this.o,this.G)};
$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=681530371^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.elements,b.elements)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[Y5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new C4(this.elements,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.Jg=function(){return this.elements};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "elements":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(Y5,b):$APP.Bf.call(null,Y5,b))?new C4(c,this.B,this.o,null):new C4(this.elements,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve(Y5,this.elements,null)],null),this.o))};$APP.g.X=function(a,b){return new C4(this.elements,b,this.o,this.G)};
$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.elements,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.elements):Q4.call(null,b,this.elements)};$APP.g=E4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "type":return this.type;case "symbols":return this.ke;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.ReturnMap{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Ul,this.type],null),new $APP.H(null,2,5,$APP.I,[b5,this.ke],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,2,new $APP.H(null,2,5,$APP.I,[$APP.Ul,b5],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new E4(this.type,this.ke,this.B,this.o,this.G)};$APP.g.aa=function(){return 2+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-2025547471^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.type,b.type)&&$APP.y.h(this.ke,b.ke)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,2,[$APP.Ul,null,b5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new E4(this.type,this.ke,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "type":case "symbols":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.Ul,b):$APP.Bf.call(null,$APP.Ul,b))?new E4(c,this.ke,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(b5,b):$APP.Bf.call(null,b5,b))?new E4(this.type,c,this.B,this.o,null):new E4(this.type,this.ke,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.Ve($APP.Ul,this.type,null),new $APP.Ve(b5,this.ke,null)],null),this.o))};$APP.g.X=function(a,b){return new E4(this.type,this.ke,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.ke,Z3(b,this.type,c))};
$APP.g.Cb=function(a,b){a=Q4.h?Q4.h(b,this.type):Q4.call(null,b,this.type);b=this.ke;return Q4.h?Q4.h(a,b):Q4.call(null,a,b)};$APP.g=F4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "source":return this.source;case "pattern":return this.pattern;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Pattern{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Ll,this.source],null),new $APP.H(null,2,5,$APP.I,[o3,this.pattern],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,2,new $APP.H(null,2,5,$APP.I,[$APP.Ll,o3],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new F4(this.source,this.pattern,this.B,this.o,this.G)};$APP.g.aa=function(){return 2+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=575220587^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.source,b.source)&&$APP.y.h(this.pattern,b.pattern)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,2,[$APP.Ll,null,o3,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new F4(this.source,this.pattern,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "source":case "pattern":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.Ll,b):$APP.Bf.call(null,$APP.Ll,b))?new F4(c,this.pattern,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(o3,b):$APP.Bf.call(null,o3,b))?new F4(this.source,c,this.B,this.o,null):new F4(this.source,this.pattern,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.Ve($APP.Ll,this.source,null),new $APP.Ve(o3,this.pattern,null)],null),this.o))};$APP.g.X=function(a,b){return new F4(this.source,this.pattern,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.pattern,Z3(b,this.source,c))};
$APP.g.Cb=function(a,b){a=Q4.h?Q4.h(b,this.source):Q4.call(null,b,this.source);b=this.pattern;return Q4.h?Q4.h(a,b):Q4.call(null,a,b)};$APP.g=G4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "fn":return this.ja;case "args":return this.ya;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Predicate{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.En,this.ja],null),new $APP.H(null,2,5,$APP.I,[$APP.an,this.ya],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,2,new $APP.H(null,2,5,$APP.I,[$APP.En,$APP.an],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new G4(this.ja,this.ya,this.B,this.o,this.G)};$APP.g.aa=function(){return 2+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-1523376880^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.ja,b.ja)&&$APP.y.h(this.ya,b.ya)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,2,[$APP.an,null,$APP.En,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new G4(this.ja,this.ya,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "fn":case "args":return!0;default:return $APP.Te(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.En,b):$APP.Bf.call(null,$APP.En,b))?new G4(c,this.ya,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.an,b):$APP.Bf.call(null,$APP.an,b))?new G4(this.ja,c,this.B,this.o,null):new G4(this.ja,this.ya,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.Ve($APP.En,this.ja,null),new $APP.Ve($APP.an,this.ya,null)],null),this.o))};$APP.g.X=function(a,b){return new G4(this.ja,this.ya,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.ya,Z3(b,this.ja,c))};
$APP.g.Cb=function(a,b){a=Q4.h?Q4.h(b,this.ja):Q4.call(null,b,this.ja);b=this.ya;return Q4.h?Q4.h(a,b):Q4.call(null,a,b)};$APP.g=H4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "fn":return this.ja;case "args":return this.ya;case "binding":return this.Wb;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Function{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.En,this.ja],null),new $APP.H(null,2,5,$APP.I,[$APP.an,this.ya],null),new $APP.H(null,2,5,$APP.I,[P5,this.Wb],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,3,new $APP.H(null,3,5,$APP.I,[$APP.En,$APP.an,P5],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new H4(this.ja,this.ya,this.Wb,this.B,this.o,this.G)};$APP.g.aa=function(){return 3+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=589494199^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.ja,b.ja)&&$APP.y.h(this.ya,b.ya)&&$APP.y.h(this.Wb,b.Wb)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,3,[$APP.an,null,$APP.En,null,P5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new H4(this.ja,this.ya,this.Wb,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "fn":case "args":case "binding":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.En,b):$APP.Bf.call(null,$APP.En,b))?new H4(c,this.ya,this.Wb,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.an,b):$APP.Bf.call(null,$APP.an,b))?new H4(this.ja,c,this.Wb,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(P5,b):$APP.Bf.call(null,P5,b))?new H4(this.ja,this.ya,c,this.B,this.o,null):new H4(this.ja,this.ya,this.Wb,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.Ve($APP.En,this.ja,null),new $APP.Ve($APP.an,this.ya,null),new $APP.Ve(P5,this.Wb,null)],null),this.o))};$APP.g.X=function(a,b){return new H4(this.ja,this.ya,this.Wb,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.Wb,Z3(b,this.ya,Z3(b,this.ja,c)))};
$APP.g.Cb=function(a,b){a=Q4.h?Q4.h(b,this.ja):Q4.call(null,b,this.ja);b=this.ya;a=Q4.h?Q4.h(a,b):Q4.call(null,a,b);b=this.Wb;return Q4.h?Q4.h(a,b):Q4.call(null,a,b)};$APP.g=I4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "source":return this.source;case "name":return this.name;case "args":return this.ya;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.RuleExpr{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Ll,this.source],null),new $APP.H(null,2,5,$APP.I,[$APP.O,this.name],null),new $APP.H(null,2,5,$APP.I,[$APP.an,this.ya],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,3,new $APP.H(null,3,5,$APP.I,[$APP.Ll,$APP.O,$APP.an],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new I4(this.source,this.name,this.ya,this.B,this.o,this.G)};$APP.g.aa=function(){return 3+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-444662011^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.source,b.source)&&$APP.y.h(this.name,b.name)&&$APP.y.h(this.ya,b.ya)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,3,[$APP.an,null,$APP.O,null,$APP.Ll,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new I4(this.source,this.name,this.ya,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "source":case "name":case "args":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.Ll,b):$APP.Bf.call(null,$APP.Ll,b))?new I4(c,this.name,this.ya,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.O,b):$APP.Bf.call(null,$APP.O,b))?new I4(this.source,c,this.ya,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.an,b):$APP.Bf.call(null,$APP.an,b))?new I4(this.source,this.name,c,this.B,this.o,null):new I4(this.source,this.name,this.ya,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.Ve($APP.Ll,this.source,null),new $APP.Ve($APP.O,this.name,null),new $APP.Ve($APP.an,this.ya,null)],null),this.o))};$APP.g.X=function(a,b){return new I4(this.source,this.name,this.ya,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.ya,Z3(b,this.name,Z3(b,this.source,c)))};
$APP.g.Cb=function(a,b){a=Q4.h?Q4.h(b,this.source):Q4.call(null,b,this.source);b=this.name;a=Q4.h?Q4.h(a,b):Q4.call(null,a,b);b=this.ya;return Q4.h?Q4.h(a,b):Q4.call(null,a,b)};$APP.g=J4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "source":return this.source;case "vars":return this.Zb;case "clauses":return this.Ga;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Not{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Ll,this.source],null),new $APP.H(null,2,5,$APP.I,[$APP.iL,this.Zb],null),new $APP.H(null,2,5,$APP.I,[$APP.oP,this.Ga],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,3,new $APP.H(null,3,5,$APP.I,[$APP.Ll,$APP.iL,$APP.oP],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new J4(this.source,this.Zb,this.Ga,this.B,this.o,this.G)};$APP.g.aa=function(){return 3+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=1394671061^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.source,b.source)&&$APP.y.h(this.Zb,b.Zb)&&$APP.y.h(this.Ga,b.Ga)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,3,[$APP.Ll,null,$APP.oP,null,$APP.iL,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new J4(this.source,this.Zb,this.Ga,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "source":case "vars":case "clauses":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.Ll,b):$APP.Bf.call(null,$APP.Ll,b))?new J4(c,this.Zb,this.Ga,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.iL,b):$APP.Bf.call(null,$APP.iL,b))?new J4(this.source,c,this.Ga,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.oP,b):$APP.Bf.call(null,$APP.oP,b))?new J4(this.source,this.Zb,c,this.B,this.o,null):new J4(this.source,this.Zb,this.Ga,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.Ve($APP.Ll,this.source,null),new $APP.Ve($APP.iL,this.Zb,null),new $APP.Ve($APP.oP,this.Ga,null)],null),this.o))};$APP.g.X=function(a,b){return new J4(this.source,this.Zb,this.Ga,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.Ga,Z3(b,this.Zb,Z3(b,this.source,c)))};
$APP.g.Cb=function(a,b){a=Q4.h?Q4.h(b,this.source):Q4.call(null,b,this.source);b=this.Zb;a=Q4.h?Q4.h(a,b):Q4.call(null,a,b);b=this.Ga;return Q4.h?Q4.h(a,b):Q4.call(null,a,b)};$APP.g=K4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "source":return this.source;case "rule-vars":return this.Bd;case "clauses":return this.Ga;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Or{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Ll,this.source],null),new $APP.H(null,2,5,$APP.I,[O4,this.Bd],null),new $APP.H(null,2,5,$APP.I,[$APP.oP,this.Ga],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,3,new $APP.H(null,3,5,$APP.I,[$APP.Ll,O4,$APP.oP],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new K4(this.source,this.Bd,this.Ga,this.B,this.o,this.G)};$APP.g.aa=function(){return 3+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=1461934571^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.source,b.source)&&$APP.y.h(this.Bd,b.Bd)&&$APP.y.h(this.Ga,b.Ga)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,3,[O4,null,$APP.Ll,null,$APP.oP,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new K4(this.source,this.Bd,this.Ga,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "source":case "rule-vars":case "clauses":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.Ll,b):$APP.Bf.call(null,$APP.Ll,b))?new K4(c,this.Bd,this.Ga,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(O4,b):$APP.Bf.call(null,O4,b))?new K4(this.source,c,this.Ga,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.oP,b):$APP.Bf.call(null,$APP.oP,b))?new K4(this.source,this.Bd,c,this.B,this.o,null):new K4(this.source,this.Bd,this.Ga,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.Ve($APP.Ll,this.source,null),new $APP.Ve(O4,this.Bd,null),new $APP.Ve($APP.oP,this.Ga,null)],null),this.o))};$APP.g.X=function(a,b){return new K4(this.source,this.Bd,this.Ga,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.Ga,Z3(b,this.Bd,Z3(b,this.source,c)))};
$APP.g.Cb=function(a,b){a=Q4.h?Q4.h(b,this.source):Q4.call(null,b,this.source);b=this.Bd;a=Q4.h?Q4.h(a,b):Q4.call(null,a,b);b=this.Ga;return Q4.h?Q4.h(a,b):Q4.call(null,a,b)};$APP.g=L4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "clauses":return this.Ga;default:return $APP.C.j(this.o,b,c)}};
$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.And{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.oP,this.Ga],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,1,new $APP.H(null,1,5,$APP.I,[$APP.oP],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new L4(this.Ga,this.B,this.o,this.G)};$APP.g.aa=function(){return 1+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-131856804^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.Ga,b.Ga)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,1,[$APP.oP,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new L4(this.Ga,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "clauses":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.oP,b):$APP.Bf.call(null,$APP.oP,b))?new L4(c,this.B,this.o,null):new L4(this.Ga,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.Ve($APP.oP,this.Ga,null)],null),this.o))};$APP.g.X=function(a,b){return new L4(this.Ga,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;
$APP.g.Bb=function(a,b,c){return Z3(b,this.Ga,c)};$APP.g.Cb=function(a,b){return Q4.h?Q4.h(b,this.Ga):Q4.call(null,b,this.Ga)};var Q4=function Q4(a,b){return b instanceof e4?$APP.wf.h(a,b):b instanceof J4?$APP.Fh.h(a,b.Zb):b instanceof K4?(b=b.Bd,Q4.h?Q4.h(a,b):Q4.call(null,a,b)):(null!=b?$APP.xd===b.Ab||(b.Jd?0:$APP.Jb(W3,b)):$APP.Jb(W3,b))?q2a(b,a):$APP.Be(b)?$APP.bf.j(Q4,a,b):a};$APP.g=S4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "vars":return this.Zb;case "clauses":return this.Ga;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.RuleBranch{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.iL,this.Zb],null),new $APP.H(null,2,5,$APP.I,[$APP.oP,this.Ga],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,2,new $APP.H(null,2,5,$APP.I,[$APP.iL,$APP.oP],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};
$APP.g.ba=function(){return new S4(this.Zb,this.Ga,this.B,this.o,this.G)};$APP.g.aa=function(){return 2+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=1024755006^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.Zb,b.Zb)&&$APP.y.h(this.Ga,b.Ga)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,2,[$APP.oP,null,$APP.iL,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new S4(this.Zb,this.Ga,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "vars":case "clauses":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.iL,b):$APP.Bf.call(null,$APP.iL,b))?new S4(c,this.Ga,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.oP,b):$APP.Bf.call(null,$APP.oP,b))?new S4(this.Zb,c,this.B,this.o,null):new S4(this.Zb,this.Ga,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.Ve($APP.iL,this.Zb,null),new $APP.Ve($APP.oP,this.Ga,null)],null),this.o))};
$APP.g.X=function(a,b){return new S4(this.Zb,this.Ga,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.Ga,Z3(b,this.Zb,c))};$APP.g.Cb=function(a,b){return Q4(Q4(b,this.Zb),this.Ga)};$APP.g=T4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "name":return this.name;case "branches":return this.Ud;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Rule{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.O,this.name],null),new $APP.H(null,2,5,$APP.I,[T5,this.Ud],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,2,new $APP.H(null,2,5,$APP.I,[$APP.O,T5],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};
$APP.g.ba=function(){return new T4(this.name,this.Ud,this.B,this.o,this.G)};$APP.g.aa=function(){return 2+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=-900273052^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.name,b.name)&&$APP.y.h(this.Ud,b.Ud)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,2,[$APP.O,null,T5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new T4(this.name,this.Ud,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "name":case "branches":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h($APP.O,b):$APP.Bf.call(null,$APP.O,b))?new T4(c,this.Ud,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(T5,b):$APP.Bf.call(null,T5,b))?new T4(this.name,c,this.B,this.o,null):new T4(this.name,this.Ud,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.Ve($APP.O,this.name,null),new $APP.Ve(T5,this.Ud,null)],null),this.o))};
$APP.g.X=function(a,b){return new T4(this.name,this.Ud,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.Ud,Z3(b,this.name,c))};$APP.g.Cb=function(a,b){return Q4(Q4(b,this.name),this.Ud)};$APP.g=V4.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "qfind":return this.qd;case "qwith":return this.ud;case "qreturn-map":return this.sd;case "qin":return this.rd;case "qwhere":return this.td;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.parser.Query{",", ","}",c,$APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[W4,this.qd],null),new $APP.H(null,2,5,$APP.I,[X4,this.ud],null),new $APP.H(null,2,5,$APP.I,[Y4,this.sd],null),new $APP.H(null,2,5,$APP.I,[Z4,this.rd],null),new $APP.H(null,2,5,$APP.I,[$4,this.td],null)],null),this.o))};
$APP.g.ia=function(){return new $APP.xh(this,5,new $APP.H(null,5,5,$APP.I,[W4,X4,Y4,Z4,$4],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};$APP.g.ba=function(){return new V4(this.qd,this.ud,this.sd,this.rd,this.td,this.B,this.o,this.G)};$APP.g.aa=function(){return 5+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=181307977^$APP.Pd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.qd,b.qd)&&$APP.y.h(this.ud,b.ud)&&$APP.y.h(this.sd,b.sd)&&$APP.y.h(this.rd,b.rd)&&$APP.y.h(this.td,b.td)&&$APP.y.h(this.o,b.o)};$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,5,[W4,null,$4,null,Z4,null,X4,null,Y4,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new V4(this.qd,this.ud,this.sd,this.rd,this.td,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};
$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "qfind":case "qwith":case "qreturn-map":case "qin":case "qwhere":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(W4,b):$APP.Bf.call(null,W4,b))?new V4(c,this.ud,this.sd,this.rd,this.td,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(X4,b):$APP.Bf.call(null,X4,b))?new V4(this.qd,c,this.sd,this.rd,this.td,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(Y4,b):$APP.Bf.call(null,Y4,b))?new V4(this.qd,this.ud,c,this.rd,this.td,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(Z4,b):$APP.Bf.call(null,Z4,b))?new V4(this.qd,this.ud,this.sd,c,this.td,this.B,this.o,
null):$APP.l($APP.Bf.h?$APP.Bf.h($4,b):$APP.Bf.call(null,$4,b))?new V4(this.qd,this.ud,this.sd,this.rd,c,this.B,this.o,null):new V4(this.qd,this.ud,this.sd,this.rd,this.td,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.Ve(W4,this.qd,null),new $APP.Ve(X4,this.ud,null),new $APP.Ve(Y4,this.sd,null),new $APP.Ve(Z4,this.rd,null),new $APP.Ve($4,this.td,null)],null),this.o))};
$APP.g.X=function(a,b){return new V4(this.qd,this.ud,this.sd,this.rd,this.td,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g.Ab=$APP.xd;$APP.g.Bb=function(a,b,c){return Z3(b,this.td,Z3(b,this.rd,Z3(b,this.sd,Z3(b,this.ud,Z3(b,this.qd,c)))))};$APP.g.Cb=function(a,b){return Q4(Q4(Q4(Q4(Q4(b,this.qd),this.ud),this.sd),this.rd),this.td)};var x7a=b0();$APP.g=c5.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "rels":return this.De;case "sources":return this.sources;case "rules":return this.rules;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.query.Context{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[j5,this.De],null),new $APP.H(null,2,5,$APP.I,[i5,this.sources],null),new $APP.H(null,2,5,$APP.I,[$APP.QH,this.rules],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,3,new $APP.H(null,3,5,$APP.I,[j5,i5,$APP.QH],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};
$APP.g.ba=function(){return new c5(this.De,this.sources,this.rules,this.B,this.o,this.G)};$APP.g.aa=function(){return 3+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=1014232958^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.De,b.De)&&$APP.y.h(this.sources,b.sources)&&$APP.y.h(this.rules,b.rules)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,3,[i5,null,$APP.QH,null,j5,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new c5(this.De,this.sources,this.rules,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "rels":case "sources":case "rules":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(j5,b):$APP.Bf.call(null,j5,b))?new c5(c,this.sources,this.rules,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(i5,b):$APP.Bf.call(null,i5,b))?new c5(this.De,c,this.rules,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h($APP.QH,b):$APP.Bf.call(null,$APP.QH,b))?new c5(this.De,this.sources,c,this.B,this.o,null):new c5(this.De,this.sources,this.rules,this.B,$APP.vi.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.Ve(j5,this.De,null),new $APP.Ve(i5,this.sources,null),new $APP.Ve($APP.QH,this.rules,null)],null),this.o))};$APP.g.X=function(a,b){return new c5(this.De,this.sources,this.rules,b,this.o,this.G)};$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};$APP.g=d5.prototype;$APP.g.ea=function(a,b){return this.O(null,b,null)};
$APP.g.O=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "attrs":return this.ra;case "tuples":return this.Ve;default:return $APP.C.j(this.o,b,c)}};$APP.g.ma=function(a,b,c){return $APP.bf.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.W=function(a,b,c){return $APP.bj(b,function(d){return $APP.bj(b,$APP.ej,""," ","",c,d)},"#datascript.query.Relation{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[x3,this.ra],null),new $APP.H(null,2,5,$APP.I,[n5,this.Ve],null)],null),this.o))};$APP.g.ia=function(){return new $APP.xh(this,2,new $APP.H(null,2,5,$APP.I,[x3,n5],null),$APP.l(this.o)?$APP.nd(this.o):$APP.bg())};$APP.g.V=function(){return this.B};
$APP.g.ba=function(){return new d5(this.ra,this.Ve,this.B,this.o,this.G)};$APP.g.aa=function(){return 2+$APP.ce(this.o)};$APP.g.Y=function(){var a=this.G;return null!=a?a:this.G=a=1107093117^$APP.Pd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.y.h(this.ra,b.ra)&&$APP.y.h(this.Ve,b.Ve)&&$APP.y.h(this.o,b.o)};
$APP.g.ta=function(a,b){return $APP.Te(new $APP.Bi(null,new $APP.k(null,2,[n5,null,x3,null],null),null),b)?$APP.Nl.h($APP.xc($APP.Fh.h($APP.Xf,this),this.B),b):new d5(this.ra,this.Ve,this.B,$APP.$f($APP.Nl.h(this.o,b)),null)};$APP.g.la=function(a,b){switch(b instanceof $APP.G?b.S:null){case "attrs":case "tuples":return!0;default:return $APP.Te(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.Bf.h?$APP.Bf.h(x3,b):$APP.Bf.call(null,x3,b))?new d5(c,this.Ve,this.B,this.o,null):$APP.l($APP.Bf.h?$APP.Bf.h(n5,b):$APP.Bf.call(null,n5,b))?new d5(this.ra,c,this.B,this.o,null):new d5(this.ra,this.Ve,this.B,$APP.vi.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.Ve(x3,this.ra,null),new $APP.Ve(n5,this.Ve,null)],null),this.o))};$APP.g.X=function(a,b){return new d5(this.ra,this.Ve,b,this.o,this.G)};
$APP.g.da=function(a,b){return $APP.Fe(b)?this.U(null,$APP.pe(b,0),$APP.pe(b,1)):$APP.bf.j($APP.Wb,this,b)};
var T6=function T6(a,b){return $APP.y.h($APP.oK,a)?!0:$APP.y.h(new $APP.H(null,1,5,$APP.I,[$APP.hK],null),a)?$APP.Be(b):a instanceof $APP.r?$APP.y.h(b,a):$APP.Be(a)?$APP.y.h($APP.ne(a),$APP.hK)?$APP.Be(b)&&$APP.og(function(d){var e=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);return T6.h?T6.h(e,d):T6.call(null,e,d)},$APP.fj.j($APP.Bw,$APP.Gi(a),b)):$APP.Be(b)&&$APP.y.h($APP.ce(b),$APP.ce(a))&&$APP.og(function(d){var e=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);return T6.h?T6.h(e,d):T6.call(null,e,d)},$APP.fj.j($APP.Bw,
a,b)):a.g?a.g(b):a.call(null,b)},t5=function t5(a,b){var d=$APP.Yf(a),e=$APP.C.h(d,x3);d=$APP.C.h(d,n5);var f=$APP.Yf(b),h=$APP.C.h(f,x3);f=$APP.C.h(f,n5);if($APP.y.h(e,h))return new d5(e,$APP.Fh.h($APP.df(d),f),null,null,null);if($APP.we(d))return b;if($APP.we(f))return a;if(l3a(e,h)){if($APP.og($APP.Bb,$APP.ti(e)))return p3a(e,d,h,f);a=$APP.Ii($APP.ri(e),$APP.Rn.C());e=p3a(a,$APP.Sg,e,d);return t5.h?t5.h(e,b):t5.call(null,e,b)}throw $APP.Zl.h(["Can’t sum relations with different attrs: ",$APP.zj.l($APP.B([e])),
" and ",$APP.zj.l($APP.B([h]))].join(""),new $APP.k(null,1,[$APP.Hn,s5],null));},r5=function r5(a){switch(arguments.length){case 0:return r5.C();case 2:return r5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};r5.C=function(){return new d5($APP.Xf,new $APP.H(null,1,5,$APP.I,[[]],null),null,null,null)};
r5.h=function(a,b){var c=$APP.ri(x3.g(a)),d=$APP.ri(x3.g(b)),e=$APP.cf($APP.fj.h(x3.g(a),c)),f=$APP.cf($APP.fj.h(x3.g(b),d));return new d5($APP.Ii($APP.K.h(c,d),$APP.Rn.C()),$APP.Vc($APP.bf.j(function(h,n){return $APP.bf.j(function(t,q){return $APP.Rg.h(t,o3a(n,e,q,f))},h,n5.g(b))},$APP.Tc($APP.Sg),n5.g(a))),null,null,null)};r5.A=2;q4.prototype.Lg=function(){return r5.C()};
r4.prototype.Lg=function(a,b){return new d5($APP.Wf([$APP.rp.h(this,new $APP.H(null,2,5,$APP.I,[h5,$APP.Am],null)),0]),new $APP.H(null,1,5,$APP.I,[$APP.qs.g(new $APP.H(null,1,5,$APP.I,[b],null))],null),null,null,null)};
t4.prototype.Lg=function(a,b){var c=this;if(g0a(b))return $APP.we(b)?q3a(c):$APP.bf.h(t5,$APP.fj.h(function(d){return g5(c.Wb,d)},b));throw $APP.Zl.h(["Cannot bind value ",$APP.zj.l($APP.B([b]))," to collection ",$APP.zj.l($APP.B([c4(c)]))].join(""),new $APP.k(null,3,[$APP.Hn,z5a,$APP.zM,b,P5,c4(c)],null));};
s4.prototype.Lg=function(a,b){if(g0a(b)){if($APP.ce(b)<$APP.ce(this.Ac))throw $APP.Zl.h(["Not enough elements in a collection ",$APP.zj.l($APP.B([b]))," to bind tuple ",$APP.zj.l($APP.B([c4(this)]))].join(""),new $APP.k(null,3,[$APP.Hn,z5a,$APP.zM,b,P5,c4(this)],null));return $APP.bf.h(r5,$APP.fj.j(function(c,d){return g5(c,d)},this.Ac,b))}throw $APP.Zl.h(["Cannot bind value ",$APP.zj.l($APP.B([b]))," to tuple ",$APP.zj.l($APP.B([c4(this)]))].join(""),new $APP.k(null,3,[$APP.Hn,z5a,$APP.zM,b,P5,c4(this)],
null));};var k5=null,l5=null,L3a=$APP.Bj.g(0),w5=function w5(a){switch(arguments.length){case 2:return w5.h(arguments[0],arguments[1]);case 3:return w5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};w5.h=function(a,b){return w5.j(a,b,b)};
w5.j=function(a,b,c){for(;;){var d=T6,e=b;if($APP.l(function(){var ca=new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Ad,$APP.hK],null)],null),ha=e;return d.h?d.h(ca,ha):d.call(null,ca,ha)}()))return E5(D5(a),$APP.Pg.h(e5,$APP.ke(b)),b),I3a(a,b);if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Ad,$APP.hK],null),$APP.oK],null),ha=e;return d.h?d.h(ca,ha):d.call(null,ca,ha)}()))return E5(D5(a),$APP.Pg.h(e5,$APP.ke(b)),b),J3a(a,b);if($APP.l(function(){var ca=
new $APP.H(null,2,5,$APP.I,[m3a,$APP.hK],null),ha=e;return d.h?d.h(ca,ha):d.call(null,ca,ha)}())){var f=$APP.u(b);c=$APP.v(f);f=$APP.w(f);var h=l5;l5=$APP.C.h(i5.g(a),c);try{return w5.j(a,f,b)}finally{l5=h}}else{if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[$APP.it,$APP.hK],null),ha=e;return d.h?d.h(ca,ha):d.call(null,ca,ha)}())){var n=b,t=$APP.u(n),q=$APP.v(t),x=$APP.w(t);f=q;h=x;var z=T3a(D5(a),h,b),E=$APP.fj.h(function(ca){return function(ha){return F5.h?F5.h(ca,ha):F5.call(null,ca,ha)}}(a,
b,c,n,t,q,x,f,h,z,d,e),h);b=$APP.fj.h(function(){return function(ca){return $APP.bf.h(o5,j5.g(ca))}}(a,b,c,n,t,q,x,f,h,z,E,d,e),E);return $APP.vi.j($APP.v(E),j5,new $APP.H(null,1,5,$APP.I,[$APP.bf.h(t5,b)],null))}if($APP.l(function(){var ca=new $APP.H(null,3,5,$APP.I,[R4,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[$APP.hK],null),$APP.hK],null),$APP.hK],null),ha=e;return d.h?d.h(ca,ha):d.call(null,ca,ha)}())){h=$APP.u(b);f=$APP.v(h);h=$APP.w(h);n=$APP.v(h);f=$APP.w(h);n=$APP.u(n);h=$APP.v(n);
n=$APP.w(n);z=h;h=f;f=D5(a);E5(f,z,c);U3a(f,n,h);c=$APP.ys.j(R4,$APP.K.h(z,n),h);f=b;b=c;c=f;continue}else{if($APP.l(function(){var ca=new $APP.H(null,3,5,$APP.I,[R4,new $APP.H(null,1,5,$APP.I,[$APP.hK],null),$APP.hK],null),ha=e;return d.h?d.h(ca,ha):d.call(null,ca,ha)}())){q=b;x=$APP.u(q);var F=$APP.v(x),N=$APP.w(x);f=F;var S=$APP.v(N),Y=$APP.w(N);n=S;h=Y;var aa=$APP.Fi(n);z=U3a(D5(a),aa,h);t=C5(a,aa);E=$APP.fj.h(function(ca,ha,la,ua,pa,W,R,V,U,X,ma,va,da,na,ra){return function(ta){return C5(F5.h?
F5.h(ra,ta):F5.call(null,ra,ta),da)}}(a,b,c,q,x,F,N,f,S,Y,n,h,aa,z,t,d,e),h);b=$APP.fj.h(function(){return function(ca){return $APP.bf.h(o5,j5.g(ca))}}(a,b,c,q,x,F,N,f,S,Y,n,h,aa,z,t,E,d,e),E);b=$APP.bf.h(t5,b);return $APP.Zm.D(a,j5,q5,b)}if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[$APP.dt,$APP.hK],null),ha=e;return d.h?d.h(ca,ha):d.call(null,ca,ha)}()))return c=$APP.u(b),b=$APP.v(c),c=$APP.w(c),f=b,b=c,$APP.bf.j(F5,a,b);if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[$APP.fC,
$APP.hK],null),ha=e;return d.h?d.h(ca,ha):d.call(null,ca,ha)}())){f=$APP.u(b);b=$APP.v(f);h=$APP.w(f);f=b;b=h;f=D5(a);h=$APP.Fi(v5(b));if($APP.we($APP.Xw.h(f,h)))throw $APP.Zl.h(["Insufficient bindings: none of ",$APP.zj.l($APP.B([h]))," is bound in ",$APP.zj.l($APP.B([c]))].join(""),new $APP.k(null,2,[$APP.Hn,s5,$APP.ZA,c],null));z=null;a=$APP.vi.j(a,j5,new $APP.H(null,1,5,$APP.I,[$APP.bf.h(o5,j5.g(a))],null));b=$APP.bf.j(F5,a,b);b=x3a($APP.v(j5.g(a)),$APP.bf.h(o5,j5.g(b)));return $APP.vi.j(a,j5,
new $APP.H(null,1,5,$APP.I,[b],null))}if($APP.l(function(){var ca=new $APP.H(null,3,5,$APP.I,[U2a,new $APP.H(null,1,5,$APP.I,[$APP.hK],null),$APP.hK],null),ha=e;return d.h?d.h(ca,ha):d.call(null,ca,ha)}()))return b=$APP.u(b),f=$APP.v(b),b=$APP.w(b),f=$APP.v(b),b=$APP.w(b),n=f,f=D5(a),z=E5(f,n,c),a=$APP.vi.j(a,j5,new $APP.H(null,1,5,$APP.I,[$APP.bf.h(o5,j5.g(a))],null)),t=C5(a,n),b=C5($APP.bf.j(F5,t,b),n),b=x3a($APP.v(j5.g(a)),$APP.bf.h(o5,j5.g(b))),$APP.vi.j(a,j5,new $APP.H(null,1,5,$APP.I,[b],null));
if($APP.l(function(){var ca=new $APP.H(null,1,5,$APP.I,[$APP.hK],null),ha=e;return d.h?d.h(ca,ha):d.call(null,ca,ha)}())){c=l5;b=A3a(c,b);f=D3a(a,c,b);h=k5;k5=(null!=c?$APP.xd===c.zi||(c.Jd?0:$APP.Jb(u1,c)):$APP.Jb(u1,c))?S3a(c,b):k5;try{return $APP.Zm.D(a,j5,q5,f)}finally{k5=h}}else throw Error(["No matching clause: ",$APP.m.g(e)].join(""));}}break}};w5.A=3;
var F5=function F5(a,b){if($APP.l($APP.pg($APP.kq.h($APP.we,n5),j5.g(a))))return a;if(K3a(a,b))if(m3a($APP.v(b))){var d=l5;l5=$APP.C.h(i5.g(a),$APP.v(b));try{var e=$APP.w(b);return F5.h?F5.h(a,e):F5.call(null,a,e)}finally{l5=d}}else return $APP.Zm.D(a,j5,q5,R3a(a,b));else return w5.h(a,b)};e4.prototype.Mg=function(a,b){return E3a(b,this.Na)};f4.prototype.Mg=function(a,b){return $APP.rp.h(b,new $APP.H(null,2,5,$APP.I,[i5,this.Na],null))};
j4.prototype.Mg=function(){var a=$APP.C.h(w7a,this.Na);return $APP.l(a)?a:null};i4.prototype.Mg=function(){return this.value};z4.prototype.Ng=function(a,b,c){return null==b?c:c4a(b,c)};A4.prototype.Ng=function(a,b,c){return $APP.Fh.j($APP.Sg,$APP.fj.g($APP.v),c)};B4.prototype.Ng=function(a,b,c){return $APP.ie(c)};C4.prototype.Ng=function(a,b,c){return null!=b?$APP.v(c4a(b,new $APP.H(null,1,5,$APP.I,[$APP.v(c)],null))):$APP.v(c)};
var U6=function U6(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return U6.l(arguments[0],1<c.length?new $APP.Fd(c.slice(1),0,null):null)};
U6.l=function(a,b){var c=$_(x7a,a,function(){return j3a(a)}),d=W4.g(c),e=y4(d),f=$APP.Og.l(v4,$APP.B([y4(d)])),h=$APP.ce(e),n=X4.g(c);n=$APP.K.h(f,$APP.fj.h($APP.Am,n));f=$APP.Be(a)?b3a(a):a;var t=$APP.CF.g(f);b=u3a(new c5($APP.Sg,$APP.Xf,$APP.Xf,null,null,null),Z4.g(c),b);n=Y3a(V3a(b,t),n);f=$APP.l(h3a.g(f))?$APP.mn.h(function(q){return $APP.df($APP.gl.j(q,0,h))},n):n;f=$APP.l($APP.pg(D2a,e))?a4a(e,b,f):f;e=$APP.l($APP.pg(E2a,e))?e4a(e,b,f):f;return d4a(d,Y4.g(c),e)};U6.A=1;
U6.F=function(a){var b=$APP.v(a);a=$APP.w(a);return this.l(b,a)};var V6=function V6(a){switch(arguments.length){case 0:return V6.C();case 1:return V6.g(arguments[0]);case 2:return V6.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};V6.C=function(){return Y1(null,$APP.Xf)};V6.g=function(a){return Y1(a,$APP.Xf)};V6.h=function(a,b){return Y1(a,X2(b))};V6.A=2;
var W6=function W6(a){switch(arguments.length){case 1:return W6.g(arguments[0]);case 2:return W6.h(arguments[0],arguments[1]);case 3:return W6.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};W6.g=function(a){return $1(a,null,$APP.Xf)};W6.h=function(a,b){return $1(a,b,$APP.Xf)};W6.j=function(a,b,c){return $1(a,b,X2(c))};W6.A=3;
var X6=function X6(a){switch(arguments.length){case 2:return X6.h(arguments[0],arguments[1]);case 3:return X6.j(arguments[0],arguments[1],arguments[2]);case 4:return X6.D(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return X6.N(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return X6.ha(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};
X6.h=function(a,b){return n1(a,b,null,null,null,null)};X6.j=function(a,b,c){return n1(a,b,c,null,null,null)};X6.D=function(a,b,c,d){return n1(a,b,c,d,null,null)};X6.N=function(a,b,c,d,e){return n1(a,b,c,d,e,null)};X6.ha=function(a,b,c,d,e,f){return n1(a,b,c,d,e,f)};X6.A=6;
var Y6=function Y6(a){switch(arguments.length){case 2:return Y6.h(arguments[0],arguments[1]);case 3:return Y6.j(arguments[0],arguments[1],arguments[2]);case 4:return Y6.D(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Y6.N(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return Y6.ha(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};
Y6.h=function(a,b){return o1(a,b,null,null,null,null)};Y6.j=function(a,b,c){return o1(a,b,c,null,null,null)};Y6.D=function(a,b,c,d){return o1(a,b,c,d,null,null)};Y6.N=function(a,b,c,d,e){return o1(a,b,c,d,e,null)};Y6.ha=function(a,b,c,d,e,f){return o1(a,b,c,d,e,f)};Y6.A=6;
var Z6=function Z6(a){switch(arguments.length){case 2:return Z6.h(arguments[0],arguments[1]);case 3:return Z6.j(arguments[0],arguments[1],arguments[2]);case 4:return Z6.D(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Z6.N(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return Z6.ha(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};
Z6.h=function(a,b){return p1(a,b,null,null,null,null)};Z6.j=function(a,b,c){return p1(a,b,c,null,null,null)};Z6.D=function(a,b,c,d){return p1(a,b,c,d,null,null)};Z6.N=function(a,b,c,d,e){return p1(a,b,c,d,e,null)};Z6.ha=function(a,b,c,d,e,f){return p1(a,b,c,d,e,f)};Z6.A=6;
for(var y7a=$APP.u(new $APP.k(null,2,[Z5a,$APP.e1,j7a,$APP.b2],null)),z7a=null,A7a=0,$6=0;;)if($6<A7a){var B7a=z7a.ca(null,$6),C7a=$APP.A.j(B7a,0,null),D7a=$APP.A.j(B7a,1,null),E7a=C7a,F7a=D7a;$APP.C.h($APP.p($APP.LP),E7a);$APP.Cj.D($APP.LP,$APP.vi,E7a,F7a);$6+=1}else{var G7a=$APP.u(y7a);if(G7a){var a7=G7a;if($APP.Ge(a7)){var H7a=$APP.cd(a7),I7a=$APP.dd(a7),J7a=H7a,K7a=$APP.ce(H7a);y7a=I7a;z7a=J7a;A7a=K7a}else{var L7a=$APP.v(a7),M7a=$APP.A.j(L7a,0,null),N7a=$APP.A.j(L7a,1,null),O7a=M7a,P7a=N7a;$APP.C.h($APP.p($APP.LP),
O7a);$APP.Cj.D($APP.LP,$APP.vi,O7a,P7a);y7a=$APP.w(a7);z7a=null;A7a=0}$6=0}else break}$APP.Bj.g(-1E6);var b7=$APP.uS.h($APP.hN,null),c7=$APP.uS.h($APP.$O,null),d7=$APP.uS.h(a7a,null),Q7a=$APP.uS.h(c6,null),R7a=$APP.gi([n5a,W5a,v4a,h7a,$APP.KK,P6a,S5,S6a,u5a,X5a,y6a,p5a,z6a,b7a,R5,L6a,d7a,m7a,n7a,i7a,v6a,V6a,l7a,$APP.kF,e7a,U5,X6a,q6a,F2a,Q4a,G6a],[function(){var a=new $APP.Cd(function(){return b3},H4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,n5a,"datascript/core.cljc",60,1,267,267,$APP.Kd,"Same as [[transact!]], but applies to an immutable database value. Returns transaction report (see [[transact!]]).",
$APP.l(b3)?b3.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return Q6},t7a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,W5a,"datascript/core.cljc",
12,1,119,129,$APP.Kd,'Same as [[pull]], but accepts sequence of ids and returns sequence of maps.\n\n             Usage:\n\n             ```\n             (pull-many db [:db/id :name] [1 2])\n             ; \x3d\x3e [{:db/id 1, :name "Ivan"}\n             ;     {:db/id 2, :name "Oleg"}]\n             ```',$APP.l(Q6)?Q6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?
$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return g3},K6a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Dm,$APP.Z,$APP.M,$APP.JF],[$APP.hN,v4a,"datascript/core.cljc",9,1,26,76,h6,$APP.Kd,"Retrieves an entity by its id from database. Entities are lazy map-like structures to navigate DataScript database content.\n\n             For `eid` pass entity id or lookup attr:\n\n                 (entity db 1)\n                 (entity db [:unique-attr :value])\n\n             If entity does not exist, `nil` is returned:\n\n                 (entity db 100500) ; \x3d\x3e nil\n\n             Creating an entity by id is very cheap, almost no-op, as attr access is on-demand:\n\n                 (entity db 1) ; \x3d\x3e {:db/id 1}\n\n             Entity attributes can be lazily accessed through key lookups:\n\n                 (:attr (entity db 1)) ; \x3d\x3e :value\n                 (get (entity db 1) :attr) ; \x3d\x3e :value\n\n             Cardinality many attributes are returned sequences:\n\n                 (:attrs (entity db 1)) ; \x3d\x3e [:v1 :v2 :v3]\n\n             Reference attributes are returned as another entities:\n\n                 (:ref (entity db 1)) ; \x3d\x3e {:db/id 2}\n                 (:ns/ref (entity db 1)) ; \x3d\x3e {:db/id 2}\n\n             References can be walked backwards by prepending `_` to name part of an attribute:\n\n                 (:_ref (entity db 2)) ; \x3d\x3e [{:db/id 1}]\n                 (:ns/_ref (entity db 2)) ; \x3d\x3e [{:db/id 1}]\n\n             Reverse reference lookup returns sequence of entities unless attribute is marked as `:db/isComponent`:\n\n                 (:_component-ref (entity db 2)) ; \x3d\x3e {:db/id 1}\n\n             Entity gotchas:\n\n             - Entities print as map, but are not exactly maps (they have compatible get interface though).\n             - Entities are effectively immutable “views” into a particular version of a database.\n             - Entities retain reference to the whole database.\n             - You can’t change database through entities, only read.\n             - Creating an entity by id is very cheap, almost no-op (attributes are looked up on demand).\n             - Comparing entities just compares their ids. Be careful when comparing entities taken from different dbs or from different versions of the same db.\n             - Accessed entity attributes are cached on entity itself (except backward references).\n             - When printing, only cached attributes (the ones you have accessed before) are printed. See [[touch]].",
$APP.l(g3)?g3.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return w6},y4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,h7a,"datascript/core.cljc",
54,1,702,702,$APP.Kd,"Lazy-loads database from storage. Ultra-fast, fetches the rest as it’s needed",$APP.l(w6)?w6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return U6},t4a,$APP.gi([$APP.Q,$APP.O,
$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,$APP.KK,"datascript/core.cljc",4,1,133,145,$APP.Kd,'Executes a datalog query. See [docs.datomic.com/on-prem/query.html](https://docs.datomic.com/on-prem/query.html).\n\n          Usage:\n\n          ```\n          (q \'[:find ?value\n               :where [_ :likes ?value]]\n             db)\n          ; \x3d\x3e #{["fries"] ["candy"] ["pie"] ["pizza"]}\n          ```',$APP.l(U6)?U6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?
null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return C6},K5a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,P6a,"datascript/core.cljc",65,1,565,565,$APP.Kd,"Listen for changes on the given connection. Whenever a transaction is applied to the database via [[transact!]], the callback is called\n   with the transaction report. `key` is any opaque unique value.\n\n   Idempotent. Calling [[listen!]] with the same key twice will override old callback with the new value.\n\n   Returns the key under which this listener is registered. See also [[unlisten!]].",
$APP.l(C6)?C6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return d1},W6a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Dm,$APP.Z,$APP.M,$APP.JF],[$APP.hN,S5,"datascript/core.cljc",
8,1,181,188,b6,$APP.Kd,"Low-level fn to create raw datoms.\n\n             Optionally with transaction id (number) and `added` flag (`true` for addition, `false` for retraction).\n\n             See also [[init-db]].",$APP.l(d1)?d1.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?
$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return A1a},R5a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Dm,$APP.Z,$APP.M,$APP.JF],[$APP.hN,S6a,"datascript/core.cljc",50,1,271,271,$5,$APP.Kd,"Applies transaction to an immutable db value, returning new immutable db value. Same as `(:db-after (with db tx-data))`.",$APP.l(A1a)?A1a.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,
$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return g4a},I5a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,u5a,"datascript/core.cljc",18,1,412,412,$APP.J(new $APP.H(null,4,5,$APP.I,[R5,L5,$APP.Uy,$APP.BM],null)),'Returns part of `:avet` index between `[_ attr start]` and `[_ attr end]` in AVET sort order.\n\n   Same properties as [[datoms]].\n\n   `attr` must be a reference, unique attribute or marked as `:db/index true`.\n\n   Usage:\n\n       (index-range db :likes "a" "zzzzzzzzz")\n       ; \x3d\x3e (#datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       (index-range db :likes "egg" "pineapple")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [2 :likes "pie"])\n\n   Useful patterns:\n\n       ; find all entities with age in a specific range (inclusive)\n       (-\x3e\x3e (index-range db :age 18 60) (map :e))',
$APP.l(g4a)?g4a.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return f3},t6a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,X5a,"datascript/core.cljc",
39,1,446,446,$APP.Kd,"Creates a mutable reference to a given immutable database. See [[create-conn]].",$APP.l(f3)?f3.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return z6},Y6a,$APP.gi([$APP.Q,$APP.O,
$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,y6a,"datascript/core.cljc",59,1,466,466,$APP.Kd,"Lazy-load database from storage and make conn out of it.\n   Returns nil if there’s no database yet in storage",$APP.l(z6)?z6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?
e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return B6},G4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,p5a,"datascript/core.cljc",61,1,558,558,$APP.Kd,"Forces underlying `conn` value to become `db`. Will generate a tx-report that will remove everything from old value and insert everything from the new one.",$APP.l(B6)?B6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,
4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return A6},j5a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,z6a,"datascript/core.cljc",69,1,471,471,$APP.Kd,'Applies transaction the underlying database value and atomically updates connection reference to point to the result of that transaction, new db value.\n\n   Returns transaction report, a map:\n\n       {:db-before ...      ; db value before transaction\n        :db-after  ...      ; db value after transaction\n        :tx-data   [...]    ; plain datoms that were added/retracted from db-before\n        :tempids   {...}    ; map of tempid from tx-data \x3d\x3e assigned entid in db-after\n        :tx-meta   tx-meta} ; the exact value you passed as `tx-meta`\n\n  Note! `conn` will be updated in-place and is not returned from [[transact!]].\n\n  Usage:\n\n      ; add a single datom to an existing entity (1)\n      (transact! conn [[:db/add 1 :name "Ivan"]])\n\n      ; retract a single datom\n      (transact! conn [[:db/retract 1 :name "Ivan"]])\n\n      ; retract single entity attribute\n      (transact! conn [[:db.fn/retractAttribute 1 :name]])\n\n      ; ... or equivalently (since Datomic changed its API to support this):\n      (transact! conn [[:db/retract 1 :name]])\n\n      ; retract all entity attributes (effectively deletes entity)\n      (transact! conn [[:db.fn/retractEntity 1]])\n\n      ; create a new entity (`-1`, as any other negative value, is a tempid\n      ; that will be replaced with DataScript to a next unused eid)\n      (transact! conn [[:db/add -1 :name "Ivan"]])\n\n      ; check assigned id (here `*1` is a result returned from previous `transact!` call)\n      (def report *1)\n      (:tempids report) ; \x3d\x3e {-1 296}\n\n      ; check actual datoms inserted\n      (:tx-data report) ; \x3d\x3e [#datascript/Datom [296 :name "Ivan"]]\n\n      ; tempid can also be a string\n      (transact! conn [[:db/add "ivan" :name "Ivan"]])\n      (:tempids *1) ; \x3d\x3e {"ivan" 297}\n\n      ; reference another entity (must exist)\n      (transact! conn [[:db/add -1 :friend 296]])\n\n      ; create an entity and set multiple attributes (in a single transaction\n      ; equal tempids will be replaced with the same yet unused entid)\n      (transact! conn [[:db/add -1 :name "Ivan"]\n                       [:db/add -1 :likes "fries"]\n                       [:db/add -1 :likes "pizza"]\n                       [:db/add -1 :friend 296]])\n\n      ; create an entity and set multiple attributes (alternative map form)\n      (transact! conn [{:db/id  -1\n                        :name   "Ivan"\n                        :likes  ["fries" "pizza"]\n                        :friend 296}])\n\n      ; update an entity (alternative map form). Can’t retract attributes in\n      ; map form. For cardinality many attrs, value (fish in this example)\n      ; will be added to the list of existing values\n      (transact! conn [{:db/id  296\n                        :name   "Oleg"\n                        :likes  ["fish"]}])\n\n      ; ref attributes can be specified as nested map, that will create nested entity as well\n      (transact! conn [{:db/id  -1\n                        :name   "Oleg"\n                        :friend {:db/id -2\n                                 :name "Sergey"}}])\n\n      ; reverse attribute name can be used if you want created entity to become\n      ; a value in another entity reference\n      (transact! conn [{:db/id  -1\n                        :name   "Oleg"\n                        :_friend 296}])\n      ; equivalent to\n      (transact! conn [{:db/id  -1, :name   "Oleg"}\n                       {:db/id 296, :friend -1}])\n      ; equivalent to\n      (transact! conn [[:db/add  -1 :name   "Oleg"]\n                       [:db/add 296 :friend -1]])',
$APP.l(A6)?A6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return i6},j4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,b7a,"datascript/core.cljc",
38,1,677,677,$APP.Kd,"Generates a UUID that grow with time. Such UUIDs will always go to the end  of the index and that will minimize insertions in the middle.\n\n   Consist of 64 bits of current UNIX timestamp (in seconds) and 64 random bits (2^64 different unique values per second).",$APP.l(i6)?i6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):
$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return h4a},O4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Dm,$APP.Z,$APP.M,$APP.JF],[$APP.hN,R5,"datascript/core.cljc",13,1,617,617,$5,$APP.J(new $APP.H(null,1,5,$APP.I,[x5a],null)),"Returns the underlying immutable database value from a connection.\n\n   Exists for Datomic API compatibility. Prefer using `@conn` directly if possible.",
$APP.l(h4a)?h4a.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return R6},U4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,L6a,"datascript/core.cljc",
15,1,206,218,$APP.Kd,"Converts db into a data structure (not string!) that can be fed to serializer\n             of your choice (e.g. `js/JSON.stringify` in CLJS, `cheshire.core/generate-string`\n             or `jsonista.core/write-value-as-string` in CLJ).\n\n             On JVM, `serializable` holds a global lock that prevents any two serializations\n             to run in parallel (an implementation constraint, be aware).\n\n             Options:\n\n             `:freeze-fn` Non-primitive values will be serialized using this. Optional.\n             `pr-str` by default.",
$APP.l(R6)?R6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return x6},s5a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,d7a,"datascript/core.cljc",
84,1,450,450,$APP.Kd,"Creates an empty DB and a mutable reference to it. See [[create-conn]].",$APP.l(x6)?x6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return Z6},R4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,
$APP.zz,$APP.wL,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,m7a,"datascript/core.cljc",19,new $APP.k(null,6,[$APP.cA,!1,$APP.Is,6,$APP.$N,6,$APP.pN,new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[R5,$APP.DF],null),new $APP.H(null,3,5,$APP.I,[R5,$APP.DF,Q5],null),new $APP.H(null,4,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE],null),new $APP.H(null,5,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE],null),new $APP.H(null,6,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE,$APP.jE],null)],null),$APP.Z,$APP.J(new $APP.H(null,
2,5,$APP.I,[R5,$APP.DF],null),new $APP.H(null,3,5,$APP.I,[R5,$APP.DF,Q5],null),new $APP.H(null,4,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE],null),new $APP.H(null,5,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE],null),new $APP.H(null,6,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE,$APP.jE],null)),$APP.AF,$APP.J(null,null,null,null,null)],null),1,404,404,$APP.J(new $APP.H(null,2,5,$APP.I,[R5,$APP.DF],null),new $APP.H(null,3,5,$APP.I,[R5,$APP.DF,Q5],null),new $APP.H(null,4,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE],null),new $APP.H(null,
5,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE],null),new $APP.H(null,6,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE,$APP.jE],null)),"Same as [[seek-datoms]], but goes backwards until the beginning of the index.",$APP.l(Z6)?Z6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,
b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return S6},f6a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Dm,$APP.Z,$APP.M,$APP.JF],[$APP.hN,n7a,"datascript/core.cljc",20,1,220,229,$5,$APP.Kd,"Creates db from a data structure (not string!) produced by serializable.\n\n             Opts:\n\n             `:thaw-fn` Non-primitive values will be deserialized using this.\n             Must match :freeze-fn from serializable. Optional. `clojure.edn/read-string`\n             by default.",
$APP.l(S6)?S6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return V6},b6a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.wL,$APP.Nm,$APP.Xl,$APP.EP,$APP.Dm,$APP.Z,$APP.M,$APP.JF],[$APP.hN,i7a,"datascript/core.cljc",
19,new $APP.k(null,6,[$APP.cA,!1,$APP.Is,2,$APP.$N,2,$APP.pN,new $APP.H(null,3,5,$APP.I,[$APP.Sg,new $APP.H(null,1,5,$APP.I,[M5],null),new $APP.H(null,2,5,$APP.I,[M5,$APP.sH],null)],null),$APP.Z,$APP.J($APP.Sg,new $APP.H(null,1,5,$APP.I,[M5],null),new $APP.H(null,2,5,$APP.I,[M5,$APP.sH],null)),$APP.AF,$APP.J(null,null,null)],null),1,150,150,$5,$APP.J($APP.Sg,new $APP.H(null,1,5,$APP.I,[M5],null),new $APP.H(null,2,5,$APP.I,[M5,$APP.sH],null)),"Creates an empty database with an optional schema.\n\n   Usage:\n\n   ```\n   (empty-db) ; \x3d\x3e #datascript/DB {:schema {}, :datoms []}\n\n   (empty-db {:likes {:db/cardinality :db.cardinality/many}})\n   ; \x3d\x3e #datascript/DB {:schema {:likes {:db/cardinality :db.cardinality/many}}\n   ;                    :datoms []}\n   ```\n\n   Options are:\n\n   :branching-factor \x3cint\x3e, default 512. B-tree max node length\n   :ref-type         :strong | :soft | :weak, default :soft. How will nodes that are already\n                     stored on disk be referenced. Soft or weak means they might be unloaded\n                     from memory under memory pressure and later fetched from storage again.\n   :storage          \x3cIStorage\x3e. Will be used to store this db later with `(d/store db)`",
$APP.l(V6)?V6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return W6},n6a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.wL,$APP.Nm,$APP.Xl,$APP.EP,$APP.Dm,$APP.Z,$APP.M,$APP.JF],[$APP.hN,v6a,"datascript/core.cljc",
18,new $APP.k(null,6,[$APP.cA,!1,$APP.Is,3,$APP.$N,3,$APP.pN,new $APP.H(null,3,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[U5],null),new $APP.H(null,2,5,$APP.I,[U5,M5],null),new $APP.H(null,3,5,$APP.I,[U5,M5,$APP.sH],null)],null),$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[U5],null),new $APP.H(null,2,5,$APP.I,[U5,M5],null),new $APP.H(null,3,5,$APP.I,[U5,M5,$APP.sH],null)),$APP.AF,$APP.J(null,null,null)],null),1,194,194,$5,$APP.J(new $APP.H(null,1,5,$APP.I,[U5],null),new $APP.H(null,2,5,$APP.I,[U5,M5],null),
new $APP.H(null,3,5,$APP.I,[U5,M5,$APP.sH],null)),"Low-level fn for creating database quickly from a trusted sequence of datoms.\n   Does no validation on inputs, so `datoms` must be well-formed and match schema.\n   Used internally in db (de)serialization. See also [[datom]].\n   For options, see [[empty-db]]",$APP.l(W6)?W6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?
$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return i3},C4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Dm,$APP.Z,$APP.M,$APP.JF],[$APP.hN,V6a,"datascript/core.cljc",8,1,90,100,h6,$APP.Kd,"Forces all entity attributes to be eagerly fetched and cached. Only usable for debug output.\n\n             Usage:\n\n             ```\n             (entity db 1) ; \x3d\x3e {:db/id 1}\n             (touch (entity db 1)) ; \x3d\x3e {:db/id 1, :dislikes [:pie], :likes [:pizza]}\n             ```",
$APP.l(i3)?i3.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return 536870912},J6a,$APP.gi([$APP.iu,$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Wz,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[!0,$APP.hN,
l7a,"datascript/core.cljc",26,1,!0,21,21,$APP.Kd,null,$APP.l(536870912)?(536870912).H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return f4a},q4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,
$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,$APP.kF,"datascript/core.cljc",13,1,246,246,$APP.J(new $APP.H(null,2,5,$APP.I,[R5,$APP.cP],null)),"Returns a view over database that has same interface but only includes datoms for which the `(pred db datom)` is true. Can be applied multiple times.\n\n   Filtered DB gotchas:\n\n   - All operations on filtered database are proxied to original DB, then filter pred is applied.\n   - Not cached. You pay filter penalty every time.\n   - Supports entities, pull, queries, index access.\n   - Does not support [[with]] and [[db-with]].",
$APP.l(f4a)?f4a.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return c3},o5a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,e7a,"datascript/core.cljc",
45,1,693,693,$APP.Kd,"Stores databases to provided storage. If database was created\n      with :storage option or restored from storage, use single-argument version.\n\n      Subsequent stores are incremental, i.e. only newly added nodes will be actually stored.\n\n      Storing already stored dbs into another storage is not supported (may change).",$APP.l(c3)?c3.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,
$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return X6},I6a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.wL,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,U5,"datascript/core.cljc",13,new $APP.k(null,6,[$APP.cA,!1,$APP.Is,6,$APP.$N,6,$APP.pN,new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[R5,$APP.DF],null),new $APP.H(null,
3,5,$APP.I,[R5,$APP.DF,Q5],null),new $APP.H(null,4,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE],null),new $APP.H(null,5,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE],null),new $APP.H(null,6,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE,$APP.jE],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[R5,$APP.DF],null),new $APP.H(null,3,5,$APP.I,[R5,$APP.DF,Q5],null),new $APP.H(null,4,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE],null),new $APP.H(null,5,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE],null),new $APP.H(null,6,5,$APP.I,[R5,$APP.DF,
Q5,$APP.hE,$APP.iE,$APP.jE],null)),$APP.AF,$APP.J(null,null,null,null,null)],null),1,282,282,$APP.J(new $APP.H(null,2,5,$APP.I,[R5,$APP.DF],null),new $APP.H(null,3,5,$APP.I,[R5,$APP.DF,Q5],null),new $APP.H(null,4,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE],null),new $APP.H(null,5,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE],null),new $APP.H(null,6,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE,$APP.jE],null)),'Index lookup. Returns a sequence of datoms (lazy iterator over actual DB index) which components (e, a, v) match passed arguments.\n\n   Datoms are sorted in index sort order. Possible `index` values are: `:eavt`, `:aevt`, `:avet`.\n\n   Usage:\n\n       ; find all datoms for entity id \x3d\x3d 1 (any attrs and values)\n       ; sort by attribute, then value\n       (datoms db :eavt 1)\n       ; \x3d\x3e (#datascript/Datom [1 :friends 2]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [1 :name "Ivan"])\n\n       ; find all datoms for entity id \x3d\x3d 1 and attribute \x3d\x3d :likes (any values)\n       ; sorted by value\n       (datoms db :eavt 1 :likes)\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"])\n\n       ; find all datoms for entity id \x3d\x3d 1, attribute \x3d\x3d :likes and value \x3d\x3d "pizza"\n       (datoms db :eavt 1 :likes "pizza")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "pizza"])\n\n       ; find all datoms for attribute \x3d\x3d :likes (any entity ids and values)\n       ; sorted by entity id, then value\n       (datoms db :aevt :likes)\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       ; find all datoms that have attribute \x3d\x3d `:likes` and value \x3d\x3d `"pizza"` (any entity id)\n       ; `:likes` must be a unique attr, reference or marked as `:db/index true`\n       (datoms db :avet :likes "pizza")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       ; find all datoms sorted by entity id, then attribute, then value\n       (datoms db :eavt) ; \x3d\x3e (...)\n\n   Useful patterns:\n\n       ; get all values of :db.cardinality/many attribute\n       (-\x3e\x3e (datoms db :eavt eid attr) (map :v))\n\n       ; lookup entity ids by attribute value\n       (-\x3e\x3e (datoms db :avet attr value) (map :e))\n\n       ; find all entities with a specific attribute\n       (-\x3e\x3e (datoms db :aevt attr) (map :e))\n\n       ; find “singleton” entity by its attr\n       (-\x3e\x3e (datoms db :aevt attr) first :e)\n\n       ; find N entities with lowest attr value (e.g. 10 earliest posts)\n       (-\x3e\x3e (datoms db :avet attr) (take N))\n\n       ; find N entities with highest attr value (e.g. 10 latest posts)\n       (-\x3e\x3e (datoms db :avet attr) (reverse) (take N))\n\n   Gotchas:\n\n   - Index lookup is usually more efficient than doing a query with a single clause.\n   - Resulting iterator is calculated in constant time and small constant memory overhead.\n   - Iterator supports efficient `first`, `next`, `reverse`, `seq` and is itself a sequence.\n   - Will not return datoms that are not part of the index (e.g. attributes with no `:db/index` in schema when querying `:avet` index).\n     - `:eavt` and `:aevt` contain all datoms.\n     - `:avet` only contains datoms for references, `:db/unique` and `:db/index` attributes.',
$APP.l(X6)?X6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return D1a},i5a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,X6a,"datascript/core.cljc",
49,1,562,562,$APP.Kd,null,$APP.l(D1a)?D1a.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return Y6},A5a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.wL,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],
[$APP.hN,q6a,"datascript/core.cljc",18,new $APP.k(null,6,[$APP.cA,!1,$APP.Is,6,$APP.$N,6,$APP.pN,new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[R5,$APP.DF],null),new $APP.H(null,3,5,$APP.I,[R5,$APP.DF,Q5],null),new $APP.H(null,4,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE],null),new $APP.H(null,5,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE],null),new $APP.H(null,6,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE,$APP.jE],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[R5,$APP.DF],null),new $APP.H(null,3,5,
$APP.I,[R5,$APP.DF,Q5],null),new $APP.H(null,4,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE],null),new $APP.H(null,5,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE],null),new $APP.H(null,6,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE,$APP.jE],null)),$APP.AF,$APP.J(null,null,null,null,null)],null),1,367,367,$APP.J(new $APP.H(null,2,5,$APP.I,[R5,$APP.DF],null),new $APP.H(null,3,5,$APP.I,[R5,$APP.DF,Q5],null),new $APP.H(null,4,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE],null),new $APP.H(null,5,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE],
null),new $APP.H(null,6,5,$APP.I,[R5,$APP.DF,Q5,$APP.hE,$APP.iE,$APP.jE],null)),'Similar to [[datoms]], but will return datoms starting from specified components and including rest of the database until the end of the index.\n\n   If no datom matches passed arguments exactly, iterator will start from first datom that could be considered “greater” in index order.\n\n   Usage:\n\n       (seek-datoms db :eavt 1)\n       ; \x3d\x3e (#datascript/Datom [1 :friends 2]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [1 :name "Ivan"]\n       ;     #datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       (seek-datoms db :eavt 1 :name)\n       ; \x3d\x3e (#datascript/Datom [1 :name "Ivan"]\n       ;     #datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       (seek-datoms db :eavt 2)\n       ; \x3d\x3e (#datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       ; no datom [2 :likes "fish"], so starts with one immediately following such in index\n       (seek-datoms db :eavt 2 :likes "fish")\n       ; \x3d\x3e (#datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])',
$APP.l(Y6)?Y6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return P6},W4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,F2a,"datascript/core.cljc",
7,1,105,117,$APP.Kd,'Fetches data from database using recursive declarative description. See [docs.datomic.com/on-prem/pull.html](https://docs.datomic.com/on-prem/pull.html).\n\n             Unlike [[entity]], returns plain Clojure map (not lazy).\n\n             Usage:\n\n                 (pull db [:db/id, :name, :likes, {:friends [:db/id :name]}] 1)\n                 ; \x3d\x3e {:db/id   1,\n                 ;     :name    "Ivan"\n                 ;     :likes   [:pizza]\n                 ;     :friends [{:db/id 2, :name "Oleg"}]}',
$APP.l(P6)?P6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return i4a},B5a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,Q4a,"datascript/core.cljc",
15,1,735,735,$APP.J(new $APP.H(null,1,5,$APP.I,[R5],null)),null,$APP.l(i4a)?i4a.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),function(){var a=new $APP.Cd(function(){return y6},$5a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,
$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.hN,G6a,"datascript/core.cljc",59,1,454,454,$APP.Kd,"Creates a mutable reference (a “connection”) to an empty immutable database.\n\n   Connections are lightweight in-memory structures (~atoms) with direct support of transaction listeners ([[listen!]], [[unlisten!]]) and other handy DataScript APIs ([[transact!]], [[reset-conn!]], [[db]]).\n\n   To access underlying immutable DB value, deref: `@conn`.\n\n   For list of options, see [[empty-db]].\n\n   If you specify `:storage` option, conn will be stored automatically after each transaction",
$APP.l(y6)?y6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,b7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}()]),S7a=new $APP.k(null,7,[e5a,function(){var a=new $APP.Cd(function(){return $APP.b2},M6a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.$O,
e5a,"datascript/db.cljc",21,1,1124,1124,$APP.J(new $APP.H(null,1,5,$APP.I,[new $APP.k(null,1,[$APP.uB,new $APP.H(null,2,5,$APP.I,[M5,U5],null)],null)],null)),null,$APP.l($APP.b2)?$APP.b2.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,c7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),x6a,
function(){var a=new $APP.Cd(function(){return $APP.e1},A6a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Dm,$APP.Z,$APP.M,$APP.JF],[$APP.$O,x6a,"datascript/db.cljc",31,1,333,333,b6,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.uN],null)),null,$APP.l($APP.e1)?$APP.e1.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,c7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=
$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),o4a,function(){var a=new $APP.Cd(function(){return $APP.b1},K4a,$APP.gi([$APP.vr,$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[k4a,$APP.$O,o4a,"datascript/db.cljc",15,1,179,181,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.tE],null)),null,$APP.l($APP.b1)?$APP.b1.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,c7,$APP.O,a,$APP.Z,$APP.Z.g(c),
$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),n4a,function(){var a=new $APP.Cd(function(){return $APP.a1},l5a,$APP.gi([$APP.vr,$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[k4a,$APP.$O,n4a,"datascript/db.cljc",12,1,179,180,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.tE],null)),null,$APP.l($APP.a1)?$APP.a1.H:null])),b=$APP.p(a),c=$APP.te(a);
a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,c7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),S5,function(){var a=new $APP.Cd(function(){return d1},p6a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.wL,$APP.Nm,$APP.Xl,$APP.EP,$APP.Dm,$APP.Z,$APP.M,$APP.JF],[$APP.$O,S5,"datascript/db.cljc",19,new $APP.k(null,6,[$APP.cA,!1,
$APP.Is,5,$APP.$N,5,$APP.pN,new $APP.H(null,3,5,$APP.I,[new $APP.H(null,3,5,$APP.I,[$APP.yK,$APP.sK,$APP.NK],null),new $APP.H(null,4,5,$APP.I,[$APP.yK,$APP.sK,$APP.NK,N5],null),new $APP.H(null,5,5,$APP.I,[$APP.yK,$APP.sK,$APP.NK,N5,u4a],null)],null),$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.yK,$APP.sK,$APP.NK],null),new $APP.H(null,4,5,$APP.I,[$APP.yK,$APP.sK,$APP.NK,N5],null),new $APP.H(null,5,5,$APP.I,[$APP.yK,$APP.sK,$APP.NK,N5,u4a],null)),$APP.AF,$APP.J(null,null,null)],null),1,257,257,b6,
$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.yK,$APP.sK,$APP.NK],null),new $APP.H(null,4,5,$APP.I,[$APP.yK,$APP.sK,$APP.NK,N5],null),new $APP.H(null,5,5,$APP.I,[$APP.yK,$APP.sK,$APP.NK,N5,u4a],null)),null,$APP.l(d1)?d1.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,c7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,
d):$APP.cu.j(a,b,d)}(),$5,function(){var a=new $APP.Cd(function(){return $APP.x1},M5a,new $APP.k(null,8,[$APP.Q,$APP.$O,$APP.M,null,$APP.Wl,"datascript/db.cljc",$APP.Xl,672,$APP.Nm,22,$APP.O,$5,$APP.JF,$APP.l($APP.x1)?$APP.x1.H:null,$APP.Z,$APP.Kd],null)),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,c7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?
e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),b6,function(){var a=new $APP.Cd(function(){return $APP.c1},P5a,new $APP.k(null,8,[$APP.Q,$APP.$O,$APP.M,null,$APP.Wl,"datascript/db.cljc",$APP.Xl,185,$APP.Nm,10,$APP.O,b6,$APP.JF,$APP.l($APP.c1)?$APP.c1.H:null,$APP.Z,$APP.Kd],null)),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,c7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=
$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}()],null),T7a=new $APP.k(null,3,[Q5a,function(){var a=new $APP.Cd(function(){return D6},s4a,$APP.gi([$APP.Kt,$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.wL,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[!0,c6,Q5a,"datascript/impl/entity.cljc",21,new $APP.k(null,6,[$APP.cA,!1,$APP.Is,3,$APP.$N,3,$APP.pN,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.tE,L5],null),new $APP.H(null,3,5,$APP.I,[$APP.se($APP.tE,new $APP.k(null,
1,[$APP.Dm,h6],null)),L5,$APP.yA],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.tE,L5],null),new $APP.H(null,3,5,$APP.I,[$APP.se($APP.tE,new $APP.k(null,1,[$APP.Dm,h6],null)),L5,$APP.yA],null)),$APP.AF,$APP.J(null,null)],null),1,165,165,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.tE,L5],null),new $APP.H(null,3,5,$APP.I,[$APP.se($APP.tE,new $APP.k(null,1,[$APP.Dm,h6],null)),L5,$APP.yA],null)),null,$APP.l(D6)?D6.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,
4,[$APP.Q,Q7a,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),h6,function(){var a=new $APP.Cd(function(){return k3},T5a,new $APP.k(null,8,[$APP.Q,c6,$APP.M,null,$APP.Wl,"datascript/impl/entity.cljc",$APP.Xl,48,$APP.Nm,10,$APP.O,h6,$APP.JF,$APP.l(k3)?k3.H:null,$APP.Z,$APP.Kd],null)),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);
var d=new $APP.k(null,4,[$APP.Q,Q7a,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),p4a,function(){var a=new $APP.Cd(function(){return H1a},X4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[c6,p4a,"datascript/impl/entity.cljc",14,1,147,147,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.PK],null)),null,$APP.l(H1a)?
H1a.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,Q7a,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}()],null),e7,U7a=$APP.Bj.g($APP.Xf),V7a=$APP.Bj.g($APP.Xf),W7a=$APP.Bj.g($APP.Xf),X7a=$APP.Bj.g($APP.Xf),Y7a=$APP.C.j($APP.Xf,$APP.dr,$APP.Oj.C?$APP.Oj.C():$APP.Oj.call(null));
e7=new $APP.ck($APP.lj.h("nbb.impl.datascript","-store"),$APP.Sq,$APP.Lm,Y7a,U7a,V7a,W7a,X7a);var f7,Z7a=$APP.Bj.g($APP.Xf),$7a=$APP.Bj.g($APP.Xf),a8a=$APP.Bj.g($APP.Xf),b8a=$APP.Bj.g($APP.Xf),c8a=$APP.C.j($APP.Xf,$APP.dr,$APP.Oj.C?$APP.Oj.C():$APP.Oj.call(null));f7=new $APP.ck($APP.lj.h("nbb.impl.datascript","-restore"),$APP.Sq,$APP.Lm,c8a,Z7a,$7a,a8a,b8a);e7.Ba(null,$APP.Ez,function(a,b){var c=$APP.Ap(a);c=$APP.C.h(c,O5);return c.h?c.h(a,b):c.call(null,a,b)});var d8a=O2;
e7.Ba(null,$APP.Lm,function(a,b){return d8a.h?d8a.h(a,b):d8a.call(null,a,b)});O2=function(a,b){return e7.h(a,b)};f7.Ba(null,$APP.Ez,function(a,b){var c=$APP.Ap(a);c=$APP.C.h(c,g6);return c.h?c.h(a,b):c.call(null,a,b)});var e8a=P2;f7.Ba(null,$APP.Lm,function(a,b){return e8a.h?e8a.h(a,b):e8a.call(null,a,b)});P2=function(a,b){return f7.h(a,b)};
var f8a=$APP.cu.h(p7a,new $APP.k(null,3,[$APP.vr,l1a,$APP.ur,$APP.Di([f7,e7]),$APP.Q,d7],null)),g8a=$APP.vi.l($APP.eu($APP.gi([$APP.se(k5a,new $APP.k(null,1,[$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.se($APP.tK,new $APP.k(null,1,[$APP.Dm,b6],null))],null)))],null)),$APP.se(s7a,new $APP.k(null,4,[w6a,!0,$APP.vN,$APP.Vra,$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,1,5,$APP.I,[e6],null))),$APP.M,"Positional factory function for datascript.storage/StorageAdapter."],null)),$APP.se(a5a,
new $APP.k(null,1,[$APP.Z,$APP.J($APP.zk,$APP.J($APP.se(new $APP.H(null,1,5,$APP.I,[R5],null),new $APP.k(null,1,[$APP.Dm,F6a],null))))],null)),$APP.se(d6a,new $APP.k(null,1,[$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,2,5,$APP.I,[R5,$APP.oF],null)))],null)),$APP.se(q7a,new $APP.k(null,4,[$APP.UI,!0,$APP.Oz,new $APP.k(null,1,[$APP.ur,new $APP.k(null,2,[$APP.se(O5,new $APP.k(null,1,[$APP.M,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)"],
null)),new $APP.H(null,1,5,$APP.I,[new $APP.H(null,3,5,$APP.I,[$APP.oK,f6,W5],null)],null),$APP.se(g6,new $APP.k(null,1,[$APP.M,"Read back and deserialize data stored under single `addr`"],null)),new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.oK,J5],null)],null)],null)],null),$APP.xK,new $APP.k(null,2,[l4a,new $APP.k(null,3,[$APP.O,O5,$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.oK,f6,W5],null)),$APP.M,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)"],
null),I4a,new $APP.k(null,3,[$APP.O,g6,$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.oK,J5],null)),$APP.M,"Read back and deserialize data stored under single `addr`"],null)],null),$APP.kI,$APP.J("@interface")],null)),$APP.se(h7a,new $APP.k(null,2,[$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,1,5,$APP.I,[e6],null),new $APP.H(null,2,5,$APP.I,[e6,$APP.sH],null))),$APP.wL,new $APP.k(null,6,[$APP.cA,!1,$APP.Is,2,$APP.$N,2,$APP.pN,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[e6],null),new $APP.H(null,
2,5,$APP.I,[e6,$APP.sH],null)],null),$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[e6],null),new $APP.H(null,2,5,$APP.I,[e6,$APP.sH],null)),$APP.AF,$APP.J(null,null)],null)],null)),$APP.se(e6,new $APP.k(null,1,[$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,1,5,$APP.I,[R5],null)))],null)),$APP.se(O5,new $APP.k(null,3,[$APP.vr,Q6a,$APP.M,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)",
$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.oK,f6,W5],null)))],null)),$APP.se(V4a,new $APP.k(null,1,[$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,3,5,$APP.I,[R5,o6a,T6a],null)))],null)),$APP.se(g6,new $APP.k(null,3,[$APP.vr,Q6a,$APP.M,"Read back and deserialize data stored under single `addr`",$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.oK,J5],null)))],null)),$APP.se(Y4a,new $APP.k(null,1,[$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,2,5,$APP.I,[e6,$APP.sH],null)))],
null)),$APP.se(L5a,new $APP.k(null,1,[$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.sH],null)))],null)),$APP.se(T4a,new $APP.k(null,1,[$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,2,5,$APP.I,[e6,z4a],null)))],null)),$APP.se(e7a,new $APP.k(null,2,[$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,1,5,$APP.I,[R5],null),new $APP.H(null,2,5,$APP.I,[R5,e6],null))),$APP.wL,new $APP.k(null,6,[$APP.cA,!1,$APP.Is,2,$APP.$N,2,$APP.pN,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[R5],null),
new $APP.H(null,2,5,$APP.I,[R5,e6],null)],null),$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[R5],null),new $APP.H(null,2,5,$APP.I,[R5,e6],null)),$APP.AF,$APP.J(null,null)],null)],null)),$APP.se(B6a,new $APP.k(null,4,[w6a,!0,$APP.vN,$APP.wm,$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,1,5,$APP.I,[A4a],null))),$APP.M,"Factory function for datascript.storage/StorageAdapter, taking a map of keywords to field values."],null)),$APP.se(S5a,new $APP.k(null,1,[$APP.Z,$APP.J($APP.zk,$APP.J(new $APP.H(null,2,5,
$APP.I,[R5,$APP.oF],null)))],null))],[new $APP.k(null,3,[$APP.O,M4a,$APP.du,m1a,$APP.nb,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.se($APP.tK,new $APP.k(null,1,[$APP.Dm,b6],null))],null))],null)],null),new $APP.k(null,3,[$APP.O,O5a,$APP.du,function(a){return new Q2(a,null,null,null)},$APP.nb,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[e6],null)),$APP.M,"Positional factory function for datascript.storage/StorageAdapter."],null)],null),new $APP.k(null,3,[$APP.O,
c5a,$APP.du,R2,$APP.nb,new $APP.k(null,1,[$APP.Z,$APP.J($APP.se(new $APP.H(null,1,5,$APP.I,[R5],null),new $APP.k(null,1,[$APP.Dm,F6a],null)))],null)],null),new $APP.k(null,3,[$APP.O,N5a,$APP.du,u1a,$APP.nb,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[R5,$APP.oF],null))],null)],null),new $APP.k(null,3,[$APP.O,Q6a,$APP.du,l1a,$APP.nb,$APP.Xf],null),new $APP.k(null,3,[$APP.O,u6a,$APP.du,w6,$APP.nb,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[e6],null),new $APP.H(null,
2,5,$APP.I,[e6,$APP.sH],null))],null)],null),new $APP.k(null,3,[$APP.O,O6a,$APP.du,S2,$APP.nb,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[R5],null))],null)],null),new $APP.k(null,3,[$APP.O,j6a,$APP.du,O2,$APP.nb,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.oK,f6,W5],null)),$APP.M,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)"],
null)],null),new $APP.k(null,3,[$APP.O,l6a,$APP.du,V2,$APP.nb,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[R5,o6a,T6a],null))],null)],null),new $APP.k(null,3,[$APP.O,E4a,$APP.du,P2,$APP.nb,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.oK,J5],null)),$APP.M,"Read back and deserialize data stored under single `addr`"],null)],null),new $APP.k(null,3,[$APP.O,w4a,$APP.du,v1a,$APP.nb,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[e6,$APP.sH],null))],null)],
null),new $APP.k(null,3,[$APP.O,C5a,$APP.du,X2,$APP.nb,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.sH],null))],null)],null),new $APP.k(null,3,[$APP.O,R6a,$APP.du,n1a,$APP.nb,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[e6,z4a],null))],null)],null),new $APP.k(null,3,[$APP.O,H5a,$APP.du,c3,$APP.nb,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[R5],null),new $APP.H(null,2,5,$APP.I,[R5,e6],null))],null)],null),new $APP.k(null,3,[$APP.O,C6a,$APP.du,function(a){var b=
$APP.Nl.h(a,U0);b=$APP.Ee(a)?$APP.Fh.h($APP.Xf,b):b;return new Q2(U0.g(a),null,$APP.$f(b),null)},$APP.nb,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[A4a],null)),$APP.M,"Factory function for datascript.storage/StorageAdapter, taking a map of keywords to field values."],null)],null),new $APP.k(null,3,[$APP.O,Z6a,$APP.du,x1a,$APP.nb,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[R5,$APP.oF],null))],null)],null)]),d7),O5,function(){var a=new $APP.Cd(function(){return e7},
N4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.se(D4a,new $APP.k(null,1,[$APP.iu,!0],null)),O5,"nbb/impl/datascript.cljs",17,1,65,65,$APP.Kd,null,$APP.l(e7)?e7.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,d7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,
b,d)}(),$APP.B([g6,function(){var a=new $APP.Cd(function(){return f7},S4a,$APP.gi([$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[$APP.se(D4a,new $APP.k(null,1,[$APP.iu,!0],null)),g6,"nbb/impl/datascript.cljs",19,1,66,66,$APP.Kd,null,$APP.l(f7)?f7.H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,d7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?$APP.gS.j(a,b,d):$APP.l(function(){var e=
$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}(),q7a,f8a,x4a,function(){var a=new $APP.Cd(function(){return 1},H6a,$APP.gi([$APP.Kt,$APP.Q,$APP.O,$APP.Wl,$APP.zz,$APP.Nm,$APP.Xl,$APP.EP,$APP.Z,$APP.M,$APP.JF],[!0,a7a,x4a,"datascript/storage.cljs",25,1,31,31,$APP.Kd,null,$APP.l(1)?(1).H:null])),b=$APP.p(a),c=$APP.te(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.Q,d7,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.M,$APP.M.g(c)],null);return $APP.l($APP.Mq.g(c))?
$APP.gS.j(a,b,d):$APP.l(function(){var e=$APP.gq.g(c);return $APP.l(e)?e:$APP.tq.g(c)}())?$APP.hS.j(a,b,d):$APP.cu.j(a,b,d)}()]));$APP.Qu(new $APP.k(null,1,[$APP.Cq,new $APP.k(null,4,[$APP.hN,R7a,$APP.$O,S7a,a7a,g8a,c6,T7a],null)],null));