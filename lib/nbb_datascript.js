import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
if (global) { global.datascript = datascript } else if (window) { window.datascript = datascript } else { var datascript = {}}const shadow_esm_import = function(x) { return import(x) };
var OPa,QPa,GY,IY,HY,JY,LY,MY,NY,OY,PY,QY,RY,TY,VY,WY,TPa,UPa,VPa,XY,YY,ZY,WPa,$Y,aZ,bZ,cZ,dZ,eZ,fZ,gZ,hZ,XPa,jZ,kZ,lZ,nZ,mZ,qZ,YPa,rZ,tZ,uZ,vZ,wZ,yZ,AZ,CZ,ZPa,DZ,BZ,EZ,FZ,GZ,$Pa,aQa,JZ,KZ,LZ,bQa,PZ,RZ,UZ,XZ,YZ,dQa,ZZ,eQa,d_,fQa,e_,f_,g_,h_,i_,j_,k_,l_,m_,n_,gQa,o_,p_,q_,r_,s_,t_,w_,x_,y_,z_,K_,L_,kQa,lQa,mQa,X_,$_,c0,d0,pQa,e0,rQa,h0,sQa,n0,o0,p0,q0,tQa,r0,uQa,s0,t0,u0,wQa,v0,yQa,zQa,AQa,DQa,EQa,B0,D0,E0,FQa,IQa,JQa,KQa,M0,N0,MQa,NQa,OQa,PQa,RQa,V0,SQa,TQa,W0,Y0,Z0,U0,$0,a1,b1,UQa,VQa,X0,c1,WQa,
XQa,d1,YQa,n1,t1,v1,aRa,bRa,cRa,x1,dRa,eRa,A1,B1,C1,D1,E1,F1,G1,H1,I1,J1,K1,L1,M1,N1,P1,O1,Q1,S1,T1,iRa,U1,V1,W1,X1,Y1,Z1,$1,d2,oRa,f2,g2,h2,i2,j2,k2,pRa,qRa,rRa,uRa,l2,m2,n2,o2,p2,r2,q2,s2,t2,u2,v2,w2,x2,y2,z2,A2,B2,C2,wRa,D2,E2,F2,xRa,G2,H2,yRa,K2,L2,M2,N2,O2,P2,zRa,ARa,BRa,Q2,S2,T2,U2,V2,W2,X2,Y2,Z2,$2,a3,e3,DRa,f3,g3,ERa,GRa,h3,i3,j3,k3,l3,m3,n3,HRa,o3,IRa,JRa,KRa,LRa,MRa,u3,r3,NRa,w3,x3,ORa,QRa,RRa,z3,SRa,TRa,URa,XRa,$Ra,I3,J3,K3,aSa,L3,M3,N3,P3,bSa,Q3,R3,cSa,fSa,gSa,X3,hSa,Z3,iSa,jSa,kSa,lSa,
$3,a4,b4,mSa,nSa,oSa,pSa,qSa,rSa,tSa,uSa,vSa,g4,wSa,ySa,zSa,ASa,n4,o4,p4,BSa,CSa,DSa,ESa,xSa,m4,FSa,GSa,r4,HSa,ISa,JSa,KSa,LSa,s4,MSa,NSa,t4,u4,v4,w4,B4,PSa,C4,D4,QSa,E4,RSa,N_,Q0,SSa,TSa,USa,VSa,H3,oQa,G0,C3,QQa,WSa,XSa,YSa,F4,ZSa,y3,$Sa,aTa,A4,bTa,d3,cTa,s1,L0,dTa,eTa,fTa,F3,gTa,q1,HQa,hTa,iTa,jTa,g1,kTa,R_,lTa,mTa,nTa,oTa,H0,pTa,qTa,rTa,sTa,tTa,uTa,G4,vTa,wTa,k0,k4,xTa,yTa,zTa,E3,V_,l0,A3,ATa,j4,BTa,Q_,A0,CTa,DTa,j0,p3,ETa,H4,FTa,P_,GTa,O0,I4,HTa,ITa,JTa,v3,KTa,LTa,MTa,ZRa,NTa,OTa,PTa,QTa,u_,J4,
T0,RTa,STa,FRa,qQa,TTa,QZ,J_,UTa,k1,ZQa,K4,VTa,L4,z4,WTa,q3,a0,xQa,D_,XTa,M4,YTa,N4,GQa,b3,SZ,ZTa,$Ta,O4,aUa,f4,S_,P4,bUa,Q4,cUa,T_,h1,R4,dUa,l4,eUa,mRa,VRa,fUa,Y3,gUa,S4,T4,hUa,iUa,jUa,x4,E_,kUa,lUa,mUa,nUa,oUa,Z_,pUa,qUa,rUa,sUa,tUa,U4,z1,tRa,U_,uUa,O_,kRa,sRa,vUa,OSa,wUa,xUa,WZ,M_,yUa,nRa,T3,zUa,V4,W4,lRa,m0,AUa,BUa,CUa,DUa,f1,vRa,EUa,FUa,iQa,GUa,HUa,w0,IUa,JUa,KUa,F_,LUa,p1,l1,MUa,X4,R1,Y4,NUa,d4,OUa,F0,PUa,QUa,RUa,U3,SUa,i0,TUa,S0,CQa,cQa,BQa,UUa,VUa,WUa,XUa,Z4,YUa,hRa,H_,ZUa,$Ua,aVa,bVa,S3,
cVa,dVa,W_,m1,c3,CRa,J0,I_,R2,eVa,fVa,$4,pZ,gVa,a5,hVa,iVa,b5,o1,jQa,OZ,jVa,VZ,kVa,lVa,j1,t3,B3,YRa,mVa,I2,nVa,oVa,r1,Y_,eSa,c5,i1,dSa,b0,pVa,qVa,rVa,sVa,d5,tVa,uVa,vVa,wVa,e5,xVa,i4,yVa,zVa,AVa,vQa,oZ,BVa,CVa,DVa,EVa,hQa,FVa,D3,f5,G3,GVa,u1,HVa,R0,G_,IVa,g5,JVa,KVa,LVa,MVa,NVa,y0,C0,h5,WRa,z0,OVa,gRa,J2,PVa,TZ,QVa,PRa,RVa,SVa,TVa,UVa,VVa,WVa,e1,XVa,YVa,i5;
OPa=function(a,b){a=a.split(".");var c=$APP.Nt;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}:c[d]=b};QPa=function(a){return $APP.Tf(function(b){return $APP.re(a,b)},PPa)};GY=function(a,b,c,d,e){this.kf=a;this.Oi=b;this.Pi=c;this.Ue=d;this.wb=e;this.J=2147484416;this.M=0};
IY=function(a,b,c){var d=a.kf,e=a.Oi,f=a.Pi,h=a.Ue;a=a.wb;var m=f.h?f.h(b,null):f.call(null,b,null);if($APP.l(m))return new GY(d,$APP.Zh.j($APP.nl.h(e,m),h,b),$APP.Zh.j(f,b,h),h+1,a);b=new GY($APP.Zh.j(d,b,c),$APP.Zh.j(e,h,b),$APP.Zh.j(f,b,h),h+1,a);return HY.g?HY.g(b):HY.call(null,b)};HY=function(a){if($APP.Fd(a.kf)>a.wb){var b=a.kf,c=a.Oi,d=a.Pi,e=a.Ue;a=a.wb;var f=$APP.v(c),h=$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);return new GY($APP.nl.h(b,f),$APP.nl.h(c,h),$APP.nl.h(d,f),e,a)}return a};
JY=function(a,b,c){if(null!=a&&null!=a.Li)a=a.Li(a,b,c);else{var d=JY[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=JY._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.rb("ICache.-get",a);}return a};
LY=function(){var a=$APP.bg(new GY($APP.wf,$APP.zv(),$APP.wf,0,100));if("undefined"===typeof datascript||"undefined"===typeof RPa||"undefined"===typeof KY)KY=function(b,c,d){this.wb=b;this.uf=c;this.sk=d;this.J=393216;this.M=0},KY.prototype.X=function(b,c){return new KY(this.wb,this.uf,c)},KY.prototype.W=function(){return this.sk},KY.prototype.Li=function(b,c,d){b=$APP.C.j($APP.q(this.uf),c,null);if(null==b)return d=d.C?d.C():d.call(null),$APP.Sc(this.uf,$APP.Zh.j($APP.q(this.uf),c,d)),d;$APP.Sc(this.uf,
$APP.Zh.j($APP.q(this.uf),c,b));return b},KY.uc=!0,KY.ic="datascript.lru/t_datascript$lru35135",KY.zc=function(b){return $APP.oc(b,"datascript.lru/t_datascript$lru35135")};return new KY(100,a,$APP.wf)};MY=function(a){return $APP.Ae.j(function(b,c){b.push(c);return b},[],a)};NY=function(a){return a instanceof Array};
OY=function(a,b){if(null!=a&&null!=a.Si)a=a.Si(a,b);else{var c=OY[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=OY._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("IStorage.restore",a);}return a};PY=function(a,b){if(null==a||null==a.kk){var c=PY[$APP.da(null==a?null:a)];if(null!=c)c.h?c.h(a,b):c.call(null,a,b);else if(c=PY._,null!=c)c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("IStorage.accessed",a);}};
QY=function(a,b,c){if(null!=a&&null!=a.Ti)a=a.Ti(a,b,c);else{var d=QY[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=QY._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.rb("IStorage.store",a);}return a};RY=function(a,b){if(null!=a&&null!=a.Ri)a.Ri(a,b);else{var c=RY[$APP.da(null==a?null:a)];if(null!=c)c.h?c.h(a,b):c.call(null,a,b);else if(c=RY._,null!=c)c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("IStorage.delete",a);}};
TY=function(a,b){return 6>b?a>>>5*b&SPa:Math.floor(a/SY[b])&SPa};VY=function(a,b,c){var d=a<UY&&6>b,e=TY(a,b);return a-(d?e<<5*b:e*SY[b])+(d?c<<5*b:c*SY[b])};WY=function(a,b,c,d){for(var e=0,f=$APP.Ke(c);;)if(e<=f){c=e+f>>>1;var h=b[c];0>(a.h?a.h(h,d):a.call(null,h,d))?e=c+1:f=c-1}else return e};TPa=function(a,b,c,d){for(var e=0,f=$APP.Ke(c);;)if(e<=f){c=e+f>>>1;var h=b[c];0<(a.h?a.h(h,d):a.call(null,h,d))?f=c-1:e=c+1}else return e};
UPa=function(a,b,c){var d=b.length,e=WY(a,b,d-1,c);if(d=e<d)b=b[e],d=0===(a.h?a.h(b,c):a.call(null,b,c));return d?e:-1};VPa=function(a,b,c){var d=b.length;a=WY(a,b,d-1,c);return a===d?-1:a};XY=function(a,b,c,d,e,f){var h=f.length,m=d-b,r=m+h,n=Array(m+h+(c-e));d-=b;for(var w=0;;)if(w<d)n[w+0]=a[w+b],w+=1;else break;b=h-0;for(h=0;;)if(h<b)n[h+m]=f[h+0],h+=1;else break;c-=e;for(f=0;;)if(f<c)n[f+r]=a[f+e],f+=1;else break;return n};YY=function(a,b,c,d){return XY(a,0,a.length,b,c,d)};
ZY=function(a,b){var c=a.length,d=b.length,e=c+d,f=e>>>1,h=Array(f);e=Array(e-f);if(c<=f){for(var m=c-0,r=0;;)if(r<m)h[r+0]=a[r+0],r+=1;else break;a=f-c;for(m=0;;)if(m<a)h[m+c]=b[m+0],m+=1;else break;d-=f-c;for(a=0;;)if(a<d)e[a+0]=b[a+(f-c)],a+=1;else break}else{m=f-0;for(r=0;;)if(r<m)h[r+0]=a[r+0],r+=1;else break;m=c-f;for(r=0;;)if(r<m)e[r+0]=a[r+f],r+=1;else break;d-=0;for(a=0;;)if(a<d)e[a+(c-f)]=b[a+0],a+=1;else break}return[h,e]};
WPa=function(a,b,c,d,e,f){d-=c;if(f=d===f-0)for(f=0;;){if(f===d)return!0;var h=b[f+c],m=e[f+0];if(0!==(a.h?a.h(h,m):a.call(null,h,m)))return!1;f+=1}else return f};$Y=function(a,b){return $APP.l(a)?$APP.l(b)?[a,b]:[a]:[b]};aZ=function(a,b,c){return $APP.l(a)?$APP.l(b)?$APP.l(c)?[a,b,c]:[a,b]:$APP.l(c)?[a,c]:[a]:$APP.l(b)?$APP.l(c)?[b,c]:[b]:[c]};
bZ=function(a){if(null!=a&&null!=a.Yh)a=a.Yh(a);else{var b=bZ[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=bZ._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.rb("INode.node-lim-key",a);}return a};cZ=function(a){if(null!=a&&null!=a.Qi)a=a.keys.length;else{var b=cZ[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=cZ._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.rb("INode.node-len",a);}return a};
dZ=function(a,b,c){if(null!=a&&null!=a.$h)a=a.$h(a,b,c);else{var d=dZ[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=dZ._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.rb("INode.node-merge",a);}return a};eZ=function(a,b){if(null!=a&&null!=a.ai)a=a.ai(a,b);else{var c=eZ[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=eZ._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("INode.node-merge-n-split",a);}return a};
fZ=function(a,b,c,d){if(null!=a&&null!=a.Zh)a=a.Zh(a,b,c,d);else{var e=fZ[$APP.da(null==a?null:a)];if(null!=e)a=e.G?e.G(a,b,c,d):e.call(null,a,b,c,d);else if(e=fZ._,null!=e)a=e.G?e.G(a,b,c,d):e.call(null,a,b,c,d);else throw $APP.rb("INode.node-lookup",a);}return a};
gZ=function(a,b,c,d){if(null!=a&&null!=a.Wh)a=a.Wh(a,b,c,d);else{var e=gZ[$APP.da(null==a?null:a)];if(null!=e)a=e.G?e.G(a,b,c,d):e.call(null,a,b,c,d);else if(e=gZ._,null!=e)a=e.G?e.G(a,b,c,d):e.call(null,a,b,c,d);else throw $APP.rb("INode.node-conj",a);}return a};
hZ=function(a,b,c,d,e,f,h){if(null!=a&&null!=a.Xh)a=a.Xh(a,b,c,d,e,f,h);else{var m=hZ[$APP.da(null==a?null:a)];if(null!=m)a=m.Fa?m.Fa(a,b,c,d,e,f,h):m.call(null,a,b,c,d,e,f,h);else if(m=hZ._,null!=m)a=m.Fa?m.Fa(a,b,c,d,e,f,h):m.call(null,a,b,c,d,e,f,h);else throw $APP.rb("INode.node-disj",a);}return a};
XPa=function(a,b,c,d,e){if($APP.l(b))return[a];if(cZ(a)>iZ)return aZ(c,a,d);if($APP.l($APP.l(c)?cZ(c)<=iZ:c))return $Y(dZ(c,a,e),d);if($APP.l($APP.l(d)?cZ(d)<=iZ:d))return $Y(c,dZ(a,d,e));if($APP.l($APP.l(c)?null==d||cZ(c)<cZ(d):c))return a=eZ(c,a),aZ(a[0],a[1],d);a=eZ(a,d);return aZ(c,a[0],a[1])};
jZ=function(a,b){if(null!=a&&null!=a.nf)a=a.nf(a,b);else{var c=jZ[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=jZ._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("IStore.store-aux",a);}return a};kZ=function(a){a=$APP.Gi.h(function(b){return $APP.Ha(b,"_address")},a);return MY(a)};lZ=function(a,b){$APP.Zd(a.$c)&&(b=$APP.u(a.children)?kZ(a.children):Array(b),a.$c=b)};
nZ=function(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;return mZ(arguments[0],arguments[1],arguments[2],3<b.length?new $APP.jd(b.slice(3),0,null):null)};mZ=function(a,b,c,d){var e=$APP.xf(d);d=$APP.C.h(e,oZ);e=$APP.C.j(e,pZ,!0);c=null==c?$APP.u(b)?kZ(b):Array(a.length):c;return new qZ(a,b,c,d,e)};qZ=function(a,b,c,d,e){this.keys=a;this.children=b;this.$c=c;this.rb=d;this.Lf=e};YPa=function(a,b,c){this.keys=a;this.rb=b;this.Lf=c};
rZ=function(a){if(null!=a&&null!=a.ye)a=a.ye(a);else{var b=rZ[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=rZ._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.rb("IRoot.-ensure-root-node",a);}return a};$APP.sZ=function(a,b,c,d,e,f,h,m){this.storage=a;this.root=b;this.shift=c;this.O=d;this.Wc=e;this.K=f;this.ad=h;this.rb=m;this.J=2297303311;this.M=8332};tZ=function(a,b,c){return a instanceof qZ?a.We(b,c):null};
uZ=function(a,b){for(var c=a.shift,d=rZ(a);;)if(0<c){var e=c-1;d=tZ(d,TY(b,c),a.storage);c=e}else return d.keys};vZ=function(a,b,c,d){return new $APP.sZ(a.storage,b,c,d,a.Wc,a.K,null,null)};wZ=function(a,b,c,d){for(;;)if(0<c){var e=a.children.length-1;var f=a.children;f=f[f.length-1];a=$APP.l(f)?f:tZ(a,e,d);b=VY(b,c,e);--c}else return VY(b,0,a.keys.length-1)};yZ=function(a,b){if(0>b)return 0;b=xZ(a,rZ(a),b,a.shift);return $APP.l(b)?b:wZ(rZ(a),0,a.shift,a.storage)+1};
AZ=function(a,b){if(0<TY(b,a.shift+1))return wZ(rZ(a),b,a.shift,a.storage);a=zZ(a,rZ(a),b,a.shift);return $APP.l(a)?a:-1};CZ=function(a){if(0<cZ(rZ(a))){var b=wZ(rZ(a),0,a.shift,a.storage);b=yZ(a,b);return BZ.j?BZ.j(a,0,b):BZ.call(null,a,0,b)}return null};ZPa=function(a,b,c){this.H=a;this.xb=b;this.end=c;this.J=524306;this.M=0};DZ=function(a,b,c,d,e){this.set=a;this.left=b;this.right=c;this.keys=d;this.idx=e;this.J=2309488832;this.M=1536};BZ=function(a,b,c){return new DZ(a,b,c,uZ(a,b),TY(b,0))};
EZ=function(a,b,c,d,e){this.set=a;this.left=b;this.right=c;this.keys=d;this.idx=e;this.J=2308964544;this.M=0};FZ=function(a,b,c){return new EZ(a,b,c,uZ(a,c),TY(c,0))};
GZ=function(a,b,c,d){a:if(null==b)b=0;else for(var e=a.ye(null),f=0,h=a.shift;;){var m=cZ(e);if(0===h){var r=e.keys;r=WY(d,r,m-1,b);b=m===r?null:VY(f,0,r);break a}r=e.keys;r=WY(d,r,m-2,b);e=tZ(e,r,a.storage);f=VY(f,h,r);--h}if(null==b)return null;a:if(null==c)c=wZ(a.ye(null),0,a.shift,a.storage)+1;else for(e=a.ye(null),h=0,f=a.shift;;){m=cZ(e);if(0===f){r=e.keys;m=TPa(d,r,m-1,c);c=h=VY(h,0,m);break a}r=e.keys;m=TPa(d,r,m-2,c);h=VY(h,f,m);e=tZ(e,m,a.storage);--f}return b<c?new DZ(a,b,c,uZ(a,b),TY(b,
0)):null};$Pa=function(a,b){for(var c=b.length,d=0;;)if(d<c){var e=d;var f=b[d];f=a.g?a.g(f):a.call(null,f);b[e]=f;d+=1}else break;return b};aQa=function(a){var b=a.length,c=$APP.zc($APP.pg);if(0<b)for(var d=0;;){var e=b-d;if(e<=HZ){$APP.og.h(c,a.slice(d));break}else e>=IZ+iZ?($APP.og.h(c,a.slice(d,d+IZ)),d+=IZ):(e>>>=1,$APP.og.h(c,a.slice(d,d+e)),d+=e)}return $APP.Be($APP.Bc(c))};
JZ=function(a,b,c){b=gZ(a.ye(null),c,b,a.storage);return null==b?a:1===b.length?vZ(a,b[0],a.shift,a.O+1):vZ(a,nZ(b.map(bZ),b,kZ(b)),a.shift+1,a.O+1)};KZ=function(a,b,c){b=hZ(a.ye(null),c,b,!0,null,null,a.storage);if(null==b)return a;b=b[0];return b instanceof qZ&&1===b.children.length?vZ(a,b.children[0],a.shift-1,a.O-1):vZ(a,b,a.shift,a.O-1)};LZ=function(a,b,c){return GZ(a,b,c,a.Wc)};bQa=function(a,b){var c=MZ.G(0,null,null,536870912);a=GZ(a,c,b,a.Wc);return null==a?null:$APP.ic(a)};
PZ=function(a,b,c){var d=$Pa(NZ,aQa(b));c=OZ.g(c);for(var e=d,f=0;;){var h=$APP.Fd(e);switch(h){case 0:return new $APP.sZ(c,NZ([]),0,0,a,null,null,null);case 1:return new $APP.sZ(c,$APP.v(e),f,b.length,a,null,null,null);default:e=$Pa(function(){return function(m){return nZ(m.map(bZ),m,null)}}(e,f,h,d,c),aQa(e)),f+=1}}};RZ=function(a){var b=OZ.g(a),c=NZ([]),d=QZ.g(a);return new $APP.sZ(b,c,0,0,$APP.l(d)?d:$APP.ue,$APP.Ta.g(a),null,null)};
UZ=function(a,b,c,d){d=$APP.xf(d);d=$APP.C.h(d,SZ);return new $APP.sZ(c,null,TZ.g(d),$APP.vI.g(d),a,null,null,b)};XZ=function(){return new $APP.k(null,2,[VZ,HZ,WZ,cQa],null)};YZ=function(a){return"string"!==typeof a&&($APP.me(a)||NY(a))};
dQa=function(a,b,c){return $APP.v($APP.Ae.j(function(d,e){var f=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);e=a.j?a.j(f,e,d):a.call(null,f,e,d);return $APP.wd(e)?$APP.vd(new $APP.H(null,2,5,$APP.I,[e,d],null)):new $APP.H(null,2,5,$APP.I,[e,d+1],null)},new $APP.H(null,2,5,$APP.I,[b,0],null),c))};ZZ=function(a,b){return $APP.ed(a,b)};
$APP.$Z=function(a){if(null!=a&&null!=a.Wa)a=a.Wa(a);else{var b=$APP.$Z[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=$APP.$Z._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.rb("IDatom.datom-tx",a);}return a};$APP.a_=function(a){if(null!=a&&null!=a.ld)a=a.ld(a);else{var b=$APP.a_[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=$APP.a_._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.rb("IDatom.datom-added",a);}return a};
$APP.b_=function(a,b,c,d,e,f){this.e=a;this.a=b;this.v=c;this.tx=d;this.idx=e;this.ad=f;this.J=2162164496;this.M=0};eQa=function(a){return a instanceof $APP.b_};$APP.c_=function(a){return $APP.Vf.h(MZ,a)};d_=function(a,b){return null==a?0:null==b?0:$APP.Ke($APP.ue(a,b))};fQa=function(a,b){return $APP.Ma($APP.sb($APP.pb(a)),$APP.sb($APP.pb(b)))};
e_=function(a,b){try{return $APP.z.h(a,b)?0:(null!=a?a.M&2048||$APP.bd===a.Xd||(a.M?0:$APP.ob($APP.Hc,a)):$APP.ob($APP.Hc,a))?$APP.Ic(a,b):$APP.pb(a)===$APP.pb(b)?"number"===typeof a||"string"===typeof a||$APP.gb(a)||!0===a||!1===a?$APP.Ma(a,b):$APP.cd(a)-$APP.cd(b):fQa(a,b)}catch(d){if(d instanceof Error){var c=d;if($APP.pb(a)===$APP.pb(b))throw c;return fQa(a,b)}throw d;}};f_=function(a,b){return null==a?0:null==b?0:e_(a,b)};
g_=function(a,b){var c=a.e-b.e;return 0===c?(c=d_(a.a,b.a),0===c?(c=f_(a.v,b.v),0===c?(a=a.Wa(null)-b.Wa(null),0===a?0:a):c):c):c};h_=function(a,b){var c=d_(a.a,b.a);return 0===c?(c=a.e-b.e,0===c?(c=f_(a.v,b.v),0===c?(a=a.Wa(null)-b.Wa(null),0===a?0:a):c):c):c};i_=function(a,b){var c=d_(a.a,b.a);return 0===c?(c=f_(a.v,b.v),0===c?(c=a.e-b.e,0===c?(a=a.Wa(null)-b.Wa(null),0===a?0:a):c):c):c};j_=function(a,b){return a instanceof $APP.F?$APP.Ic(a,b):$APP.Ma(a,b)};
k_=function(a,b){var c=a.e-b.e;return 0===c?(c=j_(a.a,b.a),0===c?(a=e_(a.v,b.v),0===a?0:a):c):c};l_=function(a,b){var c=a.e-b.e;return 0===c?(c=j_(a.a,b.a),0===c?(c=e_(a.v,b.v),0===c?(a=a.Wa(null)-b.Wa(null),0===a?0:a):c):c):c};m_=function(a,b){var c=j_(a.a,b.a);return 0===c?(c=a.e-b.e,0===c?(c=e_(a.v,b.v),0===c?(a=a.Wa(null)-b.Wa(null),0===a?0:a):c):c):c};n_=function(a,b){var c=j_(a.a,b.a);return 0===c?(c=e_(a.v,b.v),0===c?(c=a.e-b.e,0===c?(a=a.Wa(null)-b.Wa(null),0===a?0:a):c):c):c};gQa=function(){};
o_=function(a,b){if(null!=a&&null!=a.Rh)a=a.Rh(a,b);else{var c=o_[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=o_._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("ISearch.-search",a);}return a};p_=function(a,b){return $APP.v(o_(a,b))};
q_=function(a,b,c,d,e,f){if(null!=a&&null!=a.Nh)a=a.Nh(a,b,c,d,e,f);else{var h=q_[$APP.da(null==a?null:a)];if(null!=h)a=h.ka?h.ka(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else if(h=q_._,null!=h)a=h.ka?h.ka(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else throw $APP.rb("IIndexAccess.-datoms",a);}return a};
r_=function(a,b,c,d,e,f){if(null!=a&&null!=a.Qh)a=a.Qh(a,b,c,d,e,f);else{var h=r_[$APP.da(null==a?null:a)];if(null!=h)a=h.ka?h.ka(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else if(h=r_._,null!=h)a=h.ka?h.ka(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else throw $APP.rb("IIndexAccess.-seek-datoms",a);}return a};
s_=function(a,b,c,d,e,f){if(null!=a&&null!=a.Ph)a=a.Ph(a,b,c,d,e,f);else{var h=s_[$APP.da(null==a?null:a)];if(null!=h)a=h.ka?h.ka(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else if(h=s_._,null!=h)a=h.ka?h.ka(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else throw $APP.rb("IIndexAccess.-rseek-datoms",a);}return a};
t_=function(a,b,c,d){if(null!=a&&null!=a.Oh)a=a.Oh(a,b,c,d);else{var e=t_[$APP.da(null==a?null:a)];if(null!=e)a=e.G?e.G(a,b,c,d):e.call(null,a,b,c,d);else if(e=t_._,null!=e)a=e.G?e.G(a,b,c,d):e.call(null,a,b,c,d);else throw $APP.rb("IIndexAccess.-index-range",a);}return a};
w_=function(a,b,c,d,e,f){if($APP.z.h(b,u_)&&null!=c&&!v_(a,c))throw $APP.xl.h(["Attribute ",$APP.aj.l($APP.B([c]))," should be marked as :db/index true"].join(""),new $APP.k(null,3,[$APP.VI,hQa,iQa,u_,jQa,new $APP.H(null,4,5,$APP.I,[c,d,e,f],null)],null));};x_=function(){};y_=function(a){if(null!=a&&null!=a.Mh)a=a.Mh(a);else{var b=y_[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=y_._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.rb("IDB.-schema",a);}return a};
z_=function(a,b){if(null!=a&&null!=a.Lh)a=a.Lh(a,b);else{var c=z_[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=z_._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("IDB.-attrs-by",a);}return a};$APP.A_=function(a,b,c,d,e,f,h,m,r,n,w,x,D){this.rc=a;this.Vb=b;this.tc=c;this.fc=d;this.Lc=e;this.Mc=f;this.vc=h;this.Cc=m;this.Bc=r;this.hash=n;this.B=w;this.o=x;this.D=D;this.J=2230716170;this.M=139264};
K_=function(a){var b=$APP.nl.l(a,$APP.B_,$APP.B([$APP.C_,D_,u_,E_,F_,G_,H_,I_,J_]));b=$APP.fe(a)?$APP.fh.h($APP.wf,b):b;return new $APP.A_($APP.B_.g(a),$APP.C_.g(a),D_.g(a),u_.g(a),E_.g(a),F_.g(a),G_.g(a),H_.g(a),I_.g(a),J_.g(a),null,$APP.yf(b),null)};L_=function(a,b,c,d,e,f){this.wc=a;this.cc=b;this.hash=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};kQa=function(a){return a instanceof L_?a.wc:a};
lQa=function(a,b){switch(b instanceof $APP.F?b.S:null){case "db.unique/identity":return new $APP.H(null,3,5,$APP.I,[M_,N_,O_],null);case "db.unique/value":return new $APP.H(null,3,5,$APP.I,[M_,P_,O_],null);case "db.cardinality/many":return new $APP.H(null,1,5,$APP.I,[Q_],null);case "db.type/ref":return new $APP.H(null,2,5,$APP.I,[R_,O_],null);default:return $APP.z.h(S_,a)&&!0===b?new $APP.H(null,1,5,$APP.I,[S_],null):$APP.z.h(O_,a)&&!0===b?new $APP.H(null,1,5,$APP.I,[O_],null):$APP.z.h(T_,a)?new $APP.H(null,
2,5,$APP.I,[U_,O_],null):$APP.pg}};mQa=function(a,b){return $APP.Ae.j(function(c,d){return dQa(function(e,f,h){return $APP.ym.P(e,f,$APP.Zh,d,h)},c,T_.g($APP.C.h(a,d)))},$APP.wf,U_.g(b))};
X_=function(a){var b=$APP.De(function(c,d,e){return e instanceof $APP.F?c:$APP.De(function(f,h,m){return $APP.Ae.j(function(r,n){return $APP.Zh.j(r,n,$APP.Ve.h($APP.C.j(r,n,$APP.ci),d))},f,lQa(h,m))},$APP.ym.j(c,V_,function(f){return $APP.l(f)?$APP.Ve.h(f,d):$APP.di([d])}),e)},$APP.wf,a);return $APP.Zh.j(b,W_,mQa(a,b))};
$_=function(a,b,c,d){if(null!=c&&!$APP.re(d,c))throw $APP.xl.h(["Bad attribute specification for ",$APP.aj.l($APP.B([$APP.vf([a,$APP.vf([b,c])])])),", expected one of ",$APP.p.g(d)].join(""),new $APP.k(null,4,[$APP.VI,Y_,Z_,a,$APP.SB,b,$APP.cJ,c],null));};
c0=function(a){for(var b=$APP.u(a),c=null,d=0,e=0;;)if(e<d){var f=c.ea(null,e),h=$APP.A.j(f,0,null),m=$APP.A.j(f,1,null),r=S_.h(m,!1);$_(h,S_,S_.g(m),new $APP.bi(null,new $APP.k(null,2,[!0,null,!1,null],null),null));if($APP.l(function(){var Y=r;return $APP.l(Y)?$APP.Yh.h(a0.g(m),R_):Y}()))throw $APP.xl.h(["Bad attribute specification for ",$APP.aj.l($APP.B([h])),": {:db/isComponent true} should also have {:db/valueType :db.type/ref}"].join(""),new $APP.k(null,3,[$APP.VI,Y_,Z_,h,$APP.SB,S_],null));
$_(h,M_,M_.g(m),new $APP.bi(null,new $APP.k(null,2,[N_,null,P_,null],null),null));$_(h,a0,a0.g(m),nQa);$_(h,b0,b0.g(m),new $APP.bi(null,new $APP.k(null,2,[Q_,null,oQa,null],null),null));if($APP.z.h(U_,a0.g(m))&&!$APP.re(m,T_))throw $APP.xl.h(["Bad attribute specification for ",$APP.aj.l($APP.B([h])),": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs"].join(""),new $APP.k(null,3,[$APP.VI,Y_,Z_,h,$APP.SB,a0],null));if($APP.re(m,T_)){f=new $APP.k(null,3,[$APP.VI,Y_,Z_,h,$APP.SB,T_],null);
if($APP.z.h(Q_,b0.g(m)))throw $APP.xl.h([$APP.aj.l($APP.B([h]))," has :db/tupleAttrs, must be :db.cardinality/one"].join(""),f);var n=T_.g(m);if(!$APP.be(n))throw $APP.xl.h([$APP.aj.l($APP.B([h]))," :db/tupleAttrs must be a sequential collection, got: ",$APP.aj.l($APP.B([n]))].join(""),f);if($APP.Zd(n))throw $APP.xl.h([$APP.aj.l($APP.B([h]))," :db/tupleAttrs can’t be empty"].join(""),f);n=$APP.u(n);for(var w=null,x=0,D=0;;)if(D<x){var G=w.ea(null,D),M=$APP.Zh.j(f,$APP.cJ,G);if($APP.re($APP.C.h(a,
G),T_))throw $APP.xl.h([$APP.aj.l($APP.B([h]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.aj.l($APP.B([G]))].join(""),M);if($APP.z.h(Q_,b0.g($APP.C.h(a,G))))throw $APP.xl.h([$APP.aj.l($APP.B([h]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.aj.l($APP.B([G]))].join(""),M);D+=1}else if(n=$APP.u(n)){if($APP.he(n))x=$APP.Kc(n),n=$APP.Lc(n),w=x,x=$APP.Fd(x);else{w=$APP.v(n);x=$APP.Zh.j(f,$APP.cJ,w);if($APP.re($APP.C.h(a,w),T_))throw $APP.xl.h([$APP.aj.l($APP.B([h])),
" :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.aj.l($APP.B([w]))].join(""),x);if($APP.z.h(Q_,b0.g($APP.C.h(a,w))))throw $APP.xl.h([$APP.aj.l($APP.B([h]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.aj.l($APP.B([w]))].join(""),x);n=$APP.y(n);w=null;x=0}D=0}else break}e+=1}else if(h=$APP.u(b)){b=h;if($APP.he(b))c=$APP.Kc(b),b=$APP.Lc(b),h=c,d=$APP.Fd(c),c=h;else{c=$APP.v(b);h=$APP.A.j(c,0,null);m=$APP.A.j(c,1,null);var U=S_.h(m,!1);$_(h,S_,S_.g(m),new $APP.bi(null,
new $APP.k(null,2,[!0,null,!1,null],null),null));if($APP.l(function(){var Y=U;return $APP.l(Y)?$APP.Yh.h(a0.g(m),R_):Y}()))throw $APP.xl.h(["Bad attribute specification for ",$APP.aj.l($APP.B([h])),": {:db/isComponent true} should also have {:db/valueType :db.type/ref}"].join(""),new $APP.k(null,3,[$APP.VI,Y_,Z_,h,$APP.SB,S_],null));$_(h,M_,M_.g(m),new $APP.bi(null,new $APP.k(null,2,[N_,null,P_,null],null),null));$_(h,a0,a0.g(m),nQa);$_(h,b0,b0.g(m),new $APP.bi(null,new $APP.k(null,2,[Q_,null,oQa,
null],null),null));if($APP.z.h(U_,a0.g(m))&&!$APP.re(m,T_))throw $APP.xl.h(["Bad attribute specification for ",$APP.aj.l($APP.B([h])),": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs"].join(""),new $APP.k(null,3,[$APP.VI,Y_,Z_,h,$APP.SB,a0],null));if($APP.re(m,T_)){c=new $APP.k(null,3,[$APP.VI,Y_,Z_,h,$APP.SB,T_],null);if($APP.z.h(Q_,b0.g(m)))throw $APP.xl.h([$APP.aj.l($APP.B([h]))," has :db/tupleAttrs, must be :db.cardinality/one"].join(""),c);d=T_.g(m);if(!$APP.be(d))throw $APP.xl.h([$APP.aj.l($APP.B([h])),
" :db/tupleAttrs must be a sequential collection, got: ",$APP.aj.l($APP.B([d]))].join(""),c);if($APP.Zd(d))throw $APP.xl.h([$APP.aj.l($APP.B([h]))," :db/tupleAttrs can’t be empty"].join(""),c);d=$APP.u(d);e=null;for(n=f=0;;)if(n<f){w=e.ea(null,n);x=$APP.Zh.j(c,$APP.cJ,w);if($APP.re($APP.C.h(a,w),T_))throw $APP.xl.h([$APP.aj.l($APP.B([h]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.aj.l($APP.B([w]))].join(""),x);if($APP.z.h(Q_,b0.g($APP.C.h(a,w))))throw $APP.xl.h([$APP.aj.l($APP.B([h])),
" :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.aj.l($APP.B([w]))].join(""),x);n+=1}else if(d=$APP.u(d)){if($APP.he(d))f=$APP.Kc(d),d=$APP.Lc(d),e=f,f=$APP.Fd(f);else{e=$APP.v(d);f=$APP.Zh.j(c,$APP.cJ,e);if($APP.re($APP.C.h(a,e),T_))throw $APP.xl.h([$APP.aj.l($APP.B([h]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.aj.l($APP.B([e]))].join(""),f);if($APP.z.h(Q_,b0.g($APP.C.h(a,e))))throw $APP.xl.h([$APP.aj.l($APP.B([h]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",
$APP.aj.l($APP.B([e]))].join(""),f);d=$APP.y(d);e=null;f=0}n=0}else break}b=$APP.y(b);c=null;d=0}e=0}else return null};d0=function(a,b){c0(a);return K_($APP.Hh([$APP.B_,F_,J_,D_,u_,E_,$APP.C_,I_,H_,G_],[a,536870912,$APP.cj.g(0),RZ($APP.Zh.j(b,QZ,h_)),RZ($APP.Zh.j(b,QZ,i_)),0,RZ($APP.Zh.j(b,QZ,g_)),LY(),LY(),X_($APP.ml.l($APP.B([new $APP.k(null,1,[V_,new $APP.k(null,1,[M_,N_],null)],null),a])))]))};
pQa=function(a){a=$APP.mL.g($APP.v(bQa(a,MZ.G(536870911,null,null,2147483647))));return $APP.l(a)?a:0};
e0=function(a,b,c){var d=$APP.v($APP.qi.h(eQa,a));if(null!=d)throw $APP.xl.h(["init-db expects list of Datoms, got ",$APP.aj.l($APP.B([$APP.pb(d)]))].join(""),new $APP.k(null,1,[$APP.VI,qQa],null));c0(b);d=X_($APP.ml.l($APP.B([new $APP.k(null,1,[V_,new $APP.k(null,1,[M_,N_],null)],null),b])));var e=O_.g(d),f=NY(a)?a:MY(a);f.sort(l_);var h=PZ(g_,f,c);f.sort(m_);f=PZ(h_,f,c);a=$APP.ng.h(function(r){return $APP.re(e,r.a)},a);a=$APP.Be(a);a.sort(n_);c=PZ(i_,a,c);a=pQa(h);var m=$APP.Iu.G($APP.Gi.g(function(r){return r.Wa(null)}),
$APP.Km,536870912,h);return K_($APP.Hh([$APP.B_,F_,J_,D_,u_,E_,$APP.C_,I_,H_,G_],[b,m,$APP.cj.g(0),f,c,a,h,LY(),LY(),d]))};rQa=function(a,b){return $APP.Zh.l(a,$APP.B_,b,$APP.B([G_,X_($APP.ml.l($APP.B([new $APP.k(null,1,[V_,new $APP.k(null,1,[M_,N_],null)],null),b]))),H_,LY(),I_,LY(),J_,$APP.cj.g(0)]))};
$APP.g0=function(a){var b=$APP.xf(a);a=$APP.C.h(b,$APP.B_);b=$APP.C.h(b,$APP.f0);return e0($APP.Gi.h(function(c){var d=$APP.A.j(c,0,null),e=$APP.A.j(c,1,null),f=$APP.A.j(c,2,null);c=$APP.A.j(c,3,null);return MZ.G(d,e,f,c)},b),a,$APP.wf)};h0=function(a,b,c,d,e,f,h,m){this.Ad=a;this.zd=b;this.Dd=c;this.Bd=d;this.Ed=e;this.B=f;this.o=h;this.D=m;this.J=2230716170;this.M=139264};
sQa=function(a){var b=$APP.nl.l(a,i0,$APP.B([j0,k0,l0,m0]));b=$APP.fe(a)?$APP.fh.h($APP.wf,b):b;return new h0(i0.g(a),j0.g(a),k0.g(a),l0.g(a),m0.g(a),null,$APP.yf(b),null)};n0=function(){return null};o0=function(){return null};p0=function(){return null};q0=function(){return null};tQa=function(){return null};r0=function(){return null};uQa=function(){return null};s0=function(a){return $APP.Ke(F_.g(i0.g(a)))+1};
t0=function(a){return $APP.z.h(a,vQa)||$APP.z.h(a,":db/current-tx")||$APP.z.h(a,"datomic.tx")||$APP.z.h(a,"datascript.tx")};u0=function(a){return"number"===typeof a&&0>a||"string"===typeof a};wQa=function(a,b){return b>E_.g(a)&&536870912>b?$APP.Zh.j(a,E_,b):a};v0=function(a,b,c){var d=t0(b)?$APP.ym.P(a,l0,$APP.Zh,b,c):a;d=u0(b)?$APP.ym.P(d,l0,$APP.Zh,b,c):d;if(b=!u0(b))a=j0.g(a),b=c>E_.g(a)&&536870912>c;a=b?$APP.ym.P(d,l0,$APP.Zh,c,c):d;return $APP.ym.G(a,j0,wQa,c)};
yQa=function(a,b){var c=$APP.B_.g(a),d=b.e,e=b.a,f=b.v;if($APP.z.h(e,V_)){if($APP.jb(c.g?c.g(f):c.call(null,f)))throw a=["Schema with attribute ",$APP.p.g(f)," does not exist"].join(""),d=new $APP.k(null,2,[$APP.VI,xQa,Z_,f],null),$APP.xl.h(a,d);return $APP.kl.j($APP.Lp(a,new $APP.H(null,2,5,$APP.I,[$APP.B_,d],null),$APP.nl.h(c.g?c.g(f):c.call(null,f),e)),new $APP.H(null,1,5,$APP.I,[$APP.B_],null),function(h){return $APP.nl.h(h,f)})}b=c.g?c.g(d):c.call(null,d);if($APP.l(b))return $APP.l(c.g?c.g(b):
c.call(null,b))?$APP.kl.j(a,new $APP.H(null,2,5,$APP.I,[$APP.B_,b],null),function(h){return $APP.nl.h(h,e)}):$APP.kl.j(a,new $APP.H(null,2,5,$APP.I,[$APP.B_,d],null),function(h){return $APP.nl.l(h,e,$APP.B([f]))});a=["Schema with entity id ",$APP.p.g(d)," does not exist"].join("");d=new $APP.k(null,4,[$APP.VI,xQa,w0,d,Z_,e,$APP.cJ,d],null);throw $APP.xl.h(a,d);};zQa=function(a){a=$APP.B_.g(a);return $APP.l(a)?a:$APP.wf};
AQa=function(a){return $APP.Zh.j(a,G_,X_($APP.ml.l($APP.B([new $APP.k(null,1,[V_,new $APP.k(null,1,[M_,N_],null)],null),zQa(a)]))))};
DQa=function(a,b){var c=b.ld(null);c=$APP.l(c)?n0(a,b.a,M_):c;if($APP.l(c)&&(c=$APP.yf(q_(a,u_,b.a,b.v,null,null)),null!=c))throw $APP.xl.h(["Cannot add ",$APP.aj.l($APP.B([b]))," because of unique constraint: ",$APP.aj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.VI,BQa,Z_,b.a,CQa,b],null));var d=v_(a,b.a);c=b.a;c=x0.g?x0.g(c):x0.call(null,c);if($APP.l(b.ld(null))){a=$APP.ym.P(a,$APP.C_,JZ,b,l_);a=$APP.ym.P(a,D_,JZ,b,m_);d=d?$APP.ym.P(a,u_,JZ,b,n_):a;d=wQa(d,b.e);d=$APP.Zh.j(d,J_,$APP.cj.g(0));
if($APP.l(c)){var e=zQa(d);c=b.e;a=b.a;b=b.v;if($APP.z.h(a,V_)){var f=new $APP.H(null,2,5,$APP.I,[$APP.B_,b],null),h=$APP.ml.l;e=e.g?e.g(c):e.call(null,c);b=$APP.Lp($APP.Lp(d,f,h.call($APP.ml,$APP.B([$APP.l(e)?e:$APP.wf,$APP.Hh([a],[b])]))),new $APP.H(null,2,5,$APP.I,[$APP.B_,c],null),b)}else f=e.g?e.g(c):e.call(null,c),b=$APP.l(f)?$APP.l(e.g?e.g(f):e.call(null,f))?$APP.Lp(d,new $APP.H(null,3,5,$APP.I,[$APP.B_,f,a],null),b):$APP.Lp(d,new $APP.H(null,3,5,$APP.I,[$APP.B_,c,a],null),b):$APP.Lp(d,new $APP.H(null,
2,5,$APP.I,[$APP.B_,c],null),$APP.Hh([a],[b]));b=AQa(b)}else b=d;return b}e=p_(a,new $APP.H(null,3,5,$APP.I,[b.e,b.a,b.v],null));if(null==e)return a;a=$APP.ym.P(a,$APP.C_,KZ,e,l_);a=$APP.ym.P(a,D_,KZ,e,m_);d=d?$APP.ym.P(a,u_,KZ,e,n_):a;d=$APP.Zh.j(d,J_,$APP.cj.g(0));return $APP.l(c)?AQa(yQa(d,b)):d};
EQa=function(a,b,c,d,e){return $APP.De(function(f,h,m){var r=$APP.C.h(f,h);$APP.l(r)||(r=y0.g($APP.v(q_(c,$APP.C_,d,h,null,null))),r=$APP.l(r)?r:$APP.Ce($APP.Jm.h($APP.Fd(T_.g($APP.C.h(y_(c),h))),null)));m=$APP.Zh.j(r,m,e);return $APP.Zh.j(f,h,m)},a,b)};
B0=function(a,b){var c=j0.g(a),d=z0.g(b);a=$APP.ym.G($APP.Zh.j(a,j0,DQa(c,b)),k0,$APP.Ve,b);if(tQa(c,d)){var e=$APP.mL.g(b);b=$APP.l($APP.a_(b))?y0.g(b):null;var f=$APP.C.h(A0.g(a),e);f=$APP.l(f)?f:$APP.wf;d=$APP.C.h(z_(c,W_),d);c=EQa(f,d,c,e,b);return $APP.ym.P(a,A0,$APP.Zh,e,c)}return a};
D0=function(a){if(a instanceof $APP.F)return $APP.z.h("_",$APP.A.h($APP.hi(a),0));if("string"===typeof a)return $APP.Pa($APP.ti(/(?:([^\/]+)\/)?_([^\/]+)/,a));throw $APP.xl.h(["Bad attribute type: ",$APP.aj.l($APP.B([a])),", expected keyword or string"].join(""),new $APP.k(null,2,[$APP.VI,C0,Z_,a],null));};
E0=function(a){if(a instanceof $APP.F)return D0(a)?$APP.Hi.h($APP.af(a),$APP.xi.h($APP.hi(a),1)):$APP.Hi.h($APP.af(a),["_",$APP.hi(a)].join(""));if("string"===typeof a){var b=$APP.ti(/(?:([^\/]+)\/)?([^\/]+)/,a);$APP.A.j(b,0,null);a=$APP.A.j(b,1,null);b=$APP.A.j(b,2,null);return $APP.z.h("_",$APP.A.h(b,0))?$APP.l(a)?[$APP.p.g(a),"/",$APP.xi.h(b,1)].join(""):$APP.xi.h(b,1):$APP.l(a)?[$APP.p.g(a),"/_",$APP.p.g(b)].join(""):["_",$APP.p.g(b)].join("")}throw $APP.xl.h(["Bad attribute type: ",$APP.aj.l($APP.B([a])),
", expected keyword or string"].join(""),new $APP.k(null,2,[$APP.VI,C0,Z_,a],null));};
FQa=function(a,b){function c(e,f){return $APP.Ae.j(function(h,m){var r=$APP.mL.g($APP.v(q_(a,u_,e,m,null,null)));return null==r?$APP.ym.G(h,0,$APP.Ve,m):$APP.ym.P(h,1,$APP.Zh,m,r)},new $APP.H(null,2,5,$APP.I,[$APP.pg,$APP.wf],null),f)}var d=$APP.yf(z_(a,N_));return null==d?new $APP.H(null,2,5,$APP.I,[b,null],null):$APP.De(function(e,f,h){var m=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);if(!(f instanceof $APP.F||"string"===typeof f))throw $APP.xl.h(["Bad entity attribute ",$APP.aj.l($APP.B([f]))," at ",
$APP.aj.l($APP.B([b])),", expected keyword or string"].join(""),new $APP.k(null,3,[Z_,f,F0,b,$APP.VI,C0],null));if(null==h)throw $APP.xl.h(["Cannot store nil as a value at ",$APP.aj.l($APP.B([b]))].join(""),new $APP.k(null,3,[$APP.cJ,null,F0,b,$APP.VI,C0],null));if($APP.re(d,f)){if(o0(a,f)&&(NY(h)||$APP.$d(h)&&!$APP.ce(h))){var r=c(f,h);h=$APP.A.j(r,0,null);r=$APP.A.j(r,1,null);return new $APP.H(null,2,5,$APP.I,[$APP.Zd(h)?m:$APP.Zh.j(m,f,h),$APP.Zd(r)?e:$APP.Zh.j(e,f,r)],null)}r=$APP.mL.g($APP.v(q_(a,
u_,f,h,null,null)));return null==r?new $APP.H(null,2,5,$APP.I,[$APP.Zh.j(m,f,h),e],null):new $APP.H(null,2,5,$APP.I,[m,$APP.Zh.j(e,f,$APP.vf([h,r]))],null)}return new $APP.H(null,2,5,$APP.I,[$APP.Zh.j(m,f,h),e],null)},new $APP.H(null,2,5,$APP.I,[$APP.wf,$APP.wf],null),b)};
IQa=function(a,b){var c=$APP.De(function(h,m,r){return $APP.De(function(n,w,x){return $APP.Zh.j(n,x,new $APP.H(null,2,5,$APP.I,[m,w],null))},h,r)},$APP.wf,b);if(2<=$APP.Fd(c)){b=$APP.v(c);a=$APP.A.j(b,0,null);var d=$APP.A.j(b,1,null);b=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);var e=$APP.Kd(c);c=$APP.A.j(e,0,null);var f=$APP.A.j(e,1,null);e=$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);throw $APP.xl.h(["Conflicting upserts: ",$APP.aj.l($APP.B([new $APP.H(null,2,5,$APP.I,[b,d],null)]))," resolves to ",$APP.aj.l($APP.B([a])),
", but ",$APP.aj.l($APP.B([new $APP.H(null,2,5,$APP.I,[e,f],null)]))," resolves to ",$APP.aj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.VI,G0,GQa,new $APP.H(null,3,5,$APP.I,[a,b,d],null),HQa,new $APP.H(null,3,5,$APP.I,[c,e,f],null)],null));}d=$APP.v(c);b=$APP.A.j(d,0,null);c=$APP.A.j(d,1,null);d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);a=H0.g(a);if(null!=b&&null!=a&&!u0(a)&&$APP.Yh.h(b,a))throw $APP.xl.h(["Conflicting upsert: ",$APP.aj.l($APP.B([new $APP.H(null,2,5,$APP.I,[d,c],null)]))," resolves to ",
$APP.aj.l($APP.B([b])),", but entity already has :db/id ",$APP.aj.l($APP.B([a]))].join(""),new $APP.k(null,3,[$APP.VI,G0,GQa,new $APP.H(null,3,5,$APP.I,[b,d,c],null),HQa,new $APP.k(null,1,[H0,a],null)],null));return b};JQa=function(a,b,c){return D0(b)||o0(a,b)?NY(c)||$APP.$d(c)&&!$APP.ce(c)?$APP.z.h($APP.Fd(c),2)&&n0(a,$APP.v(c),N_)?new $APP.H(null,1,5,$APP.I,[c],null):c:new $APP.H(null,1,5,$APP.I,[c],null):new $APP.H(null,1,5,$APP.I,[c],null)};
KQa=function(a,b){var c=H0.g(b),d=$APP.Vf.h($APP.K,$APP.Ae.j(function(e,f){var h=$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);return $APP.ym.G(e,q0(a,h)?1:0,$APP.Ve,new $APP.H(null,2,5,$APP.I,[h,f],null))},new $APP.H(null,2,5,$APP.I,[$APP.pg,$APP.pg],null),b));return function h(f){return new $APP.ef(null,function(){for(var m=f;;){var r=$APP.u(m);if(r){var n=r,w=$APP.v(n),x=$APP.A.j(w,0,null),D=$APP.A.j(w,1,null);if($APP.Yh.h(x,H0)){var G=function(){var Y=x;if(Y instanceof $APP.F||"string"===typeof Y)return null;
var ba=$APP.vf([H0,c,x,D]);throw $APP.xl.h(["Bad entity attribute ",$APP.aj.l($APP.B([Y]))," at ",$APP.aj.l($APP.B([ba])),", expected keyword or string"].join(""),new $APP.k(null,3,[Z_,Y,F0,ba,$APP.VI,C0],null));}(),M=D0(x),U=M?E0(x):x;if(M&&!I0(a,U))throw $APP.xl.h(["Bad attribute ",$APP.aj.l($APP.B([x])),": reverse attribute name requires {:db/valueType :db.type/ref} in schema"].join(""),new $APP.k(null,3,[$APP.VI,C0,Z_,x,F0,$APP.vf([H0,c,x,D])],null));if(r=$APP.u(function(Y,ba,ca,ea,ma,ta,pa,V,
P,X,Q,W){return function oa(na){return new $APP.ef(null,function(Ba,Fa,La,Ra,Za,ab,nb,hb,ib,qb,vb){return function(){for(;;){var Qb=$APP.u(na);if(Qb){if($APP.he(Qb)){var hc=$APP.Kc(Qb),vc=$APP.Fd(hc),jc=$APP.gf(vc);a:for(var Xd=0;;)if(Xd<vc){var Fc=$APP.Rd(hc,Xd);$APP.nf(jc,I0(a,Ra)&&$APP.ce(Fc)?$APP.Zh.j(Fc,E0(nb),vb):La?new $APP.H(null,4,5,$APP.I,[J0,Fc,Ra,vb],null):new $APP.H(null,4,5,$APP.I,[J0,vb,Ra,Fc],null));Xd+=1}else{hc=!0;break a}return hc?$APP.mf($APP.of(jc),oa($APP.Lc(Qb))):$APP.mf($APP.of(jc),
null)}jc=$APP.v(Qb);return $APP.Ye(I0(a,Ra)&&$APP.ce(jc)?$APP.Zh.j(jc,E0(nb),vb):La?new $APP.H(null,4,5,$APP.I,[J0,jc,Ra,vb],null):new $APP.H(null,4,5,$APP.I,[J0,vb,Ra,jc],null),oa($APP.nd(Qb)))}return null}}}(Y,ba,ca,ea,ma,ta,pa,V,P,X,Q,W),null,null)}}(m,G,M,U,null,w,x,D,n,r,c,d)(JQa(a,x,D))))return $APP.K.h(r,h($APP.nd(m)))}m=$APP.nd(m)}else return null}},null,null)}(d)};
M0=function(a,b){$APP.A.j(b,0,null);var c=$APP.A.j(b,1,null),d=$APP.A.j(b,2,null),e=$APP.A.j(b,3,null),f=$APP.A.j(b,4,null);if(!(d instanceof $APP.F||"string"===typeof d))throw $APP.xl.h(["Bad entity attribute ",$APP.aj.l($APP.B([d]))," at ",$APP.aj.l($APP.B([b])),", expected keyword or string"].join(""),new $APP.k(null,3,[Z_,d,F0,b,$APP.VI,C0],null));if(null==e)throw $APP.xl.h(["Cannot store nil as a value at ",$APP.aj.l($APP.B([b]))].join(""),new $APP.k(null,3,[$APP.cJ,null,F0,b,$APP.VI,C0],null));
b=$APP.l(f)?f:s0(a);f=j0.g(a);c=K0(f,c);e=I0(f,d)?K0(f,e):e;var h=MZ.G(c,d,e,b);f=o0(f,d)?p_(f,new $APP.H(null,3,5,$APP.I,[c,d,e],null)):p_(f,new $APP.H(null,2,5,$APP.I,[c,d],null));return null==f?B0(a,h):$APP.z.h(f.v,e)?$APP.ym.G(a,L0,LQa,h):B0(B0(a,MZ.P(c,d,f.v,b,!1)),h)};N0=function(a,b){var c=s0(a);return B0(a,MZ.P(b.e,b.a,b.v,c,!1))};
MQa=function(a,b){return $APP.fh.j($APP.ci,$APP.rp.h($APP.ng.g(function(c){return p0(a,c.a)}),$APP.Gi.g(function(c){return new $APP.H(null,2,5,$APP.I,[O0,c.v],null)})),b)};
NQa=function(a,b,c,d,e){if($APP.re(l0.g(a),d))throw $APP.xl.h(["Conflicting upsert: ",$APP.aj.l($APP.B([d]))," resolves both to ",$APP.aj.l($APP.B([e]))," and ",$APP.aj.l($APP.B([$APP.yo.h(a,new $APP.H(null,2,5,$APP.I,[l0,d],null))]))].join(""),new $APP.k(null,1,[$APP.VI,G0],null));b=$APP.Zh.j(l0.g(b),d,e);a=$APP.Zh.j(a,l0,b);return P0(a,c)};
OQa=function(a){var b=j0.g(a);y_(b);z_(b,W_);return $APP.De(function(c,d,e){return $APP.De(function(f,h,m){m=$APP.Qf($APP.fb,m)?null:m;var r=y0.g($APP.v(q_(b,$APP.C_,d,h,null,null)));return $APP.z.h(m,r)?f:null==m?$APP.Ve.h(f,$APP.Ud(new $APP.H(null,4,5,$APP.I,[Q0,d,h,r],null),new $APP.k(null,1,[R0,!0],null))):$APP.Ve.h(f,$APP.Ud(new $APP.H(null,4,5,$APP.I,[J0,d,h,m],null),new $APP.k(null,1,[R0,!0],null)))},c,e)},$APP.pg,A0.g(a))};
PQa=function(a){var b=S0.g(a);if($APP.l(b)){var c=$APP.zc(b);b=function(d,e){return $APP.l($APP.a_(e))?$APP.fv.h(d,$APP.mL.g(e)):d};c=$APP.Ae.j(b,c,k0.g(a));b=$APP.Ae.j(b,c,L0.g(a));if(0===$APP.Fd(b))return $APP.nl.l(a,S0,$APP.B([L0]));throw $APP.xl.h(["Tempids used only as value in transaction: ",$APP.aj.l($APP.B([$APP.jk.g($APP.Xh($APP.Bc(b)))]))].join(""),new $APP.k(null,2,[$APP.VI,C0,l0,b],null));}return $APP.nl.l(a,S0,$APP.B([L0]))};
RQa=function(a){if($APP.l(QPa(a))){var b;if(b=$APP.re(a,V_)){b=V_.g(a);var c=b instanceof $APP.F||"string"===typeof b;c?(b=$APP.af($APP.Hi.g(b)),b=$APP.l(b)?$APP.z.h("db",$APP.v($APP.Hk.h(b,/\./))):!1):b=c}if(b)throw $APP.xl.h("Using namespace 'db' for attribute identifiers is not allowed",new $APP.k(null,2,[$APP.VI,QQa,T0,a],null));b=b0.g(a);b=$APP.l(b)?b:a0.g(a);if(b=$APP.l(b))b=V_.g(a),b=$APP.l(b)?b0.g(a):b,b=!$APP.l(b);if(b)throw $APP.xl.h("Incomplete schema transaction attributes, expected :db/ident, :db/cardinality",
new $APP.k(null,2,[$APP.VI,QQa,T0,a],null));}};V0=function(a,b){b="number"===typeof b||$APP.be(b)||b instanceof $APP.F?r0(a,b):null;if($APP.l(b)&&uQa(a,b)){var c=$APP.bg(!1),d=$APP.bg($APP.wf);return U0.G?U0.G(a,b,c,d):U0.call(null,a,b,c,d)}return null};SQa=function(a,b,c){return o0(a,b)?I0(a,b)?$APP.Ae.j(function(d,e){return $APP.Ve.h(d,V0(a,y0.g(e)))},$APP.ci,c):$APP.Ae.j(function(d,e){return $APP.Ve.h(d,y0.g(e))},$APP.ci,c):I0(a,b)?V0(a,y0.g($APP.v(c))):y0.g($APP.v(c))};
TQa=function(a,b,c,d){b=$APP.yf(o_(a,new $APP.H(null,3,5,$APP.I,[null,c,b],null)));return $APP.l(b)?p0(a,c)?V0(a,$APP.mL.g($APP.v(b))):$APP.Ae.j(function(e,f){return $APP.Ve.h(e,V0(a,$APP.mL.g(f)))},$APP.ci,b):d};W0=function(a){return $APP.l(a)?$APP.Be(a):null};
Y0=function(a){X0.g?X0.g(a):X0.call(null,a);return function d(c){return new $APP.ef(null,function(){for(;;){var e=$APP.u(c);if(e){if($APP.he(e)){var f=$APP.Kc(e),h=$APP.Fd(f),m=$APP.gf(h);a:for(var r=0;;)if(r<h){var n=$APP.Rd(f,r),w=$APP.A.j(n,0,null);n=$APP.A.j(n,1,null);$APP.nf(m,o0(a.db,w)?new $APP.H(null,2,5,$APP.I,[w,W0(n)],null):new $APP.H(null,2,5,$APP.I,[w,n],null));r+=1}else{f=!0;break a}return f?$APP.mf($APP.of(m),d($APP.Lc(e))):$APP.mf($APP.of(m),null)}f=$APP.v(e);m=$APP.A.j(f,0,null);
f=$APP.A.j(f,1,null);return $APP.Ye(o0(a.db,m)?new $APP.H(null,2,5,$APP.I,[m,W0(f)],null):new $APP.H(null,2,5,$APP.I,[m,f],null),d($APP.nd(e)))}return null}},null,null)}($APP.q(a.cache))};Z0=function(a,b,c,d){this.db=a;this.eid=b;this.ki=c;this.cache=d;this.J=2162164483;this.M=0};U0=function(a,b,c,d){return new Z0(a,b,c,d)};$0=function(a){return a instanceof Z0};a1=function(a,b){return b instanceof Z0&&a.db===b.db&&$APP.z.h(a.eid,b.eid)};b1=function(a){return ZZ($APP.cd(a.eid),$APP.ia(a.db))};
UQa=function(a,b){return $APP.De(function(c,d,e){return $APP.Zh.j(c,d,p0(a,d)?o0(a,d)?$APP.fi($APP.Gi.h(X0,e)):X0.g?X0.g(e):X0.call(null,e):e)},$APP.wf,b)};VQa=function(a,b){return $APP.Ae.j(function(c,d){var e=z0.g($APP.v(d));return $APP.Zh.j(c,e,SQa(a,e,d))},$APP.wf,$APP.Hv.h(z0,b))};X0=function(a){if(null!=a){if(!$APP.l($APP.q(a.ki))){var b=$APP.yf(o_(a.db,new $APP.H(null,1,5,$APP.I,[a.eid],null)));$APP.l(b)&&($APP.cg(a.cache,UQa(a.db,VQa(a.db,b))),$APP.Sc(a.ki,!0))}return a}return null};
c1=function(a){return $APP.Ae.j($APP.Ju,0,a)};WQa=function(a){return c1(a)/$APP.Fd(a)};
XQa=function(a){var b=WQa(a);return c1(function(){return function e(d){return new $APP.ef(null,function(){for(;;){var f=$APP.u(d);if(f){if($APP.he(f)){var h=$APP.Kc(f),m=$APP.Fd(h),r=$APP.gf(m);a:for(var n=0;;)if(n<m){var w=$APP.Rd(h,n)-b;r.add(w*w);n+=1}else{h=!0;break a}return h?$APP.mf($APP.of(r),e($APP.Lc(f))):$APP.mf($APP.of(r),null)}r=$APP.v(f)-b;return $APP.Ye(r*r,e($APP.nd(f)))}return null}},null,null)}(a)}())/$APP.Fd(a)};
d1=function(a,b,c,d,e,f,h,m,r,n,w,x,D,G,M){this.as=a;this.Fc=b;this.wb=c;this.name=d;this.pattern=e;this.mc=f;this.ya=h;this.qc=m;this.yb=r;this.lc=n;this.nc=w;this.jc=x;this.B=D;this.o=G;this.D=M;this.J=2230716170;this.M=139264};
YQa=function(a){var b=$APP.nl.l(a,$APP.on,$APP.B([$APP.km,e1,$APP.O,f1,g1,h1,i1,j1,k1,l1,m1]));b=$APP.fe(a)?$APP.fh.h($APP.wf,b):b;return new d1($APP.on.g(a),$APP.km.g(a),e1.g(a),$APP.O.g(a),f1.g(a),g1.g(a),h1.g(a),i1.g(a),j1.g(a),k1.g(a),l1.g(a),m1.g(a),null,$APP.yf(b),null)};n1=function(a,b,c,d,e,f,h,m){this.qa=a;this.dd=b;this.od=c;this.Yc=d;this.xc=e;this.B=f;this.o=h;this.D=m;this.J=2230716170;this.M=139264};
t1=function(a){var b=$APP.nl.l(a,o1,$APP.B([p1,q1,r1,s1]));b=$APP.fe(a)?$APP.fh.h($APP.wf,b):b;return new n1(o1.g(a),p1.g(a),q1.g(a),r1.g(a),s1.g(a),null,$APP.yf(b),null)};v1=function(a,b,c){if($APP.l(a))return null;throw $APP.xl.h(["Expected ",$APP.p.g(b),", got: ",$APP.aj.l($APP.B([c]))].join(""),new $APP.k(null,2,[$APP.VI,ZQa,u1,c],null));};
aRa=function(a,b){var c=D0(b),d=c?E0(b):b,e=I0(a,d),f=p0(a,d);a=o0(a,d);if(c){v1(e,"reverse attribute having :db.type/ref",b);var h=!0}else h=null;return YQa($APP.Hh([j1,e1,i1,$APP.O,$APP.on,m1,l1,k1,f1],[$APP.Ee,a?1E3:null,h,d,b,f?!0:null,e?!0:null,a?!0:null,e?c?w1:f?$Qa:w1:null]))};bRa=function(a,b,c){v1("number"===typeof c&&0<c||null==c,"(positive-number | nil)",c);v1(o0(a,$APP.O.g(b)),"limit attribute having :db.cardinality/many",$APP.O.g(b))};
cRa=function(a,b){var c=function(){var d=$APP.v(b);return x1.h?x1.h(a,d):x1.call(null,a,d)}();if(null==c)return null;v1($APP.Uf($APP.Fd($APP.y(b))),"even number of opts",b);return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);switch(f instanceof $APP.F?f.S:null){case "as":return $APP.Zh.j(d,$APP.on,e);case "limit":return bRa(a,d,e),$APP.Zh.j(d,e1,e);case "default":return $APP.Zh.j(d,$APP.km,e);case "xform":f=$APP.Zh.j;var h=$APP.Sd(e)?e:null;if($APP.l(h))e=h;else if(h=$APP.C.h(y1,
e),$APP.l(h))e=h;else throw $APP.xl.h(["Can't resolve symbol ",$APP.aj.l($APP.B([e]))].join(""),new $APP.k(null,2,[$APP.VI,ZQa,u1,e],null));return f.call($APP.Zh,d,j1,e);default:return v1(!1,"one of :as, :limit, :default, :xform",b)}},c,$APP.sp.h(2,$APP.y(b)))};
x1=function(a,b){var c;!(c=b instanceof $APP.F)&&(c="string"===typeof b)&&(c=new $APP.bi(null,new $APP.k(null,2,["limit",null,"default",null],null),null),c=c.g?c.g(b):c.call(null,b),c=$APP.jb(c));if(c)return aRa(a,b);if($APP.be(b)){c=cRa(a,b);if($APP.l(c))return c;c=$APP.v(b);var d=new $APP.bi(null,new $APP.k(null,2,[$APP.Mna,null,"limit",null],null),null);c=d.g?d.g(c):d.call(null,c);$APP.l(c)?(v1($APP.z.h($APP.Fd(b),3),"['limit attr-name (positive-number | nil)]",b),$APP.A.j(b,0,null),d=$APP.A.j(b,
1,null),c=$APP.A.j(b,2,null),d=x1.h?x1.h(a,d):x1.call(null,a,d),bRa(a,d,c),c=$APP.Zh.j(d,e1,c)):c=null;if($APP.l(c))return c;c=$APP.v(b);d=new $APP.bi(null,new $APP.k(null,2,[$APP.MK,null,"default",null],null),null);c=d.g?d.g(c):d.call(null,c);$APP.l(c)?(v1($APP.z.h($APP.Fd(b),3),"['default attr-name any-value]",b),$APP.A.j(b,0,null),d=$APP.A.j(b,1,null),c=$APP.A.j(b,2,null),a=x1.h?x1.h(a,d):x1.call(null,a,d),a=$APP.Zh.j(a,$APP.km,c)):a=null;return $APP.l(a)?a:v1(!1,"[attr-name attr-option+] | ['limit attr-name (positive-num | nil)] | ['default attr-name any-val]",
b)}return null};dRa=function(a,b){return $APP.Tf(function(c){var d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);return $APP.l(a.g?a.g(d):a.call(null,d))?c:null},$APP.Gi.j($APP.qv,b,$APP.Ym.C()))};eRa=function(a,b){var c=$APP.l(i1.g(b))?r1:o1,d=dRa(function(e){return $APP.z.h($APP.on.g(e),$APP.on.g(b))},$APP.C.h(a,c));return null==d?$APP.ym.G(a,c,$APP.Ve,b):$APP.ym.P(a,c,$APP.Zh,d,b)};
A1=function(a,b){v1($APP.be(b),"pattern to be sequential?",b);for(var c=t1(new $APP.k(null,3,[o1,$APP.pg,r1,$APP.pg,s1,null],null));;){if($APP.Zd(b)){var d=c.qa,e=function(){return function(m){m=m.name;var r=new $APP.bi(null,new $APP.k(null,2,[H0,null,":db/id",null],null),null);return r.g?r.g(m):r.call(null,m)}}(b,c,d);b=function(){return function(m){m=$APP.O.g(m);return m instanceof $APP.F?m:$APP.z.h(":",$APP.xi.j(m,0,1))?$APP.Hi.g($APP.xi.h(m,1)):$APP.Hi.g(m)}}(b,c,d,e);d=$APP.l(function(){var m=
c.xc;return $APP.l(m)?$APP.jb($APP.Tf(e,c.qa)):m}())?$APP.Ve.h(d,fRa):d;d=$APP.Jr.g($APP.Gu.h(b,d));var f=$APP.jr.h(e,d),h=$APP.v(f);f=$APP.Pd(f);return t1(new $APP.k(null,5,[o1,d,p1,h,q1,f,r1,$APP.Jr.g($APP.Gu.h(b,c.Yc)),s1,c.xc],null))}h=$APP.v(b);if($APP.z.h($APP.WG,h)||$APP.z.h("*",h)||$APP.z.h(gRa,h))b=$APP.y(b),c=d=$APP.Zh.j(c,s1,!0);else if($APP.ce(h))d=$APP.De(function(){return function(m,r,n){var w=x1(a,r);v1(null!=w,"attr-name | attr-expr",r);v1(I0(a,$APP.O.g(w)),"attribute having :db.type/ref",
r);$APP.z.h(z1,n)||$APP.z.h("...",n)?r=$APP.Zh.l(w,f1,null,$APP.B([h1,!0,g1,null])):"number"===typeof n?(v1(0<n,"(positive-num | ...)",$APP.vf([r,n])),r=$APP.Zh.l(w,f1,null,$APP.B([h1,!0,g1,n]))):r=$APP.Zh.j(w,f1,A1.h?A1.h(a,n):A1.call(null,a,n));return eRa(m,r)}}(b,c,h),c,h),b=$APP.y(b),c=d;else{d=x1(a,h);if(null==d)return v1(!1,"attr-name | attr-expr | map-spec | *",h);b=$APP.y(b);c=d=eRa(c,d)}}};B1=function(a){return null==a?null:$APP.Eb(a)};C1=function(a){return null==a?null:$APP.Hb(a)};
D1=function(a,b){return null==a?new $APP.E(null,b,null,1,null):$APP.Cb(a,b)};E1=function(a,b,c,d,e){this.db=a;this.ne=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};F1=function(a,b,c,d,e){a=a.ne;null==a||(a.G?a.G(b,c,d,e):a.call(null,b,c,d,e))};G1=function(a,b){if(null!=a&&null!=a.Vg)a=a.Vg(a,b);else{var c=G1[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=G1._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("IFrame.-merge",a);}return a};
H1=function(a,b){if(null!=a&&null!=a.Zf)a=a.Zf(a,b);else{var c=H1[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=H1._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("IFrame.-run",a);}return a};I1=function(a,b,c,d,e){this.value=a;this.va=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};J1=function(a,b,c,d,e,f){this.ma=a;this.ia=b;this.va=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};
K1=function(a,b,c,d,e,f,h,m,r){this.ra=a;this.wa=b;this.ma=c;this.pattern=d;this.ia=e;this.va=f;this.B=h;this.o=m;this.D=r;this.J=2230716170;this.M=139264};L1=function(a,b,c,d,e,f,h,m,r,n,w){this.ra=a;this.wa=b;this.ma=c;this.pattern=d;this.ia=e;this.qa=f;this.va=h;this.id=m;this.B=r;this.o=n;this.D=w;this.J=2230716170;this.M=139264};M1=function(a,b,c,d,e,f,h,m,r,n){this.ra=a;this.wa=b;this.ma=c;this.pattern=d;this.ia=e;this.qa=f;this.id=h;this.B=m;this.o=r;this.D=n;this.J=2230716170;this.M=139264};
N1=function(a,b,c,d,e,f,h){return new M1(a,b,c,d,e,f,h,null,null,null)};
P1=function(a,b,c,d,e,f){var h=e.ya;$APP.l(h)||(h=e.jc,h=$APP.l(h)?e.pattern.xc:h);if($APP.jb(h))return d=e.pattern,O1.P?O1.P(a,b,c,d,f):O1.call(null,a,b,c,d,f);if($APP.l(b.g?b.g(f):b.call(null,f)))return new I1(new $APP.k(null,1,[H0,f],null),null,null,null,null);h=c.g?c.g(e):c.call(null,e);if($APP.l($APP.l(h)?0>=h:h))return new I1(null,null,null,null,null);b=$APP.Ve.h(b,f);c=$APP.l(h)?$APP.ym.j(c,e,$APP.Fe):$APP.l(e.mc)?$APP.Zh.j(c,e,e.mc-1):c;d=$APP.l(e.ya)?d:e.pattern;return O1.P?O1.P(a,b,c,d,
f):O1.call(null,a,b,c,d,f)};
O1=function(a,b,c,d,e){var f=a.db,h=$APP.l(function(){var m=d.xc;return $APP.l(m)?f instanceof $APP.A_:m}())?LZ(f.Vb,MZ.G(e,null,null,536870912),MZ.G(e,null,null,2147483647)):$APP.l(d.xc)?o_(f,new $APP.H(null,1,5,$APP.I,[e],null)):null==d.dd?null:function(){var m=d.dd.name,r=d.od.name;return f instanceof $APP.A_?LZ(f.Vb,MZ.G(e,m,null,536870912),MZ.G(e,r,null,2147483647)):r_(f,$APP.C_,e,null,null,null)}();$APP.l(d.xc)&&F1(a,hRa,e,null,null);return new L1(b,c,$APP.zc($APP.wf),d,B1(d.qa),C1(d.qa),h,
e,null,null,null)};Q1=function(a,b){var c=$APP.xf(a);a=$APP.C.h(c,F0);c=$APP.C.h(c,f1);b=r0(a.db,b);if(null==b)return null;for(c=new $APP.E(null,O1(a,$APP.ci,$APP.wf,c,b),null,1,null);;){b=B1(c);var d=C1(c);if(b instanceof I1){if(null==d)return b.value;c=B1(d);d=C1(d);c=D1(d,G1(c,b))}else c=$APP.Ae.j(D1,d,H1(b,a))}};S1=function(a,b,c){c=$APP.xf(c);c=$APP.C.h(c,R1);return new $APP.k(null,2,[f1,JY(kQa(a).Cc,b,function(){return A1(a,b)}),F0,new E1(a,c,null,null,null)],null)};
T1=function(a,b){a=a.toString(16);var c=$APP.Fd(a);return c>b?$APP.xi.j(a,0,b):c<b?[$APP.p.g($APP.Vf.h($APP.p,$APP.Jm.h(b-c,"0"))),$APP.p.g(a)].join(""):a};iRa=function(){};U1=function(a,b,c){if(null!=a&&null!=a.dk)a=a.dk(a,b,c);else{var d=U1[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=U1._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.rb("IStorage.-store",a);}return a};
V1=function(a,b){if(null!=a&&null!=a.ck)a=a.ck(a,b);else{var c=V1[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=V1._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("IStorage.-restore",a);}return a};W1=function(a){return new $APP.H(null,4,5,$APP.I,[a.e,a.a,a.v,a.tx],null)};X1=function(a,b,c,d){this.storage=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};Y1=function(a){return new X1(a,null,null,null)};
Z1=function(a){return $APP.l(a)?$APP.C_.g(a).storage:null};$1=function(a){a=Z1(a);return null==a?null:OZ.g(a)};
d2=function(a,b,c){$APP.dj.j(jRa,$APP.Ve,a);var d=a2;a2=$APP.bg($APP.zc($APP.pg));try{var e=$APP.C_.g(a),f=D_.g(a),h=u_.g(a),m=e.nf(null,b),r=f.nf(null,b),n=h.nf(null,b),w=$APP.ml.l($APP.B([$APP.Hh([$APP.B_,F_,D_,kRa,u_,E_,$APP.C_,lRa,mRa,nRa],[$APP.B_.g(a),F_.g(a),r,$APP.q(b2),n,E_.g(a),m,new $APP.k(null,2,[$APP.vI,f.O,TZ,f.shift],null),new $APP.k(null,2,[$APP.vI,h.O,TZ,h.shift],null),new $APP.k(null,2,[$APP.vI,e.O,TZ,e.shift],null)]),XZ($APP.C_.g(a))]));if($APP.l($APP.l(c)?c:0<$APP.Fd($APP.q(a2)))){$APP.Sc(a2,
$APP.og.h($APP.q(a2),new $APP.H(null,2,5,$APP.I,[0,w],null)));$APP.Sc(a2,$APP.og.h($APP.q(a2),new $APP.H(null,2,5,$APP.I,[1,$APP.pg],null)));var x=OZ.g(b),D=$APP.Cv.g($APP.C.h($APP.q(c2),x));$APP.dj.G(c2,$APP.Zh,x,null);U1(x,$APP.Bc($APP.q(a2)),D)}return a}finally{a2=d}};oRa=function(a,b){return U1($1(a),new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[1,$APP.Om.h(function(c){return $APP.Om.h(W1,c)},b)],null)],null),null)};
f2=function(a,b){var c=V1(a,0);if(null==c)return null;var d=V1(a,1),e=$APP.xf(c),f=$APP.C.h(e,mRa),h=$APP.C.h(e,nRa),m=$APP.C.h(e,$APP.B_),r=$APP.C.h(e,F_),n=$APP.C.h(e,D_),w=$APP.C.h(e,kRa),x=$APP.C.h(e,u_),D=$APP.C.h(e,E_),G=$APP.C.h(e,$APP.C_);e=$APP.C.h(e,lRa);b2.hc(null,function(){var M=b2.Ka(null);return M>w?M:w}());b=$APP.ml.l($APP.B([c,b]));a=Y1(a,b);f=e2(new $APP.k(null,6,[$APP.B_,m,$APP.C_,UZ(g_,G,a,$APP.Zh.j(b,SZ,h)),D_,UZ(h_,n,a,$APP.Zh.j(b,SZ,e)),u_,UZ(i_,x,a,$APP.Zh.j(b,SZ,f)),E_,D,
F_,r],null));$APP.dj.j(jRa,$APP.Ve,f);return new $APP.H(null,2,5,$APP.I,[f,$APP.Om.h(function(M){return $APP.Om.h(function(U){var Y=$APP.A.j(U,0,null),ba=$APP.A.j(U,1,null),ca=$APP.A.j(U,2,null);U=$APP.A.j(U,3,null);return MZ.G(Y,ba,ca,U)},M)},d)],null)};g2=function(a,b){return $APP.Ae.j(function(c,d){return $APP.Ae.j(function(e,f){try{return DQa(e,f)}catch(h){return console.error(h),e}},c,d)},a,b)};h2=function(a,b){return $APP.gb(a)?a[b]:$APP.A.h(a,b)};
i2=function(a,b){return $APP.ce(a)?a.g?a.g(b):a.call(null,b):a[b]};j2=function(a,b){var c=Array($APP.Fd(b));$APP.Ae.j(function(d,e){c[d]=a.g?a.g(e):a.call(null,e);return d+1},0,b);return c};k2=function(a,b){var c=Array($APP.Fd(b));$APP.Ae.j(function(d,e){c[d]=a.h?a.h(d,e):a.call(null,d,e);return d+1},0,b);return c};pRa=function(a,b){return null==b.a?-1:0>=$APP.ue(a.a,b.a)?-1:1};
qRa=function(a){if($APP.Zd(D_.g(a)))return $APP.pg;for(var b=$APP.zc(new $APP.H(null,1,5,$APP.I,[z0.g($APP.v(D_.g(a)))],null));;){var c=$APP.A.h(b,$APP.Fd(b)-1),d=MZ.j(0,c,null),e=MZ.j(2147483647,null,null);c=z0;var f=c.g,h=D_.g(a);d=GZ(h,d,e,pRa);c=f.call(c,$APP.v(d));if(null!=c)b=$APP.og.h(b,c);else return $APP.Bc(b)}};rRa=function(a){return $APP.za(a,":")?$APP.Hi.g($APP.xi.h(a,1)):a};
uRa=function(a,b){b=$APP.xf(b);var c=$APP.C.j(b,sRa,$APP.aj),d=$APP.C.j(b,tRa,$APP.p);if($APP.l($1(a)))throw $APP.xl.h("serializable doesn't work with databases that have :storage",$APP.wf);var e=qRa(a),f=$APP.fh.h($APP.wf,$APP.Gi.j($APP.qv,e,$APP.Ym.C())),h=$APP.bg($APP.zc($APP.pg)),m=$APP.bg($APP.zc($APP.wf));b=k2(function(x,D){D.idx=x|0;x=D.e;var G=D.a;G=f.g?f.g(G):f.call(null,G);var M=D.v;if("string"!==typeof M)if("number"===typeof M)M=Infinity===M?[2]:-Infinity===M?[3]:$APP.l(isNaN(M))?[4]:M;
else if(!$APP.ke(M))if(M instanceof $APP.F){var U=$APP.C.h($APP.q(m),M);$APP.l(U)?M=U:(U=h.hc(null,$APP.og.h(h.Ka(null),M)),U=$APP.Fd(U)-1,m.hc(null,$APP.hh.j(m.Ka(null),M,U)),M=U);M=[0,M]}else M=[1,c.g?c.g(M):c.call(null,M)];return[x,G,M,D.tx-536870912]},$APP.C_.g(a));var r=k2(function(x,D){return D.idx},D_.g(a)),n=k2(function(x,D){return D.idx},u_.g(a)),w=function(){var x=$APP.B_.g(a);return c.g?c.g(x):c.call(null,x)}();e=j2(d,e);d=j2(d,$APP.Bc($APP.q(h)));return{count:$APP.Fd($APP.C_.g(a)),tx0:536870912,
"max-eid":E_.g(a),"max-tx":F_.g(a),schema:w,attrs:e,keywords:d,eavt:b,aevt:r,avet:n}};l2=function(){};m2=function(a,b,c){if(null!=a&&null!=a.ub)a=a.ub(a,b,c);else{var d=m2[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=m2._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.rb("ITraversable.-collect",a);}return a};
n2=function(a,b){if(null!=a&&null!=a.vb)a=a.vb(a,b);else{var c=n2[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=n2._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("ITraversable.-collect-vars",a);}return a};o2=function(a,b){return $APP.be(a)&&$APP.z.h($APP.Fd(a),b)};p2=function(a,b){return $APP.be(b)?$APP.Ae.j(function(c,d){d=a.g?a.g(d):a.call(null,d);return $APP.l(d)?$APP.Ve.h(c,d):$APP.vd(null)},$APP.pg,b):null};r2=function(a,b){return q2(a,b,$APP.pg)};
q2=function(a,b,c){return $APP.l(a.g?a.g(b):a.call(null,b))?$APP.Ve.h(c,b):(null!=b?$APP.bd===b.tb||(b.yd?0:$APP.ob(l2,b)):$APP.ob(l2,b))?m2(b,a,c):YZ(b)?$APP.Ae.j(function(d,e){return q2(a,e,d)},c,b):c};s2=function(a){var b=$APP.Zd(a);return b?b:$APP.Vf.h($APP.bo,a)};t2=function(a,b){return $APP.Ud(a,new $APP.k(null,1,[$APP.ll,b],null))};u2=function(a){var b=$APP.ll.g($APP.Vd(a));return $APP.l(b)?b:a};v2=function(a,b,c){this.B=a;this.o=b;this.D=c;this.J=2230716170;this.M=139264};
w2=function(a,b,c,d){this.La=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};x2=function(a,b,c,d){this.La=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};y2=function(a,b,c){this.B=a;this.o=b;this.D=c;this.J=2230716170;this.M=139264};z2=function(a,b,c){this.B=a;this.o=b;this.D=c;this.J=2230716170;this.M=139264};A2=function(a,b,c,d){this.value=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};
B2=function(a,b,c,d){this.La=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};C2=function(a){return a instanceof $APP.t&&$APP.z.h($APP.v($APP.hi(a)),"?")?new w2(a,null,null,null):null};wRa=function(a){var b=C2(a);if($APP.l(b))return b;throw $APP.xl.h(["Cannot parse var, expected symbol starting with ?, got: ",$APP.aj.l($APP.B([a]))].join(""),new $APP.k(null,2,[$APP.VI,vRa,$APP.gy,a],null));};
D2=function(a){return a instanceof $APP.t&&$APP.z.h($APP.v($APP.hi(a)),"$")?new x2(a,null,null,null):null};E2=function(a){return a instanceof $APP.t&&$APP.z.h($APP.v($APP.hi(a)),"?")?null:new A2(a,null,null,null)};F2=function(a){return a instanceof $APP.t&&$APP.jb(C2(a))&&$APP.jb(D2(a))&&$APP.jb($APP.z.h($APP.VG,a)?new z2(null,null,null):null)&&$APP.jb($APP.z.h($APP.bH,a)?new v2(null,null,null):null)?new B2(a,null,null,null):null};xRa=function(a){return $APP.l(F2(a))?new w2(a,null,null,null):null};
G2=function(a){var b=C2(a);if($APP.l(b))return b;b=D2(a);return $APP.l(b)?b:E2(a)};H2=function(a,b,c,d,e){this.required=a;this.Nd=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
yRa=function(a){if($APP.be(a)){var b=$APP.be($APP.v(a))?new $APP.H(null,2,5,$APP.I,[$APP.v(a),$APP.y(a)],null):new $APP.H(null,2,5,$APP.I,[null,a],null),c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c=p2(wRa,c);b=p2(wRa,b);if($APP.Zd(c)&&$APP.Zd(b))throw $APP.xl.h("Cannot parse rule-vars, expected [ variable+ | ([ variable+ ] variable*) ]",new $APP.k(null,2,[$APP.VI,I2,$APP.gy,a],null));if(!$APP.l(s2($APP.K.h(c,b))))throw $APP.xl.h("Rule variables should be distinct",new $APP.k(null,2,[$APP.VI,I2,$APP.gy,
a],null));return new H2(c,b,null,null,null)}throw $APP.xl.h("Cannot parse rule-vars, expected [ variable+ | ([ variable+ ] variable*) ]",new $APP.k(null,2,[$APP.VI,I2,$APP.gy,a],null));};K2=function(a){return $APP.K.h($APP.l($APP.dG.g(a))?new $APP.H(null,1,5,$APP.I,[$APP.Om.h($APP.am,$APP.dG.g(a))],null):null,$APP.Om.h($APP.am,J2.g(a)))};L2=function(a){return new $APP.H(null,2,5,$APP.I,[$APP.Fd($APP.dG.g(a)),$APP.Fd(J2.g(a))],null)};
M2=function(a,b,c){this.B=a;this.o=b;this.D=c;this.J=2230716170;this.M=139264};N2=function(a,b,c,d){this.Sb=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};O2=function(a,b,c,d){this.yc=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};P2=function(a,b,c,d){this.Qb=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};zRa=function(a){return $APP.z.h($APP.bH,a)?t2(new M2(null,null,null),a):null};
ARa=function(a){var b=zRa(a);return $APP.l(b)?b:Q2.g?Q2.g(a):Q2.call(null,a)};BRa=function(a){var b=p2(ARa,a);if($APP.l(b)){if($APP.Zd(b))throw $APP.xl.h("Tuple binding cannot be empty",new $APP.k(null,2,[$APP.VI,R2,$APP.gy,a],null));return t2(new O2(b,null,null,null),a)}return null};
Q2=function(a){a:{if(o2(a,2)&&$APP.z.h($APP.Kd(a),z1)){var b=$APP.v(a);b=Q2.g?Q2.g(b):Q2.call(null,b);if($APP.l(b)){b=t2(new P2(b,null,null,null),a);break a}throw $APP.xl.h("Cannot parse collection binding",new $APP.k(null,2,[$APP.VI,R2,$APP.gy,a],null));}b=null}if($APP.l(b))return b;b=o2(a,1)&&$APP.be($APP.v(a))?t2(new P2(BRa($APP.v(a)),null,null,null),a):null;if($APP.l(b))return b;b=BRa(a);if($APP.l(b))return b;b=zRa(a);if($APP.l(b))return b;b=C2(a);b=$APP.l(b)?t2(new N2(b,null,null,null),a):null;
if($APP.l(b))return b;throw $APP.xl.h("Cannot parse binding, expected (bind-scalar | bind-tuple | bind-coll | bind-rel)",new $APP.k(null,2,[$APP.VI,R2,$APP.gy,a],null));};S2=function(a){if(null!=a&&null!=a.Ug)a=a.Ug(a);else{var b=S2[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=S2._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.rb("IFindVars.-find-vars",a);}return a};T2=function(a,b,c,d,e){this.ha=a;this.xa=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
U2=function(a,b,c,d,e,f){this.source=a;this.Sb=b;this.pattern=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};V2=function(a){if(null!=a&&null!=a.Yf)a=a.Yf(a);else{var b=V2[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=V2._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.rb("IFindElements.find-elements",a);}return a};W2=function(a,b,c,d){this.elements=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};
X2=function(a,b,c,d){this.element=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};Y2=function(a,b,c,d){this.element=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};Z2=function(a,b,c,d){this.elements=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};$2=function(a){return a instanceof T2};a3=function(a){return a instanceof U2};
e3=function(a){var b=C2(a);if($APP.l(b))return b;a:{if($APP.be(a)&&$APP.z.h($APP.v(a),b3)){if(3<=$APP.Fd(a)&&4>=$APP.Fd(a)){var c=(b=$APP.z.h($APP.Fd(a),4))?$APP.A.h(a,1):c3;b=b?$APP.Od(a):$APP.y(a);var d=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c=D2(c);d=C2(d);var e=C2(b);$APP.l(e)?b=e:(e=xRa(b),b=$APP.l(e)?e:E2(b));if($APP.l($APP.l(c)?$APP.l(d)?b:d:c)){b=new U2(c,d,b,null,null,null);break a}}throw $APP.xl.h("Cannot parse pull expression, expect ['pull' src-var? variable (constant | variable | plain-symbol)]",
new $APP.k(null,2,[$APP.VI,d3,u1,a],null));}b=null}if($APP.l(b))return b;a:{if($APP.be(a)&&$APP.z.h($APP.v(a),CRa)){if(3<=$APP.Fd(a)&&(b=$APP.u(a),$APP.v(b),c=$APP.y(b),b=$APP.v(c),c=$APP.y(c),b=C2(b),c=p2(G2,c),$APP.l($APP.l(b)?c:b))){b=new T2(b,c,null,null,null);break a}throw $APP.xl.h("Cannot parse custom aggregate call, expect ['aggregate' variable fn-arg+]",new $APP.k(null,2,[$APP.VI,d3,u1,a],null));}b=null}$APP.l(b)?a=b:$APP.be(a)&&2<=$APP.Fd(a)?(b=$APP.u(a),a=$APP.v(b),b=$APP.y(b),a=F2(a),
b=p2(G2,b),a=$APP.l($APP.l(a)?b:a)?new T2(a,b,null,null,null):null):a=null;return a};
DRa=function(a){var b=p2(e3,a);b=null==b?null:new W2(b,null,null,null);if($APP.l(b))return b;a:{if($APP.be(a)&&$APP.z.h($APP.Fd(a),1)&&(b=$APP.v(a),$APP.be(b)&&$APP.z.h($APP.Fd(b),2)&&$APP.z.h($APP.Kd(b),z1))){b=e3($APP.v(b));b=null==b?null:new X2(b,null,null,null);break a}b=null}if($APP.l(b))return b;$APP.be(a)&&$APP.z.h($APP.Fd(a),2)&&$APP.z.h($APP.Kd(a),$APP.Xj)?(b=e3($APP.v(a)),b=null==b?null:new Y2(b,null,null,null)):b=null;if($APP.l(b))return b;$APP.be(a)&&$APP.z.h($APP.Fd(a),1)?(b=$APP.v(a),
b=p2(e3,b),b=null==b?null:new Z2(b,null,null,null)):b=null;if($APP.l(b))return b;throw $APP.xl.h("Cannot parse :find, expected: (find-rel | find-coll | find-tuple | find-scalar)",new $APP.k(null,2,[$APP.VI,d3,u1,a],null));};f3=function(a,b,c,d,e){this.type=a;this.Sd=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
g3=function(a,b){if(!$APP.Zd(b)&&$APP.Qf($APP.fd,b))switch(a instanceof $APP.F?a.S:null){case "keys":return new f3(a,$APP.Om.h($APP.Hi,b),null,null,null);case "syms":return new f3(a,$APP.Ce(b),null,null,null);case "strs":return new f3(a,$APP.Om.h($APP.p,b),null,null,null);default:return null}else return null};ERa=function(a){var b=D2(a);$APP.l(b)||(b=$APP.z.h($APP.VG,a)?new z2(null,null,null):null,b=$APP.l(b)?b:xRa(a));return $APP.l(b)?t2(new N2(b,null,null,null),a):Q2(a)};
GRa=function(a){var b=p2(ERa,a);if($APP.l(b))return b;throw $APP.xl.h("Cannot parse :in clause, expected (src-var | % | plain-symbol | bind-scalar | bind-tuple | bind-coll | bind-rel)",new $APP.k(null,2,[$APP.VI,FRa,$APP.gy,a],null));};h3=function(a,b,c,d,e){this.source=a;this.pattern=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};i3=function(a,b,c,d,e){this.ha=a;this.xa=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
j3=function(a,b,c,d,e,f){this.ha=a;this.xa=b;this.Qb=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};k3=function(a,b,c,d,e,f){this.source=a;this.name=b;this.xa=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};l3=function(a,b,c,d,e,f){this.source=a;this.Tb=b;this.Ca=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};m3=function(a,b,c,d,e,f){this.source=a;this.qd=b;this.Ca=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};
n3=function(a,b,c,d){this.Ca=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};HRa=function(a){var b=$APP.z.h($APP.bH,a)?new v2(null,null,null):null;if($APP.l(b))return b;b=C2(a);return $APP.l(b)?b:E2(a)};o3=function(a){if($APP.be(a)){var b=D2($APP.v(a));return $APP.l(b)?new $APP.H(null,2,5,$APP.I,[b,$APP.y(a)],null):new $APP.H(null,2,5,$APP.I,[new y2(null,null,null),a],null)}return null};
IRa=function(a){if($APP.be(a)){var b=$APP.u(a);a=$APP.v(b);b=$APP.y(b);b=null==b?$APP.pg:b;var c=F2(a);a=$APP.l(c)?c:C2(a);b=p2(G2,b);return $APP.l($APP.l(a)?b:a)?new $APP.H(null,2,5,$APP.I,[a,b],null):null}return null};JRa=function(a,b,c){if($APP.Zd(a)&&$APP.Zd(b))throw $APP.xl.h("Join variables should not be empty",new $APP.k(null,2,[$APP.VI,p3,$APP.gy,c],null));};KRa=function(a,b){JRa(null,$APP.XH.g(a),b);return a};
LRa=function(a,b){var c=$APP.xf(a);c=$APP.C.h(c,q3);var d=$APP.xf(c);c=$APP.C.h(d,$APP.dG);d=$APP.C.h(d,J2);JRa(c,d,b);return a};MRa=function(a){if($APP.be(a)&&$APP.z.h($APP.ms,$APP.v(a))){var b=$APP.y(a);b=r3.g?r3.g(b):r3.call(null,b);if($APP.l($APP.yf(b)))return new n3(b,null,null,null);throw $APP.xl.h("Cannot parse 'and' clause, expected [ 'and' clause+ ]",new $APP.k(null,2,[$APP.VI,p3,$APP.gy,a],null));}return null};
u3=function(a){a:{var b=o3(a);if($APP.l(b)){var c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);var d=$APP.u(b);b=$APP.v(d);d=$APP.y(d);if($APP.z.h($APP.mz,b)){b=r3.g?r3.g(d):r3.call(null,d);if($APP.l(b)){c=KRa(t2(new l3(c,$APP.Ce($APP.Cv.g(s3($APP.pg,b))),b,null,null,null),a),a);break a}throw $APP.xl.h("Cannot parse 'not' clause, expected [ src-var? 'not' clause+ ]",new $APP.k(null,2,[$APP.VI,p3,$APP.gy,a],null));}}c=null}if($APP.l(c))return c;a:{b=o3(a);if($APP.l(b)){c=$APP.A.j(b,0,null);b=$APP.A.j(b,
1,null);d=$APP.u(b);b=$APP.v(d);var e=$APP.y(d);d=$APP.v(e);e=$APP.y(e);if($APP.z.h(t3,b)){b=p2(C2,d);d=r3.g?r3.g(e):r3.call(null,e);if($APP.l($APP.l(b)?d:b)){c=KRa(t2(new l3(c,b,d,null,null,null),a),a);break a}throw $APP.xl.h("Cannot parse 'not-join' clause, expected [ src-var? 'not-join' [variable+] clause+ ]",new $APP.k(null,2,[$APP.VI,p3,$APP.gy,a],null));}}c=null}if($APP.l(c))return c;a:{b=o3(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),d=$APP.u(b),b=$APP.v(d),d=$APP.y(d),$APP.z.h($APP.rs,
b))){b=p2($APP.lv.h(MRa,u3),d);if($APP.l(b)){c=LRa(t2(new m3(c,new H2(null,$APP.Ce($APP.Cv.g(s3($APP.pg,b))),null,null,null),b,null,null,null),a),a);break a}throw $APP.xl.h("Cannot parse 'or' clause, expected [ src-var? 'or' clause+ ]",new $APP.k(null,2,[$APP.VI,p3,$APP.gy,a],null));}c=null}if($APP.l(c))return c;a:{b=o3(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),d=$APP.u(b),b=$APP.v(d),e=$APP.y(d),d=$APP.v(e),e=$APP.y(e),$APP.z.h(v3,b))){b=yRa(d);d=p2($APP.lv.h(MRa,u3),e);if($APP.l($APP.l(b)?
d:b)){c=LRa(t2(new m3(c,b,d,null,null,null),a),a);break a}throw $APP.xl.h("Cannot parse 'or-join' clause, expected [ src-var? 'or-join' [variable+] clause+ ]",new $APP.k(null,2,[$APP.VI,p3,$APP.gy,a],null));}c=null}if($APP.l(c))return c;a:{if(o2(a,1)&&(b=IRa($APP.v(a)),$APP.l(b))){c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c=t2(new i3(c,b,null,null,null),a);break a}c=null}if($APP.l(c))return c;a:{if(o2(a,2)&&(b=$APP.A.j(a,0,null),c=$APP.A.j(a,1,null),d=IRa(b),$APP.l(d))){b=$APP.A.j(d,0,null);d=$APP.A.j(d,
1,null);c=Q2(c);c=$APP.l(c)?t2(new j3(b,d,c,null,null,null),a):null;break a}c=null}if($APP.l(c))return c;a:{b=o3(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),b=$APP.u(b),d=$APP.v(b),b=$APP.y(b),d=F2(d),e=p2(HRa,b),$APP.l(d))){if($APP.Zd(b))throw $APP.xl.h("rule-expr requires at least one argument",new $APP.k(null,2,[$APP.VI,p3,$APP.gy,a],null));if(null==e)throw $APP.xl.h("Cannot parse rule-expr arguments, expected [ (variable | constant | '_')+ ]",new $APP.k(null,2,[$APP.VI,p3,$APP.gy,
a],null));c=new k3(c,d,e,null,null,null);break a}c=null}if($APP.l(c))return c;a:{b=o3(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),b=p2(HRa,b),$APP.l(b))){if($APP.Zd(b))throw $APP.xl.h("Pattern could not be empty",new $APP.k(null,2,[$APP.VI,p3,$APP.gy,a],null));c=t2(new h3(c,b,null,null,null),a);break a}c=null}if($APP.l(c))return c;throw $APP.xl.h("Cannot parse clause, expected (data-pattern | pred-expr | fn-expr | rule-expr | not-clause | not-join-clause | or-clause | or-join-clause)",
new $APP.k(null,2,[$APP.VI,p3,$APP.gy,a],null));};r3=function(a){return p2(u3,a)};NRa=function(a){var b=r3(a);if($APP.l(b))return b;throw $APP.xl.h("Cannot parse :where clause, expected [clause+]",new $APP.k(null,2,[$APP.VI,p3,$APP.gy,a],null));};w3=function(a,b,c,d,e){this.Tb=a;this.Ca=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};x3=function(a,b,c,d,e){this.name=a;this.Hd=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
ORa=function(a){if($APP.be(a)){var b=$APP.u(a),c=$APP.v(b),d=$APP.y(b);if($APP.be(c)){b=$APP.u(c);var e=$APP.v(b);c=$APP.y(b);b=function(){var h=F2(e);if($APP.l(h))return h;throw $APP.xl.h("Cannot parse rule name, expected plain-symbol",new $APP.k(null,2,[$APP.VI,y3,$APP.gy,a],null));}();c=yRa(c);var f=function(){var h=$APP.yf(r3(d));if($APP.l(h))return h;throw $APP.xl.h("Rule branch should have clauses",new $APP.k(null,2,[$APP.VI,y3,$APP.gy,a],null));}();return new $APP.k(null,3,[$APP.O,b,$APP.XH,
c,$APP.HL,f],null)}throw $APP.xl.h(["Cannot parse rule head, expected [rule-name rule-vars], got: ",$APP.aj.l($APP.B([c]))].join(""),new $APP.k(null,2,[$APP.VI,y3,$APP.gy,a],null));}throw $APP.xl.h("Cannot parse rule, expected [rule-head clause+]",new $APP.k(null,2,[$APP.VI,y3,$APP.gy,a],null));};
QRa=function(a,b){var c=$APP.XH.g($APP.v(b)),d=L2(c);b=$APP.u($APP.y(b));for(var e=null,f=0,h=0;;)if(h<f){var m=e.ea(null,h);m=$APP.XH.g(m);if($APP.Yh.h(d,L2(m)))throw $APP.xl.h(["Arity mismatch for rule '",$APP.aj.l($APP.B([$APP.am.g(a)])),"': ",$APP.aj.l($APP.B([K2(c)]))," vs. ",$APP.aj.l($APP.B([K2(m)]))].join(""),new $APP.k(null,2,[$APP.VI,y3,PRa,a],null));h+=1}else if(b=$APP.u(b)){if($APP.he(b))f=$APP.Kc(b),b=$APP.Lc(b),e=f,f=$APP.Fd(f);else{m=$APP.v(b);e=$APP.XH.g(m);if($APP.Yh.h(d,L2(e)))throw $APP.xl.h(["Arity mismatch for rule '",
$APP.aj.l($APP.B([$APP.am.g(a)])),"': ",$APP.aj.l($APP.B([K2(c)]))," vs. ",$APP.aj.l($APP.B([K2(e)]))].join(""),new $APP.k(null,2,[$APP.VI,y3,PRa,a],null));b=$APP.y(b);e=null;f=0}h=0}else break};
RRa=function(a){$APP.Ce(function(){return function d(c){return new $APP.ef(null,function(){for(;;){var e=$APP.u(c);if(e){var f=e;if($APP.he(f)){var h=$APP.Kc(f),m=$APP.Fd(h),r=$APP.gf(m);return function(){for(var D=0;;)if(D<m){var G=$APP.Rd(h,D),M=$APP.A.j(G,0,null),U=$APP.A.j(G,1,null);G=$APP.Om.h(function(){return function(Y){return new w3($APP.XH.g(Y),$APP.HL.g(Y),null,null,null)}}(D,G,M,U,h,m,r,f,e),U);U=r;QRa(M,G);U.add(new x3(M,G,null,null,null));D+=1}else return!0}()?$APP.mf($APP.of(r),d($APP.Lc(f))):
$APP.mf($APP.of(r),null)}var n=$APP.v(f),w=$APP.A.j(n,0,null),x=$APP.A.j(n,1,null);n=$APP.Om.h(function(){return function(D){return new w3($APP.XH.g(D),$APP.HL.g(D),null,null,null)}}(n,w,x,f,e),x);QRa(w,n);return $APP.Ye(new x3(w,n,null,null,null),d($APP.nd(f)))}return null}},null,null)}($APP.gj($APP.O,p2(ORa,a)))}())};z3=function(a,b,c,d,e,f,h,m){this.ed=a;this.jd=b;this.gd=c;this.fd=d;this.hd=e;this.B=f;this.o=h;this.D=m;this.J=2230716170;this.M=139264};
SRa=function(a){var b=$APP.nl.l(a,A3,$APP.B([B3,C3,D3,E3]));b=$APP.fe(a)?$APP.fh.h($APP.wf,b):b;return new z3(A3.g(a),B3.g(a),C3.g(a),D3.g(a),E3.g(a),null,$APP.yf(b),null)};TRa=function(a){for(var b=$APP.wf,c=null;;){var d=$APP.v(a);if($APP.l(d))d instanceof $APP.F?(c=d,a=$APP.y(a)):(b=$APP.kl.G(b,new $APP.H(null,1,5,$APP.I,[c],null),$APP.wm.h($APP.Ve,$APP.pg),d),a=$APP.y(a));else return b}};URa=function(a){var b=$APP.ll.g(a);return a instanceof h3?b:null!=b?b instanceof y2?null:b:null};
XRa=function(a,b,c){var d=$APP.fi(s3($APP.pg,A3.g(a))),e=$APP.fi(B3.g(a)),f=$APP.fi(s3($APP.pg,D3.g(a))),h=$APP.fi(s3($APP.pg,E3.g(a)));f=$APP.qu.h($APP.IM.h(d,e),$APP.IM.h(h,f));d=$APP.ru.h(d,e);if(!$APP.Zd(f))throw $APP.xl.h(["Query for unknown vars: ",$APP.aj.l($APP.B([$APP.Om.h($APP.am,f)]))].join(""),new $APP.k(null,3,[$APP.VI,F3,$APP.XH,f,$APP.gy,b],null));if(!$APP.Zd(d))throw $APP.xl.h([":find and :with should not use same variables: ",$APP.aj.l($APP.B([$APP.Om.h($APP.am,d)]))].join(""),new $APP.k(null,
3,[$APP.VI,F3,$APP.XH,d,$APP.gy,b],null));d=C3.g(a);if(null!=d){if(A3.g(a)instanceof Y2)throw $APP.xl.h([$APP.aj.l($APP.B([$APP.sl.g(d)]))," does not work with single-scalar :find"].join(""),new $APP.k(null,2,[$APP.VI,F3,$APP.gy,b],null));if(A3.g(a)instanceof X2)throw $APP.xl.h([$APP.aj.l($APP.B([$APP.sl.g(d)]))," does not work with collection :find"].join(""),new $APP.k(null,2,[$APP.VI,F3,$APP.gy,b],null));}d=G3.g(C3.g(a));if(null!=d&&(e=V2(A3.g(a)),!$APP.z.h($APP.Fd(d),$APP.Fd(e))))throw $APP.xl.h(["Count of ",
$APP.aj.l($APP.B([$APP.sl.g(C3.g(a))]))," must match count of :find"].join(""),new $APP.k(null,4,[$APP.VI,F3,VRa,$APP.Ye($APP.sl.g(C3.g(a)),d),WRa,e,$APP.gy,b],null));if(1<$APP.Fd($APP.ng.h($APP.kb,new $APP.H(null,3,5,$APP.I,[$APP.Cy.g(c),$APP.ur.g(c),H3.g(c)],null))))throw $APP.xl.h("Only one of :keys/:syms/:strs must be present",new $APP.k(null,2,[$APP.VI,F3,$APP.gy,b],null));var m=s3($APP.pg,D3.g(a)),r=r2(function(w){return w instanceof x2},D3.g(a)),n=r2(function(w){return w instanceof z2},D3.g(a));
if(!$APP.l(function(){var w=s2(m);return $APP.l(w)?(w=s2(r),$APP.l(w)?s2(n):w):w}()))throw $APP.xl.h("Vars used in :in should be distinct",new $APP.k(null,2,[$APP.VI,F3,$APP.gy,b],null));c=s3($APP.pg,B3.g(a));if(!$APP.l(s2(c)))throw $APP.xl.h("Vars used in :with should be distinct",new $APP.k(null,2,[$APP.VI,F3,$APP.gy,b],null));c=q2(function(w){return w instanceof x2},D3.g(a),$APP.ci);d=q2(function(w){return w instanceof x2},E3.g(a),$APP.ci);c=$APP.qu.h(d,c);if(!$APP.Zd(c))throw $APP.xl.h(["Where uses unknown source vars: ",
$APP.aj.l($APP.B([$APP.Om.h($APP.am,c)]))].join(""),new $APP.k(null,3,[$APP.VI,F3,$APP.XH,c,$APP.gy,b],null));c=r2(function(w){return w instanceof k3},E3.g(a));a=r2(function(w){return w instanceof z2},D3.g(a));if(!$APP.Zd(c)&&$APP.Zd(a))throw $APP.xl.h("Missing rules var '%' in :in",new $APP.k(null,2,[$APP.VI,F3,$APP.gy,b],null));};
$Ra=function(a){if($APP.ce(a))var b=a;else if($APP.be(a))b=TRa(a);else throw $APP.xl.h("Query should be a vector or a map",new $APP.k(null,2,[$APP.VI,F3,$APP.gy,a],null));var c=b,d=NRa($APP.AC.h(c,$APP.pg));b=SRa(new $APP.k(null,5,[A3,DRa(WRa.g(c)),B3,function(){var e=YRa.g(c);if($APP.l(e)){var f=p2(C2,e);if($APP.l(f))e=f;else throw $APP.xl.h("Cannot parse :with clause, expected [ variable+ ]",new $APP.k(null,2,[$APP.VI,ZRa,$APP.gy,e],null));}else e=null;return e}(),C3,function(){var e=g3($APP.Cy,
$APP.Cy.g(c));if($APP.l(e))return e;e=g3($APP.ur,$APP.ur.g(c));return $APP.l(e)?e:g3(H3,H3.g(c))}(),D3,GRa(function(){var e=$APP.Ksa.g(c);return $APP.l(e)?e:$APP.Zd(r2(URa,d))?$APP.pg:new $APP.H(null,1,5,$APP.I,[c3],null)}()),E3,d],null));XRa(b,a,c);return b};I3=function(a,b,c,d,e,f){this.je=a;this.sources=b;this.rules=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};J3=function(a,b,c,d,e){this.qa=a;this.Ce=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
K3=function(a,b){return $APP.ru.h($APP.fi($APP.Vh(a)),$APP.fi($APP.Vh(b)))};aSa=function(a,b){return $APP.z.h($APP.Fd(a),$APP.Fd(b))&&$APP.Qf(function(c){return $APP.re(b,c)},$APP.Vh(a))&&$APP.Qf(function(c){return $APP.re(b,c)},$APP.Vh(a))};L3=function(a){return a instanceof $APP.t&&$APP.z.h("$",$APP.v($APP.hi(a)))};M3=function(a){return a instanceof $APP.t&&$APP.z.h("?",$APP.v($APP.hi(a)))};N3=function(a){return a instanceof $APP.F||"string"===typeof a};
P3=function(a){return O3(new $APP.H(null,2,5,$APP.I,[N3,$APP.bH],null),a)};bSa=function(a,b,c,d){for(var e=b.length,f=d.length,h=Array(e+f),m=0;;)if(m<e)h[m]=a[b[m]],m+=1;else break;for(a=0;;)if(a<f)h[e+a]=c[d[a]],a+=1;else break;return h};Q3=function(a){a=$APP.Gi.h($APP.am,$APP.Ce($APP.Cv.g(s3($APP.pg,a))));return new J3($APP.ii(a,$APP.Ym.C()),$APP.pg,null,null,null)};
R3=function(a,b){if(null!=a&&null!=a.$f)a=a.$f(a,b);else{var c=R3[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=R3._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("IBinding.in-\x3erel",a);}return a};
cSa=function(a,b){var c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c instanceof N2&&S3.g(c)instanceof x2?a=$APP.ym.P(a,T3,$APP.Zh,$APP.yo.h(c,new $APP.H(null,2,5,$APP.I,[S3,$APP.am],null)),b):c instanceof N2&&S3.g(c)instanceof z2?(c=$APP.Zh.j,b="string"===typeof b?$APP.vm.g(b):b,RRa(b),b=$APP.gj($APP.Ld,b),a=c.call($APP.Zh,a,$APP.LE,b)):a=$APP.ym.G(a,U3,$APP.Ve,R3(c,b));return a};
fSa=function(a,b,c){var d=$APP.Fd(b),e=$APP.Fd(c);if(d<e)throw $APP.xl.h(["Extra inputs passed, expected: ",$APP.aj.l($APP.B([$APP.Om.h(function(f){return $APP.ll.g($APP.Vd(f))},b)])),", got: ",$APP.aj.l($APP.B([e]))].join(""),new $APP.k(null,3,[$APP.VI,dSa,$APP.AG,b,eSa,c],null));if(d>e)throw $APP.xl.h(["Too few inputs passed, expected: ",$APP.aj.l($APP.B([$APP.Om.h(function(f){return $APP.ll.g($APP.Vd(f))},b)])),", got: ",$APP.aj.l($APP.B([e]))].join(""),new $APP.k(null,3,[$APP.VI,dSa,$APP.AG,b,
eSa,c],null));return $APP.Ae.j(cSa,a,$APP.ii(b,c))};gSa=function(a,b){var c=a.g?a.g(b):a.call(null,b);if($APP.re(V3,b)){if($APP.pe(c)){var d=c|0;return function(e){e=e[d];return"number"===typeof e?e:$APP.be(e)?r0(W3,e):NY(e)?r0(W3,e):e}}return function(e){e=e[c];return"number"===typeof e?e:$APP.be(e)?r0(W3,e):NY(e)?r0(W3,e):e}}return $APP.pe(c)?(d=c|0,function(e){return e[d]}):function(e){return e[c]}};
X3=function(a,b){var c=$APP.Fd(b);if(1===c)return gSa(a,$APP.v(b));b=$APP.zr.g(b);for(var d=0;;)if(d<c)b[d]=gSa(a,b[d]),d+=1;else return function(e,f,h){return function(m){return $APP.Jr.g(f.map(function(){return function(r){return r.g?r.g(m):r.call(null,m)}}(e,f,h)))}}(d,b,c)};hSa=function(a,b){var c=$APP.md;return $APP.Bc($APP.Ae.j(function(d,e){var f=a.g?a.g(e):a.call(null,e);return $APP.hh.j(d,f,$APP.Ve.h($APP.C.j(d,f,c),e))},$APP.zc($APP.wf),b))};
Z3=function(a,b){var c=Y3.g(a),d=Y3.g(b),e=o1.g(a),f=o1.g(b),h=$APP.Ce(K3(o1.g(a),o1.g(b)));a=$APP.Vh(e);b=$APP.Bc($APP.De(function(D,G){return $APP.l(e.g?e.g(G):e.call(null,G))?D:$APP.og.h(D,G)},$APP.zc($APP.pg),f));var m=$APP.Be($APP.Xh(e)),r=$APP.Be($APP.Xi($APP.Gi.g(f),b)),n=X3(e,h),w=X3(f,h),x=hSa(n,c);c=$APP.Bc($APP.Ae.j(function(D,G){var M=w(G);M=$APP.C.h(x,M);return null==M?D:$APP.Ae.j(function(U,Y){return $APP.og.h(U,bSa(Y,m,G,r))},D,M)},$APP.zc($APP.pg),d));return new J3($APP.ii($APP.K.h(a,
b),$APP.Ym.C()),c,null,null,null)};iSa=function(a,b){var c=$APP.xf(a),d=$APP.C.h(c,o1);c=$APP.C.h(c,Y3);var e=$APP.xf(b);b=$APP.C.h(e,o1);e=$APP.C.h(e,Y3);var f=$APP.Ce(K3(d,b));b=X3(b,f);var h=hSa(b,e),m=X3(d,f);return $APP.Zh.j(a,Y3,$APP.qg(function(r){r=m(r);return null==(h.g?h.g(r):h.call(null,r))},c))};
jSa=function(a,b){var c=$APP.Om.h(function(d){return $APP.z.h(d,$APP.bH)||M3(d)?null:d},b);a=o_(a,c);b=$APP.fh.h($APP.wf,$APP.ng.h(function(d){var e=$APP.A.j(d,0,null);$APP.A.j(d,1,null);return M3(e)},$APP.Gi.j($APP.qv,b,new $APP.H(null,4,5,$APP.I,["e","a","v","tx"],null))));return new J3(b,a,null,null,null)};
kSa=function(a,b){a=$APP.ng.h(function(d){a:for(var e=b;;){var f=d;if($APP.l($APP.l(f)?e:f)){f=$APP.v(d);var h=$APP.v(e);if($APP.z.h(h,$APP.bH)||M3(h)||$APP.z.h(f,h))d=$APP.y(d),e=$APP.y(e);else{d=!1;break a}}else{d=!0;break a}}return d},a);var c=$APP.fh.h($APP.wf,$APP.ng.h(function(d){var e=$APP.A.j(d,0,null);$APP.A.j(d,1,null);return M3(e)},$APP.Gi.j($APP.qv,b,$APP.Ym.C())));return new J3(c,$APP.Om.h($APP.Be,a),null,null,null)};
lSa=function(a,b){return(null!=a?$APP.bd===a.Ki||(a.yd?0:$APP.ob(gQa,a)):$APP.ob(gQa,a))?jSa(a,b):kSa(a,b)};$3=function(a,b){for(var c=$APP.pg;;){var d=$APP.v(a);if(null==d)return $APP.Ve.h(c,b);$APP.l($APP.yf(K3(o1.g(b),o1.g(d))))?(a=$APP.y(a),b=Z3(d,b)):(a=$APP.y(a),c=$APP.Ve.h(c,d))}};a4=function(a,b){return $APP.Tf(function(c){return $APP.re(o1.g(c),b)?c:null},U3.g(a))};
b4=function(a,b){var c=a4(a,b);if(null==c)return null;a=$APP.v(Y3.g(c));null==a?b=null:(c=o1.g(c),b=c.g?c.g(b):c.call(null,b),b=a[b]);return b};mSa=function(a,b){return $APP.Tf(function(c){return $APP.re(o1.g(a),c)},b)};nSa=function(a,b){var c=$APP.ng.h(function(e){return mSa(e,b)},U3.g(a)),d=$APP.Ae.h(c4,c);return new $APP.H(null,2,5,$APP.I,[$APP.ym.j(a,U3,function(e){return $APP.jr.h($APP.fi(c),e)}),d],null)};
oSa=function(a,b,c,d){a=T3.g(a);b=o1.g(b);for(var e=$APP.Fd(d),f=Array(e),h=Array(e),m=0;;)if(m<e){var r=$APP.A.h(d,m);if(r instanceof $APP.t){var n=$APP.C.h(a,r);null==n?h[m]=$APP.C.h(b,r):f[m]=n}else f[m]=r;m+=1}else break;return c===$APP.qv?function(w){for(var x=f.slice(0),D=0;;)if(D<e){var G=h[D];null!=G&&(x[D]=w[G]);D+=1}else break;return $APP.Vf.h(c,x)}:function(w){for(var x=0;;)if(x<e){var D=h[x];null!=D&&(f[x]=w[D]);x+=1}else break;return $APP.Vf.h(c,f)}};
pSa=function(a,b){var c=$APP.A.j(b,0,null);c=$APP.u(c);var d=$APP.v(c),e=$APP.y(c),f=function(){var r=$APP.C.h(y1,d);if($APP.l(r))return r;r=b4(a,d);if($APP.l(r))return r;if($APP.l(null))return null;if(null==a4(a,d))throw $APP.xl.h(["Unknown predicate '",$APP.aj.l($APP.B([d]))," in ",$APP.aj.l($APP.B([b]))].join(""),new $APP.k(null,3,[$APP.VI,d4,$APP.gy,b,$APP.Zn,d],null));return null}();c=nSa(a,$APP.ng.h($APP.fd,e));var h=$APP.A.j(c,0,null),m=$APP.A.j(c,1,null);c=$APP.l(f)?function(){var r=oSa(h,
m,f,e);return $APP.ym.j(m,Y3,function(n){return $APP.ng.h(r,n)})}():$APP.Zh.j(m,Y3,$APP.pg);return $APP.ym.G(h,U3,$APP.Ve,c)};
qSa=function(a,b){var c=$APP.A.j(b,0,null);c=$APP.u(c);var d=$APP.v(c),e=$APP.y(c);c=$APP.A.j(b,1,null);var f=Q2(c),h=function(){var n=$APP.C.h(y1,d);if($APP.l(n))return n;n=b4(a,d);if($APP.l(n))return n;if($APP.l(null))return null;if(null==a4(a,d))throw $APP.xl.h(["Unknown function '",$APP.aj.l($APP.B([d]))," in ",$APP.aj.l($APP.B([b]))].join(""),new $APP.k(null,3,[$APP.VI,d4,$APP.gy,b,$APP.Zn,d],null));return null}();c=nSa(a,$APP.ng.h($APP.fd,e));var m=$APP.A.j(c,0,null),r=$APP.A.j(c,1,null);c=
$APP.l(h)?function(){var n=oSa(m,r,h,e),w=function(){return function G(D){return new $APP.ef(null,function(){for(var M=D;;)if(M=$APP.u(M)){if($APP.he(M)){var U=$APP.Kc(M),Y=$APP.Fd(U),ba=$APP.gf(Y);a:for(var ca=0;;)if(ca<Y){var ea=$APP.Rd(U,ca),ma=n(ea);null!=ma&&$APP.nf(ba,c4.h(new J3(o1.g(r),new $APP.H(null,1,5,$APP.I,[ea],null),null,null,null),R3(f,ma)));ca+=1}else{U=!0;break a}return U?$APP.mf($APP.of(ba),G($APP.Lc(M))):$APP.mf($APP.of(ba),null)}ba=$APP.v(M);U=n(ba);if(null!=U)return $APP.Ye(c4.h(new J3(o1.g(r),
new $APP.H(null,1,5,$APP.I,[ba],null),null,null,null),R3(f,U)),G($APP.nd(M)));M=$APP.nd(M)}else return null},null,null)}(Y3.g(r))}();return $APP.Zd(w)?c4.h(r,Q3(f)):$APP.Ae.h(e4,w)}():c4.h($APP.Zh.j(r,Y3,$APP.pg),Q3(f));return $APP.ym.G(m,U3,$3,c)};
rSa=function(a,b){if($APP.be(b)){var c=L3($APP.v(b))?$APP.Kd(b):$APP.v(b);if(c instanceof $APP.t){if(M3(c)||$APP.re(new $APP.bi(null,new $APP.k(null,6,[$APP.ms,null,$APP.mz,null,t3,null,v3,null,$APP.rs,null,$APP.bH,null],null),null),c))return!1;if($APP.re($APP.LE.g(a),c))return!0;throw $APP.xl.h(["Unknown rule '",$APP.aj.l($APP.B([c]))," in ",$APP.aj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.VI,d4,$APP.gy,b],null));}}return!1};
tSa=function(a,b){var c=$APP.u(a),d=$APP.v(c),e=$APP.y(c),f=$APP.dj.h(sSa,$APP.td),h=$APP.C.h($APP.LE.g(b),d);return function n(r){return new $APP.ef(null,function(){for(;;){var w=$APP.u(r);if(w){var x=w;if($APP.he(x)){var D=$APP.Kc(x),G=$APP.Fd(D),M=$APP.gf(G);return function(){for(var ja=0;;)if(ja<G){var na=$APP.Rd(D,ja),oa=na,Ba=$APP.u(oa),Fa=$APP.v(Ba),La=$APP.y(Ba),Ra=Fa,Za=$APP.u(Ra),ab=$APP.v(Za),nb=$APP.y(Za),hb=ab,ib=nb,qb=La,vb=$APP.ii(ib,e);$APP.nf(M,$APP.Fs(function(Qb,hc,vc,jc,Xd,Fc,
gg,Kg,Af,sf,Di,Ei,sg,Aj,Kh,zd,Qi,hg,gk,qc,Oc,de,Rf,we,Lh,ah){return function(Nd){if(M3(Nd)){var jf=sg.g?sg.g(Nd):sg.call(null,Nd);return null==jf?$APP.Mi.g([$APP.hi(Nd),"__auto__",$APP.p.g(ah)].join("")):jf}return Nd}}(ja,oa,Ba,Fa,La,Ra,Za,ab,nb,hb,ib,qb,vb,na,D,G,M,x,w,a,c,d,e,d,e,f,h),qb));ja+=1}else return!0}()?$APP.mf($APP.of(M),n($APP.Lc(x))):$APP.mf($APP.of(M),null)}var U=$APP.v(x),Y=U,ba=$APP.u(Y),ca=$APP.v(ba),ea=$APP.y(ba),ma=ca,ta=$APP.u(ma),pa=$APP.v(ta),V=$APP.y(ta),P=pa,X=V,Q=ea,W=$APP.ii(X,
e);return $APP.Ye($APP.Fs(function(ja,na,oa,Ba,Fa,La,Ra,Za,ab,nb,hb,ib,qb,vb,Qb,hc,vc,jc,Xd,Fc,gg,Kg){return function(Af){if(M3(Af)){var sf=ib.g?ib.g(Af):ib.call(null,Af);return null==sf?$APP.Mi.g([$APP.hi(Af),"__auto__",$APP.p.g(Kg)].join("")):sf}return Af}}(Y,ba,ca,ea,ma,ta,pa,V,P,X,Q,W,U,x,w,a,c,d,e,d,e,f,h),Q),n($APP.nd(x)))}return null}},null,null)}(h)};
uSa=function(a,b){a=$APP.jr.h(function(c){var d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);return $APP.z.h(d,c)},$APP.Gi.j($APP.qv,a,b));return new $APP.H(null,2,5,$APP.I,[$APP.Gi.h($APP.v,a),$APP.Gi.h($APP.Kd,a)],null)};
vSa=function(a,b){a=$APP.u(a);var c=$APP.v(a),d=$APP.y(a);return function h(f){return new $APP.ef(null,function(){for(;;){var m=$APP.u(f);if(m){if($APP.he(m)){var r=$APP.Kc(m),n=$APP.Fd(r),w=$APP.gf(n);a:for(var x=0;;)if(x<n){var D=$APP.Rd(r,x),G=uSa(d,D);D=$APP.A.j(G,0,null);G=$APP.A.j(G,1,null);$APP.nf(w,new $APP.H(null,1,5,$APP.I,[$APP.K.l(new $APP.H(null,1,5,$APP.I,[f4],null),D,$APP.B([G]))],null));x+=1}else{r=!0;break a}return r?$APP.mf($APP.of(w),h($APP.Lc(m))):$APP.mf($APP.of(w),null)}w=$APP.v(m);
r=uSa(d,w);w=$APP.A.j(r,0,null);r=$APP.A.j(r,1,null);return $APP.Ye(new $APP.H(null,1,5,$APP.I,[$APP.K.l(new $APP.H(null,1,5,$APP.I,[f4],null),w,$APP.B([r]))],null),h($APP.nd(m)))}return null}},null,null)}($APP.C.h(b,c))};g4=function(a){var b=$APP.cj.g($APP.pg);$APP.Fs(function(c){$APP.l(M3.g?M3.g(c):M3.call(null,c))&&$APP.dj.j(b,$APP.Ve,c);return c},a);return $APP.q(b)};
wSa=function(a,b){function c(e){e=$APP.A.j(e,0,null);e=$APP.u(e);$APP.v(e);e=$APP.y(e);return $APP.Qf(d,e)}var d=$APP.fi(g4(a));return new $APP.H(null,2,5,$APP.I,[$APP.ng.h(c,b),$APP.jr.h(c,b)],null)};
ySa=function(a,b){function c(La){return $APP.Tf(function(Ra){return $APP.Zd(Y3.g(Ra))},U3.g(La))}function d(La,Ra){return $APP.Ae.j(h4,La,Ra)}for(var e=$APP.ng.h(M3,b),f=$APP.ii(e,$APP.Ym.C()),h=new $APP.E(null,new $APP.k(null,5,[i4,$APP.pg,j4,a,$APP.HL,new $APP.H(null,1,5,$APP.I,[b],null),k4,$APP.wf,l4,$APP.wf],null),null,1,null),m=new J3(f,$APP.pg,null,null,null);;){var r=$APP.v(h);if(null==r)return m;var n=r,w=$APP.ri(function(){return function(La){return!rSa(a,La)}}(h,m,n,r,e,f,d,c),$APP.HL.g(n)),
x=$APP.A.j(w,0,null),D=$APP.A.j(w,1,null),G=$APP.u(D),M=$APP.v(G),U=$APP.y(G),Y=M,ba=U;if(null==Y){b=d(j4.g(n),x);b=m4?m4(b,e):xSa.call(null,b,e);var ca=new J3(f,b,null,null,null);b=$APP.y(h);ca=e4(m,ca);h=b;m=ca}else{var ea=Y,ma=$APP.u(ea),ta=$APP.v(ma),pa=$APP.y(ma),V=ta,P=pa,X=vSa(Y,k4.g(n)),Q=wSa($APP.K.h(i4.g(n),x),$APP.K.h(X,l4.g(n))),W=$APP.A.j(Q,0,null),ja=$APP.A.j(Q,1,null);if($APP.l($APP.Tf(function(){return function(La){return $APP.z.h(La,new $APP.H(null,1,5,$APP.I,[$APP.J(f4)],null))}}(h,
m,ea,ma,ta,pa,V,P,X,Q,W,ja,w,x,D,G,M,U,Y,ba,n,r,e,f,d,c),W)))b=$APP.y(h),ca=m,h=b,m=ca;else{var na=$APP.K.h(x,W),oa=d(j4.g(n),na);if($APP.l(c(oa)))b=$APP.y(h),ca=m,h=b,m=ca;else{var Ba=$APP.Zh.j(k4.g(n),V,$APP.Ve.h($APP.C.j(k4.g(n),V,$APP.pg),P)),Fa=tSa(Y,a);b=$APP.K.h(function(){return function(La,Ra,Za,ab,nb,hb,ib,qb,vb,Qb,hc,vc,jc,Xd,Fc,gg,Kg,Af,sf,Di,Ei,sg,Aj,Kh,zd,Qi,hg,gk,qc,Oc){return function we(Rf){return new $APP.ef(null,function(Lh,ah,Nd,jf,Ri,zg,Bj,Ll,Si,Sm,hk,eo,Mh,fo,Ge,Ti,Tm,Ml,zh,
Sf,Ag,dd,ee,sc){return function(){for(;;){var Bf=$APP.u(Rf);if(Bf){if($APP.he(Bf)){var go=$APP.Kc(Bf),Gr=$APP.Fd(go),He=$APP.gf(Gr);a:for(var Lg=0;;)if(Lg<Gr){var JD=$APP.Rd(go,Lg);$APP.nf(He,new $APP.k(null,5,[i4,Ri,j4,zg,$APP.HL,$APP.fh.j($APP.pg,$APP.Vi,$APP.B([JD,sc])),k4,Nd,l4,Ti],null));Lg+=1}else{go=!0;break a}return go?$APP.mf($APP.of(He),we($APP.Lc(Bf))):$APP.mf($APP.of(He),null)}He=$APP.v(Bf);return $APP.Ye(new $APP.k(null,5,[i4,Ri,j4,zg,$APP.HL,$APP.fh.j($APP.pg,$APP.Vi,$APP.B([He,sc])),
k4,Nd,l4,Ti],null),we($APP.nd(Bf)))}return null}}}(La,Ra,Za,ab,nb,hb,ib,qb,vb,Qb,hc,vc,jc,Xd,Fc,gg,Kg,Af,sf,Di,Ei,sg,Aj,Kh,zd,Qi,hg,gk,qc,Oc),null,null)}}(h,m,Ba,Fa,na,oa,ea,ma,ta,pa,V,P,X,Q,W,ja,w,x,D,G,M,U,Y,ba,n,r,e,f,d,c)(Fa)}(),$APP.y(h));ca=m;h=b;m=ca}}}}};
zSa=function(a,b){if(null!=a?$APP.bd===a.Kh||(a.yd?0:$APP.ob(x_,a)):$APP.ob(x_,a)){var c=$APP.A.j(b,0,null),d=$APP.A.j(b,1,null),e=$APP.A.j(b,2,null),f=$APP.A.j(b,3,null);return $APP.Gk.j(new $APP.H(null,4,5,$APP.I,[$APP.l(function(){var h=P3(c);return $APP.l(h)?h:N3(c)}())?K0(a,c):c,d,$APP.l(function(){if($APP.l(e)){var h=N3(d);return h?(h=I0(a,d))?(h=P3(e),$APP.l(h)?h:N3(e)):h:h}return e}())?K0(a,e):e,$APP.l(P3(f))?K0(a,f):f],null),0,$APP.Fd(b))}return b};
ASa=function(a,b){var c=$APP.A.j(b,0,null),d=$APP.A.j(b,1,null),e=$APP.A.j(b,2,null);b=$APP.A.j(b,3,null);c=M3(c)?$APP.Ve.h($APP.ci,c):$APP.ci;c=M3(b)?$APP.Ve.h(c,b):c;return M3(e)&&!M3(d)&&I0(a,d)?$APP.Ve.h(c,e):c};n4=function(a,b){return $APP.Zh.j(a,U3,$APP.Rm.h(function(c){var d=$APP.yf($APP.$h(o1.g(c),b));return null==d?null:$APP.Zh.j(c,o1,d)},U3.g(a)))};o4=function(a){return $APP.fh.h($APP.ci,$APP.mg.l(function(b){return $APP.Vh(o1.g(b))},$APP.B([U3.g(a)])))};
p4=function(a,b,c){if($APP.Hja(b,a))return null;a=$APP.qu.h($APP.fi(b),a);throw $APP.xl.h(["Insufficient bindings: ",$APP.aj.l($APP.B([a]))," not bound in ",$APP.aj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.VI,d4,$APP.gy,c,$APP.XH,a],null));};
BSa=function(a,b,c){b=$APP.Om.h(function(d){return $APP.qu.h($APP.fi(g4(d)),a)},b);if($APP.l($APP.Vf.h($APP.z,b)))return null;throw $APP.xl.h(["All clauses in 'or' must use same set of free vars, had ",$APP.aj.l($APP.B([b]))," in ",$APP.aj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.VI,d4,$APP.gy,c,$APP.XH,b],null));};
CSa=function(a,b,c){for(var d=$APP.fi($APP.jr.h(a,b)),e=$APP.u(c),f=null,h=0,m=0;;)if(m<h){c=f.ea(null,m);var r=$APP.yf($APP.qu.h(d,$APP.fi(g4(c))));if(null!=r)throw e=r,$APP.At.l($APP.B([c,a,b,d])),$APP.xl.h(["All clauses in 'or' must use same set of free vars, had ",$APP.aj.l($APP.B([e]))," not bound in ",$APP.aj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.VI,d4,$APP.gy,c,$APP.XH,e],null));m+=1}else if(c=$APP.u(e)){e=c;if($APP.he(e))f=$APP.Kc(e),e=$APP.Lc(e),c=f,h=$APP.Fd(f),f=c;else{c=$APP.v(e);
f=$APP.yf($APP.qu.h(d,$APP.fi(g4(c))));if(null!=f)throw e=f,$APP.At.l($APP.B([c,a,b,d])),$APP.xl.h(["All clauses in 'or' must use same set of free vars, had ",$APP.aj.l($APP.B([e]))," not bound in ",$APP.aj.l($APP.B([c]))].join(""),new $APP.k(null,3,[$APP.VI,d4,$APP.gy,c,$APP.XH,e],null));e=$APP.y(e);f=null;h=0}m=0}else return null};DSa=function(a,b){var c=W3;W3=$APP.C.h(T3.g(a),c3);try{return $APP.Ae.j(q4,a,b)}finally{W3=c}};
ESa=function(a,b,c,d){return $APP.Xi($APP.rp.h($APP.Gi.g(function(e){return $APP.Xi($APP.Gi.g(function(f){for(var h=$APP.ub(e),m=0;;)if(m<c){var r=d[m];null!=r&&(h[m]=f[r]);m+=1}else break;return h}),Y3.g(b))}),$APP.Vi),a)};xSa=function(a){switch(arguments.length){case 2:return m4(arguments[0],arguments[1]);case 3:return FSa(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};
m4=function(a,b){a=U3.g(a);return FSa(new $APP.H(null,1,5,$APP.I,[Array($APP.Fd(b))],null),a,b)};FSa=function(a,b,c){for(;;){var d=$APP.v(b);if(null==d)return a;if($APP.Zd(Y3.g(d)))return $APP.pg;var e=$APP.$h(o1.g(d),c);if($APP.Zd(e))b=$APP.y(b);else{e=$APP.Be($APP.Gi.h(function(h,m,r,n){return function(w){return $APP.C.h(n,w)}}(a,b,c,e,d),c));var f=$APP.Fd(c);a=ESa(a,d,f,e);b=$APP.y(b)}}};GSa=function(a,b){return $APP.fh.j($APP.ci,$APP.Gi.g($APP.Ce),m4(a,b))};
r4=function(a,b){if(null!=a&&null!=a.ag)a=a.ag(a,b);else{var c=r4[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=r4._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.rb("IContextResolve.-context-resolve",a);}return a};
HSa=function(a,b,c){return $APP.Om.G(function(d,e,f){if($2(d)){e=r4($APP.$n.g(d),b);d=$APP.Gi.h(function(m){return r4(m,b)},$APP.gi($APP.Em.g(d)));var h=$APP.Gi.h(function(m){return $APP.A.h(m,f)},c);return $APP.Vf.h(e,$APP.K.h(d,new $APP.H(null,1,5,$APP.I,[h],null)))}return e},a,$APP.v(c),$APP.Ym.C())};ISa=function(a){var b=$APP.Wf($2);return $APP.jr.h($APP.fb,$APP.Gi.j(function(c,d){return $APP.l(b.g?b.g(c):b.call(null,c))?d:null},a,$APP.Ym.C()))};
JSa=function(a,b,c){var d=ISa(a);return function h(f){return new $APP.ef(null,function(){for(;;){var m=$APP.u(f);if(m){if($APP.he(m)){var r=$APP.Kc(m),n=$APP.Fd(r),w=$APP.gf(n);a:for(var x=0;;)if(x<n){var D=$APP.Rd(r,x);$APP.A.j(D,0,null);D=$APP.A.j(D,1,null);$APP.nf(w,HSa(a,b,D));x+=1}else{r=!0;break a}return r?$APP.mf($APP.of(w),h($APP.Lc(m))):$APP.mf($APP.of(w),null)}w=$APP.v(m);$APP.A.j(w,0,null);w=$APP.A.j(w,1,null);return $APP.Ye(HSa(a,b,w),h($APP.nd(m)))}return null}},null,null)}($APP.gj(function(f){return $APP.Gi.h(function(h){return $APP.A.h(f,
h)},d)},c))};KSa=function(a,b){return $APP.Ae.j(function(c,d){return $APP.Ve.h(c,a.g?a.g(d):a.call(null,d))},$APP.Qd(b),b)};LSa=function(a,b){var c=G3.g(a),d=$APP.Ym.h(0,$APP.Fd(c));return KSa(function(e){return $APP.Ae.j(function(f,h){return $APP.Zh.j(f,$APP.A.h(c,h),$APP.A.h(e,h))},$APP.wf,d)},b)};
s4=function(a,b,c){if(null!=a&&null!=a.bg)a=a.bg(a,b,c);else{var d=s4[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=s4._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.rb("IPostProcess.-post-process",a);}return a};
MSa=function(a,b,c){var d=function(){return function h(f){return new $APP.ef(null,function(){for(;;){var m=$APP.u(f);if(m){if($APP.he(m)){var r=$APP.Kc(m),n=$APP.Fd(r),w=$APP.gf(n);return function(){for(var D=0;;)if(D<n){var G=$APP.Rd(r,D),M=w;if(a3(G)){var U=r4($APP.ll.g(G),b);G=r4(f1.g(G),b);U=S1(U,G,null)}else U=null;M.add(U);D+=1}else return!0}()?$APP.mf($APP.of(w),h($APP.Lc(m))):$APP.mf($APP.of(w),null)}var x=$APP.v(m);return $APP.Ye(a3(x)?function(){var D=r4($APP.ll.g(x),b),G=r4(f1.g(x),b);
return S1(D,G,null)}():null,h($APP.nd(m)))}return null}},null,null)}(a)}();return function h(f){return new $APP.ef(null,function(){for(;;){var m=$APP.u(f);if(m){var r=m;if($APP.he(r)){var n=$APP.Kc(r),w=$APP.Fd(n),x=$APP.gf(w);return function(){for(var G=0;;)if(G<w){var M=$APP.Rd(n,G);$APP.nf(x,$APP.Om.j(function(){return function(U,Y){return $APP.l(U)?Q1(U,Y):Y}}(G,M,n,w,x,r,m,d),d,M));G+=1}else return!0}()?$APP.mf($APP.of(x),h($APP.Lc(r))):$APP.mf($APP.of(x),null)}var D=$APP.v(r);return $APP.Ye($APP.Om.j(function(){return function(G,
M){return $APP.l(G)?Q1(G,M):M}}(D,r,m,d),d,D),h($APP.nd(r)))}return null}},null,null)}(c)};NSa=function(a){return null==OZ.g(a)?a:$APP.ym.G(a,OZ,Y1,a)};t4=function(a,b){if(a instanceof L_){var c=a.cc,d=a.wc;return new L_(d,function(e){var f=c.g?c.g(e):c.call(null,e);return $APP.l(f)?b.h?b.h(d,e):b.call(null,d,e):f},$APP.cj.g(0),null,null,null)}return new L_(a,function(e){return b.h?b.h(a,e):b.call(null,a,e)},$APP.cj.g(0),null,null,null)};
u4=function(a){switch(arguments.length){case 2:return u4.h(arguments[0],arguments[1]);case 3:return u4.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};v4=function(a,b){return j0.g(u4.h(a,b))};w4=function(a,b,c,d){return t_(a,b,c,d)};
B4=function(a){if(null==$1(a))return $APP.cj.l(a,$APP.B([$APP.Ta,new $APP.k(null,1,[x4,$APP.cj.g($APP.wf)],null)]));y4.g(a);return $APP.cj.l(a,$APP.B([$APP.Ta,new $APP.k(null,3,[x4,$APP.cj.g($APP.wf),z4,$APP.cj.g($APP.pg),A4,$APP.cj.g(a)],null)]))};
PSa=function(a,b,c){var d=$APP.cj.g(null),e=OSa.g(c),f=$APP.nl.h(c,OSa);$APP.dj.h(a,function(n){n=u4.j(n,b,f);$APP.Zf(d,n);return j0.g(n)});if(null!=$1($APP.q(a))){c=$APP.q(d);var h=$APP.xf(c);c=$APP.C.h(h,j0);var m=$APP.C.h(h,k0);h=XZ($APP.C_.g(c));var r=z4.g($APP.Vd(a));m=$APP.dj.j(r,$APP.Ve,m);$APP.l(e)||($APP.Iu.G($APP.Gi.g($APP.Fd),$APP.Ju,0,m)>VZ.g(h)?(d2(c,Z1(c),!1),$APP.Zf(r,$APP.pg),$APP.Zf(A4.g($APP.Vd(a)),c)):oRa(c,m))}return $APP.q(d)};
C4=function(a,b){(null!=a?a.J&32768||$APP.bd===a.Pe||(a.J?0:$APP.ob($APP.Wb,a)):$APP.ob($APP.Wb,a))&&$APP.q(a);b=$APP.dj.j(a,rQa,b);null!=$1($APP.q(a))&&(d2(b,Z1(b),!0),$APP.Zf(z4.g($APP.Vd(a)),$APP.pg),$APP.Zf(A4.g($APP.Vd(a)),b));return b};D4=function(a){return $APP.q(a)};QSa=function(a){return XZ($APP.C_.g(a))};E4=function E4(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return E4.l(0<c.length?new $APP.jd(c.slice(0),0,null):null)};
E4.l=function(a){return $APP.qca(a,$APP.Zh.j($APP.Ya(),$APP.Qa,!1))};E4.A=0;E4.F=function(a){return this.l($APP.u(a))};RSa=new $APP.t("datascript.core","squuid","datascript.core/squuid",-408746813,null);N_=new $APP.F("db.unique","identity","db.unique/identity",1675950722);Q0=new $APP.F("db","retract","db/retract",-1549825231);SSa=new $APP.t("datascript.db","IDatom","datascript.db/IDatom",293960966,null);TSa=new $APP.F(null,"-store","-store",86010660);
USa=new $APP.F(null,"incomparable","incomparable",1634329662);VSa=new $APP.t(null,"datom-tx","datom-tx",1349109608,null);H3=new $APP.F(null,"strs","strs",1175537277);oQa=new $APP.F("db.cardinality","one","db.cardinality/one",1428352190);G0=new $APP.F("transact","upsert","transact/upsert",412688078);C3=new $APP.F(null,"qreturn-map","qreturn-map",1841215994);QQa=new $APP.F("transact","schema","transact/schema",1426844139);WSa=new $APP.t(null,"datom-added","datom-added",-363961980,null);
XSa=new $APP.t(null,"entity?","entity?",555338193,null);YSa=new $APP.t("datascript.core","filter","datascript.core/filter",-1276765471,null);F4=new $APP.F(null,"acc","acc",838566312);ZSa=new $APP.F("lookup-ref","unique","lookup-ref/unique",-960647710);y3=new $APP.F("parser","rule","parser/rule",-464044566);$Sa=new $APP.t("datascript.impl.entity","lookup-entity","datascript.impl.entity/lookup-entity",243995956,null);aTa=new $APP.t("datascript.core","q","datascript.core/q",2106686416,null);
A4=new $APP.F(null,"db-last-stored","db-last-stored",-2068760702);bTa=new $APP.t(null,"added","added",-596784081,null);d3=new $APP.F("parser","find","parser/find",-801023103);cTa=new $APP.t(null,"entity","entity",1189561251,null);s1=new $APP.F(null,"wildcard?","wildcard?",-686044101);L0=new $APP.F("datascript.db","tx-redundant","datascript.db/tx-redundant",-1117921977);dTa=new $APP.t("datascript.storage","restore-impl","datascript.storage/restore-impl",1300814044,null);
eTa=new $APP.t(null,"tail-addr","tail-addr",1565233666,null);fTa=new $APP.t("datascript.core","restore","datascript.core/restore",-655548009,null);F3=new $APP.F("parser","query","parser/query",1877320671);gTa=new $APP.t(null,"_opts","_opts",1634624069,null);q1=new $APP.F(null,"last-attr","last-attr",-526000708);HQa=new $APP.F(null,"conflict","conflict",1978796605);hTa=new $APP.F("db","fn","db/fn",-1175261470);iTa=new $APP.t("datascript.core","touch","datascript.core/touch",632058772,null);
jTa=new $APP.t(null,"nbb.impl.datascript","nbb.impl.datascript",-1651830048,null);g1=new $APP.F(null,"recursion-limit","recursion-limit",52345639);kTa=new $APP.t("datascript.storage","-restore","datascript.storage/-restore",708714346,null);R_=new $APP.F("db.type","ref","db.type/ref",-1728373079);lTa=new $APP.t(null,"variance","variance",-1522424942,null);mTa=new $APP.t("datascript.core","reset-conn!","datascript.core/reset-conn!",-458464444,null);
nTa=new $APP.t("datascript.core","with","datascript.core/with",-1124098173,null);oTa=new $APP.F(null,"-restore","-restore",-515892319);H0=new $APP.F("db","id","db/id",-1388397098);pTa=new $APP.F("db.fn","retractAttribute","db.fn/retractAttribute",937402164);qTa=new $APP.t("datascript.db","datom-added","datascript.db/datom-added",-560586371,null);rTa=new $APP.F("lookup-ref","syntax","lookup-ref/syntax",-317304012);
sTa=new $APP.t("datascript.storage","serializable-datom","datascript.storage/serializable-datom",33076367,null);tTa=new $APP.t("nbb.impl.datascript","-store","nbb.impl.datascript/-store",2093703726,null);uTa=new $APP.t("datascript.core","db","datascript.core/db",667170070,null);G4=new $APP.t(null,"addr","addr",42880790,null);vTa=new $APP.t(null,"-index-range","-index-range",898114142,null);wTa=new $APP.t(null,"settings","settings",-1098290894,null);k0=new $APP.F(null,"tx-data","tx-data",934159761);
k4=new $APP.F(null,"used-args","used-args",23596256);xTa=new $APP.t("datascript.core","rseek-datoms","datascript.core/rseek-datoms",-1377097474,null);yTa=new $APP.t("nbb.impl.datascript","-restore","nbb.impl.datascript/-restore",1970738477,null);zTa=new $APP.t(null,"make-storage-adapter","make-storage-adapter",937815346,null);E3=new $APP.F(null,"qwhere","qwhere",-1645067378);V_=new $APP.F("db","ident","db/ident",-737096);l0=new $APP.F(null,"tempids","tempids",1767509089);
A3=new $APP.F(null,"qfind","qfind",1529332972);ATa=new $APP.t("datascript.core","serializable","datascript.core/serializable",-630048076,null);j4=new $APP.F(null,"prefix-context","prefix-context",-1269613591);BTa=new $APP.t(null,"store-impl!","store-impl!",901017629,null);Q_=new $APP.F("db.cardinality","many","db.cardinality/many",772806234);A0=new $APP.F("datascript.db","queued-tuples","datascript.db/queued-tuples",-762852029);
CTa=new $APP.t("datascript.core","pull","datascript.core/pull",-1213970902,null);DTa=new $APP.t("datascript.impl.entity","entity?","datascript.impl.entity/entity?",1686472137,null);j0=new $APP.F(null,"db-after","db-after",-571884666);p3=new $APP.F("parser","where","parser/where",-966053850);ETa=new $APP.t(null,"restore-impl","restore-impl",1420181842,null);H4=new $APP.F(null,"seen","seen",-518999789);FTa=new $APP.t("clojure.string","starts-with?","clojure.string/starts-with?",656256322,null);
P_=new $APP.F("db.unique","value","db.unique/value",276903088);GTa=new $APP.F("db","tupleTypes","db/tupleTypes",1512507626);O0=new $APP.F("db.fn","retractEntity","db.fn/retractEntity",-1423535441);I4=new $APP.t(null,"attr","attr",1036399174,null);HTa=new $APP.t(null,"storage-adapter","storage-adapter",-1255219640,null);ITa=new $APP.F("entity-id","missing","entity-id/missing",1234588374);JTa=new $APP.t("datascript.storage","storage-adapter","datascript.storage/storage-adapter",-1942259762,null);
v3=new $APP.t(null,"or-join","or-join",591375469,null);KTa=new $APP.F("db.pull","reverse","db.pull/reverse",1999788297);LTa=new $APP.t(null,"db-from-reader","db-from-reader",1527469533,null);MTa=new $APP.t(null,"println-str","println-str",-2049216703,null);ZRa=new $APP.F("parser","with","parser/with",-386255821);NTa=new $APP.t(null,"missing?","missing?",-1710383910,null);OTa=new $APP.t("clojure.string","ends-with?","clojure.string/ends-with?",-745964149,null);
PTa=new $APP.t("datascript.core","reset-schema!","datascript.core/reset-schema!",-331506672,null);QTa=new $APP.t("datascript.core","transact!","datascript.core/transact!",1506351773,null);u_=new $APP.F(null,"avet","avet",1383857032);J4=new $APP.t(null,"schema","schema",58529736,null);T0=new $APP.F(null,"entity","entity",-450970276);RTa=new $APP.t(null,"serializable-datom","serializable-datom",451141133,null);STa=new $APP.t("datascript.db","datom-tx","datascript.db/datom-tx",2084964209,null);
FRa=new $APP.F("parser","in","parser/in",1617442048);qQa=new $APP.F(null,"init-db","init-db",1595181278);TTa=new $APP.F(null,"addresses","addresses",-559529694);QZ=new $APP.F(null,"cmp","cmp",575646375);J_=new $APP.F(null,"hash","hash",-13781596);UTa=new $APP.t(null,"with","with",104234651,null);k1=new $APP.F(null,"multival?","multival?",1072388383);ZQa=new $APP.F("parser","pull","parser/pull",-2147427204);K4=new $APP.t(null,"tx","tx",2107161945,null);
VTa=new $APP.t("datascript.core","store","datascript.core/store",1386427333,null);L4=new $APP.t(null,"tx-data","tx-data",-1720276008,null);z4=new $APP.F(null,"tx-tail","tx-tail",1116487556);WTa=new $APP.t(null,"reset-conn!","reset-conn!",1315177148,null);q3=new $APP.F(null,"rule-vars","rule-vars",1665972520);a0=new $APP.F("db","valueType","db/valueType",1827971944);xQa=new $APP.F("retract","schema","retract/schema",1546437764);D_=new $APP.F(null,"aevt","aevt",-585148059);
XTa=new $APP.F("datascript","db","datascript/db",-1190971692);M4=new $APP.t(null,"-store","-store",1726542187,null);YTa=new $APP.F(null,"thaw-fn","thaw-fn",-240544261);N4=new $APP.F(null,"binding","binding",539932593);GQa=new $APP.F(null,"assertion","assertion",-1645134882);$APP.f0=new $APP.F(null,"datoms","datoms",-290874434);b3=new $APP.t(null,"pull","pull",779986722,null);SZ=new $APP.F(null,"set-metadata","set-metadata",1293757705);
ZTa=new $APP.t("datascript.core","conn-from-datoms","datascript.core/conn-from-datoms",253878827,null);$Ta=new $APP.t(null,"untuple","untuple",-606149900,null);O4=new $APP.t(null,"c0","c0",2105080311,null);aUa=new $APP.t(null,"index-range","index-range",1044940937,null);f4=new $APP.t(null,"-differ?","-differ?",1465687357,null);S_=new $APP.F("db","isComponent","db/isComponent",423352398);P4=new $APP.t(null,"db","db",-1661185010,null);bUa=new $APP.t(null,"sample","sample",1719555128,null);
Q4=new $APP.t(null,"datom","datom",1268975437,null);cUa=new $APP.F(null,"serialize","serialize",-69216574);T_=new $APP.F("db","tupleAttrs","db/tupleAttrs",250080092);h1=new $APP.F(null,"recursive?","recursive?",1340075244);R4=new $APP.t(null,"conn","conn",1918841190,null);dUa=new $APP.F(null,"thaw-kw","thaw-kw",1076733097);l4=new $APP.F(null,"pending-guards","pending-guards",-1255527308);eUa=new $APP.F("query","binding","query/binding",698240489);
mRa=new $APP.F(null,"avet-metadata","avet-metadata",1556019837);VRa=new $APP.F(null,"return-map","return-map",1620104901);fUa=new $APP.t("datascript.core","seek-datoms","datascript.core/seek-datoms",1389812273,null);Y3=new $APP.F(null,"tuples","tuples",-676032639);gUa=new $APP.t("datascript.core","settings","datascript.core/settings",273729994,null);S4=new $APP.F(null,"branches","branches",-1240337268);T4=new $APP.t(null,"datoms","datoms",1349657093,null);
hUa=new $APP.F("transact","cas","transact/cas",816687170);iUa=new $APP.t("clojure.string","blank?","clojure.string/blank?",1772874244,null);jUa=new $APP.t(null,"validate-schema","validate-schema",758884380,null);x4=new $APP.F(null,"listeners","listeners",394544445);$APP.C_=new $APP.F(null,"eavt","eavt",-666437073);E_=new $APP.F(null,"max-eid","max-eid",2134868075);kUa=new $APP.t("datascript.storage","store","datascript.storage/store",-769865397,null);
lUa=new $APP.t("datascript.core","index-range","datascript.core/index-range",-1484576383,null);mUa=new $APP.t(null,"tuple","tuple",1167864243,null);nUa=new $APP.F("db","retractEntity","db/retractEntity",-1452737935);oUa=new $APP.t("datascript.core","listen!","datascript.core/listen!",1659161258,null);Z_=new $APP.F(null,"attribute","attribute",-2074029119);$APP.B_=new $APP.F(null,"schema","schema",-1582001791);pUa=new $APP.t(null,"G__38148","G__38148",1756120371,null);
qUa=new $APP.t("datascript.db","DB","datascript.db/DB",348347258,null);rUa=new $APP.t("datascript.storage","store-tail","datascript.storage/store-tail",-1145162646,null);sUa=new $APP.t("datascript.storage","-\x3eStorageAdapter","datascript.storage/-\x3eStorageAdapter",152620751,null);tUa=new $APP.t("datascript.db","Datom","datascript.db/Datom",1951800754,null);U4=new $APP.F(null,"recursion-limits","recursion-limits",1762857814);z1=new $APP.t(null,"...","...",-1926939749,null);
tRa=new $APP.F(null,"freeze-kw","freeze-kw",391758233);U_=new $APP.F("db.type","tuple","db.type/tuple",938234914);uUa=new $APP.t(null,"lookup-entity","lookup-entity",-936060612,null);O_=new $APP.F("db","index","db/index",-1531680669);kRa=new $APP.F(null,"max-addr","max-addr",1373100454);sRa=new $APP.F(null,"freeze-fn","freeze-fn",-575885995);vUa=new $APP.t("datascript.core","db-with","datascript.core/db-with",-1263574350,null);OSa=new $APP.F(null,"skip-store?","skip-store?",-484019625);
wUa=new $APP.t(null,"db-with-tail","db-with-tail",-1072910014,null);xUa=new $APP.t("datascript.impl.entity","Entity","datascript.impl.entity/Entity",920807502,null);WZ=new $APP.F(null,"ref-type","ref-type",-1367328851);M_=new $APP.F("db","unique","db/unique",329396388);yUa=new $APP.F("entity-id","syntax","entity-id/syntax",1921317045);nRa=new $APP.F(null,"eavt-metadata","eavt-metadata",-1384819842);T3=new $APP.F(null,"sources","sources",-321166424);
zUa=new $APP.F("datascript.db","flush-tuples","datascript.db/flush-tuples",-797350002);V4=new $APP.t(null,"tx-meta","tx-meta",-1495152575,null);W4=new $APP.t(null,"delete-addrs","delete-addrs",742195107,null);lRa=new $APP.F(null,"aevt-metadata","aevt-metadata",-1844063817);m0=new $APP.F(null,"tx-meta","tx-meta",1159283194);AUa=new $APP.t(null,"pull-many","pull-many",1857679657,null);BUa=new $APP.t(null,"conn-from-db","conn-from-db",-184109372,null);
CUa=new $APP.t(null,"ground","ground",-1460862835,null);DUa=new $APP.t("datascript","Datom","datascript/Datom",-901340080,null);f1=new $APP.F(null,"pattern","pattern",242135423);vRa=new $APP.F("parser","rule-var","parser/rule-var",-1584354459);EUa=new $APP.t("datascript.core","create-conn","datascript.core/create-conn",-768042587,null);FUa=new $APP.F(null,"new","new",-2085437848);iQa=new $APP.F(null,"index","index",-1531685915);
GUa=new $APP.t("datascript.core","empty-db","datascript.core/empty-db",-807971396,null);HUa=new $APP.t(null,"stddev","stddev",775056588,null);w0=new $APP.F(null,"entity-id","entity-id",1485898093);IUa=new $APP.t(null,"store-tail","store-tail",-757879320,null);JUa=new $APP.F("db","cas","db/cas",-451542322);KUa=new $APP.t("datascript.core","from-serializable","datascript.core/from-serializable",-1560031101,null);F_=new $APP.F(null,"max-tx","max-tx",1119558339);
LUa=new $APP.F("db","tupleType","db/tupleType",448013354);p1=new $APP.F(null,"first-attr","first-attr",-1993039831);l1=new $APP.F(null,"ref?","ref?",1932693720);MUa=new $APP.t(null,"sum","sum",1777518341,null);X4=new $APP.F(null,"attr","attr",-604132353);R1=new $APP.F(null,"visitor","visitor",-1026865865);Y4=new $APP.F(null,"elements","elements",657646735);NUa=new $APP.F("datascript.impl.entity","nf","datascript.impl.entity/nf",-953741353);d4=new $APP.F("query","where","query/where",-1935159429);
OUa=new $APP.t("datascript.storage","-store","datascript.storage/-store",-1879938067,null);F0=new $APP.F(null,"context","context",-830191113);PUa=new $APP.t("datascript.db","validate-schema","datascript.db/validate-schema",-783030261,null);QUa=new $APP.t("datascript.storage","store-impl!","datascript.storage/store-impl!",1553932187,null);RUa=new $APP.t(null,"!\x3d","!\x3d",-201205829,null);U3=new $APP.F(null,"rels","rels",1770187185);
SUa=new $APP.t("datascript.core","init-db","datascript.core/init-db",1493526573,null);i0=new $APP.F(null,"db-before","db-before",-553691536);TUa=new $APP.t(null,"adapter","adapter",444204808,null);S0=new $APP.F("datascript.db","value-tempids","datascript.db/value-tempids",244806162);CQa=new $APP.F(null,"datom","datom",-371556090);cQa=new $APP.F(null,"strong","strong",269529E3);BQa=new $APP.F("transact","unique","transact/unique",-940992320);
UUa=new $APP.t("datascript.db","datom","datascript.db/datom",399198004,null);VUa=new $APP.t(null,"seek-datoms","seek-datoms",-1423344839,null);WUa=new $APP.F(null,"old","old",-1825222690);XUa=new $APP.F("db.pull","attr","db.pull/attr",-533298746);Z4=new $APP.F(null,"db","db",993250759);YUa=new $APP.t("datascript.core","conn-from-db","datascript.core/conn-from-db",1590561228,null);hRa=new $APP.F("db.pull","wildcard","db.pull/wildcard",116316031);H_=new $APP.F(null,"pull-patterns","pull-patterns",-343695048);
ZUa=new $APP.t("datascript.storage","restore","datascript.storage/restore",1486895617,null);$Ua=new $APP.t(null,"init-db","init-db",-1059254491,null);aVa=new $APP.F(null,"internal-ctor","internal-ctor",937392560);bVa=new $APP.t(null,"datom-from-reader","datom-from-reader",1334075127,null);S3=new $APP.F(null,"variable","variable",-281346492);cVa=new $APP.t(null,"restore-conn","restore-conn",-1560700042,null);dVa=new $APP.t(null,"transact!","transact!",817805717,null);
W_=new $APP.F("db","attrTuples","db/attrTuples",860541631);m1=new $APP.F(null,"component?","component?",407783990);c3=new $APP.t(null,"$","$",-1580747756,null);CRa=new $APP.t(null,"aggregate","aggregate",-1142967327,null);J0=new $APP.F("db","add","db/add",235286841);I_=new $APP.F(null,"pull-attrs","pull-attrs",-974863177);R2=new $APP.F("parser","binding","parser/binding",-346395752);eVa=new $APP.t("datascript.db","datom-from-reader","datascript.db/datom-from-reader",2070683374,null);
fVa=new $APP.t(null,"map-\x3eStorageAdapter","map-\x3eStorageAdapter",1827547664,null);$4=new $APP.F(null,"element","element",1974019749);pZ=new $APP.F(null,"dirty","dirty",729553281);gVa=new $APP.t("datascript.storage","map-\x3eStorageAdapter","datascript.storage/map-\x3eStorageAdapter",1938064274,null);a5=new $APP.t(null,"DB","DB",1622874957,null);hVa=new $APP.t(null,"get-some","get-some",409442058,null);iVa=new $APP.t(null,"avg","avg",1837937727,null);
b5=new $APP.F(null,"unfiltered-db","unfiltered-db",-1363720391);o1=new $APP.F(null,"attrs","attrs",-2090668713);jQa=new $APP.F(null,"components","components",-1073188942);OZ=new $APP.F(null,"storage","storage",1867247511);jVa=new $APP.t(null,"StorageAdapter","StorageAdapter",106942083,null);VZ=new $APP.F(null,"branching-factor","branching-factor",1903198601);kVa=new $APP.t(null,"create-conn","create-conn",2071410861,null);
lVa=new $APP.t("datascript.storage","tail-addr","datascript.storage/tail-addr",1147435392,null);j1=new $APP.F(null,"xform","xform",-1725711008);t3=new $APP.t(null,"not-join","not-join",-645515756,null);B3=new $APP.F(null,"qwith","qwith",-45809392);YRa=new $APP.F(null,"with","with",-1536296876);mVa=new $APP.t("datascript.core","datoms","datascript.core/datoms",961250077,null);I2=new $APP.F("parser","rule-vars","parser/rule-vars",-1493174969);
nVa=new $APP.t("datascript.core","tx0","datascript.core/tx0",1432817831,null);oVa=new $APP.t("datascript.core","entity","datascript.core/entity",-1406213973,null);r1=new $APP.F(null,"reverse-attrs","reverse-attrs",630097702);Y_=new $APP.F("schema","validation","schema/validation",1178447161);eSa=new $APP.F(null,"got","got",-1674745710);c5=new $APP.t(null,"Datom","Datom",1208901035,null);i1=new $APP.F(null,"reverse?","reverse?",-1672868474);dSa=new $APP.F("query","inputs","query/inputs",1042810394);
b0=new $APP.F("db","cardinality","db/cardinality",-104975659);pVa=new $APP.t(null,"serializable","serializable",1941609404,null);qVa=new $APP.t("datascript.db","db-from-reader","datascript.db/db-from-reader",266573302,null);rVa=new $APP.t(null,"count-distinct","count-distinct",-1566572514,null);sVa=new $APP.t("datascript.storage","storage","datascript.storage/storage",-366769060,null);d5=new $APP.t(null,"datascript.impl.entity","datascript.impl.entity",1561405407,null);
tVa=new $APP.t(null,"listen!","listen!",-115577950,null);uVa=new $APP.t("datascript.storage","IStorage","datascript.storage/IStorage",247541567,null);vVa=new $APP.t("datascript.storage","make-storage-adapter","datascript.storage/make-storage-adapter",521032624,null);wVa=new $APP.t(null,"db-with","db-with",233242042,null);e5=new $APP.F("db.fn","call","db.fn/call",-151594418);xVa=new $APP.t(null,"force?","force?",-815397094,null);i4=new $APP.F(null,"prefix-clauses","prefix-clauses",1294180028);
yVa=new $APP.F("db","doc","db/doc",1913350069);zVa=new $APP.t(null,"touch","touch",-1158163300,null);AVa=new $APP.t("datascript.core","datom","datascript.core/datom",-1596234155,null);vQa=new $APP.F("db","current-tx","db/current-tx",1600722132);oZ=new $APP.F(null,"address","address",559499426);BVa=new $APP.t(null,"reset-schema!","reset-schema!",1937111832,null);CVa=new $APP.t("datascript.core","restore-conn","datascript.core/restore-conn",-877528562,null);
DVa=new $APP.t("datascript.storage","db-with-tail","datascript.storage/db-with-tail",-1156179008,null);EVa=new $APP.F(null,"operation","operation",-1267664310);hQa=new $APP.F(null,"index-access","index-access",-1548960265);FVa=new $APP.t(null,"datascript.storage","datascript.storage",315947890,null);D3=new $APP.F(null,"qin","qin",1372651151);f5=new $APP.t(null,"storage","storage",-787188258,null);G3=new $APP.F(null,"symbols","symbols",1211743);GVa=new $APP.t(null,"squuid","squuid",-1898207797,null);
u1=new $APP.F(null,"fragment","fragment",826775688);HVa=new $APP.F("transaction","filtered","transaction/filtered",1699706605);R0=new $APP.F("datascript.db","internal","datascript.db/internal",-249301114);G_=new $APP.F(null,"rschema","rschema",-1196134054);IVa=new $APP.t(null,"conn-from-datoms","conn-from-datoms",-1502002909,null);g5=new $APP.t(null,"addr+data-seq","addr+data-seq",1516602343,null);JVa=new $APP.t(null,"store","store",-1142205747,null);
KVa=new $APP.t(null,"median","median",-2084869638,null);LVa=new $APP.t("clojure.string","includes?","clojure.string/includes?",-1842146260,null);MVa=new $APP.t(null,"restore","restore",1907703951,null);NVa=new $APP.t(null,"empty-db","empty-db",1486862004,null);y0=new $APP.F(null,"v","v",21465059);C0=new $APP.F("transact","syntax","transact/syntax",-299207078);h5=new $APP.t(null,"-restore","-restore",1124639208,null);WRa=new $APP.F(null,"find","find",496279456);z0=new $APP.F(null,"a","a",-2123407586);
OVa=new $APP.t("datascript","DB","datascript/DB",-487332776,null);gRa=new $APP.F(null,"*","*",-1294732318);J2=new $APP.F(null,"free","free",801364328);PVa=new $APP.F("db.fn","cas","db.fn/cas",-379352172);TZ=new $APP.F(null,"shift","shift",997140064);QVa=new $APP.t(null,"tx0","tx0",-4656209,null);PRa=new $APP.F(null,"rule","rule",729973257);RVa=new $APP.t(null,"rseek-datoms","rseek-datoms",857788390,null);SVa=new $APP.t(null,"from-serializable","from-serializable",945516427,null);
TVa=new $APP.t(null,"resolve-datom","resolve-datom",-294110827,null);UVa=new $APP.t(null,"datascript.storage.IStorage","datascript.storage.IStorage",348000814,null);VVa=new $APP.t(null,"IStorage","IStorage",668238001,null);WVa=new $APP.t(null,"get-else","get-else",1312024065,null);e1=new $APP.F(null,"limit","limit",-1355822363);XVa=new $APP.t(null,"-\x3eStorageAdapter","-\x3eStorageAdapter",269379393,null);YVa=new $APP.t("datascript.core","pull-many","datascript.core/pull-many",394351057,null);
i5=new $APP.t(null,"Entity","Entity",1953938502,null);var PPa,x0,nQa;datascript={};PPa=new $APP.bi(null,new $APP.k(null,12,[O_,null,M_,null,a0,null,LUa,null,GTa,null,new $APP.F("db","noHistory","db/noHistory",-1975127444),null,S_,null,new $APP.F("db.install","_attribute","db.install/_attribute",1853441294),null,b0,null,yVa,null,V_,null,T_,null],null),null);x0=new $APP.bi(null,new $APP.k(null,11,[O_,null,M_,null,a0,null,LUa,null,GTa,null,S_,null,b0,null,yVa,null,H0,null,V_,null,T_,null],null),null);
nQa=new $APP.bi(null,new $APP.k(null,7,[new $APP.F("db.type","number","db.type/number",-508502688),null,new $APP.F("db.type","instant","db.type/instant",-1024769248),null,U_,null,new $APP.F("db.type","uuid","db.type/uuid",1543195203),null,new $APP.F("db.type","string","db.type/string",1432572808),null,new $APP.F("db.type","keyword","db.type/keyword",205926793),null,R_,null],null),null);var RPa={},KY;$APP.g=GY.prototype;$APP.g.U=function(a,b,c){return IY.j?IY.j(this,b,c):IY.call(null,this,b,c)};$APP.g.ja=function(a,b){return $APP.Jb(this.kf,b)};$APP.g.fa=function(a,b){return $APP.Au(this.kf,b,null)};$APP.g.N=function(a,b,c){return $APP.Au(this.kf,b,c)};$APP.g.V=function(a,b,c){return $APP.rc(this.kf,b,c)};var UY=Math.pow(2,31),HZ=Math.pow(2,5),iZ=HZ/2,IZ=HZ+iZ>>>1,SPa=HZ-1,SY=MY($APP.Gi.h(function(a){return Math.pow(2,a)},$APP.Ym.j(0,52,5)));$APP.g=qZ.prototype;$APP.g.nf=function(a,b){var c=this;lZ(this,$APP.Fd(c.children));$APP.Kv.g($APP.zt.h(function(d,e){var f=c.children[d];e=$APP.l(f)?(e=null==e)?e:f.Lf:f;return $APP.l(e)?(f=jZ(f,b),c.$c[d]=f):null},c.$c));a=QY(b,this,c.rb);c.Lf=!1;return c.rb=a};$APP.g.Yh=function(){var a=this.keys;return a[a.length-1]};$APP.g.Qi=function(){return this.keys.length};
$APP.g.$h=function(a,b,c){lZ(this,$APP.Fd(this.children));lZ(b,$APP.Fd(b.children));a=b.rb;$APP.l(a)&&RY(c,new $APP.H(null,1,5,$APP.I,[a],null));return mZ(this.keys.concat(b.keys),this.children.concat(b.children),this.$c.concat(b.$c),$APP.B([new $APP.k(null,1,[oZ,this.rb],null)]))};
$APP.g.ai=function(a,b){lZ(this,$APP.Fd(this.children));lZ(b,$APP.Fd(b.children));a=ZY(this.keys,b.keys);var c=ZY(this.children,b.children),d=ZY(this.$c,b.$c);return $Y(mZ(a[0],c[0],d[0],$APP.B([new $APP.k(null,1,[oZ,this.rb],null)])),mZ(a[1],c[1],d[1],$APP.B([new $APP.k(null,1,[oZ,b.rb],null)])))};$APP.g.We=function(a,b){if($APP.z.h(-1,a))return null;var c=$APP.l(this.$c)?this.$c[a]:null;$APP.jb(this.children[a])?(b=OY(b,c),this.children[a]=b):$APP.l($APP.l(b)?c:b)&&PY(b,c);return this.children[a]};
$APP.g.Zh=function(a,b,c,d){a=VPa(b,this.keys,c);a=this.We(a,d);return $APP.l(a)?fZ(a,b,c,d):null};
$APP.g.Wh=function(a,b,c,d){lZ(this,$APP.Fd(this.children));a=WY(b,this.keys,this.keys.length-2,c);var e=this.We(a,d);c=gZ(e,b,c,d);if($APP.l(c)){d=this.keys;e=a+1;var f=c.map(bZ);b=WPa(b,d,a,e,f,f.length)?d:YY(d,a,e,f);d=YY(this.children,a,a+1,c);a=YY(this.$c,a,a+1,kZ(c));if(d.length<=HZ)return[mZ(b,d,a,$APP.B([new $APP.k(null,1,[oZ,this.rb],null)]))];c=d.length>>>1;return[mZ(b.slice(0,c),d.slice(0,c),a.slice(0,c),$APP.B([new $APP.k(null,1,[oZ,this.rb],null)])),nZ(b.slice(c),d.slice(c),a.slice(c))]}return null};
$APP.g.Xh=function(a,b,c,d,e,f,h){lZ(this,$APP.Fd(this.children));var m=VPa(b,this.keys,c);if(-1===m)return null;var r=this.We(m,h);a=0<=m-1?this.We(m-1,h):null;var n=m+1<this.children.length?this.We(m+1,h):null;c=hZ(r,b,c,!1,a,n,h);return $APP.l(c)?(a=$APP.l(a)?m-1:m,m=$APP.l(n)?2+m:1+m,n=this.keys,r=c.map(bZ),b=WPa(b,n,a,m,r,r.length)?n:YY(n,a,m,r),n=YY(this.children,a,m,c),c=YY(this.$c,a,m,kZ(c)),m>a&&(a=$APP.qu.h($APP.fi($APP.jr.h($APP.fb,this.$c.slice(a,m))),$APP.fi($APP.jr.h($APP.fb,c))),$APP.l($APP.l(h)?
$APP.u(a):h)&&RY(h,a)),XPa(mZ(b,n,c,$APP.B([new $APP.k(null,1,[oZ,this.rb],null)])),d,e,f,h)):null};var NZ=function NZ(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return NZ.l(arguments[0],1<c.length?new $APP.jd(c.slice(1),0,null):null)};NZ.l=function(a,b){var c=$APP.xf(b);b=$APP.C.h(c,oZ);c=$APP.C.j(c,pZ,!0);return new YPa(a,b,c)};NZ.A=1;NZ.F=function(a){var b=$APP.v(a);a=$APP.y(a);return this.l(b,a)};$APP.g=YPa.prototype;
$APP.g.nf=function(a,b){a=this.Lf;return $APP.l($APP.l(a)?a:null==this.rb)?(b=QY(b,this,this.rb),this.Lf=!1,this.rb=b):this.rb};$APP.g.Yh=function(){var a=this.keys;return a[a.length-1]};$APP.g.Qi=function(){return this.keys.length};$APP.g.$h=function(a,b,c){a=b.rb;$APP.l(a)&&RY(c,new $APP.H(null,1,5,$APP.I,[a],null));return NZ.l(this.keys.concat(b.keys),$APP.B([new $APP.k(null,1,[oZ,this.rb],null)]))};
$APP.g.ai=function(a,b){a=ZY(this.keys,b.keys);return $Y(NZ.l(a[0],$APP.B([new $APP.k(null,1,[oZ,this.rb],null)])),NZ.l(a[1],$APP.B([new $APP.k(null,1,[oZ,b.rb],null)])))};$APP.g.We=function(a){return this.keys[a]};$APP.g.Zh=function(a,b,c,d){a=UPa(b,this.keys,c);return-1===a?null:this.We(a,d)};
$APP.g.Wh=function(a,b,c){a=WY(b,this.keys,this.keys.length-1,c);var d=this.keys.length,e;if(e=a<d)e=this.keys[a],e=0===(b.h?b.h(c,e):b.call(null,c,e));return e?null:d===HZ?(b=d+1>>>1,a>b?[NZ.l(this.keys.slice(0,b),$APP.B([new $APP.k(null,1,[oZ,this.rb],null)])),NZ(XY(this.keys,b,d,a,a,[c]))]:[NZ.l(XY(this.keys,0,b,a,a,[c]),$APP.B([new $APP.k(null,1,[oZ,this.rb],null)])),NZ(this.keys.slice(b,d))]):[NZ.l(YY(this.keys,a,a,[c]),$APP.B([new $APP.k(null,1,[oZ,this.rb],null)]))]};
$APP.g.Xh=function(a,b,c,d,e,f,h){a=UPa(b,this.keys,c);if(-1===a)return null;a=YY(this.keys,a,a+1,[]);return XPa(NZ.l(a,$APP.B([new $APP.k(null,1,[oZ,this.rb],null)])),d,e,f,h)};$APP.g=$APP.sZ.prototype;$APP.g.ye=function(){var a=this.root;return $APP.l(a)?a:$APP.l(this.rb)?this.root=a=OY(this.storage,this.rb):null};$APP.g.toString=function(){return $APP.Vc(this)};$APP.g.fa=function(a,b){this.ye(null);return fZ(this.root,this.Wc,b,this.storage)};
$APP.g.N=function(a,b,c){this.ye(null);a=fZ(this.root,this.Wc,b,this.storage);return $APP.l(a)?a:c};$APP.g.V=function(a,b,c){return $APP.Ai(b,$APP.Fi,"#{"," ","}",c,$APP.u(this))};$APP.g.W=function(){return this.K};$APP.g.ba=function(){return new $APP.sZ(this.storage,this.root,this.shift,this.O,this.Wc,this.K,this.ad,this.rb)};$APP.g.aa=function(){return this.O};$APP.g.bd=function(){return $APP.ic(CZ.g?CZ.g(this):CZ.call(null,this))};$APP.g.Y=function(){var a=this.ad;return null!=a?a:this.ad=a=$APP.rd(this)};
$APP.g.R=function(a,b){var c=this;return $APP.ae(b)&&this.O===$APP.Fd(b)&&$APP.Qf(function(d){return $APP.re(c,d)},b)};$APP.g.qe=function(){return this};$APP.g.Ia=function(){return new $APP.sZ(this.storage,NZ([]),0,0,this.Wc,this.K,null,null)};$APP.g.Bg=function(a,b){return KZ.j?KZ.j(this,b,this.Wc):KZ.call(null,this,b,this.Wc)};$APP.g.Ta=function(a,b){a=CZ.g?CZ.g(this):CZ.call(null,this);return $APP.l(a)?$APP.Bu(a,b):b.C?b.C():b.call(null)};
$APP.g.Qa=function(a,b,c){a=CZ.g?CZ.g(this):CZ.call(null,this);return $APP.l(a)?$APP.Bu(a,b,c):c};$APP.g.Zd=function(a,b){return JZ.j?JZ.j(this,b,this.Wc):JZ.call(null,this,b,this.Wc)};$APP.g.Ge=function(){return this};$APP.g.nf=function(a,b){null==this.storage&&(this.storage=b);this.ye(null);null==this.rb&&(this.rb=jZ(this.root,this.storage));return this.rb};$APP.g.Z=function(){return CZ.g?CZ.g(this):CZ.call(null,this)};
$APP.g.Ch=function(a,b){return KZ.j?KZ.j(this,b,this.Wc):KZ.call(null,this,b,this.Wc)};$APP.g.X=function(a,b){return new $APP.sZ(this.storage,this.root,this.shift,this.O,this.Wc,b,this.ad,this.rb)};$APP.g.ca=function(a,b){return JZ.j?JZ.j(this,b,this.Wc):JZ.call(null,this,b,this.Wc)};$APP.g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length-1)].join(""));}};
$APP.g.apply=function(a,b){return this.call.apply(this,[this].concat($APP.ub(b)))};$APP.g.g=function(a){return this.fa(null,a)};$APP.g.h=function(a,b){return this.N(null,a,b)};
var xZ=function xZ(a,b,c,d){var f=TY(c,d);if(0<d){var h=tZ(b,f,a.storage),m=d-1;a=xZ.G?xZ.G(a,h,c,m):xZ.call(null,a,h,c,m);return null==a?f+1<b.children.length?VY(0,d,f+1):null:VY(a,d,f)}return f+1<b.keys.length?VY(0,0,f+1):null},zZ=function zZ(a,b,c,d){var f=TY(c,d);if(0===d&&0===f)return null;if(0===d)return VY(0,0,f-1);if(f>=cZ(b))return wZ(b,c,d,a.storage);var h=tZ(b,f,a.storage);var m=d-1;h=zZ.G?zZ.G(a,h,c,m):zZ.call(null,a,h,c,m);if(null!=h)return VY(h,d,f);if(0===f)return null;a=wZ(tZ(b,f-
1,a.storage),c,d-1,a.storage);return VY(a,d,f-1)};$APP.g=ZPa.prototype;$APP.g.aa=function(){return this.end-this.xb};$APP.g.ea=function(a,b){return this.H[this.xb+b]};$APP.g.Va=function(a,b,c){return 0<=b&&b<this.end-this.xb?this.H[this.xb+b]:c};$APP.g.Qf=function(){if(this.xb===this.end)throw Error("-drop-first of empty chunk");return new $APP.hf(this.H,this.xb+1,this.end)};$APP.g.Ta=function(a,b){return this.xb===this.end?b.C?b.C():b.call(null):$APP.Bu(this.Qf(null),b,this.H[this.xb])};
$APP.g.Qa=function(a,b,c){for(a=this.xb;;)if(a<this.end){var d=this.H[a];c=b.h?b.h(c,d):b.call(null,c,d);if($APP.wd(c))return $APP.q(c);a+=1}else return c};$APP.g=DZ.prototype;$APP.g.toString=function(){return $APP.Vc(this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,$APP.Fi,"("," ",")",c,$APP.u(this))};
$APP.g.Pa=function(){if($APP.l(this.keys)){if(this.idx+1<this.keys.length){var a=this.left+1;return a<this.right?new DZ(this.set,a,this.right,this.keys,this.idx+1):null}a=yZ(this.set,this.left);return a<this.right?this.Xg(a,this.right):null}return null};$APP.g.bd=function(){if($APP.l(this.keys)){var a=this.set,b=AZ(this.set,this.left),c=AZ(this.set,this.right);return FZ.j?FZ.j(a,b,c):FZ.call(null,a,b,c)}return null};$APP.g.R=function(a,b){return $APP.Se(this,b)};
$APP.g.Ta=function(a,b){if(null==this.keys)return b.C?b.C():b.call(null);a=this.Ua(null);var c=this.Pa(null);return null==c?a:$APP.Bu(c,b,a)};$APP.g.Qa=function(a,b,c){a=this.left;for(var d=this.keys,e=this.idx;;){if(null==d)return c;var f=d[e];c=b.h?b.h(c,f):b.call(null,c,f);if($APP.wd(c))return $APP.q(c);if(e+1<d.length)if(a+=1,a<this.right)e+=1;else return c;else if(a=yZ(this.set,a),a<this.right)f=a,d=uZ(this.set,a),e=TY(a,0),a=f;else return c}};
$APP.g.Ua=function(){return $APP.l(this.keys)?this.keys[this.idx]:null};$APP.g.ob=function(){var a=this.Pa(null);return $APP.l(a)?a:$APP.md};$APP.g.Z=function(){return $APP.l(this.keys)?this:null};$APP.g.xf=function(){var a=this.left,b=this.right;return new ZPa(this.keys,this.idx,(a<UY&&b<UY?a>>>5===b>>>5:Math.floor(a/HZ)===Math.floor(b/HZ))?TY(this.right,0):this.keys.length)};$APP.g.Ee=function(){var a=this.cf();return $APP.l(a)?a:$APP.md};
$APP.g.Xg=function(a,b){return new DZ(this.set,a,b,uZ(this.set,a),TY(a,0))};$APP.g.cf=function(){var a=yZ(this.set,VY(this.left,0,this.keys.length-1));return a<this.right?this.Xg(a,this.right):null};$APP.g=EZ.prototype;$APP.g.toString=function(){return $APP.Vc(this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,$APP.Fi,"("," ",")",c,$APP.u(this))};
$APP.g.Pa=function(){if($APP.l(this.keys)){if(0<this.idx){var a=this.right-1;return this.left<a?new EZ(this.set,this.left,a,this.keys,this.idx-1):null}a=AZ(this.set,this.right);return this.left<a?this.Xg(this.left,a):null}return null};$APP.g.bd=function(){return $APP.l(this.keys)?BZ(this.set,yZ(this.set,this.left),yZ(this.set,this.right)):null};$APP.g.R=function(a,b){return $APP.Se(this,b)};$APP.g.Ua=function(){return $APP.l(this.keys)?this.keys[this.idx]:null};
$APP.g.ob=function(){var a=this.Pa(null);return $APP.l(a)?a:$APP.md};$APP.g.Z=function(){return $APP.l(this.keys)?this:null};$APP.g.Xg=function(a,b){return new EZ(this.set,a,b,uZ(this.set,b),TY(b,0))};var ZVa=Error,LQa=$APP.wm.h($APP.Ve,$APP.pg);$APP.wm.h($APP.Ve,$APP.ci);
var j5=function j5(a){throw $APP.xl.h(["Not implemented: (",$APP.p.g(j5),$APP.Mm.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.wf);},k5=function k5(a,b){throw $APP.xl.h(["Not implemented: (",$APP.p.g(k5),$APP.Mm.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);},l5=function l5(a){throw $APP.xl.h(["Not implemented: (",$APP.p.g(l5),$APP.Mm.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.wf);},m5=function m5(a){switch(arguments.length){case 2:return m5.h(arguments[0],
arguments[1]);case 3:return m5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};m5.h=function(a,b){throw $APP.xl.h(["Not implemented: (",$APP.p.g(m5),$APP.Mm.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);};m5.j=function(a,b,c){throw $APP.xl.h(["Not implemented: (",$APP.p.g(m5),$APP.Mm.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.wf);};m5.A=3;
var n5=function n5(a,b,c){throw $APP.xl.h(["Not implemented: (",$APP.p.g(n5),$APP.Mm.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.wf);},o5=function o5(a,b,c){throw $APP.xl.h(["Not implemented: (",$APP.p.g(o5),$APP.Mm.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.wf);};$APP.g=$APP.b_.prototype;$APP.g.Wa=function(){return 0<this.tx?this.tx:-this.tx};$APP.g.ld=function(){return 0<this.tx};$APP.g.Y=function(){return 0===this.ad?this.ad=j5(this):this.ad};
$APP.g.R=function(a,b){return b instanceof $APP.b_&&k5(this,b)};$APP.g.Z=function(){return l5(this)};$APP.g.fa=function(a,b){return o5(this,b,null)};$APP.g.N=function(a,b,c){return o5(this,b,c)};$APP.g.ea=function(a,b){return m5.h(this,b)};$APP.g.Va=function(a,b,c){return m5.j(this,b,c)};$APP.g.U=function(a,b,c){return n5(this,b,c)};$APP.g.V=function(a,b,c){return $APP.Ai(b,$APP.Fi,"#datascript/Datom ["," ","]",c,new $APP.H(null,5,5,$APP.I,[this.e,this.a,this.v,this.Wa(null),this.ld(null)],null))};
OPa("datascript.db.Datom",$APP.b_);var MZ=function MZ(a){switch(arguments.length){case 3:return MZ.j(arguments[0],arguments[1],arguments[2]);case 4:return MZ.G(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return MZ.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};MZ.j=function(a,b,c){return new $APP.b_(a,b,c,536870912,0,0)};MZ.G=function(a,b,c,d){return new $APP.b_(a,b,c,d,0,0)};
MZ.P=function(a,b,c,d,e){return new $APP.b_(a,b,c,$APP.l(e)?d:-d,0,0)};MZ.A=5;j5=function(){return null};j5=function(a){return ZZ(ZZ($APP.cd(a.e),$APP.cd(a.a)),$APP.cd(a.v))};k5=function(){return null};k5=function(a,b){return a.e===b.e&&$APP.z.h(a.a,b.a)&&$APP.z.h(a.v,b.v)};l5=function(){return null};l5=function(a){return new $APP.E(null,a.e,new $APP.E(null,a.a,new $APP.E(null,a.v,new $APP.E(null,a.Wa(null),new $APP.E(null,a.ld(null),null,1,null),2,null),3,null),4,null),5,null)};o5=function(){return null};
o5=function(a,b,c){if(b instanceof $APP.F)switch(b instanceof $APP.F?b.S:null){case "e":return a.e;case "a":return a.a;case "v":return a.v;case "tx":return a.Wa(null);case "added":return a.ld(null);default:return c}else if("string"===typeof b)switch(b){case "e":return a.e;case "a":return a.a;case "v":return a.v;case "tx":return a.Wa(null);case "added":return a.ld(null);default:return c}else return c};
m5=function(a){switch(arguments.length){case 2:return m5.h(arguments[0],arguments[1]);case 3:return m5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};m5.h=function(){return null};m5.j=function(){return null};m5.A=3;
m5=function(a){switch(arguments.length){case 2:return m5.h(arguments[0],arguments[1]);case 3:return m5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};m5.h=function(a,b){switch(b){case 0:return a.e;case 1:return a.a;case 2:return a.v;case 3:return a.Wa(null);case 4:return a.ld(null);default:throw Error(["Datom/-nth: Index out of bounds: ",$APP.p.g(b)].join(""));}};
m5.j=function(a,b,c){switch(b){case 0:return a.e;case 1:return a.a;case 2:return a.v;case 3:return a.Wa(null);case 4:return a.ld(null);default:return c}};m5.A=3;n5=function(){return null};
n5=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "e":return MZ.P(c,a.a,a.v,a.Wa(null),a.ld(null));case "a":return MZ.P(a.e,c,a.v,a.Wa(null),a.ld(null));case "v":return MZ.P(a.e,a.a,c,a.Wa(null),a.ld(null));case "tx":return MZ.P(a.e,a.a,a.v,c,a.ld(null));case "added":return MZ.P(a.e,a.a,a.v,a.Wa(null),c);default:throw new ZVa(["invalid key for #datascript/Datom: ",$APP.p.g(b)].join(""));}};
var p5=function p5(a){throw $APP.xl.h(["Not implemented: (",$APP.p.g(p5),$APP.Mm.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.wf);},q5=function q5(a){throw $APP.xl.h(["Not implemented: (",$APP.p.g(q5),$APP.Mm.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.wf);},r5=function r5(a,b){throw $APP.xl.h(["Not implemented: (",$APP.p.g(r5),$APP.Mm.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);},e2=function e2(a){throw $APP.xl.h(["Not implemented: (",$APP.p.g(e2),
$APP.Mm.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.wf);},v_=function v_(a,b){throw $APP.xl.h(["Not implemented: (",$APP.p.g(v_),$APP.Mm.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);},s5=function s5(a,b,c){throw $APP.xl.h(["Not implemented: (",$APP.p.g(s5),$APP.Mm.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.wf);},t5=function t5(a,b,c,d,e,f,h){throw $APP.xl.h(["Not implemented: (",$APP.p.g(t5),$APP.Mm.h(" ",new $APP.H(null,7,5,$APP.I,[a,b,c,d,e,
f,h],null))].join(""),$APP.wf);},u5=function u5(a,b,c,d,e,f,h,m){throw $APP.xl.h(["Not implemented: (",$APP.p.g(u5),$APP.Mm.h(" ",new $APP.H(null,8,5,$APP.I,[a,b,c,d,e,f,h,m],null))].join(""),$APP.wf);};$APP.g=$APP.A_.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "schema":return this.rc;case "eavt":return this.Vb;case "aevt":return this.tc;case "avet":return this.fc;case "max-eid":return this.Lc;case "max-tx":return this.Mc;case "rschema":return this.vc;case "pull-patterns":return this.Cc;case "pull-attrs":return this.Bc;case "hash":return this.hash;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.db.DB{",", ","}",c,$APP.K.h(new $APP.H(null,10,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.B_,this.rc],null),new $APP.H(null,2,5,$APP.I,[$APP.C_,this.Vb],null),new $APP.H(null,2,5,$APP.I,[D_,this.tc],null),new $APP.H(null,2,5,$APP.I,[u_,this.fc],null),new $APP.H(null,2,5,$APP.I,[E_,this.Lc],null),new $APP.H(null,2,5,$APP.I,[F_,this.Mc],null),new $APP.H(null,2,5,$APP.I,[G_,this.vc],null),new $APP.H(null,
2,5,$APP.I,[H_,this.Cc],null),new $APP.H(null,2,5,$APP.I,[I_,this.Bc],null),new $APP.H(null,2,5,$APP.I,[J_,this.hash],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,10,new $APP.H(null,10,5,$APP.I,[$APP.B_,$APP.C_,D_,u_,E_,F_,G_,H_,I_,J_],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new $APP.A_(this.rc,this.Vb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,this.o,this.D)};
$APP.g.aa=function(){return 10+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1515640948^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.rc,b.rc)&&$APP.z.h(this.Vb,b.Vb)&&$APP.z.h(this.tc,b.tc)&&$APP.z.h(this.fc,b.fc)&&$APP.z.h(this.Lc,b.Lc)&&$APP.z.h(this.Mc,b.Mc)&&$APP.z.h(this.vc,b.vc)&&$APP.z.h(this.Cc,b.Cc)&&$APP.z.h(this.Bc,b.Bc)&&$APP.z.h(this.hash,b.hash)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,10,[$APP.B_,null,F_,null,J_,null,D_,null,u_,null,E_,null,$APP.C_,null,I_,null,H_,null,G_,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new $APP.A_(this.rc,this.Vb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "schema":case "eavt":case "aevt":case "avet":case "max-eid":case "max-tx":case "rschema":case "pull-patterns":case "pull-attrs":case "hash":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.B_,b):$APP.$e.call(null,$APP.B_,b))?new $APP.A_(c,this.Vb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.C_,b):$APP.$e.call(null,$APP.C_,b))?new $APP.A_(this.rc,c,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(D_,b):$APP.$e.call(null,D_,b))?new $APP.A_(this.rc,this.Vb,c,this.fc,this.Lc,this.Mc,this.vc,
this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(u_,b):$APP.$e.call(null,u_,b))?new $APP.A_(this.rc,this.Vb,this.tc,c,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(E_,b):$APP.$e.call(null,E_,b))?new $APP.A_(this.rc,this.Vb,this.tc,this.fc,c,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(F_,b):$APP.$e.call(null,F_,b))?new $APP.A_(this.rc,this.Vb,this.tc,this.fc,this.Lc,c,this.vc,this.Cc,
this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(G_,b):$APP.$e.call(null,G_,b))?new $APP.A_(this.rc,this.Vb,this.tc,this.fc,this.Lc,this.Mc,c,this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(H_,b):$APP.$e.call(null,H_,b))?new $APP.A_(this.rc,this.Vb,this.tc,this.fc,this.Lc,this.Mc,this.vc,c,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(I_,b):$APP.$e.call(null,I_,b))?new $APP.A_(this.rc,this.Vb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,
c,this.hash,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(J_,b):$APP.$e.call(null,J_,b))?new $APP.A_(this.rc,this.Vb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,c,this.B,this.o,null):new $APP.A_(this.rc,this.Vb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,10,5,$APP.I,[new $APP.se($APP.B_,this.rc,null),new $APP.se($APP.C_,this.Vb,null),new $APP.se(D_,this.tc,null),new $APP.se(u_,this.fc,null),new $APP.se(E_,this.Lc,null),new $APP.se(F_,this.Mc,null),new $APP.se(G_,this.vc,null),new $APP.se(H_,this.Cc,null),new $APP.se(I_,this.Bc,null),new $APP.se(J_,this.hash,null)],null),this.o))};
$APP.g.X=function(a,b){return new $APP.A_(this.rc,this.Vb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};
$APP.g.Ii=function(a,b){a:for(var c=$APP.C_.g(b),d=b=a=$APP.pg,e=this.Vb;;){if($APP.Zd(e)){var f=new $APP.H(null,3,5,$APP.I,[$APP.yf(a),$APP.yf($APP.fh.h(b,c)),$APP.yf(d)],null);break a}if($APP.Zd(c)){f=new $APP.H(null,3,5,$APP.I,[$APP.yf($APP.fh.h(a,e)),$APP.yf(b),$APP.yf(d)],null);break a}var h=$APP.v(e),m=$APP.v(c);try{f=k_.h?k_.h(h,m):k_.call(null,h,m)}catch(r){if(r instanceof Error)f=USa;else throw r;}if($APP.z.h(f,USa))a=$APP.Ve.h(a,h),b=$APP.Ve.h(b,m),e=$APP.y(e),c=$APP.y(c);else if(0===f)d=
$APP.Ve.h(d,h),e=$APP.y(e),c=$APP.y(c);else if(0>f)a=$APP.Ve.h(a,h),e=$APP.y(e);else if(0<f)b=$APP.Ve.h(b,m),c=$APP.y(c);else{f=null;break a}}return f};$APP.g.Ja=$APP.bd;$APP.g.V=function(a,b,c){return s5(this,b,c)};$APP.g.rh=$APP.bd;$APP.g.aa=function(){return $APP.Fd(this.Vb)};$APP.g.Vj=$APP.bd;$APP.g.bd=function(){return $APP.ic(this.Vb)};$APP.g.Rf=$APP.bd;$APP.g.Y=function(){return p5(this)};$APP.g.R=function(a,b){return r5(this,b)};$APP.g.sh=$APP.bd;
$APP.g.qe=function(){return $APP.ym.j($APP.ym.j($APP.ym.j(this,$APP.C_,$APP.qf),D_,$APP.qf),u_,$APP.qf)};$APP.g.th=$APP.bd;$APP.g.Ia=function(){return $APP.Ud(e2(new $APP.k(null,5,[$APP.B_,this.rc,G_,this.vc,$APP.C_,$APP.Qd(this.Vb),D_,$APP.Qd(this.tc),u_,$APP.Qd(this.fc)],null)),$APP.Vd(this))};$APP.g.Zd=function(){throw $APP.xl.h("datascript.DB/conj! is not supported",$APP.wf);};$APP.g.Ge=function(){return $APP.ym.j($APP.ym.j($APP.ym.j(this,$APP.C_,$APP.rf),D_,$APP.rf),u_,$APP.rf)};$APP.g.Ji=function(){return XTa};
$APP.g.Nh=function(a,b,c,d,e,f){w_(this,b,c,d,e,f);return LZ($APP.C.h(this,b),u5(this,b,c,d,e,f,0,536870912),u5(this,b,c,d,e,f,2147483647,2147483647))};$APP.g.Qh=function(a,b,c,d,e,f){w_(this,b,c,d,e,f);return LZ($APP.C.h(this,b),u5(this,b,c,d,e,f,0,536870912),MZ.G(2147483647,null,null,2147483647))};$APP.g.Ph=function(a,b,c,d,e,f){w_(this,b,c,d,e,f);return bQa($APP.C.h(this,b),u5(this,b,c,d,e,f,2147483647,2147483647))};
$APP.g.Oh=function(a,b,c,d){w_(this,u_,b,null,null,null);if(!(b instanceof $APP.F||"string"===typeof b))throw a=new $APP.E(null,vTa,new $APP.E(null,P4,new $APP.E(null,b,new $APP.E(null,c,new $APP.E(null,d,null,1,null),2,null),3,null),4,null),5,null),$APP.xl.h(["Bad entity attribute ",$APP.aj.l($APP.B([b]))," at ",$APP.aj.l($APP.B([a])),", expected keyword or string"].join(""),new $APP.k(null,3,[Z_,b,F0,a,$APP.VI,C0],null));return LZ(this.fc,t5(this,null,b,c,null,0,536870912),t5(this,null,b,d,null,
2147483647,2147483647))};$APP.g.Kh=$APP.bd;$APP.g.Mh=function(){return this.rc};$APP.g.Lh=function(a,b){a=this.vc;return a.g?a.g(b):a.call(null,b)};$APP.g.Ki=$APP.bd;
$APP.g.Rh=function(a,b){a=$APP.A.j(b,0,null);var c=$APP.A.j(b,1,null),d=$APP.A.j(b,2,null),e=$APP.A.j(b,3,null);b=this.Vb;var f=this.tc,h=this.fc;$APP.re(z_(this,Q_),c);return $APP.l(a)?$APP.l(c)?null!=d?$APP.l(e)?LZ(b,MZ.G(a,c,d,e),MZ.G(a,c,d,e)):LZ(b,MZ.G(a,c,d,536870912),MZ.G(a,c,d,2147483647)):$APP.l(e)?$APP.Xi($APP.ng.g(function(m){return $APP.z.h(e,m.Wa(null))}),LZ(b,MZ.G(a,c,null,536870912),MZ.G(a,c,null,2147483647))):LZ(b,MZ.G(a,c,null,536870912),MZ.G(a,c,null,2147483647)):null!=d?$APP.l(e)?
$APP.Xi($APP.ng.g(function(m){return $APP.z.h(d,m.v)&&$APP.z.h(e,m.Wa(null))}),LZ(b,MZ.G(a,null,null,536870912),MZ.G(a,null,null,2147483647))):$APP.Xi($APP.ng.g(function(m){return $APP.z.h(d,m.v)}),LZ(b,MZ.G(a,null,null,536870912),MZ.G(a,null,null,2147483647))):$APP.l(e)?$APP.Xi($APP.ng.g(function(m){return $APP.z.h(e,m.Wa(null))}),LZ(b,MZ.G(a,null,null,536870912),MZ.G(a,null,null,2147483647))):LZ(b,MZ.G(a,null,null,536870912),MZ.G(a,null,null,2147483647)):$APP.l(c)?null!=d?$APP.l(e)?v_(this,c)?$APP.Xi($APP.ng.g(function(m){return $APP.z.h(e,
m.Wa(null))}),LZ(h,MZ.G(0,c,d,536870912),MZ.G(2147483647,c,d,2147483647))):$APP.Xi($APP.ng.g(function(m){return $APP.z.h(d,m.v)&&$APP.z.h(e,m.Wa(null))}),LZ(f,MZ.G(0,c,null,536870912),MZ.G(2147483647,c,null,2147483647))):v_(this,c)?LZ(h,MZ.G(0,c,d,536870912),MZ.G(2147483647,c,d,2147483647)):$APP.Xi($APP.ng.g(function(m){return $APP.z.h(d,m.v)}),LZ(f,MZ.G(0,c,null,536870912),MZ.G(2147483647,c,null,2147483647))):$APP.l(e)?$APP.Xi($APP.ng.g(function(m){return $APP.z.h(e,m.Wa(null))}),LZ(f,MZ.G(0,c,null,
536870912),MZ.G(2147483647,c,null,2147483647))):LZ(f,MZ.G(0,c,null,536870912),MZ.G(2147483647,c,null,2147483647)):null!=d?$APP.l(e)?$APP.ng.h(function(m){return $APP.z.h(d,m.v)&&$APP.z.h(e,m.Wa(null))},b):$APP.ng.h(function(m){return $APP.z.h(d,m.v)},b):$APP.l(e)?$APP.ng.h(function(m){return $APP.z.h(e,m.Wa(null))},b):b};$APP.g=L_.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "unfiltered-db":return this.wc;case "pred":return this.cc;case "hash":return this.hash;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.db.FilteredDB{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[b5,this.wc],null),new $APP.H(null,2,5,$APP.I,[$APP.eB,this.cc],null),new $APP.H(null,2,5,$APP.I,[J_,this.hash],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,3,new $APP.H(null,3,5,$APP.I,[b5,$APP.eB,J_],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new L_(this.wc,this.cc,this.hash,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-351969977^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.wc,b.wc)&&$APP.z.h(this.cc,b.cc)&&$APP.z.h(this.hash,b.hash)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,3,[J_,null,$APP.eB,null,b5,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new L_(this.wc,this.cc,this.hash,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "unfiltered-db":case "pred":case "hash":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(b5,b):$APP.$e.call(null,b5,b))?new L_(c,this.cc,this.hash,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.eB,b):$APP.$e.call(null,$APP.eB,b))?new L_(this.wc,c,this.hash,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(J_,b):$APP.$e.call(null,J_,b))?new L_(this.wc,this.cc,c,this.B,this.o,null):new L_(this.wc,this.cc,this.hash,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.se(b5,this.wc,null),new $APP.se($APP.eB,this.cc,null),new $APP.se(J_,this.hash,null)],null),this.o))};$APP.g.X=function(a,b){return new L_(this.wc,this.cc,this.hash,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.xi=$APP.bd;$APP.g.fa=function(){throw Error("-lookup is not supported on FilteredDB");};
$APP.g.N=function(){throw Error("-lookup is not supported on FilteredDB");};$APP.g.Ja=$APP.bd;$APP.g.V=function(a,b,c){return s5(this,b,c)};$APP.g.rh=$APP.bd;$APP.g.aa=function(){return $APP.Fd(q_(this,$APP.C_,null,null,null,null))};$APP.g.Rf=$APP.bd;$APP.g.Y=function(){return q5(this)};$APP.g.R=function(a,b){return r5(this,b)};$APP.g.th=$APP.bd;$APP.g.Ia=function(){throw Error("-empty is not supported on FilteredDB");};$APP.g.qh=$APP.bd;
$APP.g.ja=function(){throw Error("-contains-key? is not supported on FilteredDB");};$APP.g.U=function(){throw Error("-assoc is not supported on FilteredDB");};$APP.g.Nh=function(a,b,c,d,e,f){return $APP.ng.h(this.cc,q_(this.wc,b,c,d,e,f))};$APP.g.Qh=function(a,b,c,d,e,f){return $APP.ng.h(this.cc,r_(this.wc,b,c,d,e,f))};$APP.g.Ph=function(a,b,c,d,e,f){return $APP.ng.h(this.cc,s_(this.wc,b,c,d,e,f))};$APP.g.Oh=function(a,b,c,d){return $APP.ng.h(this.cc,t_(this.wc,b,c,d))};$APP.g.Kh=$APP.bd;
$APP.g.Mh=function(){return y_(this.wc)};$APP.g.Lh=function(a,b){return z_(this.wc,b)};$APP.g.Ki=$APP.bd;$APP.g.Rh=function(a,b){return $APP.ng.h(this.cc,o_(this.wc,b))};e2=function(a){a=$APP.xf(a);$APP.C.h(a,$APP.B_);$APP.C.h(a,$APP.C_);$APP.C.h(a,D_);$APP.C.h(a,u_);$APP.C.h(a,E_);$APP.C.h(a,F_);return null};
e2=function(a){var b=$APP.xf(a);a=$APP.C.h(b,$APP.B_);var c=$APP.C.h(b,$APP.C_),d=$APP.C.h(b,D_),e=$APP.C.h(b,u_),f=$APP.C.h(b,E_),h=$APP.C.h(b,F_);h=$APP.l(h)?h:536870912;var m=$APP.cj.g(0);f=$APP.l(f)?f:0;var r=LY(),n=LY();b=G_.g(b);b=$APP.l(b)?b:X_($APP.ml.l($APP.B([new $APP.k(null,1,[V_,new $APP.k(null,1,[M_,N_],null)],null),a])));return K_($APP.Hh([$APP.B_,F_,J_,D_,u_,E_,$APP.C_,I_,H_,G_],[a,h,m,d,e,f,c,r,n,b]))};p5=function(){return null};
p5=function(a){var b=$APP.q(a.hash);return 0===b?$APP.Zf(a.hash,ZZ($APP.cd(a.rc),$APP.cd(a.Vb))):b};q5=function(){return null};q5=function(a){var b=$APP.q(a.hash);(function(){var c=q_(a,$APP.C_,null,null,null,null);return $APP.l(c)?c:$APP.ci})();return 0===b?(b=function(){var c=q_(a,$APP.C_,null,null,null,null);return $APP.l(c)?c:$APP.ci}(),$APP.Zf(a.hash,ZZ($APP.cd(y_(a)),$APP.rd(b)))):b};r5=function(){return null};
r5=function(a,b){var c;if(c=b instanceof $APP.A_||b instanceof L_)if(c=$APP.z.h(y_(a),y_(b)))a:for(a=q_(a,$APP.C_,null,null,null,null),c=q_(b,$APP.C_,null,null,null,null),b=$APP.u(a),a=$APP.u(c);;){if(null==b){c=null==a;break a}if($APP.z.h($APP.v(b),$APP.v(a)))b=$APP.y(b),a=$APP.y(a);else{c=!1;break a}}return c};s5=function(){return null};
s5=function(a,b,c){$APP.oc(b,"#datascript/DB {");$APP.oc(b,":schema ");$APP.Fi(y_(a),b,c);$APP.oc(b,", :datoms ");$APP.Ai(b,function(d,e,f){return $APP.Ai(e,$APP.Fi,"["," ","]",f,new $APP.H(null,4,5,$APP.I,[d.e,d.a,d.v,d.Wa(null)],null))},"["," ","]",c,q_(a,$APP.C_,null,null,null,null));return $APP.oc(b,"}")};
var K0=function K0(a,b){throw $APP.xl.h(["Not implemented: (",$APP.p.g(K0),$APP.Mm.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);},I0=function I0(a,b){throw $APP.xl.h(["Not implemented: (",$APP.p.g(I0),$APP.Mm.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);};t5=function(){return null};
t5=function(a,b,c,d,e,f,h){if(null!=c&&!(c instanceof $APP.F||"string"===typeof c))throw a=new $APP.E(null,TVa,new $APP.E(null,P4,new $APP.E(null,b,new $APP.E(null,c,new $APP.E(null,d,new $APP.E(null,e,null,1,null),2,null),3,null),4,null),5,null),6,null),$APP.xl.h(["Bad entity attribute ",$APP.aj.l($APP.B([c]))," at ",$APP.aj.l($APP.B([a])),", expected keyword or string"].join(""),new $APP.k(null,3,[Z_,c,F0,a,$APP.VI,C0],null));return MZ.G(null!=b?K0(a,b):f,c,null!=d&&I0(a,c)?K0(a,d):d,null!=e?K0(a,
e):h)};u5=function(){return null};u5=function(a,b,c,d,e,f,h,m){b=b instanceof $APP.F?b.S:null;switch(b){case "eavt":return t5(a,c,d,e,f,h,m);case "aevt":return t5(a,d,c,e,f,h,m);case "avet":return t5(a,e,c,d,f,h,m);default:throw Error(["No matching clause: ",$APP.p.g(b)].join(""));}};$APP.g=h0.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "db-before":return this.Ad;case "db-after":return this.zd;case "tx-data":return this.Dd;case "tempids":return this.Bd;case "tx-meta":return this.Ed;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.db.TxReport{",", ","}",c,$APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[i0,this.Ad],null),new $APP.H(null,2,5,$APP.I,[j0,this.zd],null),new $APP.H(null,2,5,$APP.I,[k0,this.Dd],null),new $APP.H(null,2,5,$APP.I,[l0,this.Bd],null),new $APP.H(null,2,5,$APP.I,[m0,this.Ed],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,5,new $APP.H(null,5,5,$APP.I,[i0,j0,k0,l0,m0],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new h0(this.Ad,this.zd,this.Dd,this.Bd,this.Ed,this.B,this.o,this.D)};$APP.g.aa=function(){return 5+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-2022644885^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.Ad,b.Ad)&&$APP.z.h(this.zd,b.zd)&&$APP.z.h(this.Dd,b.Dd)&&$APP.z.h(this.Bd,b.Bd)&&$APP.z.h(this.Ed,b.Ed)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,5,[l0,null,j0,null,i0,null,k0,null,m0,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new h0(this.Ad,this.zd,this.Dd,this.Bd,this.Ed,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "db-before":case "db-after":case "tx-data":case "tempids":case "tx-meta":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(i0,b):$APP.$e.call(null,i0,b))?new h0(c,this.zd,this.Dd,this.Bd,this.Ed,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(j0,b):$APP.$e.call(null,j0,b))?new h0(this.Ad,c,this.Dd,this.Bd,this.Ed,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(k0,b):$APP.$e.call(null,k0,b))?new h0(this.Ad,this.zd,c,this.Bd,this.Ed,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(l0,b):$APP.$e.call(null,l0,b))?new h0(this.Ad,this.zd,this.Dd,c,this.Ed,this.B,this.o,
null):$APP.l($APP.$e.h?$APP.$e.h(m0,b):$APP.$e.call(null,m0,b))?new h0(this.Ad,this.zd,this.Dd,this.Bd,c,this.B,this.o,null):new h0(this.Ad,this.zd,this.Dd,this.Bd,this.Ed,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.se(i0,this.Ad,null),new $APP.se(j0,this.zd,null),new $APP.se(k0,this.Dd,null),new $APP.se(l0,this.Bd,null),new $APP.se(m0,this.Ed,null)],null),this.o))};
$APP.g.X=function(a,b){return new h0(this.Ad,this.zd,this.Dd,this.Bd,this.Ed,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};n0=function(a,b,c){return $APP.re(z_(a,c),b)};o0=function(a,b){return n0(a,b,Q_)};I0=function(){return null};I0=function(a,b){return n0(a,b,R_)};p0=function(a,b){return n0(a,b,S_)};v_=function(){return null};v_=function(a,b){return n0(a,b,O_)};q0=function(a,b){return n0(a,b,U_)};
tQa=function(a,b){return n0(a,b,W_)};
r0=function(a,b){for(;;){if("number"===typeof b&&0<b){if(2147483647<b)throw $APP.xl.h(["Highest supported entity id is ",$APP.aj.l($APP.B([2147483647])),", got ",$APP.aj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.VI,w0,$APP.cJ,b],null));return b}if($APP.be(b)){var c=b,d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);if($APP.Yh.h($APP.Fd(b),2))throw $APP.xl.h(["Lookup ref should contain 2 elements: ",$APP.aj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.VI,rTa,w0,b],null));if(n0(a,d,M_))return null==
c?null:$APP.mL.g($APP.v(q_(a,u_,d,c,null,null)));throw $APP.xl.h(["Lookup ref attribute should be marked as :db/unique: ",$APP.aj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.VI,ZSa,w0,b],null));}if($APP.gb(b))b=$APP.B(b);else{if(b instanceof $APP.F)return $APP.mL.g($APP.v(q_(a,u_,V_,b,null,null)));throw $APP.xl.h(["Expected number or lookup ref for entity id, got ",$APP.aj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.VI,yUa,w0,b],null));}}};
uQa=function(a,b){return $APP.z.h(b,$APP.mL.g($APP.v(r_(a,$APP.C_,b,null,null,null))))};K0=function(){return null};K0=function(a,b){a=r0(a,b);if($APP.l(a))return a;throw $APP.xl.h(["Nothing found for entity id ",$APP.aj.l($APP.B([b]))].join(""),new $APP.k(null,2,[$APP.VI,ITa,w0,b],null));};
var P0=function P0(a,b){throw $APP.xl.h(["Not implemented: (",$APP.p.g(P0),$APP.Mm.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);},$Va=new $APP.bi(null,new $APP.k(null,8,[e5,null,JUa,null,O0,null,nUa,null,Q0,null,pTa,null,PVa,null,J0,null],null),null);P0=function(){return null};
P0=function(a,b){if(null!=b&&!$APP.be(b))throw $APP.xl.h(["Bad transaction data ",$APP.aj.l($APP.B([b])),", expected sequential collection"].join(""),new $APP.k(null,2,[$APP.VI,C0,k0,b],null));for(var c=!$APP.Zd(z_(j0.g(a),U_)),d=c?$APP.Dm.h(b,$APP.Jm.g(zUa)):b,e=a,f=d;;){if($APP.Zd(f))return $APP.ym.P($APP.ym.P(PQa(e),l0,$APP.Zh,vQa,s0(e)),j0,$APP.ym,F_,$APP.td);var h=f,m=$APP.u(h),r=$APP.v(m),n=$APP.y(m),w=r,x=n;if(null==w)f=x;else if($APP.z.h(zUa,w))if($APP.re(e,A0)){var D=$APP.nl.h(e,A0),G=$APP.K.h(OQa(e),
x);e=D;f=G}else f=x;else{var M=j0.g(e),U=l0.g(e);if($APP.ce(w)){var Y=H0.g(w);RQa(w);if(t0(Y)){var ba=s0(e),ca=v0(e,Y,ba),ea=$APP.Ye($APP.Zh.j(w,H0,ba),x);e=ca;f=ea}else if($APP.be(Y)){ba=K0(M,Y);var ma=e,ta=$APP.Ye($APP.Zh.j(w,H0,ba),x);e=ma;f=ta}else{var pa=FQa(M,w),V=$APP.A.j(pa,0,null),P=$APP.A.j(pa,1,null),X=IQa(V,P);if(null!=X){if(u0(Y)&&$APP.re(U,Y)&&$APP.Yh.h(X,$APP.C.h(U,Y)))return NQa(a,e,b,Y,X);var Q=$APP.ym.G(v0(e,Y,X),L0,LQa,MZ.G(X,null,null,536870912)),W=$APP.K.h(KQa(M,$APP.Zh.j(V,H0,
X)),x);e=Q;f=W}else if("number"===typeof Y||null==Y||"string"===typeof Y){var ja=null==Y?$APP.Ke(E_.g(M))+1:u0(Y)?function(){var kf=$APP.C.h(U,Y);return $APP.l(kf)?kf:$APP.Ke(E_.g(M))+1}():Y,na=$APP.Zh.j(w,H0,ja),oa=v0(e,Y,ja),Ba=$APP.K.h(KQa(M,na),x);e=oa;f=Ba}else throw $APP.xl.h(["Expected number, string or lookup ref for :db/id, got ",$APP.aj.l($APP.B([Y]))].join(""),new $APP.k(null,2,[$APP.VI,yUa,T0,w],null));}}else if($APP.be(w)){var Fa=w,La=$APP.A.j(Fa,0,null),Ra=$APP.A.j(Fa,1,null),Za=$APP.A.j(Fa,
2,null),ab=$APP.A.j(Fa,3,null);if($APP.z.h(La,e5)){var nb=$APP.u(w),hb=$APP.v(nb),ib=$APP.y(nb),qb=hb,vb=$APP.v(ib),Qb=$APP.y(ib),hc=e,vc=$APP.K.h($APP.Vf.j(vb,M,Qb),x);e=hc;f=vc}else if(La instanceof $APP.F&&$APP.jb($Va.g?$Va.g(La):$Va.call(null,La))){var jc=r0(M,La);if(null==jc)throw $APP.xl.h(["Can’t find entity for transaction fn ",$APP.aj.l($APP.B([La]))].join(""),new $APP.k(null,3,[$APP.VI,C0,EVa,e5,k0,w],null));var Xd=y0.g(p_(M,new $APP.H(null,2,5,$APP.I,[jc,hTa],null)));Qb=$APP.y(w);if($APP.Sd(Xd)){var Fc=
e,gg=$APP.K.h($APP.Vf.j(Xd,M,Qb),x);e=Fc;f=gg}else throw $APP.xl.h(["Entity ",$APP.aj.l($APP.B([La]))," expected to have :db/fn attribute with fn? value"].join(""),new $APP.k(null,3,[$APP.VI,C0,EVa,e5,k0,w],null));}else{if(u0(Ra)&&$APP.Yh.h(La,J0))throw $APP.xl.h(["Can't use tempid in '",$APP.aj.l($APP.B([w])),"'. Tempids are allowed in :db/add only"].join(""),new $APP.k(null,2,[$APP.VI,C0,$APP.oG,w],null));if($APP.z.h(La,PVa)||$APP.z.h(La,JUa)){var Kg=w;qb=$APP.A.j(Kg,0,null);var Af=$APP.A.j(Kg,
1,null),sf=$APP.A.j(Kg,2,null),Di=$APP.A.j(Kg,3,null),Ei=$APP.A.j(Kg,4,null),sg=K0(M,Af),Aj=function(){var kf=sf;if(kf instanceof $APP.F||"string"===typeof kf)return null;var Tp=w;throw $APP.xl.h(["Bad entity attribute ",$APP.aj.l($APP.B([kf]))," at ",$APP.aj.l($APP.B([Tp])),", expected keyword or string"].join(""),new $APP.k(null,3,[Z_,kf,F0,Tp,$APP.VI,C0],null));}(),Kh=I0(M,sf)?K0(M,Di):Di,zd=I0(M,sf)?K0(M,Ei):Ei,Qi=null==zd?function(){var kf=w;throw $APP.xl.h(["Cannot store nil as a value at ",
$APP.aj.l($APP.B([kf]))].join(""),new $APP.k(null,3,[$APP.cJ,null,F0,kf,$APP.VI,C0],null));}():null,hg=$APP.Ce(o_(M,new $APP.H(null,2,5,$APP.I,[sg,sf],null)));if(o0(M,sf))if($APP.l($APP.Tf(function(kf,Tp,mJ,KD,nJ,LD,oJ,Nh,MD,fu,Hr){return function(ND){return $APP.z.h(ND.v,Hr)}}(e,f,Kg,qb,Af,sf,Di,Ei,sg,Aj,Kh,zd,Qi,hg,Fa,La,Ra,Za,ab,M,U,h,m,r,n,w,x,a,c,d),hg))){var gk=M0(e,new $APP.H(null,4,5,$APP.I,[J0,sg,sf,zd],null)),qc=x;e=gk;f=qc}else throw $APP.xl.h([":db.fn/cas failed on datom [",$APP.aj.l($APP.B([sg])),
" ",$APP.aj.l($APP.B([sf]))," ",$APP.aj.l($APP.B([$APP.Gi.h(y0,hg)])),"], expected ",$APP.aj.l($APP.B([Kh]))].join(""),new $APP.k(null,4,[$APP.VI,hUa,WUa,hg,$APP.AG,Kh,FUa,zd],null));else{var Oc=y0.g($APP.v(hg));if($APP.z.h(Oc,Kh)){var de=M0(e,new $APP.H(null,4,5,$APP.I,[J0,sg,sf,zd],null)),Rf=x;e=de;f=Rf}else throw $APP.xl.h([":db.fn/cas failed on datom [",$APP.aj.l($APP.B([sg]))," ",$APP.aj.l($APP.B([sf]))," ",$APP.aj.l($APP.B([Oc])),"], expected ",$APP.aj.l($APP.B([Kh]))].join(""),new $APP.k(null,
4,[$APP.VI,hUa,WUa,$APP.v(hg),$APP.AG,Kh,FUa,zd],null));}}else if(t0(Ra)){var we=v0(e,Ra,s0(e)),Lh=$APP.Ye(new $APP.H(null,4,5,$APP.I,[La,s0(e),Za,ab],null),x);e=we;f=Lh}else if(I0(M,Za)&&t0(ab)){var ah=v0(e,ab,s0(e)),Nd=$APP.Ye(new $APP.H(null,4,5,$APP.I,[La,Ra,Za,s0(e)],null),x);e=ah;f=Nd}else if(I0(M,Za)&&u0(ab))if(jc=$APP.C.h(U,ab),null==jc){var jf=$APP.Ke(E_.g(M))+1,Ri=$APP.ym.P(v0(e,ab,jf),S0,$APP.Zh,jf,ab),zg=f;e=Ri;f=zg}else{jf=jc;var Bj=Ri=$APP.ym.P(e,S0,$APP.Zh,jf,ab),Ll=$APP.Ye(new $APP.H(null,
4,5,$APP.I,[La,Ra,Za,jf],null),x);e=Bj;f=Ll}else if(u0(Ra)){X=n0(M,Za,N_)?$APP.mL.g($APP.v(q_(M,u_,Za,ab,null,null))):null;var Si=$APP.C.h(U,Ra);if($APP.l(function(){var kf=X;return $APP.l(kf)?(kf=Si,$APP.l(kf)?$APP.Yh.h(X,Si):kf):kf}()))return NQa(a,e,b,Ra,X);var Sm=function(){var kf=X;if($APP.l(kf))return kf;kf=Si;return $APP.l(kf)?kf:$APP.Ke(E_.g(M))+1}(),hk=v0(e,Ra,Sm),eo=$APP.Ye(new $APP.H(null,4,5,$APP.I,[La,Sm,Za,ab],null),x);e=hk;f=eo}else if($APP.jb(R0.g($APP.Vd(w)))&&q0(M,Za)){var Mh=$APP.yo.h(M,
new $APP.H(null,3,5,$APP.I,[$APP.B_,Za,T_],null));if($APP.z.h($APP.Fd(Mh),$APP.Fd(ab))&&$APP.Qf($APP.kb,ab)&&$APP.Qf(function(kf,Tp,mJ,KD,nJ,LD,oJ,Nh,MD){return function(fu){var Hr=$APP.A.j(fu,0,null);fu=$APP.A.j(fu,1,null);Hr=y0.g($APP.v(q_(MD,$APP.C_,LD,Hr,null,null)));return $APP.z.h(fu,Hr)}}(e,f,Mh,Fa,La,Ra,Za,ab,M,U,h,m,r,n,w,x,a,c,d),$APP.Gi.j($APP.qv,Mh,ab)))f=x;else throw $APP.xl.h(["Can’t modify tuple attrs directly: ",$APP.aj.l($APP.B([w]))].join(""),new $APP.k(null,2,[$APP.VI,C0,k0,w],
null));}else if($APP.z.h(La,J0)){var fo=M0(e,w),Ge=x;e=fo;f=Ge}else if($APP.z.h(La,Q0)&&null!=ab)if(jc=r0(M,Ra),null==jc)f=x;else{Af=jc;Oc=I0(M,Za)?K0(M,ab):ab;var Ti=Za;if(!(Ti instanceof $APP.F||"string"===typeof Ti)){var Tm=w;throw $APP.xl.h(["Bad entity attribute ",$APP.aj.l($APP.B([Ti]))," at ",$APP.aj.l($APP.B([Tm])),", expected keyword or string"].join(""),new $APP.k(null,3,[Z_,Ti,F0,Tm,$APP.VI,C0],null));}if(null==Oc){var Ml=w;throw $APP.xl.h(["Cannot store nil as a value at ",$APP.aj.l($APP.B([Ml]))].join(""),
new $APP.k(null,3,[$APP.cJ,null,F0,Ml,$APP.VI,C0],null));}var zh=p_(M,new $APP.H(null,3,5,$APP.I,[Af,Za,Oc],null));if(null==zh)f=x;else{var Sf=N0(e,zh),Ag=x;e=Sf;f=Ag}}else if($APP.z.h(La,pTa)||$APP.z.h(La,Q0))if(jc=r0(M,Ra),null==jc)f=x;else{Af=jc;qb=function(){var kf=Za;if(kf instanceof $APP.F||"string"===typeof kf)return null;var Tp=w;throw $APP.xl.h(["Bad entity attribute ",$APP.aj.l($APP.B([kf]))," at ",$APP.aj.l($APP.B([Tp])),", expected keyword or string"].join(""),new $APP.k(null,3,[Z_,kf,
F0,Tp,$APP.VI,C0],null));}();hg=$APP.Ce(o_(M,new $APP.H(null,2,5,$APP.I,[Af,Za],null)));var dd=$APP.Ae.j(N0,e,hg),ee=$APP.K.h(MQa(M,hg),x);e=dd;f=ee}else if($APP.z.h(La,O0)||$APP.z.h(La,nUa))if(jc=r0(M,Ra),null==jc)f=x;else{Af=jc;var sc=$APP.Ce(o_(M,new $APP.H(null,1,5,$APP.I,[Af],null))),Bf=$APP.Ce($APP.mg.l(function(kf,Tp,mJ,KD,nJ,LD,oJ,Nh,MD,fu,Hr){return function(ND){return o_(Hr,new $APP.H(null,3,5,$APP.I,[null,ND,KD],null))}}(e,f,sc,Af,jc,Fa,La,Ra,Za,ab,M,U,h,m,r,n,w,x,a,c,d),$APP.B([z_(M,R_)]))),
go=$APP.Ae.j(N0,e,$APP.K.h(sc,Bf)),Gr=$APP.K.h(MQa(M,sc),x);e=go;f=Gr}else throw $APP.xl.h(["Unknown operation at ",$APP.aj.l($APP.B([w])),", expected :db/add, :db/retract, :db.fn/call, :db.fn/retractAttribute, :db.fn/retractEntity or an ident corresponding to an installed transaction function (e.g. {:db/ident \x3ckeyword\x3e :db/fn \x3cIfn\x3e}, usage of :db/ident requires {:db/unique :db.unique/identity} in schema)"].join(""),new $APP.k(null,3,[$APP.VI,C0,EVa,La,k0,w],null));}}else if(eQa(w)){var He=
w;Ra=$APP.A.j(He,0,null);Za=$APP.A.j(He,1,null);ab=$APP.A.j(He,2,null);var Lg=$APP.A.j(He,3,null),JD=$APP.A.j(He,4,null);if($APP.l(JD)){var TO=M0(e,new $APP.H(null,5,5,$APP.I,[J0,Ra,Za,ab,Lg],null)),UO=x;e=TO;f=UO}else{var VO=e,WO=$APP.Ye(new $APP.H(null,4,5,$APP.I,[Q0,Ra,Za,ab],null),x);e=VO;f=WO}}else throw $APP.xl.h(["Bad entity type at ",$APP.aj.l($APP.B([w])),", expected map or vector"].join(""),new $APP.k(null,2,[$APP.VI,C0,k0,w],null));}}};$APP.g=Z0.prototype;$APP.g.entry_set=function(){return $APP.Be($APP.Gi.h($APP.Be,Y0(this)))};
$APP.g.forEach=function(){function a(d,e){for(var f=$APP.u(Y0(this)),h=null,m=0,r=0;;)if(r<m){var n=h.ea(null,r),w=$APP.A.j(n,0,null);n=$APP.A.j(n,1,null);d.call(e,n,w,this);r+=1}else if(f=$APP.u(f))$APP.he(f)?(h=$APP.Kc(f),f=$APP.Lc(f),w=h,m=$APP.Fd(h),h=w):(h=$APP.v(f),w=$APP.A.j(h,0,null),n=$APP.A.j(h,1,null),d.call(e,n,w,this),f=$APP.y(f),h=null,m=0),r=0;else return null}function b(d){for(var e=$APP.u(Y0(this)),f=null,h=0,m=0;;)if(m<h){var r=f.ea(null,m),n=$APP.A.j(r,0,null);r=$APP.A.j(r,1,null);
d.j?d.j(r,n,this):d.call(null,r,n,this);m+=1}else if(e=$APP.u(e))$APP.he(e)?(f=$APP.Kc(e),e=$APP.Lc(e),n=f,h=$APP.Fd(f),f=n):(f=$APP.v(e),n=$APP.A.j(f,0,null),r=$APP.A.j(f,1,null),d.j?d.j(r,n,this):d.call(null,r,n,this),e=$APP.y(e),f=null,h=0),m=0;else return null}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.g=b;c.h=a;return c}();
$APP.g.get=function(a){if($APP.z.h(a,":db/id"))return this.eid;if(D0(a))return W0(TQa(this.db,this.eid,E0(a),null));var b=v5.h?v5.h(this,a):v5.call(null,this,a);return o0(this.db,a)?W0(b):b};$APP.g.key_set=function(){return $APP.Be($APP.Vh(this))};$APP.g.entries=function(){return $APP.Yg(Y0(this))};$APP.g.value_set=function(){return $APP.Be($APP.Gi.h($APP.Kd,Y0(this)))};$APP.g.toString=function(){return $APP.Vc(this)};$APP.g.keys=function(){return $APP.od($APP.Vh(this))};
$APP.g.values=function(){return $APP.od($APP.Gi.h($APP.Kd,Y0(this)))};$APP.g.equiv=function(a){return a1.h?a1.h(this,a):a1.call(null,this,a)};$APP.g.has=function(a){return null!=this.get(a)};$APP.g.fa=function(a,b){return v5.j?v5.j(this,b,null):v5.call(null,this,b,null)};$APP.g.N=function(a,b,c){return v5.j?v5.j(this,b,c):v5.call(null,this,b,c)};$APP.g.V=function(a,b,c){return $APP.rc($APP.Zh.j($APP.q(this.cache),H0,this.eid),b,c)};$APP.g.aa=function(){X0.g?X0.g(this):X0.call(null,this);return $APP.Fd($APP.q(this.cache))};
$APP.g.Y=function(){return b1.g?b1.g(this):b1.call(null,this)};$APP.g.R=function(a,b){return a1.h?a1.h(this,b):a1.call(null,this,b)};$APP.g.ja=function(a,b){return $APP.Yh.h(NUa,v5.j?v5.j(this,b,NUa):v5.call(null,this,b,NUa))};$APP.g.Z=function(){X0.g?X0.g(this):X0.call(null,this);return $APP.u($APP.q(this.cache))};
$APP.g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length-1)].join(""));}};$APP.g.apply=function(a,b){return this.call.apply(this,[this].concat($APP.ub(b)))};$APP.g.g=function(a){return v5.h?v5.h(this,a):v5.call(null,this,a)};$APP.g.h=function(a,b){return v5.j?v5.j(this,a,b):v5.call(null,this,a,b)};
var v5=function v5(a){switch(arguments.length){case 2:return v5.h(arguments[0],arguments[1]);case 3:return v5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};v5.h=function(a,b){return v5.j(a,b,null)};
v5.j=function(a,b,c){if($APP.z.h(b,H0))return a.eid;if(D0(b))return TQa(a.db,a.eid,E0(b),c);var d=$APP.q(a.cache);d=d.g?d.g(b):d.call(null,b);if(null==d){if($APP.l($APP.q(a.ki)))return c;d=$APP.yf(o_(a.db,new $APP.H(null,2,5,$APP.I,[a.eid,b],null)));if(null==d)return c;c=SQa(a.db,b,d);$APP.cg(a.cache,$APP.Zh.j($APP.q(a.cache),b,c));return c}return d};v5.A=3;OPa("datascript.impl.entity.Entity",Z0);var w5=function w5(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return w5.l(0<c.length?new $APP.jd(c.slice(0),0,null):null)};w5.l=function(a){var b=$APP.Fd(a);return $APP.Yh.h($APP.fg.h(b/2,a),$APP.ig.h(b/2,a))};w5.A=0;w5.F=function(a){return this.l($APP.u(a))};var x5=function x5(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return x5.l(arguments[0],arguments[1],2<c.length?new $APP.jd(c.slice(2),0,null):null)};
x5.l=function(a,b,c){return $APP.Ae.j(function(d,e){d=$APP.v(o_(a,new $APP.H(null,2,5,$APP.I,[r0(a,b),e],null)));return null==d?null:$APP.vd(new $APP.H(null,2,5,$APP.I,[z0.g(d),y0.g(d)],null))},null,c)};x5.A=2;x5.F=function(a){var b=$APP.v(a),c=$APP.y(a);a=$APP.v(c);c=$APP.y(c);return this.l(b,a,c)};var y5=function y5(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return y5.l(0<c.length?new $APP.jd(c.slice(0),0,null):null)};
y5.l=function(a){return $APP.Ae.j(function(b,c){return $APP.l(c)?c:$APP.vd(c)},!0,a)};y5.A=0;y5.F=function(a){return this.l($APP.u(a))};var z5=function z5(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return z5.l(0<c.length?new $APP.jd(c.slice(0),0,null):null)};z5.l=function(a){return $APP.Ae.j(function(b,c){return $APP.l(c)?$APP.vd(c):c},null,a)};z5.A=0;z5.F=function(a){return this.l($APP.u(a))};
var A5=function A5(a){switch(arguments.length){case 1:return A5.g(arguments[0]);case 2:return A5.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return A5.l(arguments[0],arguments[1],new $APP.jd(c.slice(2),0,null))}};A5.g=function(){return!0};A5.h=function(a,b){return 0>e_(a,b)};A5.l=function(a,b,c){for(;;)if(A5.h(a,b))if($APP.y(c))a=b,b=$APP.v(c),c=$APP.y(c);else return A5.h(b,$APP.v(c));else return!1};
A5.F=function(a){var b=$APP.v(a),c=$APP.y(a);a=$APP.v(c);c=$APP.y(c);return this.l(b,a,c)};A5.A=2;var B5=function B5(a){switch(arguments.length){case 1:return B5.g(arguments[0]);case 2:return B5.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return B5.l(arguments[0],arguments[1],new $APP.jd(c.slice(2),0,null))}};B5.g=function(){return!0};B5.h=function(a,b){return 0<e_(a,b)};
B5.l=function(a,b,c){for(;;)if(B5.h(a,b))if($APP.y(c))a=b,b=$APP.v(c),c=$APP.y(c);else return B5.h(b,$APP.v(c));else return!1};B5.F=function(a){var b=$APP.v(a),c=$APP.y(a);a=$APP.v(c);c=$APP.y(c);return this.l(b,a,c)};B5.A=2;
var C5=function C5(a){switch(arguments.length){case 1:return C5.g(arguments[0]);case 2:return C5.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return C5.l(arguments[0],arguments[1],new $APP.jd(c.slice(2),0,null))}};C5.g=function(){return!0};C5.h=function(a,b){return!(0<e_(a,b))};C5.l=function(a,b,c){for(;;)if(C5.h(a,b))if($APP.y(c))a=b,b=$APP.v(c),c=$APP.y(c);else return C5.h(b,$APP.v(c));else return!1};
C5.F=function(a){var b=$APP.v(a),c=$APP.y(a);a=$APP.v(c);c=$APP.y(c);return this.l(b,a,c)};C5.A=2;var D5=function D5(a){switch(arguments.length){case 1:return D5.g(arguments[0]);case 2:return D5.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return D5.l(arguments[0],arguments[1],new $APP.jd(c.slice(2),0,null))}};D5.g=function(){return!0};D5.h=function(a,b){return!(0>e_(a,b))};
D5.l=function(a,b,c){for(;;)if(D5.h(a,b))if($APP.y(c))a=b,b=$APP.v(c),c=$APP.y(c);else return D5.h(b,$APP.v(c));else return!1};D5.F=function(a){var b=$APP.v(a),c=$APP.y(a);a=$APP.v(c);c=$APP.y(c);return this.l(b,a,c)};D5.A=2;
var y1=$APP.Hh([$APP.yI,$APP.ms,$APP.Sw,WVa,$APP.PH,$APP.yF,$APP.FH,$APP.$E,hVa,$APP.pw,$Ta,$APP.Tz,$APP.bm,$APP.QL,$APP.mC,$APP.mz,$APP.vD,f4,mUa,$APP.MG,$APP.BH,FTa,$APP.GH,$APP.xJ,$APP.YG,$APP.gz,NTa,CUa,$APP.Lx,$APP.lJ,$APP.MH,$APP.XD,$APP.TK,$APP.WK,$APP.SK,$APP.ix,$APP.WG,$APP.mA,MTa,$APP.nx,$APP.VF,RUa,$APP.pG,$APP.JK,$APP.Jy,$APP.wx,$APP.zz,$APP.px,$APP.wF,$APP.EH,$APP.jD,$APP.rJ,$APP.ZG,$APP.iD,$APP.Ew,$APP.lG,$APP.oz,$APP.rA,$APP.fx,OTa,$APP.VH,$APP.iK,LVa,$APP.MA,$APP.Hz,$APP.zE,$APP.HB,
$APP.BE,iUa,$APP.UA,$APP.rs,$APP.uJ,$APP.WF,$APP.Vx],[$APP.je,y5,$APP.Kba,function(a,b,c,d){if(null==d)throw $APP.xl.h("get-else: nil default value is not supported",new $APP.k(null,1,[$APP.VI,d4],null));a=$APP.v(o_(a,new $APP.H(null,2,5,$APP.I,[r0(a,b),c],null)));return null==a?d:y0.g(a)},D5,$APP.Nv,B5,$APP.Fd,x5,$APP.fb,$APP.Ee,$APP.td,$APP.Lu,$APP.Le,$APP.Paa,$APP.jb,$APP.Ee,w5,$APP.qv,$APP.wi,C5,$APP.Kk,$APP.z,$APP.Qu,$APP.Ju,$APP.hi,function(a,b,c){return null==$APP.C.h(V0(a,b),c)},$APP.Ee,$APP.ej,
$APP.Wf,$APP.Fk,$APP.io,$APP.ue,$APP.Ym,$APP.Km,$APP.Zd,$APP.Ku,$APP.aj,E4,$APP.Vd,$APP.Pe,$APP.Yh,$APP.Lv,$APP.Fe,$APP.yi,$APP.qv,$APP.Yh,$APP.C,$APP.p,A5,$APP.af,$APP.Hi,$APP.Vn,$APP.kb,$APP.Oe,$APP.Uv,$APP.ti,$APP.J,$APP.re,$APP.Tca,$APP.xi,$APP.Je,$APP.Lk,$APP.co,$APP.Me,$APP.Uf,$APP.pb,$APP.Qe,$APP.Jk,$APP.yf,z5,$APP.eb,$APP.fi,$APP.ui]),E5=function E5(a){switch(arguments.length){case 1:return E5.g(arguments[0]);case 2:return E5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",
$APP.p.g(arguments.length)].join(""));}};E5.g=function(a){return $APP.Ae.j(function(b,c){return 0>$APP.ue(c,b)?c:b},$APP.v(a),$APP.y(a))};E5.h=function(a,b){return $APP.Ce($APP.Ae.j(function(c,d){return $APP.Fd(c)<a?$APP.jk.h($APP.ue,$APP.Ve.h(c,d)):0>$APP.ue(d,$APP.Pd(c))?$APP.jk.h($APP.ue,$APP.Ve.h($APP.gi(c),d)):c},$APP.pg,b))};E5.A=2;
var F5=function F5(a){switch(arguments.length){case 1:return F5.g(arguments[0]);case 2:return F5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};F5.g=function(a){return $APP.Ae.j(function(b,c){return 0<$APP.ue(c,b)?c:b},$APP.v(a),$APP.y(a))};F5.h=function(a,b){return $APP.Ce($APP.Ae.j(function(c,d){return $APP.Fd(c)<a?$APP.jk.h($APP.ue,$APP.Ve.h(c,d)):0<$APP.ue(d,$APP.v(c))?$APP.jk.h($APP.ue,$APP.Ve.h($APP.y(c),d)):c},$APP.pg,b))};
F5.A=2;var G5=function G5(a){switch(arguments.length){case 1:return G5.g(arguments[0]);case 2:return G5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};G5.g=function(a){return $APP.fj(a)};G5.h=function(a,b){return $APP.Ce($APP.Nr.h(a,function(){return $APP.fj(b)}))};G5.A=2;
var aWa=$APP.Hh([lTa,$APP.$E,KVa,MUa,$APP.xJ,$APP.SK,rVa,$APP.qI,iVa,HUa,$APP.lG,bUa],[XQa,$APP.Fd,function(a){var b=$APP.jk.g(a);a=$APP.Fd(a);var c=a>>1,d=$APP.A.h(b,c);return $APP.Uf(a)?(d+$APP.A.h(b,c-1))/2:d},c1,E5,F5,function(a){return $APP.Fd($APP.Cv.g(a))},$APP.fi,WQa,function(a){return Math.sqrt(XQa(a))},G5,function(a,b){return $APP.Ce($APP.fg.h(a,$APP.Taa(b)))}]);$APP.g=d1.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "as":return this.as;case "default":return this.Fc;case "limit":return this.wb;case "name":return this.name;case "pattern":return this.pattern;case "recursion-limit":return this.mc;case "recursive?":return this.ya;case "reverse?":return this.qc;case "xform":return this.yb;case "multival?":return this.lc;case "ref?":return this.nc;case "component?":return this.jc;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.pull-parser.PullAttr{",", ","}",c,$APP.K.h(new $APP.H(null,12,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.on,this.as],null),new $APP.H(null,2,5,$APP.I,[$APP.km,this.Fc],null),new $APP.H(null,2,5,$APP.I,[e1,this.wb],null),new $APP.H(null,2,5,$APP.I,[$APP.O,this.name],null),new $APP.H(null,2,5,$APP.I,[f1,this.pattern],null),new $APP.H(null,2,5,$APP.I,[g1,this.mc],null),new $APP.H(null,2,5,$APP.I,
[h1,this.ya],null),new $APP.H(null,2,5,$APP.I,[i1,this.qc],null),new $APP.H(null,2,5,$APP.I,[j1,this.yb],null),new $APP.H(null,2,5,$APP.I,[k1,this.lc],null),new $APP.H(null,2,5,$APP.I,[l1,this.nc],null),new $APP.H(null,2,5,$APP.I,[m1,this.jc],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,12,new $APP.H(null,12,5,$APP.I,[$APP.on,$APP.km,e1,$APP.O,f1,g1,h1,i1,j1,k1,l1,m1],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new d1(this.as,this.Fc,this.wb,this.name,this.pattern,this.mc,this.ya,this.qc,this.yb,this.lc,this.nc,this.jc,this.B,this.o,this.D)};$APP.g.aa=function(){return 12+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1743810262^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.as,b.as)&&$APP.z.h(this.default,b.default)&&$APP.z.h(this.wb,b.wb)&&$APP.z.h(this.name,b.name)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.mc,b.mc)&&$APP.z.h(this.ya,b.ya)&&$APP.z.h(this.qc,b.qc)&&$APP.z.h(this.yb,b.yb)&&$APP.z.h(this.lc,b.lc)&&$APP.z.h(this.nc,b.nc)&&$APP.z.h(this.jc,b.jc)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,12,[j1,null,e1,null,i1,null,g1,null,$APP.km,null,$APP.O,null,$APP.on,null,h1,null,m1,null,l1,null,k1,null,f1,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new d1(this.as,this.Fc,this.wb,this.name,this.pattern,this.mc,this.ya,this.qc,this.yb,this.lc,this.nc,this.jc,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "as":case "default":case "limit":case "name":case "pattern":case "recursion-limit":case "recursive?":case "reverse?":case "xform":case "multival?":case "ref?":case "component?":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.on,b):$APP.$e.call(null,$APP.on,b))?new d1(c,this.Fc,this.wb,this.name,this.pattern,this.mc,this.ya,this.qc,this.yb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.km,b):$APP.$e.call(null,$APP.km,b))?new d1(this.as,c,this.wb,this.name,this.pattern,this.mc,this.ya,this.qc,this.yb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(e1,b):$APP.$e.call(null,e1,b))?new d1(this.as,this.Fc,c,this.name,
this.pattern,this.mc,this.ya,this.qc,this.yb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.O,b):$APP.$e.call(null,$APP.O,b))?new d1(this.as,this.Fc,this.wb,c,this.pattern,this.mc,this.ya,this.qc,this.yb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(f1,b):$APP.$e.call(null,f1,b))?new d1(this.as,this.Fc,this.wb,this.name,c,this.mc,this.ya,this.qc,this.yb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(g1,b):$APP.$e.call(null,
g1,b))?new d1(this.as,this.Fc,this.wb,this.name,this.pattern,c,this.ya,this.qc,this.yb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(h1,b):$APP.$e.call(null,h1,b))?new d1(this.as,this.Fc,this.wb,this.name,this.pattern,this.mc,c,this.qc,this.yb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(i1,b):$APP.$e.call(null,i1,b))?new d1(this.as,this.Fc,this.wb,this.name,this.pattern,this.mc,this.ya,c,this.yb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.$e.h?
$APP.$e.h(j1,b):$APP.$e.call(null,j1,b))?new d1(this.as,this.Fc,this.wb,this.name,this.pattern,this.mc,this.ya,this.qc,c,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(k1,b):$APP.$e.call(null,k1,b))?new d1(this.as,this.Fc,this.wb,this.name,this.pattern,this.mc,this.ya,this.qc,this.yb,c,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(l1,b):$APP.$e.call(null,l1,b))?new d1(this.as,this.Fc,this.wb,this.name,this.pattern,this.mc,this.ya,this.qc,this.yb,this.lc,c,
this.jc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(m1,b):$APP.$e.call(null,m1,b))?new d1(this.as,this.Fc,this.wb,this.name,this.pattern,this.mc,this.ya,this.qc,this.yb,this.lc,this.nc,c,this.B,this.o,null):new d1(this.as,this.Fc,this.wb,this.name,this.pattern,this.mc,this.ya,this.qc,this.yb,this.lc,this.nc,this.jc,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,12,5,$APP.I,[new $APP.se($APP.on,this.as,null),new $APP.se($APP.km,this.Fc,null),new $APP.se(e1,this.wb,null),new $APP.se($APP.O,this.name,null),new $APP.se(f1,this.pattern,null),new $APP.se(g1,this.mc,null),new $APP.se(h1,this.ya,null),new $APP.se(i1,this.qc,null),new $APP.se(j1,this.yb,null),new $APP.se(k1,this.lc,null),new $APP.se(l1,this.nc,null),new $APP.se(m1,this.jc,null)],null),this.o))};
$APP.g.X=function(a,b){return new d1(this.as,this.Fc,this.wb,this.name,this.pattern,this.mc,this.ya,this.qc,this.yb,this.lc,this.nc,this.jc,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g=n1.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "attrs":return this.qa;case "first-attr":return this.dd;case "last-attr":return this.od;case "reverse-attrs":return this.Yc;case "wildcard?":return this.xc;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.pull-parser.PullPattern{",", ","}",c,$APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[o1,this.qa],null),new $APP.H(null,2,5,$APP.I,[p1,this.dd],null),new $APP.H(null,2,5,$APP.I,[q1,this.od],null),new $APP.H(null,2,5,$APP.I,[r1,this.Yc],null),new $APP.H(null,2,5,$APP.I,[s1,this.xc],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,5,new $APP.H(null,5,5,$APP.I,[o1,p1,q1,r1,s1],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new n1(this.qa,this.dd,this.od,this.Yc,this.xc,this.B,this.o,this.D)};$APP.g.aa=function(){return 5+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-795554044^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.qa,b.qa)&&$APP.z.h(this.dd,b.dd)&&$APP.z.h(this.od,b.od)&&$APP.z.h(this.Yc,b.Yc)&&$APP.z.h(this.xc,b.xc)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,5,[r1,null,p1,null,o1,null,s1,null,q1,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new n1(this.qa,this.dd,this.od,this.Yc,this.xc,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "attrs":case "first-attr":case "last-attr":case "reverse-attrs":case "wildcard?":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(o1,b):$APP.$e.call(null,o1,b))?new n1(c,this.dd,this.od,this.Yc,this.xc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(p1,b):$APP.$e.call(null,p1,b))?new n1(this.qa,c,this.od,this.Yc,this.xc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(q1,b):$APP.$e.call(null,q1,b))?new n1(this.qa,this.dd,c,this.Yc,this.xc,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(r1,b):$APP.$e.call(null,r1,b))?new n1(this.qa,this.dd,this.od,c,this.xc,this.B,this.o,
null):$APP.l($APP.$e.h?$APP.$e.h(s1,b):$APP.$e.call(null,s1,b))?new n1(this.qa,this.dd,this.od,this.Yc,c,this.B,this.o,null):new n1(this.qa,this.dd,this.od,this.Yc,this.xc,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.se(o1,this.qa,null),new $APP.se(p1,this.dd,null),new $APP.se(q1,this.od,null),new $APP.se(r1,this.Yc,null),new $APP.se(s1,this.xc,null)],null),this.o))};
$APP.g.X=function(a,b){return new n1(this.qa,this.dd,this.od,this.Yc,this.xc,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};var fRa=YQa(new $APP.k(null,3,[$APP.O,H0,$APP.on,H0,j1,$APP.Ee],null)),w1=t1(new $APP.k(null,1,[o1,new $APP.E(null,fRa,null,1,null)],null)),$Qa=$APP.Zh.j(w1,s1,!0);$APP.g=E1.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "db":return this.db;case "visitor":return this.ne;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.pull-api.Context{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Z4,this.db],null),new $APP.H(null,2,5,$APP.I,[R1,this.ne],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,2,new $APP.H(null,2,5,$APP.I,[Z4,R1],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new E1(this.db,this.ne,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1727735959^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.db,b.db)&&$APP.z.h(this.ne,b.ne)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,2,[Z4,null,R1,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new E1(this.db,this.ne,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "db":case "visitor":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(Z4,b):$APP.$e.call(null,Z4,b))?new E1(c,this.ne,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(R1,b):$APP.$e.call(null,R1,b))?new E1(this.db,c,this.B,this.o,null):new E1(this.db,this.ne,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.se(Z4,this.db,null),new $APP.se(R1,this.ne,null)],null),this.o))};$APP.g.X=function(a,b){return new E1(this.db,this.ne,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g=I1.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "value":return this.value;case "datoms":return this.va;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.pull-api.ResultFrame{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.cJ,this.value],null),new $APP.H(null,2,5,$APP.I,[$APP.f0,this.va],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.cJ,$APP.f0],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new I1(this.value,this.va,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=836381841^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.value,b.value)&&$APP.z.h(this.va,b.va)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,2,[$APP.cJ,null,$APP.f0,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new I1(this.value,this.va,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "value":case "datoms":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.cJ,b):$APP.$e.call(null,$APP.cJ,b))?new I1(c,this.va,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.f0,b):$APP.$e.call(null,$APP.f0,b))?new I1(this.value,c,this.B,this.o,null):new I1(this.value,this.va,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.se($APP.cJ,this.value,null),new $APP.se($APP.f0,this.va,null)],null),this.o))};
$APP.g.X=function(a,b){return new I1(this.value,this.va,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g=J1.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "acc":return this.ma;case "attr":return this.ia;case "datoms":return this.va;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.pull-api.MultivalAttrFrame{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[F4,this.ma],null),new $APP.H(null,2,5,$APP.I,[X4,this.ia],null),new $APP.H(null,2,5,$APP.I,[$APP.f0,this.va],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,3,new $APP.H(null,3,5,$APP.I,[F4,X4,$APP.f0],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new J1(this.ma,this.ia,this.va,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1829867699^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ma,b.ma)&&$APP.z.h(this.ia,b.ia)&&$APP.z.h(this.va,b.va)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,3,[F4,null,$APP.f0,null,X4,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new J1(this.ma,this.ia,this.va,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "acc":case "attr":case "datoms":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(F4,b):$APP.$e.call(null,F4,b))?new J1(c,this.ia,this.va,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(X4,b):$APP.$e.call(null,X4,b))?new J1(this.ma,c,this.va,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.f0,b):$APP.$e.call(null,$APP.f0,b))?new J1(this.ma,this.ia,c,this.B,this.o,null):new J1(this.ma,this.ia,this.va,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.se(F4,this.ma,null),new $APP.se(X4,this.ia,null),new $APP.se($APP.f0,this.va,null)],null),this.o))};$APP.g.X=function(a,b){return new J1(this.ma,this.ia,this.va,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};
$APP.g.Zf=function(){for(var a=this,b=a.ma,c=a.va;;){var d=B1(c);if(null==d||$APP.Yh.h(d.a,a.ia.name))return new $APP.H(null,1,5,$APP.I,[new I1(function(){var h=$APP.yf($APP.Bc(b)),m=a.ia.yb;return m.g?m.g(h):m.call(null,h)}(),function(){var h=c;return $APP.l(h)?h:$APP.md}(),null,null,null)],null);if($APP.l(function(){var h=a.ia.wb;return $APP.l(h)?$APP.Fd(b)>=a.ia.wb:h}()))for(var e=c;;){d=B1(e);if(null==d||$APP.Yh.h(d.a,a.ia.name))return new $APP.H(null,1,5,$APP.I,[new I1($APP.Bc(b),function(){var h=
e;return $APP.l(h)?h:$APP.md}(),null,null,null)],null);e=C1(e)}else{d=$APP.og.h(b,d.v);var f=C1(c);b=d;c=f}}};$APP.g=K1.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "seen":return this.ra;case "recursion-limits":return this.wa;case "acc":return this.ma;case "pattern":return this.pattern;case "attr":return this.ia;case "datoms":return this.va;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.pull-api.MultivalRefAttrFrame{",", ","}",c,$APP.K.h(new $APP.H(null,6,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[H4,this.ra],null),new $APP.H(null,2,5,$APP.I,[U4,this.wa],null),new $APP.H(null,2,5,$APP.I,[F4,this.ma],null),new $APP.H(null,2,5,$APP.I,[f1,this.pattern],null),new $APP.H(null,2,5,$APP.I,[X4,this.ia],null),new $APP.H(null,2,5,$APP.I,[$APP.f0,this.va],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,6,new $APP.H(null,6,5,$APP.I,[H4,U4,F4,f1,X4,$APP.f0],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new K1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.va,this.B,this.o,this.D)};$APP.g.aa=function(){return 6+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1769511936^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ra,b.ra)&&$APP.z.h(this.wa,b.wa)&&$APP.z.h(this.ma,b.ma)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.ia,b.ia)&&$APP.z.h(this.va,b.va)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,6,[F4,null,H4,null,U4,null,$APP.f0,null,f1,null,X4,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new K1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.va,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "datoms":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(H4,b):$APP.$e.call(null,H4,b))?new K1(c,this.wa,this.ma,this.pattern,this.ia,this.va,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(U4,b):$APP.$e.call(null,U4,b))?new K1(this.ra,c,this.ma,this.pattern,this.ia,this.va,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(F4,b):$APP.$e.call(null,F4,b))?new K1(this.ra,this.wa,c,this.pattern,this.ia,this.va,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(f1,b):$APP.$e.call(null,f1,b))?new K1(this.ra,
this.wa,this.ma,c,this.ia,this.va,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(X4,b):$APP.$e.call(null,X4,b))?new K1(this.ra,this.wa,this.ma,this.pattern,c,this.va,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.f0,b):$APP.$e.call(null,$APP.f0,b))?new K1(this.ra,this.wa,this.ma,this.pattern,this.ia,c,this.B,this.o,null):new K1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.va,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,6,5,$APP.I,[new $APP.se(H4,this.ra,null),new $APP.se(U4,this.wa,null),new $APP.se(F4,this.ma,null),new $APP.se(f1,this.pattern,null),new $APP.se(X4,this.ia,null),new $APP.se($APP.f0,this.va,null)],null),this.o))};$APP.g.X=function(a,b){return new K1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.va,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};
$APP.g.Vg=function(a,b){a=this.ra;var c=this.wa,d=this.ma;b=b.value;b=null==b?d:$APP.og.h(d,b);return new K1(a,c,b,this.pattern,this.ia,C1(this.va),null,null,null)};
$APP.g.Zf=function(a,b){var c=this;a=B1(c.va);if(null==a||$APP.Yh.h(a.a,c.ia.name))return new $APP.H(null,1,5,$APP.I,[new I1(function(){var e=$APP.yf($APP.Bc(c.ma)),f=c.ia.yb;return f.g?f.g(e):f.call(null,e)}(),function(){var e=c.va;return $APP.l(e)?e:$APP.md}(),null,null,null)],null);if($APP.l(function(){var e=c.ia.wb;return $APP.l(e)?$APP.Fd(c.ma)>=c.ia.wb:e}()))for(var d=c.va;;){b=B1(d);if(null==b||$APP.Yh.h(b.a,c.ia.name))return new $APP.H(null,1,5,$APP.I,[new I1($APP.Bc(c.ma),function(){var e=
d;return $APP.l(e)?e:$APP.md}(),null,null,null)],null);d=C1(d)}else return a=$APP.l(c.ia.qc)?a.e:a.v,new $APP.H(null,2,5,$APP.I,[this,P1.ka?P1.ka(b,c.ra,c.wa,c.pattern,c.ia,a):P1.call(null,b,c.ra,c.wa,c.pattern,c.ia,a)],null)};$APP.g=L1.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "seen":return this.ra;case "recursion-limits":return this.wa;case "acc":return this.ma;case "pattern":return this.pattern;case "attr":return this.ia;case "attrs":return this.qa;case "datoms":return this.va;case "id":return this.id;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.pull-api.AttrsFrame{",", ","}",c,$APP.K.h(new $APP.H(null,8,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[H4,this.ra],null),new $APP.H(null,2,5,$APP.I,[U4,this.wa],null),new $APP.H(null,2,5,$APP.I,[F4,this.ma],null),new $APP.H(null,2,5,$APP.I,[f1,this.pattern],null),new $APP.H(null,2,5,$APP.I,[X4,this.ia],null),new $APP.H(null,2,5,$APP.I,[o1,this.qa],null),new $APP.H(null,2,5,$APP.I,[$APP.f0,this.va],
null),new $APP.H(null,2,5,$APP.I,[$APP.Gp,this.id],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,8,new $APP.H(null,8,5,$APP.I,[H4,U4,F4,f1,X4,o1,$APP.f0,$APP.Gp],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new L1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,this.B,this.o,this.D)};$APP.g.aa=function(){return 8+$APP.Fd(this.o)};
$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1127179791^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ra,b.ra)&&$APP.z.h(this.wa,b.wa)&&$APP.z.h(this.ma,b.ma)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.ia,b.ia)&&$APP.z.h(this.qa,b.qa)&&$APP.z.h(this.va,b.va)&&$APP.z.h(this.id,b.id)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,8,[F4,null,H4,null,$APP.Gp,null,U4,null,o1,null,$APP.f0,null,f1,null,X4,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new L1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "attrs":case "datoms":case "id":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(H4,b):$APP.$e.call(null,H4,b))?new L1(c,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(U4,b):$APP.$e.call(null,U4,b))?new L1(this.ra,c,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(F4,b):$APP.$e.call(null,F4,b))?new L1(this.ra,this.wa,c,this.pattern,this.ia,this.qa,this.va,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(f1,
b):$APP.$e.call(null,f1,b))?new L1(this.ra,this.wa,this.ma,c,this.ia,this.qa,this.va,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(X4,b):$APP.$e.call(null,X4,b))?new L1(this.ra,this.wa,this.ma,this.pattern,c,this.qa,this.va,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(o1,b):$APP.$e.call(null,o1,b))?new L1(this.ra,this.wa,this.ma,this.pattern,this.ia,c,this.va,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.f0,b):$APP.$e.call(null,$APP.f0,b))?new L1(this.ra,this.wa,this.ma,
this.pattern,this.ia,this.qa,c,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.Gp,b):$APP.$e.call(null,$APP.Gp,b))?new L1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,c,this.B,this.o,null):new L1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,8,5,$APP.I,[new $APP.se(H4,this.ra,null),new $APP.se(U4,this.wa,null),new $APP.se(F4,this.ma,null),new $APP.se(f1,this.pattern,null),new $APP.se(X4,this.ia,null),new $APP.se(o1,this.qa,null),new $APP.se($APP.f0,this.va,null),new $APP.se($APP.Gp,this.id,null)],null),this.o))};$APP.g.X=function(a,b){return new L1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.Vg=function(a,b){a=this.ra;var c=this.wa;var d=this.ma;var e=b.value;d=null==e?d:$APP.hh.j(d,this.ia.as,e);e=this.pattern;var f=B1(this.qa),h=C1(this.qa);b=b.va;b=$APP.l(b)?b:C1(this.va);return new L1(a,c,d,e,f,h,$APP.yf(b),this.id,null,null,null)};
$APP.g.Zf=function(a,b){var c=this,d=c.ma,e=c.ia;a=c.qa;for(var f=c.va;;){if(null==f&&null==e)return new $APP.H(null,1,5,$APP.I,[function(){var D=c.ra,G=c.wa,M=d,U=c.pattern,Y=B1(c.pattern.Yc),ba=C1(c.pattern.Yc),ca=c.id;return N1.Fa?N1.Fa(D,G,M,U,Y,ba,ca):N1.call(null,D,G,M,U,Y,ba,ca)}()],null);if(null!=e&&$APP.z.h(H0,e.name)){var h=$APP.hh.j(d,e.as,function(){var D=e.yb;return D.g?D.g(c.id):D.call(null,c.id)}()),m=B1(a);a=C1(a);d=h;e=m}else{var r=B1(f),n=$APP.l(function(){var D=r;return $APP.l(D)?
e:D}())?$APP.ue(e.name,r.a):null,w=function(){var D=null==e;if(D)return D;D=n;return $APP.l(D)?0<n:D}(),x=function(){var D=null==r;if(D)return D;D=n;return $APP.l(D)?0>n:D}();if($APP.l(function(){var D=c.pattern.xc;return $APP.l(D)?(D=null!=r)?w:D:D}()))m=JY(kQa(b.db).Bc,r.a,function(D,G,M,U,Y){return function(){return aRa(b.db,Y.a)}}(d,e,a,f,r,n,w,x,this)),h=d,a=$APP.l(e)?D1(a,e):null,d=h,e=m;else if($APP.l(w))h=d,m=e,f=C1(f),d=h,e=m;else if(F1(b,XUa,c.id,e.name,null),$APP.l(function(){var D=x;return $APP.l(D)?
null==e:D}()))h=d,m=B1(a),a=C1(a),d=h,e=m;else if($APP.l(function(){var D=x;return $APP.l(D)?null!=$APP.km.g(e):D}()))h=$APP.hh.j(d,e.as,$APP.km.g(e)),m=B1(a),a=C1(a),d=h,e=m;else if($APP.l(x))h=function(){var D=e.yb;return D.g?D.g(null):D.call(null,null)}(),null==h?(h=d,m=B1(a),a=C1(a),d=h,e=m):(h=$APP.hh.j(d,e.as,h),m=B1(a),a=C1(a),d=h,e=m);else{if($APP.l(function(){var D=e.lc;return $APP.l(D)?e.nc:D}()))return new $APP.H(null,2,5,$APP.I,[new L1(c.ra,c.wa,d,c.pattern,e,a,f,c.id,null,null,null),
new K1(c.ra,c.wa,$APP.zc($APP.pg),c.pattern,e,f,null,null,null)],null);if($APP.l(e.lc))return new $APP.H(null,2,5,$APP.I,[new L1(c.ra,c.wa,d,c.pattern,e,a,f,c.id,null,null,null),new J1($APP.zc($APP.pg),e,f,null,null,null)],null);if($APP.l(e.nc))return new $APP.H(null,2,5,$APP.I,[new L1(c.ra,c.wa,d,c.pattern,e,a,f,c.id,null,null,null),function(){var D=c.ra,G=c.wa,M=c.pattern,U=e,Y=r.v;return P1.ka?P1.ka(b,D,G,M,U,Y):P1.call(null,b,D,G,M,U,Y)}()],null);h=$APP.hh.j(d,e.as,function(){var D=r.v,G=e.yb;
return G.g?G.g(D):G.call(null,D)}());m=B1(a);a=C1(a);f=C1(f);d=h;e=m}}}};$APP.g=M1.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "seen":return this.ra;case "recursion-limits":return this.wa;case "acc":return this.ma;case "pattern":return this.pattern;case "attr":return this.ia;case "attrs":return this.qa;case "id":return this.id;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.pull-api.ReverseAttrsFrame{",", ","}",c,$APP.K.h(new $APP.H(null,7,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[H4,this.ra],null),new $APP.H(null,2,5,$APP.I,[U4,this.wa],null),new $APP.H(null,2,5,$APP.I,[F4,this.ma],null),new $APP.H(null,2,5,$APP.I,[f1,this.pattern],null),new $APP.H(null,2,5,$APP.I,[X4,this.ia],null),new $APP.H(null,2,5,$APP.I,[o1,this.qa],null),new $APP.H(null,2,5,$APP.I,[$APP.Gp,
this.id],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,7,new $APP.H(null,7,5,$APP.I,[H4,U4,F4,f1,X4,o1,$APP.Gp],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new M1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.id,this.B,this.o,this.D)};$APP.g.aa=function(){return 7+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=470210558^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ra,b.ra)&&$APP.z.h(this.wa,b.wa)&&$APP.z.h(this.ma,b.ma)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.ia,b.ia)&&$APP.z.h(this.qa,b.qa)&&$APP.z.h(this.id,b.id)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,7,[F4,null,H4,null,$APP.Gp,null,U4,null,o1,null,f1,null,X4,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new M1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.id,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "attrs":case "id":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(H4,b):$APP.$e.call(null,H4,b))?new M1(c,this.wa,this.ma,this.pattern,this.ia,this.qa,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(U4,b):$APP.$e.call(null,U4,b))?new M1(this.ra,c,this.ma,this.pattern,this.ia,this.qa,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(F4,b):$APP.$e.call(null,F4,b))?new M1(this.ra,this.wa,c,this.pattern,this.ia,this.qa,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(f1,b):$APP.$e.call(null,
f1,b))?new M1(this.ra,this.wa,this.ma,c,this.ia,this.qa,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(X4,b):$APP.$e.call(null,X4,b))?new M1(this.ra,this.wa,this.ma,this.pattern,c,this.qa,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(o1,b):$APP.$e.call(null,o1,b))?new M1(this.ra,this.wa,this.ma,this.pattern,this.ia,c,this.id,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.Gp,b):$APP.$e.call(null,$APP.Gp,b))?new M1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,c,this.B,
this.o,null):new M1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.id,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,7,5,$APP.I,[new $APP.se(H4,this.ra,null),new $APP.se(U4,this.wa,null),new $APP.se(F4,this.ma,null),new $APP.se(f1,this.pattern,null),new $APP.se(X4,this.ia,null),new $APP.se(o1,this.qa,null),new $APP.se($APP.Gp,this.id,null)],null),this.o))};
$APP.g.X=function(a,b){return new M1(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.id,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.Vg=function(a,b){a=this.ra;var c=this.wa,d=this.ma;b=b.value;b=null==b?d:$APP.hh.j(d,this.ia.as,b);return new M1(a,c,b,this.pattern,B1(this.qa),C1(this.qa),this.id,null,null,null)};
$APP.g.Zf=function(a,b){var c=this.ma;a=this.ia;for(var d=this.qa;;){if(null==a)return new $APP.H(null,1,5,$APP.I,[new I1($APP.yf($APP.Bc(c)),null,null,null,null)],null);var e=a.name,f=b.db;f=f instanceof $APP.A_?LZ(f.fc,MZ.G(0,e,this.id,536870912),MZ.G(2147483647,e,this.id,2147483647)):o_(f,new $APP.H(null,3,5,$APP.I,[null,e,this.id],null));F1(b,KTa,null,e,this.id);if($APP.Zd(f)&&null!=$APP.km.g(a))c=$APP.hh.j(c,a.as,$APP.km.g(a)),a=B1(d),d=e=C1(d);else if($APP.Zd(f))a=B1(d),d=e=C1(d);else{if($APP.l(a.jc)){e=
$APP.I;c=new M1(this.ra,this.wa,c,this.pattern,a,d,this.id,null,null,null);d=this.ra;var h=this.wa,m=this.pattern;f=B1(f).e;b=P1.ka?P1.ka(b,d,h,m,a,f):P1.call(null,b,d,h,m,a,f);b=new $APP.H(null,2,5,e,[c,b],null)}else b=new $APP.H(null,2,5,$APP.I,[new M1(this.ra,this.wa,c,this.pattern,a,d,this.id,null,null,null),new K1(this.ra,this.wa,$APP.zc($APP.pg),this.pattern,a,f,null,null,null)],null);return b}}};
var H5=function H5(a){switch(arguments.length){case 3:return H5.j(arguments[0],arguments[1],arguments[2]);case 4:return H5.G(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};H5.j=function(a,b,c){return H5.G(a,b,c,$APP.wf)};H5.G=function(a,b,c,d){a=S1(a,b,d);return Q1(a,c)};H5.A=4;
var I5=function I5(a){switch(arguments.length){case 3:return I5.j(arguments[0],arguments[1],arguments[2]);case 4:return I5.G(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};I5.j=function(a,b,c){return I5.G(a,b,c,$APP.wf)};I5.G=function(a,b,c,d){var e=S1(a,b,d);return $APP.Om.h(function(f){return Q1(e,f)},c)};I5.A=4;var J5=function J5(a){switch(arguments.length){case 0:return J5.C();case 1:return J5.g(arguments[0]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};J5.C=function(){return J5.g((new Date).getTime())};
J5.g=function(a){return $APP.Ej([$APP.p.g(T1(a/1E3|0,8)),"-",$APP.p.g(T1($APP.ej(65536),4)),"-",$APP.p.g(T1($APP.ej(65536)&4095|16384,4)),"-",$APP.p.g(T1($APP.ej(65536)&16383|32768,4)),"-",$APP.p.g(T1($APP.ej(65536),4)),$APP.p.g(T1($APP.ej(65536),4)),$APP.p.g(T1($APP.ej(65536),4))].join(""))};J5.A=1;var a2,c2=$APP.cj.g($APP.wf),b2=$APP.bg(1E6);$APP.g=X1.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "storage":return this.storage;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.storage.StorageAdapter{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[OZ,this.storage],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[OZ],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new X1(this.storage,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1627330428^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.storage,b.storage)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[OZ,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new X1(this.storage,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "storage":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(OZ,b):$APP.$e.call(null,OZ,b))?new X1(c,this.B,this.o,null):new X1(this.storage,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se(OZ,this.storage,null)],null),this.o))};$APP.g.X=function(a,b){return new X1(this.storage,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.Ti=function(a,b,c){a=$APP.l($APP.l(c)?b instanceof qZ&&$APP.re($APP.fi(b.$c),c):c)?b2.hc(null,b2.Ka(null)+1):$APP.l(c)?c:b2.hc(null,b2.Ka(null)+1);c=$APP.Om.h(W1,b.keys);c=new $APP.k(null,1,[$APP.Cy,c],null);b=b instanceof qZ?$APP.Zh.j(c,TTa,b.$c):c;$APP.Sc(a2,$APP.og.h($APP.q(a2),new $APP.H(null,2,5,$APP.I,[a,b],null)));return a};
$APP.g.Si=function(a,b){a=V1(this.storage,b);a=$APP.xf(a);var c=$APP.C.h(a,$APP.Cy);a=$APP.C.h(a,TTa);if($APP.l(c)){c=MY($APP.Gi.h(function(e){var f=$APP.A.j(e,0,null),h=$APP.A.j(e,1,null),m=$APP.A.j(e,2,null);e=$APP.A.j(e,3,null);return MZ.G(f,h,m,e)},c));b=new $APP.k(null,2,[oZ,b,pZ,!1],null);if($APP.l(a)){var d=Array($APP.Fd(a));return mZ(c,d,a,$APP.B([b]))}return NZ.l(c,$APP.B([b]))}return null};$APP.g.kk=function(){return null};
$APP.g.Ri=function(a,b){return $APP.dj.G(c2,$APP.ym,this.storage,function(c){return $APP.fh.h(c,$APP.jr.h($APP.fb,b))})};var jRa=$APP.cj.g($APP.pg),y4=function y4(a){switch(arguments.length){case 1:return y4.g(arguments[0]);case 2:return y4.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};y4.g=function(a){var b=Z1(a);if(null==b)throw $APP.xl.h("Database has no associated storage",$APP.wf);return d2(a,b,!1)};
y4.h=function(a,b){var c=Z1(a);if(null==c)return $APP.C_.g(a),c=new X1(b,null,null,null),d2(a,c,!1);var d=OZ.g(c);if(d===b)return d2(a,c,!1);throw $APP.xl.h("Database is already stored with another IStorage",new $APP.k(null,1,[OZ,d],null));};y4.A=2;var K5=function K5(a){switch(arguments.length){case 1:return K5.g(arguments[0]);case 2:return K5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};K5.g=function(a){return K5.h(a,$APP.wf)};
K5.h=function(a,b){b=f2(a,b);a=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);return g2(a,b)};K5.A=2;var L5=function L5(a){switch(arguments.length){case 1:return L5.g(arguments[0]);case 2:return L5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};L5.g=function(a){return uRa(a,$APP.wf)};L5.h=function(a,b){return uRa(a,b)};L5.A=2;var M5=function M5(a){switch(arguments.length){case 1:return M5.g(arguments[0]);case 2:return M5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};
M5.g=function(a){return M5.h(a,$APP.wf)};
M5.h=function(a,b){b=$APP.xf(b);var c=$APP.C.j(b,YTa,$APP.hM),d=$APP.C.j(b,dUa,rRa),e=i2(a,"tx0"),f=function(){var w=i2(a,"schema");return c.g?c.g(w):c.call(null,w)}();(function(){var w=new $APP.hd(function(){return c0},PUa,$APP.Hh([$APP.Ss,$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[!0,$APP.tL,jUa,"datascript/db.cljc",23,1,924,924,$APP.J(new $APP.H(null,1,5,$APP.I,[J4],null)),null,$APP.l(c0)?c0.I:null]));return w.g?w.g(f):w.call(null,f)})();var h=$APP.Om.h(d,i2(a,
"attrs")),m=$APP.Om.h(d,i2(a,"keywords")),r=j2(function(w){var x=h2(w,0),D=$APP.A.h(h,h2(w,1)),G=h2(w,2);if("number"===typeof G)var M=G;else if("string"===typeof G)M=G;else if($APP.ke(G))M=G;else if($APP.gb(G)||$APP.ge(G))M=function(){var U=h2(G,0);if($APP.l($APP.Fk.h?$APP.Fk.h(0,U):$APP.Fk.call(null,0,U)))return $APP.A.h(m,h2(G,1));if($APP.l($APP.Fk.h?$APP.Fk.h(1,U):$APP.Fk.call(null,1,U)))return U=h2(G,1),c.g?c.g(U):c.call(null,U);if($APP.l($APP.Fk.h?$APP.Fk.h(2,U):$APP.Fk.call(null,2,U)))return Infinity;
if($APP.l($APP.Fk.h?$APP.Fk.h(3,U):$APP.Fk.call(null,3,U)))return-Infinity;if($APP.l($APP.Fk.h?$APP.Fk.h(4,U):$APP.Fk.call(null,4,U)))return NaN;throw $APP.xl.h(["Unexpected value marker ",$APP.aj.l($APP.B([U]))," in ",$APP.aj.l($APP.B([$APP.aj.l($APP.B([G]))]))].join(""),new $APP.k(null,2,[$APP.VI,cUa,$APP.cJ,G],null));}();else throw $APP.xl.h(["Unexpected value type ",$APP.aj.l($APP.B([$APP.pb(G)]))," (",$APP.aj.l($APP.B([$APP.aj.l($APP.B([G]))])),")"].join(""),new $APP.k(null,2,[$APP.VI,cUa,$APP.cJ,
G],null));w=e+h2(w,3);return MZ.G(x,D,M,w)},i2(a,"eavt"));d=function(){var w=i2(a,"aevt");return null==w?null:j2(function(x){return r[x]},w)}();var n=function(){var w=i2(a,"avet");return null==w?null:j2(function(x){return r[x]},w)}();b=$APP.ml.l($APP.B([new $APP.k(null,2,[VZ,i2(a,"branching-factor"),WZ,function(){var w=i2(a,"ref-type");return null==w?null:$APP.Hi.g(w)}()],null),$APP.$h(b,new $APP.H(null,2,5,$APP.I,[VZ,WZ],null))]));return e2(new $APP.k(null,6,[$APP.B_,f,$APP.C_,PZ(g_,r,b),D_,PZ(h_,
d,b),u_,PZ(i_,n,b),E_,i2(a,"max-eid"),F_,i2(a,"max-tx")],null))};M5.A=2;$APP.g=v2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){return $APP.C.j(this.o,b,c)};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Placeholder{",", ","}",c,$APP.K.h($APP.pg,this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,0,$APP.pg,$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new v2(this.B,this.o,this.D)};$APP.g.aa=function(){return 0+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-528488587^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re($APP.ci,b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new v2(this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){return $APP.re(this.o,b)};$APP.g.U=function(a,b,c){return new v2(this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.pg,this.o))};$APP.g.X=function(a,b){return new v2(b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};
$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return c};$APP.g.vb=function(a,b){return b};$APP.g=w2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "symbol":return this.La;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Variable{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.am,this.La],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.am],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new w2(this.La,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=736891289^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.La,b.La)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[$APP.am,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new w2(this.La,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "symbol":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.am,b):$APP.$e.call(null,$APP.am,b))?new w2(c,this.B,this.o,null):new w2(this.La,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se($APP.am,this.La,null)],null),this.o))};$APP.g.X=function(a,b){return new w2(this.La,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.La,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.La):s3.call(null,b,this.La)};$APP.g=x2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "symbol":return this.La;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.SrcVar{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.am,this.La],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.am],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new x2(this.La,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1648766309^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.La,b.La)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[$APP.am,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new x2(this.La,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "symbol":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.am,b):$APP.$e.call(null,$APP.am,b))?new x2(c,this.B,this.o,null):new x2(this.La,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se($APP.am,this.La,null)],null),this.o))};$APP.g.X=function(a,b){return new x2(this.La,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;
$APP.g.ub=function(a,b,c){return q2(b,this.La,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.La):s3.call(null,b,this.La)};$APP.g=y2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){return $APP.C.j(this.o,b,c)};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.DefaultSrc{",", ","}",c,$APP.K.h($APP.pg,this.o))};$APP.g.ga=function(){return new $APP.Xg(this,0,$APP.pg,$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new y2(this.B,this.o,this.D)};$APP.g.aa=function(){return 0+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-350962559^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re($APP.ci,b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new y2(this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){return $APP.re(this.o,b)};$APP.g.U=function(a,b,c){return new y2(this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.pg,this.o))};$APP.g.X=function(a,b){return new y2(b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return c};$APP.g.vb=function(a,b){return b};$APP.g=z2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){return $APP.C.j(this.o,b,c)};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.RulesVar{",", ","}",c,$APP.K.h($APP.pg,this.o))};$APP.g.ga=function(){return new $APP.Xg(this,0,$APP.pg,$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new z2(this.B,this.o,this.D)};$APP.g.aa=function(){return 0+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1504050517^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re($APP.ci,b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new z2(this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){return $APP.re(this.o,b)};$APP.g.U=function(a,b,c){return new z2(this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.pg,this.o))};$APP.g.X=function(a,b){return new z2(b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return c};$APP.g.vb=function(a,b){return b};$APP.g=A2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "value":return this.value;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Constant{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.cJ,this.value],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.cJ],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new A2(this.value,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-812884714^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.value,b.value)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[$APP.cJ,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new A2(this.value,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "value":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.cJ,b):$APP.$e.call(null,$APP.cJ,b))?new A2(c,this.B,this.o,null):new A2(this.value,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se($APP.cJ,this.value,null)],null),this.o))};$APP.g.X=function(a,b){return new A2(this.value,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;
$APP.g.ub=function(a,b,c){return q2(b,this.value,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.value):s3.call(null,b,this.value)};$APP.g=B2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "symbol":return this.La;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.PlainSymbol{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.am,this.La],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.am],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new B2(this.La,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1509921913^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.La,b.La)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[$APP.am,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new B2(this.La,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "symbol":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.am,b):$APP.$e.call(null,$APP.am,b))?new B2(c,this.B,this.o,null):new B2(this.La,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se($APP.am,this.La,null)],null),this.o))};$APP.g.X=function(a,b){return new B2(this.La,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.La,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.La):s3.call(null,b,this.La)};$APP.g=H2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "required":return this.required;case "free":return this.Nd;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.RuleVars{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.dG,this.required],null),new $APP.H(null,2,5,$APP.I,[J2,this.Nd],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.dG,J2],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new H2(this.required,this.Nd,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=892963297^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.required,b.required)&&$APP.z.h(this.Nd,b.Nd)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,2,[J2,null,$APP.dG,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new H2(this.required,this.Nd,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "required":case "free":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.dG,b):$APP.$e.call(null,$APP.dG,b))?new H2(c,this.Nd,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(J2,b):$APP.$e.call(null,J2,b))?new H2(this.required,c,this.B,this.o,null):new H2(this.required,this.Nd,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.se($APP.dG,this.required,null),new $APP.se(J2,this.Nd,null)],null),this.o))};$APP.g.X=function(a,b){return new H2(this.required,this.Nd,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.Nd,q2(b,this.required,c))};
$APP.g.vb=function(a,b){a=s3.h?s3.h(b,this.required):s3.call(null,b,this.required);b=this.Nd;return s3.h?s3.h(a,b):s3.call(null,a,b)};$APP.g=M2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){return $APP.C.j(this.o,b,c)};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.BindIgnore{",", ","}",c,$APP.K.h($APP.pg,this.o))};$APP.g.ga=function(){return new $APP.Xg(this,0,$APP.pg,$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new M2(this.B,this.o,this.D)};$APP.g.aa=function(){return 0+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-890522983^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re($APP.ci,b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new M2(this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){return $APP.re(this.o,b)};$APP.g.U=function(a,b,c){return new M2(this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.pg,this.o))};$APP.g.X=function(a,b){return new M2(b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return c};$APP.g.vb=function(a,b){return b};$APP.g=N2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "variable":return this.Sb;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.BindScalar{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[S3,this.Sb],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[S3],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new N2(this.Sb,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1522792445^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.Sb,b.Sb)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[S3,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new N2(this.Sb,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "variable":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(S3,b):$APP.$e.call(null,S3,b))?new N2(c,this.B,this.o,null):new N2(this.Sb,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se(S3,this.Sb,null)],null),this.o))};$APP.g.X=function(a,b){return new N2(this.Sb,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.Sb,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.Sb):s3.call(null,b,this.Sb)};$APP.g=O2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "bindings":return this.yc;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.BindTuple{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Dp,this.yc],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.Dp],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new O2(this.yc,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1637239347^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.yc,b.yc)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[$APP.Dp,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new O2(this.yc,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "bindings":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.Dp,b):$APP.$e.call(null,$APP.Dp,b))?new O2(c,this.B,this.o,null):new O2(this.yc,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se($APP.Dp,this.yc,null)],null),this.o))};$APP.g.X=function(a,b){return new O2(this.yc,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.yc,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.yc):s3.call(null,b,this.yc)};$APP.g=P2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "binding":return this.Qb;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.BindColl{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[N4,this.Qb],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[N4],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new P2(this.Qb,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1930368089^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.Qb,b.Qb)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[N4,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new P2(this.Qb,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "binding":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(N4,b):$APP.$e.call(null,N4,b))?new P2(c,this.B,this.o,null):new P2(this.Qb,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se(N4,this.Qb,null)],null),this.o))};$APP.g.X=function(a,b){return new P2(this.Qb,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.Qb,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.Qb):s3.call(null,b,this.Qb)};
w2.prototype.Ug=function(){return new $APP.H(null,1,5,$APP.I,[this.La],null)};$APP.g=T2.prototype;$APP.g.Ug=function(){return S2($APP.Pd(this.xa))};$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "fn":return this.ha;case "args":return this.xa;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Aggregate{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.$n,this.ha],null),new $APP.H(null,2,5,$APP.I,[$APP.Em,this.xa],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.$n,$APP.Em],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new T2(this.ha,this.xa,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-91097383^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ha,b.ha)&&$APP.z.h(this.xa,b.xa)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,2,[$APP.Em,null,$APP.$n,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new T2(this.ha,this.xa,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "fn":case "args":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.$n,b):$APP.$e.call(null,$APP.$n,b))?new T2(c,this.xa,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.Em,b):$APP.$e.call(null,$APP.Em,b))?new T2(this.ha,c,this.B,this.o,null):new T2(this.ha,this.xa,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.se($APP.$n,this.ha,null),new $APP.se($APP.Em,this.xa,null)],null),this.o))};
$APP.g.X=function(a,b){return new T2(this.ha,this.xa,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.xa,q2(b,this.ha,c))};$APP.g.vb=function(a,b){a=s3.h?s3.h(b,this.ha):s3.call(null,b,this.ha);b=this.xa;return s3.h?s3.h(a,b):s3.call(null,a,b)};$APP.g=U2.prototype;$APP.g.Ug=function(){return S2(this.Sb)};$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "source":return this.source;case "variable":return this.Sb;case "pattern":return this.pattern;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Pull{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.ll,this.source],null),new $APP.H(null,2,5,$APP.I,[S3,this.Sb],null),new $APP.H(null,2,5,$APP.I,[f1,this.pattern],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,3,new $APP.H(null,3,5,$APP.I,[$APP.ll,S3,f1],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new U2(this.source,this.Sb,this.pattern,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-2108867663^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.source,b.source)&&$APP.z.h(this.Sb,b.Sb)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,3,[S3,null,$APP.ll,null,f1,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new U2(this.source,this.Sb,this.pattern,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "source":case "variable":case "pattern":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.ll,b):$APP.$e.call(null,$APP.ll,b))?new U2(c,this.Sb,this.pattern,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(S3,b):$APP.$e.call(null,S3,b))?new U2(this.source,c,this.pattern,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(f1,b):$APP.$e.call(null,f1,b))?new U2(this.source,this.Sb,c,this.B,this.o,null):new U2(this.source,this.Sb,this.pattern,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.se($APP.ll,this.source,null),new $APP.se(S3,this.Sb,null),new $APP.se(f1,this.pattern,null)],null),this.o))};$APP.g.X=function(a,b){return new U2(this.source,this.Sb,this.pattern,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.pattern,q2(b,this.Sb,q2(b,this.source,c)))};
$APP.g.vb=function(a,b){a=s3.h?s3.h(b,this.source):s3.call(null,b,this.source);b=this.Sb;a=s3.h?s3.h(a,b):s3.call(null,a,b);b=this.pattern;return s3.h?s3.h(a,b):s3.call(null,a,b)};$APP.g=W2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "elements":return this.elements;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.FindRel{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Y4,this.elements],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[Y4],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new W2(this.elements,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=744809563^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.elements,b.elements)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[Y4,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new W2(this.elements,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.Yf=function(){return this.elements};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "elements":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(Y4,b):$APP.$e.call(null,Y4,b))?new W2(c,this.B,this.o,null):new W2(this.elements,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se(Y4,this.elements,null)],null),this.o))};$APP.g.X=function(a,b){return new W2(this.elements,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;
$APP.g.ub=function(a,b,c){return q2(b,this.elements,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.elements):s3.call(null,b,this.elements)};$APP.g=X2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "element":return this.element;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.FindColl{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$4,this.element],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[$4],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new X2(this.element,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=124241361^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.element,b.element)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[$4,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new X2(this.element,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.Yf=function(){return new $APP.H(null,1,5,$APP.I,[this.element],null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "element":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($4,b):$APP.$e.call(null,$4,b))?new X2(c,this.B,this.o,null):new X2(this.element,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se($4,this.element,null)],null),this.o))};
$APP.g.X=function(a,b){return new X2(this.element,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.element,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.element):s3.call(null,b,this.element)};$APP.g=Y2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "element":return this.element;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.FindScalar{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$4,this.element],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[$4],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new Y2(this.element,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-661542332^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.element,b.element)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[$4,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new Y2(this.element,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.Yf=function(){return new $APP.H(null,1,5,$APP.I,[this.element],null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "element":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($4,b):$APP.$e.call(null,$4,b))?new Y2(c,this.B,this.o,null):new Y2(this.element,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se($4,this.element,null)],null),this.o))};
$APP.g.X=function(a,b){return new Y2(this.element,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.element,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.element):s3.call(null,b,this.element)};$APP.g=Z2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "elements":return this.elements;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.FindTuple{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Y4,this.elements],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[Y4],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new Z2(this.elements,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=681530371^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.elements,b.elements)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[Y4,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new Z2(this.elements,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.Yf=function(){return this.elements};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "elements":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(Y4,b):$APP.$e.call(null,Y4,b))?new Z2(c,this.B,this.o,null):new Z2(this.elements,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se(Y4,this.elements,null)],null),this.o))};$APP.g.X=function(a,b){return new Z2(this.elements,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.elements,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.elements):s3.call(null,b,this.elements)};$APP.g=f3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "type":return this.type;case "symbols":return this.Sd;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.ReturnMap{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.sl,this.type],null),new $APP.H(null,2,5,$APP.I,[G3,this.Sd],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.sl,G3],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new f3(this.type,this.Sd,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-2025547471^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.type,b.type)&&$APP.z.h(this.Sd,b.Sd)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,2,[$APP.sl,null,G3,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new f3(this.type,this.Sd,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "type":case "symbols":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.sl,b):$APP.$e.call(null,$APP.sl,b))?new f3(c,this.Sd,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(G3,b):$APP.$e.call(null,G3,b))?new f3(this.type,c,this.B,this.o,null):new f3(this.type,this.Sd,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.se($APP.sl,this.type,null),new $APP.se(G3,this.Sd,null)],null),this.o))};$APP.g.X=function(a,b){return new f3(this.type,this.Sd,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.Sd,q2(b,this.type,c))};
$APP.g.vb=function(a,b){a=s3.h?s3.h(b,this.type):s3.call(null,b,this.type);b=this.Sd;return s3.h?s3.h(a,b):s3.call(null,a,b)};$APP.g=h3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "source":return this.source;case "pattern":return this.pattern;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Pattern{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.ll,this.source],null),new $APP.H(null,2,5,$APP.I,[f1,this.pattern],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.ll,f1],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new h3(this.source,this.pattern,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=575220587^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.source,b.source)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,2,[$APP.ll,null,f1,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new h3(this.source,this.pattern,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "source":case "pattern":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.ll,b):$APP.$e.call(null,$APP.ll,b))?new h3(c,this.pattern,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(f1,b):$APP.$e.call(null,f1,b))?new h3(this.source,c,this.B,this.o,null):new h3(this.source,this.pattern,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.se($APP.ll,this.source,null),new $APP.se(f1,this.pattern,null)],null),this.o))};$APP.g.X=function(a,b){return new h3(this.source,this.pattern,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.pattern,q2(b,this.source,c))};
$APP.g.vb=function(a,b){a=s3.h?s3.h(b,this.source):s3.call(null,b,this.source);b=this.pattern;return s3.h?s3.h(a,b):s3.call(null,a,b)};$APP.g=i3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "fn":return this.ha;case "args":return this.xa;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Predicate{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.$n,this.ha],null),new $APP.H(null,2,5,$APP.I,[$APP.Em,this.xa],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.$n,$APP.Em],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new i3(this.ha,this.xa,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1523376880^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ha,b.ha)&&$APP.z.h(this.xa,b.xa)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,2,[$APP.Em,null,$APP.$n,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new i3(this.ha,this.xa,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "fn":case "args":return!0;default:return $APP.re(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.$n,b):$APP.$e.call(null,$APP.$n,b))?new i3(c,this.xa,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.Em,b):$APP.$e.call(null,$APP.Em,b))?new i3(this.ha,c,this.B,this.o,null):new i3(this.ha,this.xa,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.se($APP.$n,this.ha,null),new $APP.se($APP.Em,this.xa,null)],null),this.o))};$APP.g.X=function(a,b){return new i3(this.ha,this.xa,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.xa,q2(b,this.ha,c))};
$APP.g.vb=function(a,b){a=s3.h?s3.h(b,this.ha):s3.call(null,b,this.ha);b=this.xa;return s3.h?s3.h(a,b):s3.call(null,a,b)};$APP.g=j3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "fn":return this.ha;case "args":return this.xa;case "binding":return this.Qb;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Function{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.$n,this.ha],null),new $APP.H(null,2,5,$APP.I,[$APP.Em,this.xa],null),new $APP.H(null,2,5,$APP.I,[N4,this.Qb],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,3,new $APP.H(null,3,5,$APP.I,[$APP.$n,$APP.Em,N4],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new j3(this.ha,this.xa,this.Qb,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=589494199^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ha,b.ha)&&$APP.z.h(this.xa,b.xa)&&$APP.z.h(this.Qb,b.Qb)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,3,[$APP.Em,null,$APP.$n,null,N4,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new j3(this.ha,this.xa,this.Qb,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "fn":case "args":case "binding":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.$n,b):$APP.$e.call(null,$APP.$n,b))?new j3(c,this.xa,this.Qb,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.Em,b):$APP.$e.call(null,$APP.Em,b))?new j3(this.ha,c,this.Qb,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(N4,b):$APP.$e.call(null,N4,b))?new j3(this.ha,this.xa,c,this.B,this.o,null):new j3(this.ha,this.xa,this.Qb,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.se($APP.$n,this.ha,null),new $APP.se($APP.Em,this.xa,null),new $APP.se(N4,this.Qb,null)],null),this.o))};$APP.g.X=function(a,b){return new j3(this.ha,this.xa,this.Qb,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.Qb,q2(b,this.xa,q2(b,this.ha,c)))};
$APP.g.vb=function(a,b){a=s3.h?s3.h(b,this.ha):s3.call(null,b,this.ha);b=this.xa;a=s3.h?s3.h(a,b):s3.call(null,a,b);b=this.Qb;return s3.h?s3.h(a,b):s3.call(null,a,b)};$APP.g=k3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "source":return this.source;case "name":return this.name;case "args":return this.xa;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.RuleExpr{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.ll,this.source],null),new $APP.H(null,2,5,$APP.I,[$APP.O,this.name],null),new $APP.H(null,2,5,$APP.I,[$APP.Em,this.xa],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,3,new $APP.H(null,3,5,$APP.I,[$APP.ll,$APP.O,$APP.Em],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new k3(this.source,this.name,this.xa,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-444662011^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.source,b.source)&&$APP.z.h(this.name,b.name)&&$APP.z.h(this.xa,b.xa)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,3,[$APP.Em,null,$APP.O,null,$APP.ll,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new k3(this.source,this.name,this.xa,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "source":case "name":case "args":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.ll,b):$APP.$e.call(null,$APP.ll,b))?new k3(c,this.name,this.xa,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.O,b):$APP.$e.call(null,$APP.O,b))?new k3(this.source,c,this.xa,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.Em,b):$APP.$e.call(null,$APP.Em,b))?new k3(this.source,this.name,c,this.B,this.o,null):new k3(this.source,this.name,this.xa,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.se($APP.ll,this.source,null),new $APP.se($APP.O,this.name,null),new $APP.se($APP.Em,this.xa,null)],null),this.o))};$APP.g.X=function(a,b){return new k3(this.source,this.name,this.xa,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.xa,q2(b,this.name,q2(b,this.source,c)))};
$APP.g.vb=function(a,b){a=s3.h?s3.h(b,this.source):s3.call(null,b,this.source);b=this.name;a=s3.h?s3.h(a,b):s3.call(null,a,b);b=this.xa;return s3.h?s3.h(a,b):s3.call(null,a,b)};$APP.g=l3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "source":return this.source;case "vars":return this.Tb;case "clauses":return this.Ca;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Not{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.ll,this.source],null),new $APP.H(null,2,5,$APP.I,[$APP.XH,this.Tb],null),new $APP.H(null,2,5,$APP.I,[$APP.HL,this.Ca],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,3,new $APP.H(null,3,5,$APP.I,[$APP.ll,$APP.XH,$APP.HL],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new l3(this.source,this.Tb,this.Ca,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1394671061^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.source,b.source)&&$APP.z.h(this.Tb,b.Tb)&&$APP.z.h(this.Ca,b.Ca)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,3,[$APP.ll,null,$APP.HL,null,$APP.XH,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new l3(this.source,this.Tb,this.Ca,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "source":case "vars":case "clauses":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.ll,b):$APP.$e.call(null,$APP.ll,b))?new l3(c,this.Tb,this.Ca,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.XH,b):$APP.$e.call(null,$APP.XH,b))?new l3(this.source,c,this.Ca,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.HL,b):$APP.$e.call(null,$APP.HL,b))?new l3(this.source,this.Tb,c,this.B,this.o,null):new l3(this.source,this.Tb,this.Ca,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.se($APP.ll,this.source,null),new $APP.se($APP.XH,this.Tb,null),new $APP.se($APP.HL,this.Ca,null)],null),this.o))};$APP.g.X=function(a,b){return new l3(this.source,this.Tb,this.Ca,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.Ca,q2(b,this.Tb,q2(b,this.source,c)))};
$APP.g.vb=function(a,b){a=s3.h?s3.h(b,this.source):s3.call(null,b,this.source);b=this.Tb;a=s3.h?s3.h(a,b):s3.call(null,a,b);b=this.Ca;return s3.h?s3.h(a,b):s3.call(null,a,b)};$APP.g=m3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "source":return this.source;case "rule-vars":return this.qd;case "clauses":return this.Ca;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Or{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.ll,this.source],null),new $APP.H(null,2,5,$APP.I,[q3,this.qd],null),new $APP.H(null,2,5,$APP.I,[$APP.HL,this.Ca],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,3,new $APP.H(null,3,5,$APP.I,[$APP.ll,q3,$APP.HL],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new m3(this.source,this.qd,this.Ca,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1461934571^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.source,b.source)&&$APP.z.h(this.qd,b.qd)&&$APP.z.h(this.Ca,b.Ca)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,3,[q3,null,$APP.ll,null,$APP.HL,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new m3(this.source,this.qd,this.Ca,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "source":case "rule-vars":case "clauses":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.ll,b):$APP.$e.call(null,$APP.ll,b))?new m3(c,this.qd,this.Ca,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(q3,b):$APP.$e.call(null,q3,b))?new m3(this.source,c,this.Ca,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.HL,b):$APP.$e.call(null,$APP.HL,b))?new m3(this.source,this.qd,c,this.B,this.o,null):new m3(this.source,this.qd,this.Ca,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.se($APP.ll,this.source,null),new $APP.se(q3,this.qd,null),new $APP.se($APP.HL,this.Ca,null)],null),this.o))};$APP.g.X=function(a,b){return new m3(this.source,this.qd,this.Ca,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.Ca,q2(b,this.qd,q2(b,this.source,c)))};
$APP.g.vb=function(a,b){a=s3.h?s3.h(b,this.source):s3.call(null,b,this.source);b=this.qd;a=s3.h?s3.h(a,b):s3.call(null,a,b);b=this.Ca;return s3.h?s3.h(a,b):s3.call(null,a,b)};$APP.g=n3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "clauses":return this.Ca;default:return $APP.C.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.And{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.HL,this.Ca],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.HL],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new n3(this.Ca,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-131856804^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.Ca,b.Ca)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,1,[$APP.HL,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new n3(this.Ca,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "clauses":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.HL,b):$APP.$e.call(null,$APP.HL,b))?new n3(c,this.B,this.o,null):new n3(this.Ca,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.se($APP.HL,this.Ca,null)],null),this.o))};$APP.g.X=function(a,b){return new n3(this.Ca,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;
$APP.g.ub=function(a,b,c){return q2(b,this.Ca,c)};$APP.g.vb=function(a,b){return s3.h?s3.h(b,this.Ca):s3.call(null,b,this.Ca)};var s3=function s3(a,b){return b instanceof w2?$APP.Ve.h(a,b):b instanceof l3?$APP.fh.h(a,b.Tb):b instanceof m3?(b=b.qd,s3.h?s3.h(a,b):s3.call(null,a,b)):(null!=b?$APP.bd===b.tb||(b.yd?0:$APP.ob(l2,b)):$APP.ob(l2,b))?n2(b,a):$APP.be(b)?$APP.Ae.j(s3,a,b):a};$APP.g=w3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "vars":return this.Tb;case "clauses":return this.Ca;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.RuleBranch{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.XH,this.Tb],null),new $APP.H(null,2,5,$APP.I,[$APP.HL,this.Ca],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.XH,$APP.HL],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new w3(this.Tb,this.Ca,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1024755006^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.Tb,b.Tb)&&$APP.z.h(this.Ca,b.Ca)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,2,[$APP.HL,null,$APP.XH,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new w3(this.Tb,this.Ca,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "vars":case "clauses":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.XH,b):$APP.$e.call(null,$APP.XH,b))?new w3(c,this.Ca,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.HL,b):$APP.$e.call(null,$APP.HL,b))?new w3(this.Tb,c,this.B,this.o,null):new w3(this.Tb,this.Ca,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.se($APP.XH,this.Tb,null),new $APP.se($APP.HL,this.Ca,null)],null),this.o))};
$APP.g.X=function(a,b){return new w3(this.Tb,this.Ca,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.Ca,q2(b,this.Tb,c))};$APP.g.vb=function(a,b){return s3(s3(b,this.Tb),this.Ca)};$APP.g=x3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "name":return this.name;case "branches":return this.Hd;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Rule{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.O,this.name],null),new $APP.H(null,2,5,$APP.I,[S4,this.Hd],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.O,S4],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new x3(this.name,this.Hd,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-900273052^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.name,b.name)&&$APP.z.h(this.Hd,b.Hd)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,2,[$APP.O,null,S4,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new x3(this.name,this.Hd,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "name":case "branches":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h($APP.O,b):$APP.$e.call(null,$APP.O,b))?new x3(c,this.Hd,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(S4,b):$APP.$e.call(null,S4,b))?new x3(this.name,c,this.B,this.o,null):new x3(this.name,this.Hd,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.se($APP.O,this.name,null),new $APP.se(S4,this.Hd,null)],null),this.o))};
$APP.g.X=function(a,b){return new x3(this.name,this.Hd,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.Hd,q2(b,this.name,c))};$APP.g.vb=function(a,b){return s3(s3(b,this.name),this.Hd)};$APP.g=z3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "qfind":return this.ed;case "qwith":return this.jd;case "qreturn-map":return this.gd;case "qin":return this.fd;case "qwhere":return this.hd;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.parser.Query{",", ","}",c,$APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[A3,this.ed],null),new $APP.H(null,2,5,$APP.I,[B3,this.jd],null),new $APP.H(null,2,5,$APP.I,[C3,this.gd],null),new $APP.H(null,2,5,$APP.I,[D3,this.fd],null),new $APP.H(null,2,5,$APP.I,[E3,this.hd],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Xg(this,5,new $APP.H(null,5,5,$APP.I,[A3,B3,C3,D3,E3],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new z3(this.ed,this.jd,this.gd,this.fd,this.hd,this.B,this.o,this.D)};$APP.g.aa=function(){return 5+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=181307977^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ed,b.ed)&&$APP.z.h(this.jd,b.jd)&&$APP.z.h(this.gd,b.gd)&&$APP.z.h(this.fd,b.fd)&&$APP.z.h(this.hd,b.hd)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,5,[A3,null,E3,null,D3,null,B3,null,C3,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new z3(this.ed,this.jd,this.gd,this.fd,this.hd,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};
$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "qfind":case "qwith":case "qreturn-map":case "qin":case "qwhere":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(A3,b):$APP.$e.call(null,A3,b))?new z3(c,this.jd,this.gd,this.fd,this.hd,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(B3,b):$APP.$e.call(null,B3,b))?new z3(this.ed,c,this.gd,this.fd,this.hd,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(C3,b):$APP.$e.call(null,C3,b))?new z3(this.ed,this.jd,c,this.fd,this.hd,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(D3,b):$APP.$e.call(null,D3,b))?new z3(this.ed,this.jd,this.gd,c,this.hd,this.B,this.o,
null):$APP.l($APP.$e.h?$APP.$e.h(E3,b):$APP.$e.call(null,E3,b))?new z3(this.ed,this.jd,this.gd,this.fd,c,this.B,this.o,null):new z3(this.ed,this.jd,this.gd,this.fd,this.hd,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.se(A3,this.ed,null),new $APP.se(B3,this.jd,null),new $APP.se(C3,this.gd,null),new $APP.se(D3,this.fd,null),new $APP.se(E3,this.hd,null)],null),this.o))};
$APP.g.X=function(a,b){return new z3(this.ed,this.jd,this.gd,this.fd,this.hd,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g.tb=$APP.bd;$APP.g.ub=function(a,b,c){return q2(b,this.hd,q2(b,this.fd,q2(b,this.gd,q2(b,this.jd,q2(b,this.ed,c)))))};$APP.g.vb=function(a,b){return s3(s3(s3(s3(s3(b,this.ed),this.jd),this.gd),this.fd),this.hd)};var bWa=LY();$APP.g=I3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "rels":return this.je;case "sources":return this.sources;case "rules":return this.rules;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.query.Context{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[U3,this.je],null),new $APP.H(null,2,5,$APP.I,[T3,this.sources],null),new $APP.H(null,2,5,$APP.I,[$APP.LE,this.rules],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,3,new $APP.H(null,3,5,$APP.I,[U3,T3,$APP.LE],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new I3(this.je,this.sources,this.rules,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1014232958^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.je,b.je)&&$APP.z.h(this.sources,b.sources)&&$APP.z.h(this.rules,b.rules)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,3,[T3,null,$APP.LE,null,U3,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new I3(this.je,this.sources,this.rules,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "rels":case "sources":case "rules":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(U3,b):$APP.$e.call(null,U3,b))?new I3(c,this.sources,this.rules,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(T3,b):$APP.$e.call(null,T3,b))?new I3(this.je,c,this.rules,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h($APP.LE,b):$APP.$e.call(null,$APP.LE,b))?new I3(this.je,this.sources,c,this.B,this.o,null):new I3(this.je,this.sources,this.rules,this.B,$APP.Zh.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.se(U3,this.je,null),new $APP.se(T3,this.sources,null),new $APP.se($APP.LE,this.rules,null)],null),this.o))};$APP.g.X=function(a,b){return new I3(this.je,this.sources,this.rules,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};$APP.g=J3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.F?b.S:null){case "attrs":return this.qa;case "tuples":return this.Ce;default:return $APP.C.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.Ae.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ai(b,function(d){return $APP.Ai(b,$APP.Fi,""," ","",c,d)},"#datascript.query.Relation{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[o1,this.qa],null),new $APP.H(null,2,5,$APP.I,[Y3,this.Ce],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Xg(this,2,new $APP.H(null,2,5,$APP.I,[o1,Y3],null),$APP.l(this.o)?$APP.Tc(this.o):$APP.Ef())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new J3(this.qa,this.Ce,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Fd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1107093117^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.qa,b.qa)&&$APP.z.h(this.Ce,b.Ce)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.re(new $APP.bi(null,new $APP.k(null,2,[Y3,null,o1,null],null),null),b)?$APP.nl.h($APP.$b($APP.fh.h($APP.wf,this),this.B),b):new J3(this.qa,this.Ce,this.B,$APP.yf($APP.nl.h(this.o,b)),null)};$APP.g.ja=function(a,b){switch(b instanceof $APP.F?b.S:null){case "attrs":case "tuples":return!0;default:return $APP.re(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.$e.h?$APP.$e.h(o1,b):$APP.$e.call(null,o1,b))?new J3(c,this.Ce,this.B,this.o,null):$APP.l($APP.$e.h?$APP.$e.h(Y3,b):$APP.$e.call(null,Y3,b))?new J3(this.qa,c,this.B,this.o,null):new J3(this.qa,this.Ce,this.B,$APP.Zh.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.se(o1,this.qa,null),new $APP.se(Y3,this.Ce,null)],null),this.o))};$APP.g.X=function(a,b){return new J3(this.qa,this.Ce,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ge(b)?this.U(null,$APP.Rd(b,0),$APP.Rd(b,1)):$APP.Ae.j($APP.Cb,this,b)};
var O3=function O3(a,b){return $APP.z.h($APP.bH,a)?!0:$APP.z.h(new $APP.H(null,1,5,$APP.I,[$APP.WG],null),a)?$APP.be(b):a instanceof $APP.t?$APP.z.h(b,a):$APP.be(a)?$APP.z.h($APP.Pd(a),$APP.WG)?$APP.be(b)&&$APP.Qf(function(d){var e=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);return O3.h?O3.h(e,d):O3.call(null,e,d)},$APP.Gi.j($APP.qv,$APP.gi(a),b)):$APP.be(b)&&$APP.z.h($APP.Fd(b),$APP.Fd(a))&&$APP.Qf(function(d){var e=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);return O3.h?O3.h(e,d):O3.call(null,e,d)},$APP.Gi.j($APP.qv,
a,b)):a.g?a.g(b):a.call(null,b)},e4=function e4(a,b){var d=$APP.xf(a),e=$APP.C.h(d,o1);d=$APP.C.h(d,Y3);var f=$APP.xf(b),h=$APP.C.h(f,o1);f=$APP.C.h(f,Y3);if($APP.z.h(e,h))return new J3(e,$APP.fh.h($APP.Ce(d),f),null,null,null);if(aSa(e,h)){if($APP.Qf($APP.paa,$APP.Xh(e))){var m=$APP.Ce(function(){return function D(x){return new $APP.ef(null,function(){for(;;){var G=$APP.u(x);if(G){if($APP.he(G)){var M=$APP.Kc(G),U=$APP.Fd(M),Y=$APP.gf(U);a:for(var ba=0;;)if(ba<U){var ca=$APP.Rd(M,ba),ea=$APP.A.j(ca,
0,null);ca=$APP.A.j(ca,1,null);$APP.nf(Y,new $APP.H(null,2,5,$APP.I,[ca,e.g?e.g(ea):e.call(null,ea)],null));ba+=1}else{M=!0;break a}return M?$APP.mf($APP.of(Y),D($APP.Lc(G))):$APP.mf($APP.of(Y),null)}M=$APP.v(G);Y=$APP.A.j(M,0,null);M=$APP.A.j(M,1,null);return $APP.Ye(new $APP.H(null,2,5,$APP.I,[M,e.g?e.g(Y):e.call(null,Y)],null),D($APP.nd(G)))}return null}},null,null)}(h)}()),r=$APP.Ae.h($APP.Km,$APP.Xh(e))+1;b=$APP.Bc($APP.Ae.j(function(w,x){for(var D=Array(r),G=$APP.u(m),M=null,U=0,Y=0;;)if(Y<
U){var ba=M.ea(null,Y),ca=$APP.A.j(ba,0,null);ba=$APP.A.j(ba,1,null);D[ba]=x[ca];Y+=1}else if(G=$APP.u(G))$APP.he(G)?(U=$APP.Kc(G),G=$APP.Lc(G),M=U,U=$APP.Fd(U)):(U=$APP.v(G),M=$APP.A.j(U,0,null),U=$APP.A.j(U,1,null),D[U]=x[M],G=$APP.y(G),M=null,U=0),Y=0;else break;return $APP.og.h(w,D)},$APP.zc($APP.Ce(d)),f));return new J3(e,b,null,null,null)}var n=$APP.ii($APP.Vh($APP.ml.l($APP.B([e,h]))),$APP.Ym.C());d=function(){var w=new J3(n,$APP.pg,null,null,null);return e4.h?e4.h(w,a):e4.call(null,w,a)}();
return e4.h?e4.h(d,b):e4.call(null,d,b)}throw $APP.xl.h(["Can’t sum relations with different attrs: ",$APP.aj.l($APP.B([e]))," and ",$APP.aj.l($APP.B([h]))].join(""),new $APP.k(null,1,[$APP.VI,d4],null));},c4=function c4(a){switch(arguments.length){case 0:return c4.C();case 2:return c4.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};c4.C=function(){return new J3($APP.wf,new $APP.H(null,1,5,$APP.I,[[]],null),null,null,null)};
c4.h=function(a,b){var c=$APP.Vh(o1.g(a)),d=$APP.Vh(o1.g(b)),e=$APP.Be($APP.Gi.h(o1.g(a),c)),f=$APP.Be($APP.Gi.h(o1.g(b),d));return new J3($APP.ii($APP.K.h(c,d),$APP.Ym.C()),$APP.Bc($APP.Ae.j(function(h,m){return $APP.Ae.j(function(r,n){return $APP.og.h(r,bSa(m,e,n,f))},h,Y3.g(b))},$APP.zc($APP.pg),Y3.g(a))),null,null,null)};c4.A=2;M2.prototype.$f=function(){return c4.C()};
N2.prototype.$f=function(a,b){return new J3($APP.vf([$APP.yo.h(this,new $APP.H(null,2,5,$APP.I,[S3,$APP.am],null)),0]),new $APP.H(null,1,5,$APP.I,[$APP.zr.g(new $APP.H(null,1,5,$APP.I,[b],null))],null),null,null,null)};
P2.prototype.$f=function(a,b){var c=this;if(YZ(b))return $APP.Zd(b)?Q3(c):$APP.Ae.h(e4,$APP.Gi.h(function(d){return R3(c.Qb,d)},b));throw $APP.xl.h(["Cannot bind value ",$APP.aj.l($APP.B([b]))," to collection ",$APP.aj.l($APP.B([u2(c)]))].join(""),new $APP.k(null,3,[$APP.VI,eUa,$APP.cJ,b,N4,u2(c)],null));};
O2.prototype.$f=function(a,b){if(YZ(b)){if($APP.Fd(b)<$APP.Fd(this.yc))throw $APP.xl.h(["Not enough elements in a collection ",$APP.aj.l($APP.B([b]))," to bind tuple ",$APP.aj.l($APP.B([u2(this)]))].join(""),new $APP.k(null,3,[$APP.VI,eUa,$APP.cJ,b,N4,u2(this)],null));return $APP.Ae.h(c4,$APP.Gi.j(function(c,d){return R3(c,d)},this.yc,b))}throw $APP.xl.h(["Cannot bind value ",$APP.aj.l($APP.B([b]))," to tuple ",$APP.aj.l($APP.B([u2(this)]))].join(""),new $APP.k(null,3,[$APP.VI,eUa,$APP.cJ,b,N4,u2(this)],
null));};var V3=null,W3=null,sSa=$APP.cj.g(0),h4=function h4(a){switch(arguments.length){case 2:return h4.h(arguments[0],arguments[1]);case 3:return h4.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};h4.h=function(a,b){return h4.j(a,b,b)};
h4.j=function(a,b,c){for(;;){var d=O3,e=b;if($APP.l(function(){var ca=new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.fd,$APP.WG],null)],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}()))return p4(o4(a),$APP.ng.h(M3,$APP.Md(b)),b),pSa(a,b);if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.fd,$APP.WG],null),$APP.bH],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}()))return p4(o4(a),$APP.ng.h(M3,$APP.Md(b)),b),qSa(a,b);if($APP.l(function(){var ca=
new $APP.H(null,2,5,$APP.I,[L3,$APP.WG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){var f=$APP.u(b);c=$APP.v(f);f=$APP.y(f);var h=W3;W3=$APP.C.h(T3.g(a),c);try{return h4.j(a,f,b)}finally{W3=h}}else{if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[$APP.rs,$APP.WG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){var m=b,r=$APP.u(m),n=$APP.v(r),w=$APP.y(r);f=n;h=w;var x=BSa(o4(a),h,b),D=$APP.Gi.h(function(ca){return function(ea){return q4.h?q4.h(ca,ea):q4.call(null,ca,ea)}}(a,
b,c,m,r,n,w,f,h,x,d,e),h);b=$APP.Gi.h(function(){return function(ca){return $APP.Ae.h(Z3,U3.g(ca))}}(a,b,c,m,r,n,w,f,h,x,D,d,e),D);return $APP.Zh.j($APP.v(D),U3,new $APP.H(null,1,5,$APP.I,[$APP.Ae.h(e4,b)],null))}if($APP.l(function(){var ca=new $APP.H(null,3,5,$APP.I,[v3,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[$APP.WG],null),$APP.WG],null),$APP.WG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){h=$APP.u(b);f=$APP.v(h);h=$APP.y(h);m=$APP.v(h);f=$APP.y(h);m=$APP.u(m);h=$APP.v(m);
m=$APP.y(m);x=h;h=f;f=o4(a);p4(f,x,c);CSa(f,m,h);c=$APP.Jr.j(v3,$APP.K.h(x,m),h);f=b;b=c;c=f;continue}else{if($APP.l(function(){var ca=new $APP.H(null,3,5,$APP.I,[v3,new $APP.H(null,1,5,$APP.I,[$APP.WG],null),$APP.WG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){n=b;w=$APP.u(n);var G=$APP.v(w),M=$APP.y(w);f=G;var U=$APP.v(M),Y=$APP.y(M);m=U;h=Y;var ba=$APP.fi(m);x=CSa(o4(a),ba,h);r=n4(a,ba);D=$APP.Gi.h(function(ca,ea,ma,ta,pa,V,P,X,Q,W,ja,na,oa,Ba,Fa){return function(La){return n4(q4.h?
q4.h(Fa,La):q4.call(null,Fa,La),oa)}}(a,b,c,n,w,G,M,f,U,Y,m,h,ba,x,r,d,e),h);b=$APP.Gi.h(function(){return function(ca){return $APP.Ae.h(Z3,U3.g(ca))}}(a,b,c,n,w,G,M,f,U,Y,m,h,ba,x,r,D,d,e),D);b=$APP.Ae.h(e4,b);return $APP.ym.G(a,U3,$3,b)}if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[$APP.ms,$APP.WG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}()))return c=$APP.u(b),b=$APP.v(c),c=$APP.y(c),f=b,b=c,$APP.Ae.j(q4,a,b);if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[$APP.mz,
$APP.WG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){f=$APP.u(b);b=$APP.v(f);h=$APP.y(f);f=b;b=h;f=o4(a);h=$APP.fi(g4(b));if($APP.Zd($APP.ru.h(f,h)))throw $APP.xl.h(["Insufficient bindings: none of ",$APP.aj.l($APP.B([h]))," is bound in ",$APP.aj.l($APP.B([c]))].join(""),new $APP.k(null,2,[$APP.VI,d4,$APP.gy,c],null));x=null;a=$APP.Zh.j(a,U3,new $APP.H(null,1,5,$APP.I,[$APP.Ae.h(Z3,U3.g(a))],null));b=$APP.Ae.j(q4,a,b);b=iSa($APP.v(U3.g(a)),$APP.Ae.h(Z3,U3.g(b)));return $APP.Zh.j(a,U3,
new $APP.H(null,1,5,$APP.I,[b],null))}if($APP.l(function(){var ca=new $APP.H(null,3,5,$APP.I,[t3,new $APP.H(null,1,5,$APP.I,[$APP.WG],null),$APP.WG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}()))return b=$APP.u(b),f=$APP.v(b),b=$APP.y(b),f=$APP.v(b),b=$APP.y(b),m=f,f=o4(a),x=p4(f,m,c),a=$APP.Zh.j(a,U3,new $APP.H(null,1,5,$APP.I,[$APP.Ae.h(Z3,U3.g(a))],null)),r=n4(a,m),b=n4($APP.Ae.j(q4,r,b),m),b=iSa($APP.v(U3.g(a)),$APP.Ae.h(Z3,U3.g(b))),$APP.Zh.j(a,U3,new $APP.H(null,1,5,$APP.I,[b],null));
if($APP.l(function(){var ca=new $APP.H(null,1,5,$APP.I,[$APP.WG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){c=W3;b=zSa(c,b);f=lSa(c,b);h=V3;V3=(null!=c?$APP.bd===c.Kh||(c.yd?0:$APP.ob(x_,c)):$APP.ob(x_,c))?ASa(c,b):V3;try{return $APP.ym.G(a,U3,$3,f)}finally{V3=h}}else throw Error(["No matching clause: ",$APP.p.g(e)].join(""));}}break}};h4.A=3;
var q4=function q4(a,b){if(rSa(a,b))if(L3($APP.v(b))){var d=W3;W3=$APP.C.h(T3.g(a),$APP.v(b));try{var e=$APP.y(b);return q4.h?q4.h(a,e):q4.call(null,a,e)}finally{W3=d}}else return $APP.ym.G(a,U3,$3,ySa(a,b));else return h4.h(a,b)};w2.prototype.ag=function(a,b){return b4(b,this.La)};x2.prototype.ag=function(a,b){return $APP.yo.h(b,new $APP.H(null,2,5,$APP.I,[T3,this.La],null))};B2.prototype.ag=function(){var a=$APP.C.h(aWa,this.La);return $APP.l(a)?a:null};A2.prototype.ag=function(){return this.value};
W2.prototype.bg=function(a,b,c){return null==b?c:LSa(b,c)};X2.prototype.bg=function(a,b,c){return $APP.fh.j($APP.pg,$APP.Gi.g($APP.v),c)};Y2.prototype.bg=function(a,b,c){return $APP.Ld(c)};Z2.prototype.bg=function(a,b,c){return null!=b?$APP.v(LSa(b,new $APP.H(null,1,5,$APP.I,[$APP.v(c)],null))):$APP.v(c)};var N5=function N5(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return N5.l(arguments[0],1<c.length?new $APP.jd(c.slice(1),0,null):null)};
N5.l=function(a,b){var c=JY(bWa,a,function(){return $Ra(a)}),d=A3.g(c),e=V2(d),f=$APP.mg.l(S2,$APP.B([V2(d)])),h=$APP.Fd(e),m=B3.g(c);m=$APP.K.h(f,$APP.Gi.h($APP.am,m));f=$APP.be(a)?TRa(a):a;var r=$APP.AC.g(f);b=fSa(new I3($APP.pg,$APP.wf,$APP.wf,null,null,null),D3.g(c),b);m=GSa(DSa(b,r),m);f=$APP.l(YRa.g(f))?$APP.Om.h(function(n){return $APP.Ce($APP.Gk.j(n,0,h))},m):m;f=$APP.l($APP.Tf($2,e))?JSa(e,b,f):f;e=$APP.l($APP.Tf(a3,e))?MSa(e,b,f):f;return s4(d,C3.g(c),e)};N5.A=1;
N5.F=function(a){var b=$APP.v(a);a=$APP.y(a);return this.l(b,a)};var O5=function O5(a){switch(arguments.length){case 0:return O5.C();case 1:return O5.g(arguments[0]);case 2:return O5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};O5.C=function(){return d0(null,$APP.wf)};O5.g=function(a){return d0(a,$APP.wf)};O5.h=function(a,b){return d0(a,NSa(b))};O5.A=2;
var P5=function P5(a){switch(arguments.length){case 1:return P5.g(arguments[0]);case 2:return P5.h(arguments[0],arguments[1]);case 3:return P5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};P5.g=function(a){return e0(a,null,$APP.wf)};P5.h=function(a,b){return e0(a,b,$APP.wf)};P5.j=function(a,b,c){return e0(a,b,NSa(c))};P5.A=3;u4.h=function(a,b){return u4.j(a,b,null)};
u4.j=function(a,b,c){if(a instanceof L_)throw $APP.xl.h("Filtered DB cannot be modified",new $APP.k(null,1,[$APP.VI,HVa],null));return P0(new h0(a,a,$APP.pg,$APP.wf,c,null,null,null),b)};u4.A=3;
var Q5=function Q5(a){switch(arguments.length){case 2:return Q5.h(arguments[0],arguments[1]);case 3:return Q5.j(arguments[0],arguments[1],arguments[2]);case 4:return Q5.G(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Q5.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return Q5.ka(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};
Q5.h=function(a,b){return q_(a,b,null,null,null,null)};Q5.j=function(a,b,c){return q_(a,b,c,null,null,null)};Q5.G=function(a,b,c,d){return q_(a,b,c,d,null,null)};Q5.P=function(a,b,c,d,e){return q_(a,b,c,d,e,null)};Q5.ka=function(a,b,c,d,e,f){return q_(a,b,c,d,e,f)};Q5.A=6;
var R5=function R5(a){switch(arguments.length){case 2:return R5.h(arguments[0],arguments[1]);case 3:return R5.j(arguments[0],arguments[1],arguments[2]);case 4:return R5.G(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return R5.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return R5.ka(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};
R5.h=function(a,b){return r_(a,b,null,null,null,null)};R5.j=function(a,b,c){return r_(a,b,c,null,null,null)};R5.G=function(a,b,c,d){return r_(a,b,c,d,null,null)};R5.P=function(a,b,c,d,e){return r_(a,b,c,d,e,null)};R5.ka=function(a,b,c,d,e,f){return r_(a,b,c,d,e,f)};R5.A=6;
var S5=function S5(a){switch(arguments.length){case 2:return S5.h(arguments[0],arguments[1]);case 3:return S5.j(arguments[0],arguments[1],arguments[2]);case 4:return S5.G(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return S5.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return S5.ka(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};
S5.h=function(a,b){return s_(a,b,null,null,null,null)};S5.j=function(a,b,c){return s_(a,b,c,null,null,null)};S5.G=function(a,b,c,d){return s_(a,b,c,d,null,null)};S5.P=function(a,b,c,d,e){return s_(a,b,c,d,e,null)};S5.ka=function(a,b,c,d,e,f){return s_(a,b,c,d,e,f)};S5.A=6;
var T5=function T5(a){switch(arguments.length){case 1:return T5.g(arguments[0]);case 2:return T5.h(arguments[0],arguments[1]);case 3:return T5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};T5.g=function(a){return B4(P5.g(a))};T5.h=function(a,b){return B4(P5.h(a,b))};T5.j=function(a,b,c){return B4(P5.j(a,b,c))};T5.A=3;
var U5=function U5(a){switch(arguments.length){case 0:return U5.C();case 1:return U5.g(arguments[0]);case 2:return U5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};U5.C=function(){return B4(O5.C())};U5.g=function(a){return B4(O5.g(a))};U5.h=function(a,b){return B4(O5.h(a,b))};U5.A=2;
var V5=function V5(a){switch(arguments.length){case 1:return V5.g(arguments[0]);case 2:return V5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};V5.g=function(a){return V5.h(a,$APP.wf)};V5.h=function(a,b){b=f2(a,b);if(null==b)return null;a=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);return $APP.cj.l(g2(a,b),$APP.B([$APP.Ta,new $APP.k(null,3,[x4,$APP.cj.g($APP.wf),z4,$APP.cj.g(b),A4,$APP.cj.g(a)],null)]))};V5.A=2;
var W5=function W5(a){switch(arguments.length){case 2:return W5.h(arguments[0],arguments[1]);case 3:return W5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};W5.h=function(a,b){return W5.j(a,b,null)};
W5.j=function(a,b,c){b=PSa(a,b,c);a=x4.g($APP.Vd(a));a=null==a?null:$APP.q(a);a=$APP.u(a);c=null;for(var d=0,e=0;;)if(e<d){var f=c.ea(null,e);$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);f.g?f.g(b):f.call(null,b);e+=1}else if(a=$APP.u(a))$APP.he(a)?(d=$APP.Kc(a),a=$APP.Lc(a),c=d,d=$APP.Fd(d)):(c=$APP.v(a),$APP.A.j(c,0,null),c=$APP.A.j(c,1,null),c.g?c.g(b):c.call(null,b),a=$APP.y(a),c=null,d=0),e=0;else break;return b};W5.A=3;
var X5=function X5(a){switch(arguments.length){case 2:return X5.h(arguments[0],arguments[1]);case 3:return X5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};X5.h=function(a,b){return X5.j(a,b,null)};
X5.j=function(a,b,c){var d=$APP.q(a);c=sQa(new $APP.k(null,4,[i0,d,j0,b,k0,$APP.K.h($APP.Gi.h(function(r){return $APP.Zh.j(r,$APP.Jz,!1)},Q5.h(d,$APP.C_)),Q5.h(b,$APP.C_)),m0,c],null));null!=$1(d)&&(y4.g(b),$APP.Zf(z4.g($APP.Vd(a)),$APP.pg),$APP.Zf(A4.g($APP.Vd(a)),b));$APP.Zf(a,b);d=$APP.u(function(){var r=x4.g($APP.Vd(a));return null==r?null:$APP.q(r)}());for(var e=null,f=0,h=0;;)if(h<f){var m=e.ea(null,h);$APP.A.j(m,0,null);m=$APP.A.j(m,1,null);m.g?m.g(c):m.call(null,c);h+=1}else if(d=$APP.u(d))$APP.he(d)?
(f=$APP.Kc(d),d=$APP.Lc(d),e=f,f=$APP.Fd(f)):(e=$APP.v(d),$APP.A.j(e,0,null),e=$APP.A.j(e,1,null),e.g?e.g(c):e.call(null,c),d=$APP.y(d),e=null,f=0),h=0;else break;return b};X5.A=3;var Y5=function Y5(a){switch(arguments.length){case 2:return Y5.h(arguments[0],arguments[1]);case 3:return Y5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};Y5.h=function(a,b){return Y5.j(a,$APP.Uv.C(),b)};
Y5.j=function(a,b,c){$APP.dj.G(x4.g($APP.Vd(a)),$APP.Zh,b,c);return b};Y5.A=3;
for(var cWa=$APP.u(new $APP.k(null,2,[DUa,$APP.c_,OVa,$APP.g0],null)),dWa=null,eWa=0,Z5=0;;)if(Z5<eWa){var fWa=dWa.ea(null,Z5),gWa=$APP.A.j(fWa,0,null),hWa=$APP.A.j(fWa,1,null),iWa=gWa,jWa=hWa;$APP.C.h($APP.q($APP.aM),iWa);$APP.dj.G($APP.aM,$APP.Zh,iWa,jWa);Z5+=1}else{var kWa=$APP.u(cWa);if(kWa){var $5=kWa;if($APP.he($5)){var lWa=$APP.Kc($5),mWa=$APP.Lc($5),nWa=lWa,oWa=$APP.Fd(lWa);cWa=mWa;dWa=nWa;eWa=oWa}else{var pWa=$APP.v($5),qWa=$APP.A.j(pWa,0,null),rWa=$APP.A.j(pWa,1,null),sWa=qWa,tWa=rWa;$APP.C.h($APP.q($APP.aM),
sWa);$APP.dj.G($APP.aM,$APP.Zh,sWa,tWa);cWa=$APP.y($5);dWa=null;eWa=0}Z5=0}else break}$APP.cj.g(-1E6);var a6=$APP.DO.h($APP.LJ,null),b6=$APP.DO.h($APP.tL,null),c6=$APP.DO.h(FVa,null),uWa=$APP.DO.h(d5,null),vWa=$APP.Hh([UTa,AUa,cTa,MVa,$APP.xH,tVa,Q4,wVa,aUa,BUa,cVa,WTa,dVa,GVa,P4,pVa,IVa,RVa,SVa,NVa,$Ua,zVa,QVa,$APP.iC,JVa,T4,BVa,VUa,b3,wTa,kVa],[function(){var a=new $APP.hd(function(){return u4},nTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,UTa,"datascript/core.cljc",11,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,3,$APP.BK,3,$APP.TJ,new $APP.H(null,
2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[P4,L4],null),new $APP.H(null,3,5,$APP.I,[P4,L4,V4],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,L4],null),new $APP.H(null,3,5,$APP.I,[P4,L4,V4],null)),$APP.xC,$APP.J(null,null)],null),1,271,271,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,L4],null),new $APP.H(null,3,5,$APP.I,[P4,L4,V4],null)),"Same as [[transact!]], but applies to an immutable database value. Returns transaction report (see [[transact!]]).",$APP.l(u4)?u4.I:null])),b=$APP.q(a),c=$APP.Vd(a);
a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return I5},YVa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,AUa,"datascript/core.cljc",12,1,118,128,$APP.md,'Same as [[pull]], but accepts sequence of ids and returns sequence of maps.\n\n             Usage:\n\n             ```\n             (pull-many db [:db/id :name] [1 2])\n             ; \x3d\x3e [{:db/id 1, :name "Ivan"}\n             ;     {:db/id 2, :name "Oleg"}]\n             ```',
$APP.l(I5)?I5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return V0},oVa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.dm,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,cTa,"datascript/core.cljc",
9,1,25,75,i5,$APP.md,"Retrieves an entity by its id from database. Entities are lazy map-like structures to navigate DataScript database content.\n\n             For `eid` pass entity id or lookup attr:\n\n                 (entity db 1)\n                 (entity db [:unique-attr :value])\n\n             If entity does not exist, `nil` is returned:\n\n                 (entity db 100500) ; \x3d\x3e nil\n\n             Creating an entity by id is very cheap, almost no-op, as attr access is on-demand:\n\n                 (entity db 1) ; \x3d\x3e {:db/id 1}\n\n             Entity attributes can be lazily accessed through key lookups:\n\n                 (:attr (entity db 1)) ; \x3d\x3e :value\n                 (get (entity db 1) :attr) ; \x3d\x3e :value\n\n             Cardinality many attributes are returned sequences:\n\n                 (:attrs (entity db 1)) ; \x3d\x3e [:v1 :v2 :v3]\n\n             Reference attributes are returned as another entities:\n\n                 (:ref (entity db 1)) ; \x3d\x3e {:db/id 2}\n                 (:ns/ref (entity db 1)) ; \x3d\x3e {:db/id 2}\n\n             References can be walked backwards by prepending `_` to name part of an attribute:\n\n                 (:_ref (entity db 2)) ; \x3d\x3e [{:db/id 1}]\n                 (:ns/_ref (entity db 2)) ; \x3d\x3e [{:db/id 1}]\n\n             Reverse reference lookup returns sequence of entities unless attribute is marked as `:db/isComponent`:\n\n                 (:_component-ref (entity db 2)) ; \x3d\x3e {:db/id 1}\n\n             Entity gotchas:\n\n             - Entities print as map, but are not exactly maps (they have compatible get interface though).\n             - Entities are effectively immutable “views” into a particular version of a database.\n             - Entities retain reference to the whole database.\n             - You can’t change database through entities, only read.\n             - Creating an entity by id is very cheap, almost no-op (attributes are looked up on demand).\n             - Comparing entities just compares their ids. Be careful when comparing entities taken from different dbs or from different versions of the same db.\n             - Accessed entity attributes are cached on entity itself (except backward references).\n             - When printing, only cached attributes (the ones you have accessed before) are printed. See [[touch]].",
$APP.l(V0)?V0.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return K5},fTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,MVa,"datascript/core.cljc",
54,1,817,817,$APP.md,"Lazy-loads database from storage. Ultra-fast, fetches the rest as it’s needed",$APP.l(K5)?K5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return N5},aTa,$APP.Hh([$APP.S,$APP.O,
$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,$APP.xH,"datascript/core.cljc",4,1,132,144,$APP.md,'Executes a datalog query. See [docs.datomic.com/on-prem/query.html](https://docs.datomic.com/on-prem/query.html).\n\n          Usage:\n\n          ```\n          (q \'[:find ?value\n               :where [_ :likes ?value]]\n             db)\n          ; \x3d\x3e #{["fries"] ["candy"] ["pie"] ["pizza"]}\n          ```',$APP.l(N5)?N5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?
null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return Y5},oUa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,tVa,"datascript/core.cljc",14,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,3,$APP.BK,3,$APP.TJ,
new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[R4,$APP.Aw],null),new $APP.H(null,3,5,$APP.I,[R4,$APP.ZE,$APP.Aw],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[R4,$APP.Aw],null),new $APP.H(null,3,5,$APP.I,[R4,$APP.ZE,$APP.Aw],null)),$APP.xC,$APP.J(null,null)],null),1,671,671,$APP.J(new $APP.H(null,2,5,$APP.I,[R4,$APP.Aw],null),new $APP.H(null,3,5,$APP.I,[R4,$APP.ZE,$APP.Aw],null)),"Listen for changes on the given connection. Whenever a transaction is applied to the database via [[transact!]], the callback is called\n   with the transaction report. `key` is any opaque unique value.\n\n   Idempotent. Calling [[listen!]] with the same key twice will override old callback with the new value.\n\n   Returns the key under which this listener is registered. See also [[unlisten!]].",
$APP.l(Y5)?Y5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return MZ},AVa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.dm,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,Q4,"datascript/core.cljc",
8,1,185,192,c5,$APP.md,"Low-level fn to create raw datoms.\n\n             Optionally with transaction id (number) and `added` flag (`true` for addition, `false` for retraction).\n\n             See also [[init-db]].",$APP.l(MZ)?MZ.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?
$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return v4},vUa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.dm,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,wVa,"datascript/core.cljc",18,1,280,280,a5,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,L4],null)),"Applies transaction to an immutable db value, returning new immutable db value. Same as `(:db-after (with db tx-data))`.",$APP.l(v4)?v4.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,
4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return w4},lUa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,aUa,"datascript/core.cljc",18,1,423,423,$APP.J(new $APP.H(null,4,5,$APP.I,[P4,I4,$APP.lw,$APP.eJ],null)),'Returns part of `:avet` index between `[_ attr start]` and `[_ attr end]` in AVET sort order.\n\n   Same properties as [[datoms]].\n\n   `attr` must be a reference, unique attribute or marked as `:db/index true`.\n\n   Usage:\n\n       (index-range db :likes "a" "zzzzzzzzz")\n       ; \x3d\x3e (#datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       (index-range db :likes "egg" "pineapple")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [2 :likes "pie"])\n\n   Useful patterns:\n\n       ; find all entities with age in a specific range (inclusive)\n       (-\x3e\x3e (index-range db :age 18 60) (map :e))',
$APP.l(w4)?w4.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return B4},YUa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,BUa,"datascript/core.cljc",
19,1,461,461,$APP.J(new $APP.H(null,1,5,$APP.I,[P4],null)),"Creates a mutable reference to a given immutable database. See [[create-conn]].",$APP.l(B4)?B4.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return V5},
CVa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,cVa,"datascript/core.cljc",19,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,2,$APP.BK,2,$APP.TJ,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[f5],null),new $APP.H(null,2,5,$APP.I,[f5,$APP.qE],null)],null),$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[f5],null),new $APP.H(null,2,5,$APP.I,[f5,$APP.qE],null)),$APP.xC,$APP.J(null,null)],null),1,501,501,$APP.J(new $APP.H(null,1,5,$APP.I,[f5],null),
new $APP.H(null,2,5,$APP.I,[f5,$APP.qE],null)),"Lazy-load database from storage and make conn out of it.\n      Returns nil if there’s no database yet in storage",$APP.l(V5)?V5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=
new $APP.hd(function(){return X5},mTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,WTa,"datascript/core.cljc",18,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,3,$APP.BK,3,$APP.TJ,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[R4,P4],null),new $APP.H(null,3,5,$APP.I,[R4,P4,V4],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[R4,P4],null),new $APP.H(null,3,5,$APP.I,[R4,P4,V4],null)),$APP.xC,$APP.J(null,null)],null),1,633,633,$APP.J(new $APP.H(null,
2,5,$APP.I,[R4,P4],null),new $APP.H(null,3,5,$APP.I,[R4,P4,V4],null)),"Forces underlying `conn` value to become `db`. Will generate a tx-report that will remove everything from old value and insert everything from the new one.",$APP.l(X5)?X5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?
$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return W5},QTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,dVa,"datascript/core.cljc",16,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,3,$APP.BK,3,$APP.TJ,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[R4,L4],null),new $APP.H(null,3,5,$APP.I,[R4,L4,V4],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[R4,L4],null),new $APP.H(null,3,5,$APP.I,[R4,L4,V4],null)),
$APP.xC,$APP.J(null,null)],null),1,540,540,$APP.J(new $APP.H(null,2,5,$APP.I,[R4,L4],null),new $APP.H(null,3,5,$APP.I,[R4,L4,V4],null)),'Applies transaction the underlying database value and atomically updates connection reference to point to the result of that transaction, new db value.\n\n   Returns transaction report, a map:\n\n       { :db-before ...       ; db value before transaction\n         :db-after  ...       ; db value after transaction\n         :tx-data   [...]     ; plain datoms that were added/retracted from db-before\n         :tempids   {...}     ; map of tempid from tx-data \x3d\x3e assigned entid in db-after\n         :tx-meta   tx-meta } ; the exact value you passed as `tx-meta`\n\n  Note! `conn` will be updated in-place and is not returned from [[transact!]].\n\n  Usage:\n\n      ; add a single datom to an existing entity (1)\n      (transact! conn [[:db/add 1 :name "Ivan"]])\n\n      ; retract a single datom\n      (transact! conn [[:db/retract 1 :name "Ivan"]])\n\n      ; retract single entity attribute\n      (transact! conn [[:db.fn/retractAttribute 1 :name]])\n\n      ; ... or equivalently (since Datomic changed its API to support this):\n      (transact! conn [[:db/retract 1 :name]])\n\n      ; retract all entity attributes (effectively deletes entity)\n      (transact! conn [[:db.fn/retractEntity 1]])\n\n      ; create a new entity (`-1`, as any other negative value, is a tempid\n      ; that will be replaced with DataScript to a next unused eid)\n      (transact! conn [[:db/add -1 :name "Ivan"]])\n\n      ; check assigned id (here `*1` is a result returned from previous `transact!` call)\n      (def report *1)\n      (:tempids report) ; \x3d\x3e {-1 296}\n\n      ; check actual datoms inserted\n      (:tx-data report) ; \x3d\x3e [#datascript/Datom [296 :name "Ivan"]]\n\n      ; tempid can also be a string\n      (transact! conn [[:db/add "ivan" :name "Ivan"]])\n      (:tempids *1) ; \x3d\x3e {"ivan" 297}\n\n      ; reference another entity (must exist)\n      (transact! conn [[:db/add -1 :friend 296]])\n\n      ; create an entity and set multiple attributes (in a single transaction\n      ; equal tempids will be replaced with the same yet unused entid)\n      (transact! conn [[:db/add -1 :name "Ivan"]\n                       [:db/add -1 :likes "fries"]\n                       [:db/add -1 :likes "pizza"]\n                       [:db/add -1 :friend 296]])\n\n      ; create an entity and set multiple attributes (alternative map form)\n      (transact! conn [{:db/id  -1\n                        :name   "Ivan"\n                        :likes  ["fries" "pizza"]\n                        :friend 296}])\n\n      ; update an entity (alternative map form). Can’t retract attributes in\n      ; map form. For cardinality many attrs, value (fish in this example)\n      ; will be added to the list of existing values\n      (transact! conn [{:db/id  296\n                        :name   "Oleg"\n                        :likes  ["fish"]}])\n\n      ; ref attributes can be specified as nested map, that will create nested entity as well\n      (transact! conn [{:db/id  -1\n                        :name   "Oleg"\n                        :friend {:db/id -2\n                                 :name "Sergey"}}])\n\n      ; reverse attribute name can be used if you want created entity to become\n      ; a value in another entity reference\n      (transact! conn [{:db/id  -1\n                        :name   "Oleg"\n                        :_friend 296}])\n      ; equivalent to\n      (transact! conn [{:db/id  -1, :name   "Oleg"}\n                       {:db/id 296, :friend -1}])\n      ; equivalent to\n      (transact! conn [[:db/add  -1 :name   "Oleg"]\n                       [:db/add 296 :friend -1]])',
$APP.l(W5)?W5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return J5},RSa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,GVa,"datascript/core.cljc",
38,1,792,792,$APP.md,"Generates a UUID that grow with time. Such UUIDs will always go to the end  of the index and that will minimize insertions in the middle.\n\n   Consist of 64 bits of current UNIX timestamp (in seconds) and 64 random bits (2^64 different unique values per second).",$APP.l(J5)?J5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):
$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return D4},uTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.dm,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,P4,"datascript/core.cljc",13,1,732,732,a5,$APP.J(new $APP.H(null,1,5,$APP.I,[R4],null)),"Returns the underlying immutable database value from a connection.\n\n   Exists for Datomic API compatibility. Prefer using `@conn` directly if possible.",
$APP.l(D4)?D4.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return L5},ATa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,pVa,"datascript/core.cljc",
15,1,210,222,$APP.md,"Converts db into a data structure (not string!) that can be fed to serializer\n             of your choice (e.g. `js/JSON.stringify` in CLJS, `cheshire.core/generate-string`\n             or `jsonista.core/write-value-as-string` in CLJ).\n\n             On JVM, `serializable` holds a global lock that prevents any two serializations\n             to run in parallel (an implementation constraint, be aware).\n\n             Options:\n\n             `:freeze-fn` Non-primitive values will be serialized using this. Optional.\n             `pr-str` by default.",
$APP.l(L5)?L5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return T5},ZTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,IVa,"datascript/core.cljc",
23,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,3,$APP.BK,3,$APP.TJ,new $APP.H(null,3,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[T4],null),new $APP.H(null,2,5,$APP.I,[T4,J4],null),new $APP.H(null,3,5,$APP.I,[T4,J4,$APP.qE],null)],null),$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[T4],null),new $APP.H(null,2,5,$APP.I,[T4,J4],null),new $APP.H(null,3,5,$APP.I,[T4,J4,$APP.qE],null)),$APP.xC,$APP.J(null,null,null)],null),1,475,475,$APP.J(new $APP.H(null,1,5,$APP.I,[T4],null),new $APP.H(null,2,5,$APP.I,[T4,J4],null),
new $APP.H(null,3,5,$APP.I,[T4,J4,$APP.qE],null)),"Creates an empty DB and a mutable reference to it. See [[create-conn]].",$APP.l(T5)?T5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return S5},xTa,
$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,RVa,"datascript/core.cljc",19,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,6,$APP.BK,6,$APP.TJ,new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[P4,$APP.BC],null),new $APP.H(null,3,5,$APP.I,[P4,$APP.BC,O4],null),new $APP.H(null,4,5,$APP.I,[P4,$APP.BC,O4,$APP.hB],null),new $APP.H(null,5,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB],null),new $APP.H(null,6,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB,$APP.jB],
null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,$APP.BC],null),new $APP.H(null,3,5,$APP.I,[P4,$APP.BC,O4],null),new $APP.H(null,4,5,$APP.I,[P4,$APP.BC,O4,$APP.hB],null),new $APP.H(null,5,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB],null),new $APP.H(null,6,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB,$APP.jB],null)),$APP.xC,$APP.J(null,null,null,null,null)],null),1,415,415,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,$APP.BC],null),new $APP.H(null,3,5,$APP.I,[P4,$APP.BC,O4],null),new $APP.H(null,4,5,$APP.I,
[P4,$APP.BC,O4,$APP.hB],null),new $APP.H(null,5,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB],null),new $APP.H(null,6,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB,$APP.jB],null)),"Same as [[seek-datoms]], but goes backwards until the beginning of the index.",$APP.l(S5)?S5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);
return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return M5},KUa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.dm,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,SVa,"datascript/core.cljc",20,1,224,233,a5,$APP.md,"Creates db from a data structure (not string!) produced by serializable.\n\n             Opts:\n\n             `:thaw-fn` Non-primitive values will be deserialized using this.\n             Must match :freeze-fn from serializable. Optional. `clojure.edn/read-string`\n             by default.",
$APP.l(M5)?M5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return O5},GUa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.dm,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,NVa,"datascript/core.cljc",
19,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,2,$APP.BK,2,$APP.TJ,new $APP.H(null,3,5,$APP.I,[$APP.pg,new $APP.H(null,1,5,$APP.I,[J4],null),new $APP.H(null,2,5,$APP.I,[J4,$APP.qE],null)],null),$APP.Z,$APP.J($APP.pg,new $APP.H(null,1,5,$APP.I,[J4],null),new $APP.H(null,2,5,$APP.I,[J4,$APP.qE],null)),$APP.xC,$APP.J(null,null,null)],null),1,154,154,a5,$APP.J($APP.pg,new $APP.H(null,1,5,$APP.I,[J4],null),new $APP.H(null,2,5,$APP.I,[J4,$APP.qE],null)),"Creates an empty database with an optional schema.\n\n   Usage:\n\n   ```\n   (empty-db) ; \x3d\x3e #datascript/DB {:schema {}, :datoms []}\n\n   (empty-db {:likes {:db/cardinality :db.cardinality/many}})\n   ; \x3d\x3e #datascript/DB {:schema {:likes {:db/cardinality :db.cardinality/many}}\n   ;                    :datoms []}\n   ```\n\n   Options are:\n\n   :branching-factor \x3cint\x3e, default 512. B-tree max node length\n   :ref-type         :strong | :soft | :weak, default :soft. How will nodes that are already\n                     stored on disk be referenced. Soft or weak means they might be unloaded\n                     from memory under memory pressure and later fetched from storage again.\n   :storage          \x3cIStorage\x3e. Will be used to store this db later with `(d/store db)`",
$APP.l(O5)?O5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return P5},SUa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.dm,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,$Ua,"datascript/core.cljc",
18,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,3,$APP.BK,3,$APP.TJ,new $APP.H(null,3,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[T4],null),new $APP.H(null,2,5,$APP.I,[T4,J4],null),new $APP.H(null,3,5,$APP.I,[T4,J4,$APP.qE],null)],null),$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[T4],null),new $APP.H(null,2,5,$APP.I,[T4,J4],null),new $APP.H(null,3,5,$APP.I,[T4,J4,$APP.qE],null)),$APP.xC,$APP.J(null,null,null)],null),1,198,198,a5,$APP.J(new $APP.H(null,1,5,$APP.I,[T4],null),new $APP.H(null,2,5,$APP.I,[T4,J4],null),
new $APP.H(null,3,5,$APP.I,[T4,J4,$APP.qE],null)),"Low-level fn for creating database quickly from a trusted sequence of datoms.\n   Does no validation on inputs, so `datoms` must be well-formed and match schema.\n   Used internally in db (de)serialization. See also [[datom]].\n   For options, see [[empty-db]]",$APP.l(P5)?P5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?
$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return X0},iTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.dm,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,zVa,"datascript/core.cljc",8,1,89,99,i5,$APP.md,"Forces all entity attributes to be eagerly fetched and cached. Only usable for debug output.\n\n             Usage:\n\n             ```\n             (entity db 1) ; \x3d\x3e {:db/id 1}\n             (touch (entity db 1)) ; \x3d\x3e {:db/id 1, :dislikes [:pie], :likes [:pizza]}\n             ```",
$APP.l(X0)?X0.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return 536870912},nVa,$APP.Hh([$APP.qt,$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.mx,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[!0,$APP.LJ,
QVa,"datascript/core.cljc",26,1,!0,20,20,$APP.md,null,$APP.l(536870912)?(536870912).I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return t4},YSa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,
$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,$APP.iC,"datascript/core.cljc",13,1,250,250,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,$APP.wL],null)),"Returns a view over database that has same interface but only includes datoms for which the `(pred db datom)` is true. Can be applied multiple times.\n\n   Filtered DB gotchas:\n\n   - All operations on filtered database are proxied to original DB, then filter pred is applied.\n   - Not cached. You pay filter penalty every time.\n   - Supports entities, pull, queries, index access.\n   - Does not support [[with]] and [[db-with]].",
$APP.l(t4)?t4.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return y4},VTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,JVa,"datascript/core.cljc",
45,1,808,808,$APP.md,"Stores databases to provided storage. If database was created\n      with :storage option or restored from storage, use single-argument version.\n\n      Subsequent stores are incremental, i.e. only newly added nodes will be actually stored.\n\n      Storing already stored dbs into another storage is not supported (may change).",$APP.l(y4)?y4.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,
$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return Q5},mVa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,T4,"datascript/core.cljc",13,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,6,$APP.BK,6,$APP.TJ,new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[P4,$APP.BC],null),new $APP.H(null,
3,5,$APP.I,[P4,$APP.BC,O4],null),new $APP.H(null,4,5,$APP.I,[P4,$APP.BC,O4,$APP.hB],null),new $APP.H(null,5,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB],null),new $APP.H(null,6,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB,$APP.jB],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,$APP.BC],null),new $APP.H(null,3,5,$APP.I,[P4,$APP.BC,O4],null),new $APP.H(null,4,5,$APP.I,[P4,$APP.BC,O4,$APP.hB],null),new $APP.H(null,5,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB],null),new $APP.H(null,6,5,$APP.I,[P4,$APP.BC,
O4,$APP.hB,$APP.iB,$APP.jB],null)),$APP.xC,$APP.J(null,null,null,null,null)],null),1,293,293,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,$APP.BC],null),new $APP.H(null,3,5,$APP.I,[P4,$APP.BC,O4],null),new $APP.H(null,4,5,$APP.I,[P4,$APP.BC,O4,$APP.hB],null),new $APP.H(null,5,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB],null),new $APP.H(null,6,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB,$APP.jB],null)),'Index lookup. Returns a sequence of datoms (lazy iterator over actual DB index) which components (e, a, v) match passed arguments.\n\n   Datoms are sorted in index sort order. Possible `index` values are: `:eavt`, `:aevt`, `:avet`.\n\n   Usage:\n\n       ; find all datoms for entity id \x3d\x3d 1 (any attrs and values)\n       ; sort by attribute, then value\n       (datoms db :eavt 1)\n       ; \x3d\x3e (#datascript/Datom [1 :friends 2]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [1 :name "Ivan"])\n\n       ; find all datoms for entity id \x3d\x3d 1 and attribute \x3d\x3d :likes (any values)\n       ; sorted by value\n       (datoms db :eavt 1 :likes)\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"])\n\n       ; find all datoms for entity id \x3d\x3d 1, attribute \x3d\x3d :likes and value \x3d\x3d "pizza"\n       (datoms db :eavt 1 :likes "pizza")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "pizza"])\n\n       ; find all datoms for attribute \x3d\x3d :likes (any entity ids and values)\n       ; sorted by entity id, then value\n       (datoms db :aevt :likes)\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       ; find all datoms that have attribute \x3d\x3d `:likes` and value \x3d\x3d `"pizza"` (any entity id)\n       ; `:likes` must be a unique attr, reference or marked as `:db/index true`\n       (datoms db :avet :likes "pizza")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       ; find all datoms sorted by entity id, then attribute, then value\n       (datoms db :eavt) ; \x3d\x3e (...)\n\n   Useful patterns:\n\n       ; get all values of :db.cardinality/many attribute\n       (-\x3e\x3e (datoms db :eavt eid attr) (map :v))\n\n       ; lookup entity ids by attribute value\n       (-\x3e\x3e (datoms db :avet attr value) (map :e))\n\n       ; find all entities with a specific attribute\n       (-\x3e\x3e (datoms db :aevt attr) (map :e))\n\n       ; find “singleton” entity by its attr\n       (-\x3e\x3e (datoms db :aevt attr) first :e)\n\n       ; find N entities with lowest attr value (e.g. 10 earliest posts)\n       (-\x3e\x3e (datoms db :avet attr) (take N))\n\n       ; find N entities with highest attr value (e.g. 10 latest posts)\n       (-\x3e\x3e (datoms db :avet attr) (reverse) (take N))\n\n   Gotchas:\n\n   - Index lookup is usually more efficient than doing a query with a single clause.\n   - Resulting iterator is calculated in constant time and small constant memory overhead.\n   - Iterator supports efficient `first`, `next`, `reverse`, `seq` and is itself a sequence.\n   - Will not return datoms that are not part of the index (e.g. attributes with no `:db/index` in schema when querying `:avet` index).\n     - `:eavt` and `:aevt` contain all datoms.\n     - `:avet` only contains datoms for references, `:db/unique` and `:db/index` attributes.',
$APP.l(Q5)?Q5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return C4},PTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,BVa,"datascript/core.cljc",
20,1,657,657,$APP.J(new $APP.H(null,2,5,$APP.I,[R4,J4],null)),null,$APP.l(C4)?C4.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return R5},fUa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,
$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,VUa,"datascript/core.cljc",18,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,6,$APP.BK,6,$APP.TJ,new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[P4,$APP.BC],null),new $APP.H(null,3,5,$APP.I,[P4,$APP.BC,O4],null),new $APP.H(null,4,5,$APP.I,[P4,$APP.BC,O4,$APP.hB],null),new $APP.H(null,5,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB],null),new $APP.H(null,6,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB,$APP.jB],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,
[P4,$APP.BC],null),new $APP.H(null,3,5,$APP.I,[P4,$APP.BC,O4],null),new $APP.H(null,4,5,$APP.I,[P4,$APP.BC,O4,$APP.hB],null),new $APP.H(null,5,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB],null),new $APP.H(null,6,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB,$APP.jB],null)),$APP.xC,$APP.J(null,null,null,null,null)],null),1,378,378,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,$APP.BC],null),new $APP.H(null,3,5,$APP.I,[P4,$APP.BC,O4],null),new $APP.H(null,4,5,$APP.I,[P4,$APP.BC,O4,$APP.hB],null),new $APP.H(null,5,5,
$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB],null),new $APP.H(null,6,5,$APP.I,[P4,$APP.BC,O4,$APP.hB,$APP.iB,$APP.jB],null)),'Similar to [[datoms]], but will return datoms starting from specified components and including rest of the database until the end of the index.\n\n   If no datom matches passed arguments exactly, iterator will start from first datom that could be considered “greater” in index order.\n\n   Usage:\n\n       (seek-datoms db :eavt 1)\n       ; \x3d\x3e (#datascript/Datom [1 :friends 2]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [1 :name "Ivan"]\n       ;     #datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       (seek-datoms db :eavt 1 :name)\n       ; \x3d\x3e (#datascript/Datom [1 :name "Ivan"]\n       ;     #datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       (seek-datoms db :eavt 2)\n       ; \x3d\x3e (#datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       ; no datom [2 :likes "fish"], so starts with one immediately following such in index\n       (seek-datoms db :eavt 2 :likes "fish")\n       ; \x3d\x3e (#datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])',
$APP.l(R5)?R5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return H5},CTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,b3,"datascript/core.cljc",
7,1,104,116,$APP.md,'Fetches data from database using recursive declarative description. See [docs.datomic.com/on-prem/pull.html](https://docs.datomic.com/on-prem/pull.html).\n\n             Unlike [[entity]], returns plain Clojure map (not lazy).\n\n             Usage:\n\n                 (pull db [:db/id, :name, :likes, {:friends [:db/id :name]}] 1)\n                 ; \x3d\x3e {:db/id   1,\n                 ;     :name    "Ivan"\n                 ;     :likes   [:pizza]\n                 ;     :friends [{:db/id 2, :name "Oleg"}]}',
$APP.l(H5)?H5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return QSa},gUa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,wTa,"datascript/core.cljc",
15,1,850,850,$APP.J(new $APP.H(null,1,5,$APP.I,[P4],null)),null,$APP.l(QSa)?QSa.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return U5},EUa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,
$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.LJ,kVa,"datascript/core.cljc",18,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,2,$APP.BK,2,$APP.TJ,new $APP.H(null,3,5,$APP.I,[$APP.pg,new $APP.H(null,1,5,$APP.I,[J4],null),new $APP.H(null,2,5,$APP.I,[J4,$APP.qE],null)],null),$APP.Z,$APP.J($APP.pg,new $APP.H(null,1,5,$APP.I,[J4],null),new $APP.H(null,2,5,$APP.I,[J4,$APP.qE],null)),$APP.xC,$APP.J(null,null,null)],null),1,484,484,$APP.J($APP.pg,new $APP.H(null,1,5,$APP.I,[J4],null),new $APP.H(null,2,5,$APP.I,[J4,
$APP.qE],null)),"Creates a mutable reference (a “connection”) to an empty immutable database.\n\n   Connections are lightweight in-memory structures (~atoms) with direct support of transaction listeners ([[listen!]], [[unlisten!]]) and other handy DataScript APIs ([[transact!]], [[reset-conn!]], [[db]]).\n\n   To access underlying immutable DB value, deref: `@conn`.\n\n   For list of options, see [[empty-db]].\n\n   If you specify `:storage` option, conn will be stored automatically after each transaction",
$APP.l(U5)?U5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}()]),wWa=new $APP.k(null,7,[LTa,function(){var a=new $APP.hd(function(){return $APP.g0},qVa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.tL,
LTa,"datascript/db.cljc",21,1,1102,1102,$APP.J(new $APP.H(null,1,5,$APP.I,[new $APP.k(null,1,[$APP.Cy,new $APP.H(null,2,5,$APP.I,[J4,T4],null)],null)],null)),null,$APP.l($APP.g0)?$APP.g0.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),bVa,
function(){var a=new $APP.hd(function(){return $APP.c_},eVa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.dm,$APP.Z,$APP.N,$APP.FC],[$APP.tL,bVa,"datascript/db.cljc",31,1,362,362,c5,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.YJ],null)),null,$APP.l($APP.c_)?$APP.c_.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=
$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),WSa,function(){var a=new $APP.hd(function(){return $APP.a_},qTa,$APP.Hh([$APP.Eq,$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[SSa,$APP.tL,WSa,"datascript/db.cljc",15,1,207,209,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.tB],null)),null,$APP.l($APP.a_)?$APP.a_.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),
$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),VSa,function(){var a=new $APP.hd(function(){return $APP.$Z},STa,$APP.Hh([$APP.Eq,$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[SSa,$APP.tL,VSa,"datascript/db.cljc",12,1,207,208,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.tB],null)),null,$APP.l($APP.$Z)?$APP.$Z.I:null])),b=$APP.q(a),c=$APP.Vd(a);
a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),Q4,function(){var a=new $APP.hd(function(){return MZ},UUa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.dm,$APP.Z,$APP.N,$APP.FC],[$APP.tL,Q4,"datascript/db.cljc",19,new $APP.k(null,6,[$APP.sx,!1,
$APP.Tr,5,$APP.BK,5,$APP.TJ,new $APP.H(null,3,5,$APP.I,[new $APP.H(null,3,5,$APP.I,[$APP.lH,$APP.fH,$APP.AH],null),new $APP.H(null,4,5,$APP.I,[$APP.lH,$APP.fH,$APP.AH,K4],null),new $APP.H(null,5,5,$APP.I,[$APP.lH,$APP.fH,$APP.AH,K4,bTa],null)],null),$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.lH,$APP.fH,$APP.AH],null),new $APP.H(null,4,5,$APP.I,[$APP.lH,$APP.fH,$APP.AH,K4],null),new $APP.H(null,5,5,$APP.I,[$APP.lH,$APP.fH,$APP.AH,K4,bTa],null)),$APP.xC,$APP.J(null,null,null)],null),1,286,286,c5,
$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.lH,$APP.fH,$APP.AH],null),new $APP.H(null,4,5,$APP.I,[$APP.lH,$APP.fH,$APP.AH,K4],null),new $APP.H(null,5,5,$APP.I,[$APP.lH,$APP.fH,$APP.AH,K4,bTa],null)),null,$APP.l(MZ)?MZ.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,
d):$APP.kt.j(a,b,d)}(),a5,function(){var a=new $APP.hd(function(){return $APP.A_},qUa,new $APP.k(null,8,[$APP.S,$APP.tL,$APP.N,null,$APP.ul,"datascript/db.cljc",$APP.vl,666,$APP.mm,22,$APP.O,a5,$APP.FC,$APP.l($APP.A_)?$APP.A_.I:null,$APP.Z,$APP.md],null)),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?
e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),c5,function(){var a=new $APP.hd(function(){return $APP.b_},tUa,new $APP.k(null,8,[$APP.S,$APP.tL,$APP.N,null,$APP.ul,"datascript/db.cljc",$APP.vl,213,$APP.mm,10,$APP.O,c5,$APP.FC,$APP.l($APP.b_)?$APP.b_.I:null,$APP.Z,$APP.md],null)),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=
$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}()],null),xWa=new $APP.k(null,3,[uUa,function(){var a=new $APP.hd(function(){return v5},$Sa,$APP.Hh([$APP.Ss,$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.iI,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[!0,d5,uUa,"datascript/impl/entity.cljc",21,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,3,$APP.BK,3,$APP.TJ,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.tB,I4],null),new $APP.H(null,3,5,$APP.I,[$APP.Ud($APP.tB,new $APP.k(null,
1,[$APP.dm,i5],null)),I4,$APP.Kx],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.tB,I4],null),new $APP.H(null,3,5,$APP.I,[$APP.Ud($APP.tB,new $APP.k(null,1,[$APP.dm,i5],null)),I4,$APP.Kx],null)),$APP.xC,$APP.J(null,null)],null),1,166,166,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.tB,I4],null),new $APP.H(null,3,5,$APP.I,[$APP.Ud($APP.tB,new $APP.k(null,1,[$APP.dm,i5],null)),I4,$APP.Kx],null)),null,$APP.l(v5)?v5.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,
4,[$APP.S,uWa,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),i5,function(){var a=new $APP.hd(function(){return Z0},xUa,new $APP.k(null,8,[$APP.S,d5,$APP.N,null,$APP.ul,"datascript/impl/entity.cljc",$APP.vl,48,$APP.mm,10,$APP.O,i5,$APP.FC,$APP.l(Z0)?Z0.I:null,$APP.Z,$APP.md],null)),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);
var d=new $APP.k(null,4,[$APP.S,uWa,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),XSa,function(){var a=new $APP.hd(function(){return $0},DTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[d5,XSa,"datascript/impl/entity.cljc",14,1,148,148,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.CH],null)),null,$APP.l($0)?
$0.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,uWa,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}()],null),d6,yWa=$APP.cj.g($APP.wf),zWa=$APP.cj.g($APP.wf),AWa=$APP.cj.g($APP.wf),BWa=$APP.cj.g($APP.wf),CWa=$APP.C.j($APP.wf,$APP.mq,$APP.mj.C?$APP.mj.C():$APP.mj.call(null));
d6=new $APP.Cj($APP.Mi.h("nbb.impl.datascript","-store"),$APP.aq,$APP.km,CWa,yWa,zWa,AWa,BWa);var e6,DWa=$APP.cj.g($APP.wf),EWa=$APP.cj.g($APP.wf),FWa=$APP.cj.g($APP.wf),GWa=$APP.cj.g($APP.wf),HWa=$APP.C.j($APP.wf,$APP.mq,$APP.mj.C?$APP.mj.C():$APP.mj.call(null));e6=new $APP.Cj($APP.Mi.h("nbb.impl.datascript","-restore"),$APP.aq,$APP.km,HWa,DWa,EWa,FWa,GWa);d6.Da(null,$APP.Ww,function(a,b){var c=$APP.Ho(a);c=$APP.C.h(c,M4);return c.h?c.h(a,b):c.call(null,a,b)});var IWa=U1;
d6.Da(null,$APP.km,function(a,b){return IWa.h?IWa.h(a,b):IWa.call(null,a,b)});U1=function(a,b){return d6.h(a,b)};e6.Da(null,$APP.Ww,function(a,b){var c=$APP.Ho(a);c=$APP.C.h(c,h5);return c.h?c.h(a,b):c.call(null,a,b)});var JWa=V1;e6.Da(null,$APP.km,function(a,b){return JWa.h?JWa.h(a,b):JWa.call(null,a,b)});V1=function(a,b){return e6.h(a,b)};
var KWa=$APP.kt.h(UVa,new $APP.k(null,3,[$APP.Eq,iRa,$APP.Dq,$APP.di([e6,d6]),$APP.S,c6],null)),LWa=$APP.Zh.l($APP.mt($APP.Hh([$APP.Ud(RTa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.Ud($APP.gH,new $APP.k(null,1,[$APP.dm,c5],null))],null)))],null)),$APP.Ud(XVa,new $APP.k(null,4,[aVa,!0,$APP.ZJ,$APP.eqa,$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[f5],null))),$APP.N,"Positional factory function for datascript.storage/StorageAdapter."],null)),$APP.Ud(HTa,
new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J($APP.Ud(new $APP.H(null,1,5,$APP.I,[P4],null),new $APP.k(null,1,[$APP.dm,jVa],null))))],null)),$APP.Ud(IUa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,$APP.lC],null)))],null)),$APP.Ud(VVa,new $APP.k(null,4,[$APP.QF,!0,$APP.ex,new $APP.k(null,1,[$APP.Dq,new $APP.k(null,2,[$APP.Ud(M4,new $APP.k(null,1,[$APP.N,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)"],
null)),new $APP.H(null,1,5,$APP.I,[new $APP.H(null,3,5,$APP.I,[$APP.bH,g5,W4],null)],null),$APP.Ud(h5,new $APP.k(null,1,[$APP.N,"Read back and deserialize data stored under single `addr`"],null)),new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.bH,G4],null)],null)],null)],null),$APP.kH,new $APP.k(null,2,[TSa,new $APP.k(null,3,[$APP.O,M4,$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.bH,g5,W4],null)),$APP.N,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)"],
null),oTa,new $APP.k(null,3,[$APP.O,h5,$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.bH,G4],null)),$APP.N,"Read back and deserialize data stored under single `addr`"],null)],null),$APP.eF,$APP.J("@interface")],null)),$APP.Ud(MVa,new $APP.k(null,2,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[f5],null),new $APP.H(null,2,5,$APP.I,[f5,$APP.qE],null))),$APP.iI,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,2,$APP.BK,2,$APP.TJ,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[f5],null),new $APP.H(null,
2,5,$APP.I,[f5,$APP.qE],null)],null),$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[f5],null),new $APP.H(null,2,5,$APP.I,[f5,$APP.qE],null)),$APP.xC,$APP.J(null,null)],null)],null)),$APP.Ud(f5,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[P4],null)))],null)),$APP.Ud(M4,new $APP.k(null,3,[$APP.Eq,uVa,$APP.N,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)",
$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.bH,g5,W4],null)))],null)),$APP.Ud(BTa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,3,5,$APP.I,[P4,TUa,xVa],null)))],null)),$APP.Ud(h5,new $APP.k(null,3,[$APP.Eq,uVa,$APP.N,"Read back and deserialize data stored under single `addr`",$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.bH,G4],null)))],null)),$APP.Ud(ETa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,2,5,$APP.I,[f5,$APP.qE],null)))],
null)),$APP.Ud(zTa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,2,5,$APP.I,[f5,gTa],null)))],null)),$APP.Ud(JVa,new $APP.k(null,2,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[P4],null),new $APP.H(null,2,5,$APP.I,[P4,f5],null))),$APP.iI,new $APP.k(null,6,[$APP.sx,!1,$APP.Tr,2,$APP.BK,2,$APP.TJ,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[P4],null),new $APP.H(null,2,5,$APP.I,[P4,f5],null)],null),$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[P4],null),new $APP.H(null,
2,5,$APP.I,[P4,f5],null)),$APP.xC,$APP.J(null,null)],null)],null)),$APP.Ud(fVa,new $APP.k(null,4,[aVa,!0,$APP.ZJ,$APP.Xl,$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[pUa],null))),$APP.N,"Factory function for datascript.storage/StorageAdapter, taking a map of keywords to field values."],null)),$APP.Ud(wUa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,$APP.lC],null)))],null))],[new $APP.k(null,3,[$APP.O,sTa,$APP.lt,W1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,
1,5,$APP.I,[$APP.Ud($APP.gH,new $APP.k(null,1,[$APP.dm,c5],null))],null))],null)],null),new $APP.k(null,3,[$APP.O,sUa,$APP.lt,function(a){return new X1(a,null,null,null)},$APP.Ta,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[f5],null)),$APP.N,"Positional factory function for datascript.storage/StorageAdapter."],null)],null),new $APP.k(null,3,[$APP.O,JTa,$APP.lt,Z1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Ud(new $APP.H(null,1,5,$APP.I,[P4],null),new $APP.k(null,1,[$APP.dm,jVa],
null)))],null)],null),new $APP.k(null,3,[$APP.O,rUa,$APP.lt,oRa,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,$APP.lC],null))],null)],null),new $APP.k(null,3,[$APP.O,uVa,$APP.lt,iRa,$APP.Ta,$APP.wf],null),new $APP.k(null,3,[$APP.O,ZUa,$APP.lt,K5,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[f5],null),new $APP.H(null,2,5,$APP.I,[f5,$APP.qE],null))],null)],null),new $APP.k(null,3,[$APP.O,sVa,$APP.lt,$1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,
1,5,$APP.I,[P4],null))],null)],null),new $APP.k(null,3,[$APP.O,OUa,$APP.lt,U1,$APP.Ta,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.bH,g5,W4],null)),$APP.N,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)"],null)],null),new $APP.k(null,3,[$APP.O,QUa,$APP.lt,d2,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[P4,
TUa,xVa],null))],null)],null),new $APP.k(null,3,[$APP.O,kTa,$APP.lt,V1,$APP.Ta,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.bH,G4],null)),$APP.N,"Read back and deserialize data stored under single `addr`"],null)],null),new $APP.k(null,3,[$APP.O,dTa,$APP.lt,f2,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[f5,$APP.qE],null))],null)],null),new $APP.k(null,3,[$APP.O,vVa,$APP.lt,Y1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[f5,gTa],
null))],null)],null),new $APP.k(null,3,[$APP.O,kUa,$APP.lt,y4,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[P4],null),new $APP.H(null,2,5,$APP.I,[P4,f5],null))],null)],null),new $APP.k(null,3,[$APP.O,gVa,$APP.lt,function(a){var b=$APP.nl.h(a,OZ);b=$APP.fe(a)?$APP.fh.h($APP.wf,b):b;return new X1(OZ.g(a),null,$APP.yf(b),null)},$APP.Ta,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[pUa],null)),$APP.N,"Factory function for datascript.storage/StorageAdapter, taking a map of keywords to field values."],
null)],null),new $APP.k(null,3,[$APP.O,DVa,$APP.lt,g2,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[P4,$APP.lC],null))],null)],null)]),c6),M4,function(){var a=new $APP.hd(function(){return d6},tTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.Ud(jTa,new $APP.k(null,1,[$APP.qt,!0],null)),M4,"nbb/impl/datascript.cljs",17,1,65,65,$APP.md,null,$APP.l(d6)?d6.I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,
4,[$APP.S,c6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),$APP.B([h5,function(){var a=new $APP.hd(function(){return e6},yTa,$APP.Hh([$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[$APP.Ud(jTa,new $APP.k(null,1,[$APP.qt,!0],null)),h5,"nbb/impl/datascript.cljs",19,1,66,66,$APP.md,null,$APP.l(e6)?e6.I:null])),
b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,c6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}(),VVa,KWa,eTa,function(){var a=new $APP.hd(function(){return 1},lVa,$APP.Hh([$APP.Ss,$APP.S,$APP.O,$APP.ul,$APP.Rw,$APP.mm,$APP.vl,$APP.UL,$APP.Z,$APP.N,$APP.FC],[!0,FVa,eTa,"datascript/storage.cljs",25,
1,31,31,$APP.md,null,$APP.l(1)?(1).I:null])),b=$APP.q(a),c=$APP.Vd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,c6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Vp.g(c))?$APP.xO.j(a,b,d):$APP.l(function(){var e=$APP.np.g(c);return $APP.l(e)?e:$APP.Bp.g(c)}())?$APP.yO.j(a,b,d):$APP.kt.j(a,b,d)}()]));$APP.Zt(new $APP.k(null,1,[$APP.Kp,new $APP.k(null,4,[$APP.LJ,vWa,$APP.tL,wWa,FVa,LWa,d5,xWa],null)],null));