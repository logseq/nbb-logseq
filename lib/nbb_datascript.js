import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
if (global) { global.datascript = datascript } else if (window) { window.datascript = datascript } else { var datascript = {}}const shadow_esm_import = function(x) { return import(x) };
var GPa,IPa,OY,QY,PY,RY,TY,UY,KPa,LPa,MPa,NPa,WY,XY,YY,ZY,$Y,aZ,cZ,eZ,fZ,PPa,QPa,RPa,gZ,hZ,iZ,SPa,jZ,kZ,lZ,mZ,nZ,oZ,pZ,qZ,rZ,TPa,tZ,uZ,vZ,xZ,wZ,AZ,UPa,BZ,DZ,EZ,FZ,GZ,IZ,KZ,MZ,VPa,NZ,LZ,OZ,PZ,QZ,WPa,XPa,TZ,UZ,VZ,WZ,ZZ,a_,d_,g_,h_,i_,ZPa,o_,$Pa,aQa,q_,r_,s_,t_,u_,v_,w_,x_,y_,bQa,z_,A_,B_,C_,D_,E_,H_,I_,J_,K_,V_,W_,fQa,gQa,hQa,i0,l0,o0,p0,kQa,r0,mQa,u0,nQa,A0,B0,C0,D0,oQa,E0,G0,pQa,J0,qQa,K0,VY,L0,M0,N0,tQa,P0,vQa,wQa,xQa,AQa,BQa,U0,CQa,FQa,GQa,HQa,$0,a1,JQa,e1,KQa,LQa,NQa,OQa,j1,k1,l1,m1,n1,o1,p1,t1,
UQa,v1,w1,x1,y1,WQa,A1,B1,C1,D1,E1,I1,YQa,J1,L1,ZQa,$Qa,M1,O1,P1,K1,Q1,R1,S1,aRa,bRa,N1,T1,cRa,dRa,U1,eRa,d2,j2,l2,hRa,iRa,jRa,n2,kRa,lRa,q2,r2,s2,t2,oRa,u2,v2,w2,x2,y2,z2,A2,B2,C2,D2,F2,E2,G2,I2,J2,K2,L2,M2,qRa,rRa,sRa,vRa,N2,O2,P2,Q2,R2,T2,S2,U2,V2,W2,X2,Y2,Z2,$2,a3,b3,c3,d3,xRa,e3,f3,g3,yRa,h3,i3,zRa,l3,m3,n3,o3,p3,q3,ARa,BRa,CRa,r3,t3,u3,v3,w3,x3,y3,z3,A3,B3,DRa,C3,IRa,D3,JRa,KRa,MRa,E3,F3,G3,H3,I3,J3,K3,NRa,L3,ORa,PRa,QRa,RRa,SRa,URa,O3,VRa,R3,S3,WRa,YRa,ZRa,U3,$Ra,aSa,bSa,fSa,iSa,b4,c4,jSa,
kSa,lSa,d4,e4,mSa,nSa,oSa,pSa,f4,qSa,tSa,uSa,l4,vSa,n4,wSa,o4,xSa,ySa,zSa,ASa,BSa,CSa,p4,DSa,ESa,FSa,GSa,HSa,ISa,JSa,LSa,MSa,NSa,u4,OSa,QSa,RSa,B4,C4,D4,SSa,TSa,USa,VSa,PSa,A4,WSa,XSa,F4,YSa,ZSa,$Sa,aTa,bTa,cTa,dTa,eTa,fTa,gTa,hTa,G4,iTa,Y_,f1,jTa,kTa,lTa,mTa,eSa,jQa,W0,X3,MQa,nTa,oTa,pTa,H4,qTa,T3,rTa,sTa,H1,tTa,GRa,uTa,i2,Z0,vTa,wTa,xTa,$3,yTa,g2,EQa,zTa,ATa,BTa,X1,CTa,b0,DTa,ETa,FTa,GTa,X0,HTa,ITa,JTa,KTa,LTa,MTa,I4,NTa,OTa,x0,y4,PTa,QTa,RTa,Z3,g0,y0,V3,STa,x4,TTa,a0,T0,UTa,VTa,w0,M3,WTa,J4,XTa,
$_,YTa,b1,K4,ZTa,$Ta,aUa,Q3,bUa,cUa,dUa,hSa,eUa,fUa,gUa,hUa,F_,L4,i1,iUa,jUa,LRa,lQa,kUa,$Z,U_,lUa,a2,fRa,M4,mUa,G1,nUa,N3,m0,uQa,O_,oUa,N4,pUa,O4,DQa,ERa,b_,qUa,rUa,P4,sUa,t4,c0,Q4,tUa,R4,uUa,d0,Y1,vUa,wUa,z4,xUa,SQa,cSa,yUa,m4,zUa,S4,AUa,T4,BUa,CUa,DUa,EUa,P_,FUa,GUa,HUa,IUa,JUa,k0,KUa,LUa,MUa,NUa,OUa,U4,p2,uRa,e0,PUa,Z_,QQa,tRa,QUa,XQa,RUa,SUa,f_,X_,TUa,TQa,h4,UUa,V4,RQa,z0,VUa,WUa,XUa,YUa,W1,wRa,c1,ZUa,$Ua,dQa,aVa,bVa,Q0,cVa,dVa,eVa,Q_,fVa,f2,b2,gVa,W4,H2,X4,hVa,r4,iVa,V0,jVa,kVa,lVa,i4,mVa,v0,
nVa,h1,zQa,YPa,yQa,oVa,pVa,qVa,rVa,z1,sVa,pRa,S_,tVa,uVa,vVa,wVa,g4,xVa,yVa,h0,c2,FRa,HRa,Y0,T_,VQa,s3,zVa,AVa,Y4,zZ,BVa,Z4,CVa,O0,DVa,$4,e2,eQa,YZ,EVa,e_,FVa,GVa,$1,TRa,W3,gSa,HVa,j3,IVa,JVa,h2,j0,sSa,a5,Z1,rSa,n0,KVa,LVa,MVa,NVa,b5,OVa,PVa,QVa,RVa,c5,SVa,TVa,w4,UVa,VVa,WVa,sQa,yZ,XVa,YVa,ZVa,$Va,cQa,aWa,Y3,d5,a4,bWa,k2,cWa,g1,R_,dWa,e5,eWa,fWa,gWa,hWa,iWa,q0,F0,f5,dSa,S0,jWa,nRa,k3,kWa,c_,lWa,XRa,mWa,nWa,oWa,pWa,qWa,rWa,V1,sWa,tWa,g5;
GPa=function(a,b){a=a.split(".");var c=$APP.Ot;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}:c[d]=b};IPa=function(a){return $APP.Vf(function(b){return $APP.ue(a,b)},HPa)};OY=function(a,b,c,d,e){this.lf=a;this.Pi=b;this.Qi=c;this.Te=d;this.xb=e;this.J=2147484416;this.M=0};
QY=function(a,b,c){var d=a.lf,e=a.Pi,f=a.Qi,h=a.Te;a=a.xb;var m=f.h?f.h(b,null):f.call(null,b,null);if($APP.l(m))return new OY(d,$APP.$h.j($APP.ql.h(e,m),h,b),$APP.$h.j(f,b,h),h+1,a);b=new OY($APP.$h.j(d,b,c),$APP.$h.j(e,h,b),$APP.$h.j(f,b,h),h+1,a);return PY.g?PY.g(b):PY.call(null,b)};PY=function(a){if($APP.Gd(a.lf)>a.xb){var b=a.lf,c=a.Pi,d=a.Qi,e=a.Te;a=a.xb;var f=$APP.v(c),h=$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);return new OY($APP.ql.h(b,f),$APP.ql.h(c,h),$APP.ql.h(d,f),e,a)}return a};
RY=function(a,b,c){if(null!=a&&null!=a.Mi)a=a.Mi(a,b,c);else{var d=RY[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=RY._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.qb("ICache.-get",a);}return a};
TY=function(){var a=$APP.dg(new OY($APP.wf,$APP.Av(),$APP.wf,0,100));if("undefined"===typeof datascript||"undefined"===typeof JPa||"undefined"===typeof SY)SY=function(b,c,d){this.xb=b;this.wf=c;this.tk=d;this.J=393216;this.M=0},SY.prototype.X=function(b,c){return new SY(this.xb,this.wf,c)},SY.prototype.W=function(){return this.tk},SY.prototype.Mi=function(b,c,d){b=$APP.D.j($APP.q(this.wf),c,null);if(null==b)return d=d.C?d.C():d.call(null),$APP.Rc(this.wf,$APP.$h.j($APP.q(this.wf),c,d)),d;$APP.Rc(this.wf,
$APP.$h.j($APP.q(this.wf),c,b));return b},SY.uc=!0,SY.ic="datascript.lru/t_datascript$lru35146",SY.zc=function(b){return $APP.nc(b,"datascript.lru/t_datascript$lru35146")};return new SY(100,a,$APP.wf)};UY=function(a,b){a=a.toString(16);var c=$APP.Gd(a);return c>b?$APP.zi.j(a,0,b):c<b?[$APP.p.g($APP.Xf.h($APP.p,$APP.Lm.h(b-c,"0"))),$APP.p.g(a)].join(""):a};
KPa=function(a,b){return $APP.Bc($APP.Md($APP.De.j(function(c,d){var e=$APP.A.j(c,0,null),f=$APP.A.j(c,1,null),h=a.g?a.g(d):a.call(null,d);return $APP.ue(e,h)?c:new $APP.H(null,2,5,$APP.I,[$APP.pg.h(e,h),$APP.pg.h(f,d)],null)},new $APP.H(null,2,5,$APP.I,[$APP.zc($APP.di),$APP.zc($APP.qg)],null),b)))};LPa=function(a,b){return $APP.De.j(function(c,d){return $APP.l(a.g?a.g(d):a.call(null,d))?$APP.xd(d):null},null,b)};
MPa=function(a){var b=VY;return $APP.Bc($APP.Ge(function(c,d,e){return $APP.l(b.g?b.g(d):b.call(null,d))?c:$APP.hh.j(c,d,e)},$APP.zc($APP.Sd(a)),a))};NPa=function(a,b,c){return $APP.v($APP.De.j(function(d,e){var f=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);e=a.j?a.j(f,e,d):a.call(null,f,e,d);return $APP.yd(e)?$APP.xd(new $APP.H(null,2,5,$APP.I,[e,d],null)):new $APP.H(null,2,5,$APP.I,[e,d+1],null)},new $APP.H(null,2,5,$APP.I,[b,0],null),c))};
WY=function(a){return $APP.De.j(function(b,c){b.push(c);return b},[],a)};XY=function(a){return a instanceof Array};YY=function(a,b){if(null!=a&&null!=a.Ti)a=a.Ti(a,b);else{var c=YY[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=YY._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("IStorage.restore",a);}return a};
ZY=function(a,b){if(null==a||null==a.lk){var c=ZY[$APP.da(null==a?null:a)];if(null!=c)c.h?c.h(a,b):c.call(null,a,b);else if(c=ZY._,null!=c)c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("IStorage.accessed",a);}};$Y=function(a,b,c){if(null!=a&&null!=a.Ui)a=a.Ui(a,b,c);else{var d=$Y[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=$Y._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.qb("IStorage.store",a);}return a};
aZ=function(a,b){if(null!=a&&null!=a.Si)a.Si(a,b);else{var c=aZ[$APP.da(null==a?null:a)];if(null!=c)c.h?c.h(a,b):c.call(null,a,b);else if(c=aZ._,null!=c)c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("IStorage.delete",a);}};cZ=function(a,b){return 6>b?a>>>5*b&OPa:Math.floor(a/bZ[b])&OPa};eZ=function(a,b,c){var d=a<dZ&&6>b,e=cZ(a,b);return a-(d?e<<5*b:e*bZ[b])+(d?c<<5*b:c*bZ[b])};
fZ=function(a,b,c,d){for(var e=0,f=$APP.Le(c);;)if(e<=f){c=e+f>>>1;var h=b[c];0>(a.h?a.h(h,d):a.call(null,h,d))?e=c+1:f=c-1}else return e};PPa=function(a,b,c,d){for(var e=0,f=$APP.Le(c);;)if(e<=f){c=e+f>>>1;var h=b[c];0<(a.h?a.h(h,d):a.call(null,h,d))?f=c-1:e=c+1}else return e};QPa=function(a,b,c){var d=b.length,e=fZ(a,b,d-1,c);if(d=e<d)b=b[e],d=0===(a.h?a.h(b,c):a.call(null,b,c));return d?e:-1};RPa=function(a,b,c){var d=b.length;a=fZ(a,b,d-1,c);return a===d?-1:a};
gZ=function(a,b,c,d,e,f){var h=f.length,m=d-b,r=m+h,n=Array(m+h+(c-e));d-=b;for(var w=0;;)if(w<d)n[w+0]=a[w+b],w+=1;else break;b=h-0;for(h=0;;)if(h<b)n[h+m]=f[h+0],h+=1;else break;c-=e;for(f=0;;)if(f<c)n[f+r]=a[f+e],f+=1;else break;return n};hZ=function(a,b,c,d){return gZ(a,0,a.length,b,c,d)};
iZ=function(a,b){var c=a.length,d=b.length,e=c+d,f=e>>>1,h=Array(f);e=Array(e-f);if(c<=f){for(var m=c-0,r=0;;)if(r<m)h[r+0]=a[r+0],r+=1;else break;a=f-c;for(m=0;;)if(m<a)h[m+c]=b[m+0],m+=1;else break;d-=f-c;for(a=0;;)if(a<d)e[a+0]=b[a+(f-c)],a+=1;else break}else{m=f-0;for(r=0;;)if(r<m)h[r+0]=a[r+0],r+=1;else break;m=c-f;for(r=0;;)if(r<m)e[r+0]=a[r+f],r+=1;else break;d-=0;for(a=0;;)if(a<d)e[a+(c-f)]=b[a+0],a+=1;else break}return[h,e]};
SPa=function(a,b,c,d,e,f){d-=c;if(f=d===f-0)for(f=0;;){if(f===d)return!0;var h=b[f+c],m=e[f+0];if(0!==(a.h?a.h(h,m):a.call(null,h,m)))return!1;f+=1}else return f};jZ=function(a,b){return $APP.l(a)?$APP.l(b)?[a,b]:[a]:[b]};kZ=function(a,b,c){return $APP.l(a)?$APP.l(b)?$APP.l(c)?[a,b,c]:[a,b]:$APP.l(c)?[a,c]:[a]:$APP.l(b)?$APP.l(c)?[b,c]:[b]:[c]};
lZ=function(a){if(null!=a&&null!=a.Zh)a=a.Zh(a);else{var b=lZ[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=lZ._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.qb("INode.node-lim-key",a);}return a};mZ=function(a){if(null!=a&&null!=a.Ri)a=a.keys.length;else{var b=mZ[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=mZ._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.qb("INode.node-len",a);}return a};
nZ=function(a,b,c){if(null!=a&&null!=a.ai)a=a.ai(a,b,c);else{var d=nZ[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=nZ._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.qb("INode.node-merge",a);}return a};oZ=function(a,b){if(null!=a&&null!=a.bi)a=a.bi(a,b);else{var c=oZ[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=oZ._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("INode.node-merge-n-split",a);}return a};
pZ=function(a,b,c,d){if(null!=a&&null!=a.$h)a=a.$h(a,b,c,d);else{var e=pZ[$APP.da(null==a?null:a)];if(null!=e)a=e.F?e.F(a,b,c,d):e.call(null,a,b,c,d);else if(e=pZ._,null!=e)a=e.F?e.F(a,b,c,d):e.call(null,a,b,c,d);else throw $APP.qb("INode.node-lookup",a);}return a};
qZ=function(a,b,c,d){if(null!=a&&null!=a.Xh)a=a.Xh(a,b,c,d);else{var e=qZ[$APP.da(null==a?null:a)];if(null!=e)a=e.F?e.F(a,b,c,d):e.call(null,a,b,c,d);else if(e=qZ._,null!=e)a=e.F?e.F(a,b,c,d):e.call(null,a,b,c,d);else throw $APP.qb("INode.node-conj",a);}return a};
rZ=function(a,b,c,d,e,f,h){if(null!=a&&null!=a.Yh)a=a.Yh(a,b,c,d,e,f,h);else{var m=rZ[$APP.da(null==a?null:a)];if(null!=m)a=m.Fa?m.Fa(a,b,c,d,e,f,h):m.call(null,a,b,c,d,e,f,h);else if(m=rZ._,null!=m)a=m.Fa?m.Fa(a,b,c,d,e,f,h):m.call(null,a,b,c,d,e,f,h);else throw $APP.qb("INode.node-disj",a);}return a};
TPa=function(a,b,c,d,e){if($APP.l(b))return[a];if(mZ(a)>sZ)return kZ(c,a,d);if($APP.l($APP.l(c)?mZ(c)<=sZ:c))return jZ(nZ(c,a,e),d);if($APP.l($APP.l(d)?mZ(d)<=sZ:d))return jZ(c,nZ(a,d,e));if($APP.l($APP.l(c)?null==d||mZ(c)<mZ(d):c))return a=oZ(c,a),kZ(a[0],a[1],d);a=oZ(a,d);return kZ(c,a[0],a[1])};
tZ=function(a,b){if(null!=a&&null!=a.pf)a=a.pf(a,b);else{var c=tZ[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=tZ._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("IStore.store-aux",a);}return a};uZ=function(a){a=$APP.Ii.h(function(b){return $APP.Ha(b,"_address")},a);return WY(a)};vZ=function(a,b){$APP.ae(a.$c)&&(b=$APP.u(a.children)?uZ(a.children):Array(b),a.$c=b)};
xZ=function(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;return wZ(arguments[0],arguments[1],arguments[2],3<b.length?new $APP.jd(b.slice(3),0,null):null)};wZ=function(a,b,c,d){var e=$APP.xf(d);d=$APP.D.h(e,yZ);e=$APP.D.j(e,zZ,!0);c=null==c?$APP.u(b)?uZ(b):Array(a.length):c;return new AZ(a,b,c,d,e)};AZ=function(a,b,c,d,e){this.keys=a;this.children=b;this.$c=c;this.sb=d;this.Of=e};UPa=function(a,b,c){this.keys=a;this.sb=b;this.Of=c};
BZ=function(a){if(null!=a&&null!=a.ye)a=a.ye(a);else{var b=BZ[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=BZ._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.qb("IRoot.-ensure-root-node",a);}return a};$APP.CZ=function(a,b,c,d,e,f,h,m){this.storage=a;this.root=b;this.shift=c;this.O=d;this.Wc=e;this.K=f;this.ad=h;this.sb=m;this.J=2297303311;this.M=8332};DZ=function(a,b,c){return a instanceof AZ?a.Ve(b,c):null};
EZ=function(a,b){for(var c=a.shift,d=BZ(a);;)if(0<c){var e=c-1;d=DZ(d,cZ(b,c),a.storage);c=e}else return d.keys};FZ=function(a,b,c,d){return new $APP.CZ(a.storage,b,c,d,a.Wc,a.K,null,null)};GZ=function(a,b,c,d){for(;;)if(0<c){var e=a.children.length-1;var f=a.children;f=f[f.length-1];a=$APP.l(f)?f:DZ(a,e,d);b=eZ(b,c,e);--c}else return eZ(b,0,a.keys.length-1)};IZ=function(a,b){if(0>b)return 0;b=HZ(a,BZ(a),b,a.shift);return $APP.l(b)?b:GZ(BZ(a),0,a.shift,a.storage)+1};
KZ=function(a,b){if(0<cZ(b,a.shift+1))return GZ(BZ(a),b,a.shift,a.storage);a=JZ(a,BZ(a),b,a.shift);return $APP.l(a)?a:-1};MZ=function(a){if(0<mZ(BZ(a))){var b=GZ(BZ(a),0,a.shift,a.storage);b=IZ(a,b);return LZ.j?LZ.j(a,0,b):LZ.call(null,a,0,b)}return null};VPa=function(a,b,c){this.H=a;this.yb=b;this.end=c;this.J=524306;this.M=0};NZ=function(a,b,c,d,e){this.set=a;this.left=b;this.right=c;this.keys=d;this.idx=e;this.J=2309488832;this.M=1536};LZ=function(a,b,c){return new NZ(a,b,c,EZ(a,b),cZ(b,0))};
OZ=function(a,b,c,d,e){this.set=a;this.left=b;this.right=c;this.keys=d;this.idx=e;this.J=2308964544;this.M=0};PZ=function(a,b,c){return new OZ(a,b,c,EZ(a,c),cZ(c,0))};
QZ=function(a,b,c,d){a:if(null==b)b=0;else for(var e=a.ye(null),f=0,h=a.shift;;){var m=mZ(e);if(0===h){var r=e.keys;r=fZ(d,r,m-1,b);b=m===r?null:eZ(f,0,r);break a}r=e.keys;r=fZ(d,r,m-2,b);e=DZ(e,r,a.storage);f=eZ(f,h,r);--h}if(null==b)return null;a:if(null==c)c=GZ(a.ye(null),0,a.shift,a.storage)+1;else for(e=a.ye(null),h=0,f=a.shift;;){m=mZ(e);if(0===f){r=e.keys;m=PPa(d,r,m-1,c);c=h=eZ(h,0,m);break a}r=e.keys;m=PPa(d,r,m-2,c);h=eZ(h,f,m);e=DZ(e,m,a.storage);--f}return b<c?new NZ(a,b,c,EZ(a,b),cZ(b,
0)):null};WPa=function(a,b){for(var c=b.length,d=0;;)if(d<c){var e=d;var f=b[d];f=a.g?a.g(f):a.call(null,f);b[e]=f;d+=1}else break;return b};XPa=function(a){var b=a.length,c=$APP.zc($APP.qg);if(0<b)for(var d=0;;){var e=b-d;if(e<=RZ){$APP.pg.h(c,a.slice(d));break}else e>=SZ+sZ?($APP.pg.h(c,a.slice(d,d+SZ)),d+=SZ):(e>>>=1,$APP.pg.h(c,a.slice(d,d+e)),d+=e)}return $APP.Ee($APP.Bc(c))};
TZ=function(a,b,c){b=qZ(a.ye(null),c,b,a.storage);return null==b?a:1===b.length?FZ(a,b[0],a.shift,a.O+1):FZ(a,xZ(b.map(lZ),b,uZ(b)),a.shift+1,a.O+1)};UZ=function(a,b,c){b=rZ(a.ye(null),c,b,!0,null,null,a.storage);if(null==b)return a;b=b[0];return b instanceof AZ&&1===b.children.length?FZ(a,b.children[0],a.shift-1,a.O-1):FZ(a,b,a.shift,a.O-1)};VZ=function(a,b,c){return QZ(a,b,c,a.Wc)};WZ=function(a,b,c){a=QZ(a,c,b,a.Wc);return null==a?null:$APP.ic(a)};
ZZ=function(a,b,c){var d=WPa(XZ,XPa(b));c=YZ.g(c);for(var e=d,f=0;;){var h=$APP.Gd(e);switch(h){case 0:return new $APP.CZ(c,XZ([]),0,0,a,null,null,null);case 1:return new $APP.CZ(c,$APP.v(e),f,b.length,a,null,null,null);default:e=WPa(function(){return function(m){return xZ(m.map(lZ),m,null)}}(e,f,h,d,c),XPa(e)),f+=1}}};a_=function(a){var b=YZ.g(a),c=XZ([]),d=$Z.g(a);return new $APP.CZ(b,c,0,0,$APP.l(d)?d:$APP.xe,$APP.Ta.g(a),null,null)};
d_=function(a,b,c,d){d=$APP.xf(d);d=$APP.D.h(d,b_);return new $APP.CZ(c,null,c_.g(d),$APP.sI.g(d),a,null,null,b)};g_=function(){return new $APP.k(null,2,[e_,RZ,f_,YPa],null)};h_=function(a){return"string"!==typeof a&&($APP.oe(a)||XY(a))};i_=function(a,b){return $APP.ed(a,b)};
$APP.j_=function(a){if(null!=a&&null!=a.ib)a=a.ib(a);else{var b=$APP.j_[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=$APP.j_._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.qb("IDatom.datom-tx",a);}return a};$APP.k_=function(a){if(null!=a&&null!=a.ld)a=a.ld(a);else{var b=$APP.k_[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=$APP.k_._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.qb("IDatom.datom-added",a);}return a};
$APP.l_=function(a,b,c,d,e,f){this.e=a;this.a=b;this.v=c;this.tx=d;this.idx=e;this.ad=f;this.J=2162164496;this.M=0};ZPa=function(a){return a instanceof $APP.l_};$APP.n_=function(a){return $APP.Xf.h(m_,a)};o_=function(a,b){return null==a?0:null==b?0:$APP.Le($APP.xe(a,b))};$Pa=function(a,b){return $APP.Ma($APP.sb($APP.pb(a)),$APP.sb($APP.pb(b)))};
aQa=function(a,b){var c=$APP.Gd(a),d=$APP.Gd(b);if(c<d)return-1;if(c>d)return 1;for(;;){if($APP.ae(a))return 0;c=$APP.v(a);d=$APP.v(b);if(null==c&&null==d)a=$APP.y(a),b=$APP.y(b);else{if(null==c)return-1;if(null==d)return 1;c=p_(c,d);if($APP.z.h(c,0))a=$APP.y(a),b=$APP.y(b);else return c}}};q_=function(a,b){return null==a?0:null==b?0:p_(a,b)};r_=function(a,b){var c=a.e-b.e;return 0===c?(c=o_(a.a,b.a),0===c?(c=q_(a.v,b.v),0===c?(a=a.ib(null)-b.ib(null),0===a?0:a):c):c):c};
s_=function(a,b){var c=o_(a.a,b.a);return 0===c?(c=a.e-b.e,0===c?(c=q_(a.v,b.v),0===c?(a=a.ib(null)-b.ib(null),0===a?0:a):c):c):c};t_=function(a,b){var c=o_(a.a,b.a);return 0===c?(c=q_(a.v,b.v),0===c?(c=a.e-b.e,0===c?(a=a.ib(null)-b.ib(null),0===a?0:a):c):c):c};u_=function(a,b){return a instanceof $APP.G?$APP.Ic(a,b):$APP.Ma(a,b)};v_=function(a,b){var c=a.e-b.e;return 0===c?(c=u_(a.a,b.a),0===c?(a=p_(a.v,b.v),0===a?0:a):c):c};
w_=function(a,b){var c=a.e-b.e;return 0===c?(c=u_(a.a,b.a),0===c?(c=p_(a.v,b.v),0===c?(a=a.ib(null)-b.ib(null),0===a?0:a):c):c):c};x_=function(a,b){var c=u_(a.a,b.a);return 0===c?(c=a.e-b.e,0===c?(c=p_(a.v,b.v),0===c?(a=a.ib(null)-b.ib(null),0===a?0:a):c):c):c};y_=function(a,b){var c=u_(a.a,b.a);return 0===c?(c=p_(a.v,b.v),0===c?(c=a.e-b.e,0===c?(a=a.ib(null)-b.ib(null),0===a?0:a):c):c):c};bQa=function(){};
z_=function(a,b){if(null!=a&&null!=a.Sh)a=a.Sh(a,b);else{var c=z_[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=z_._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("ISearch.-search",a);}return a};A_=function(a,b){return $APP.v(z_(a,b))};
B_=function(a,b,c,d,e,f){if(null!=a&&null!=a.Oh)a=a.Oh(a,b,c,d,e,f);else{var h=B_[$APP.da(null==a?null:a)];if(null!=h)a=h.ja?h.ja(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else if(h=B_._,null!=h)a=h.ja?h.ja(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else throw $APP.qb("IIndexAccess.-datoms",a);}return a};
C_=function(a,b,c,d,e,f){if(null!=a&&null!=a.Rh)a=a.Rh(a,b,c,d,e,f);else{var h=C_[$APP.da(null==a?null:a)];if(null!=h)a=h.ja?h.ja(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else if(h=C_._,null!=h)a=h.ja?h.ja(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else throw $APP.qb("IIndexAccess.-seek-datoms",a);}return a};
D_=function(a,b,c,d,e,f){if(null!=a&&null!=a.Qh)a=a.Qh(a,b,c,d,e,f);else{var h=D_[$APP.da(null==a?null:a)];if(null!=h)a=h.ja?h.ja(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else if(h=D_._,null!=h)a=h.ja?h.ja(a,b,c,d,e,f):h.call(null,a,b,c,d,e,f);else throw $APP.qb("IIndexAccess.-rseek-datoms",a);}return a};
E_=function(a,b,c,d){if(null!=a&&null!=a.Ph)a=a.Ph(a,b,c,d);else{var e=E_[$APP.da(null==a?null:a)];if(null!=e)a=e.F?e.F(a,b,c,d):e.call(null,a,b,c,d);else if(e=E_._,null!=e)a=e.F?e.F(a,b,c,d):e.call(null,a,b,c,d);else throw $APP.qb("IIndexAccess.-index-range",a);}return a};
H_=function(a,b,c,d,e,f){if($APP.z.h(b,F_)&&null!=c&&!G_(a,c))throw $APP.Al.h(["Attribute ",$APP.aj.l($APP.C([c]))," should be marked as :db/index true"].join(""),new $APP.k(null,3,[$APP.RI,cQa,dQa,F_,eQa,new $APP.H(null,4,5,$APP.I,[c,d,e,f],null)],null));};I_=function(){};J_=function(a){if(null!=a&&null!=a.Nh)a=a.Nh(a);else{var b=J_[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=J_._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.qb("IDB.-schema",a);}return a};
K_=function(a,b){if(null!=a&&null!=a.Mh)a=a.Mh(a,b);else{var c=K_[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=K_._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("IDB.-attrs-by",a);}return a};$APP.L_=function(a,b,c,d,e,f,h,m,r,n,w,x,B){this.rc=a;this.Wb=b;this.tc=c;this.fc=d;this.Lc=e;this.Mc=f;this.vc=h;this.Cc=m;this.Bc=r;this.hash=n;this.B=w;this.o=x;this.D=B;this.J=2230716170;this.M=139264};
V_=function(a){var b=$APP.ql.l(a,$APP.M_,$APP.C([$APP.N_,O_,F_,P_,Q_,R_,S_,T_,U_]));b=$APP.ge(a)?$APP.fh.h($APP.wf,b):b;return new $APP.L_($APP.M_.g(a),$APP.N_.g(a),O_.g(a),F_.g(a),P_.g(a),Q_.g(a),R_.g(a),S_.g(a),T_.g(a),U_.g(a),null,$APP.yf(b),null)};W_=function(a,b,c,d,e,f){this.wc=a;this.cc=b;this.hash=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};fQa=function(a){return a instanceof W_?a.wc:a};
gQa=function(a,b){switch(b instanceof $APP.G?b.S:null){case "db.unique/identity":return new $APP.H(null,3,5,$APP.I,[X_,Y_,Z_],null);case "db.unique/value":return new $APP.H(null,3,5,$APP.I,[X_,$_,Z_],null);case "db.cardinality/many":return new $APP.H(null,1,5,$APP.I,[a0],null);case "db.type/ref":return new $APP.H(null,2,5,$APP.I,[b0,Z_],null);default:return $APP.z.h(c0,a)&&!0===b?new $APP.H(null,1,5,$APP.I,[c0],null):$APP.z.h(Z_,a)&&!0===b?new $APP.H(null,1,5,$APP.I,[Z_],null):$APP.z.h(d0,a)?new $APP.H(null,
2,5,$APP.I,[e0,Z_],null):$APP.qg}};hQa=function(a,b){return $APP.De.j(function(c,d){return NPa(function(e,f,h){return $APP.Am.P(e,f,$APP.$h,d,h)},c,d0.g($APP.D.h(a,d)))},$APP.wf,e0.g(b))};i0=function(a){var b=$APP.Ge(function(c,d,e){return e instanceof $APP.G?c:$APP.Ge(function(f,h,m){return $APP.De.j(function(r,n){return $APP.Am.F(r,n,f0,d)},f,gQa(h,m))},$APP.Am.j(c,g0,function(f){return $APP.l(f)?$APP.We.h(f,d):$APP.ei([d])}),e)},$APP.wf,a);return $APP.$h.j(b,h0,hQa(a,b))};
l0=function(a,b,c,d){if(null!=c&&!$APP.ue(d,c))throw $APP.Al.h(["Bad attribute specification for ",$APP.aj.l($APP.C([$APP.vf([a,$APP.vf([b,c])])])),", expected one of ",$APP.p.g(d)].join(""),new $APP.k(null,4,[$APP.RI,j0,k0,a,$APP.YB,b,$APP.YI,c],null));};
o0=function(a){for(var b=$APP.u(a),c=null,d=0,e=0;;)if(e<d){var f=c.da(null,e),h=$APP.A.j(f,0,null),m=$APP.A.j(f,1,null),r=c0.h(m,!1);l0(h,c0,c0.g(m),new $APP.ci(null,new $APP.k(null,2,[!0,null,!1,null],null),null));if($APP.l(function(){var Y=r;return $APP.l(Y)?$APP.Zh.h(m0.g(m),b0):Y}()))throw $APP.Al.h(["Bad attribute specification for ",$APP.aj.l($APP.C([h])),": {:db/isComponent true} should also have {:db/valueType :db.type/ref}"].join(""),new $APP.k(null,3,[$APP.RI,j0,k0,h,$APP.YB,c0],null));
l0(h,X_,X_.g(m),new $APP.ci(null,new $APP.k(null,2,[Y_,null,$_,null],null),null));l0(h,m0,m0.g(m),iQa);l0(h,n0,n0.g(m),new $APP.ci(null,new $APP.k(null,2,[a0,null,jQa,null],null),null));if($APP.z.h(e0,m0.g(m))&&!$APP.ue(m,d0))throw $APP.Al.h(["Bad attribute specification for ",$APP.aj.l($APP.C([h])),": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs"].join(""),new $APP.k(null,3,[$APP.RI,j0,k0,h,$APP.YB,m0],null));if($APP.ue(m,d0)){f=new $APP.k(null,3,[$APP.RI,j0,k0,h,$APP.YB,d0],null);
if($APP.z.h(a0,n0.g(m)))throw $APP.Al.h([$APP.aj.l($APP.C([h]))," has :db/tupleAttrs, must be :db.cardinality/one"].join(""),f);var n=d0.g(m);if(!$APP.de(n))throw $APP.Al.h([$APP.aj.l($APP.C([h]))," :db/tupleAttrs must be a sequential collection, got: ",$APP.aj.l($APP.C([n]))].join(""),f);if($APP.ae(n))throw $APP.Al.h([$APP.aj.l($APP.C([h]))," :db/tupleAttrs can’t be empty"].join(""),f);n=$APP.u(n);for(var w=null,x=0,B=0;;)if(B<x){var F=w.da(null,B),M=$APP.$h.j(f,$APP.YI,F);if($APP.ue($APP.D.h(a,
F),d0))throw $APP.Al.h([$APP.aj.l($APP.C([h]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.aj.l($APP.C([F]))].join(""),M);if($APP.z.h(a0,n0.g($APP.D.h(a,F))))throw $APP.Al.h([$APP.aj.l($APP.C([h]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.aj.l($APP.C([F]))].join(""),M);B+=1}else if(n=$APP.u(n)){if($APP.je(n))x=$APP.Kc(n),n=$APP.Lc(n),w=x,x=$APP.Gd(x);else{w=$APP.v(n);x=$APP.$h.j(f,$APP.YI,w);if($APP.ue($APP.D.h(a,w),d0))throw $APP.Al.h([$APP.aj.l($APP.C([h])),
" :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.aj.l($APP.C([w]))].join(""),x);if($APP.z.h(a0,n0.g($APP.D.h(a,w))))throw $APP.Al.h([$APP.aj.l($APP.C([h]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.aj.l($APP.C([w]))].join(""),x);n=$APP.y(n);w=null;x=0}B=0}else break}e+=1}else if(h=$APP.u(b)){b=h;if($APP.je(b))c=$APP.Kc(b),b=$APP.Lc(b),h=c,d=$APP.Gd(c),c=h;else{c=$APP.v(b);h=$APP.A.j(c,0,null);m=$APP.A.j(c,1,null);var U=c0.h(m,!1);l0(h,c0,c0.g(m),new $APP.ci(null,
new $APP.k(null,2,[!0,null,!1,null],null),null));if($APP.l(function(){var Y=U;return $APP.l(Y)?$APP.Zh.h(m0.g(m),b0):Y}()))throw $APP.Al.h(["Bad attribute specification for ",$APP.aj.l($APP.C([h])),": {:db/isComponent true} should also have {:db/valueType :db.type/ref}"].join(""),new $APP.k(null,3,[$APP.RI,j0,k0,h,$APP.YB,c0],null));l0(h,X_,X_.g(m),new $APP.ci(null,new $APP.k(null,2,[Y_,null,$_,null],null),null));l0(h,m0,m0.g(m),iQa);l0(h,n0,n0.g(m),new $APP.ci(null,new $APP.k(null,2,[a0,null,jQa,
null],null),null));if($APP.z.h(e0,m0.g(m))&&!$APP.ue(m,d0))throw $APP.Al.h(["Bad attribute specification for ",$APP.aj.l($APP.C([h])),": {:db/valueType :db.type/tuple} should also have :db/tupleAttrs"].join(""),new $APP.k(null,3,[$APP.RI,j0,k0,h,$APP.YB,m0],null));if($APP.ue(m,d0)){c=new $APP.k(null,3,[$APP.RI,j0,k0,h,$APP.YB,d0],null);if($APP.z.h(a0,n0.g(m)))throw $APP.Al.h([$APP.aj.l($APP.C([h]))," has :db/tupleAttrs, must be :db.cardinality/one"].join(""),c);d=d0.g(m);if(!$APP.de(d))throw $APP.Al.h([$APP.aj.l($APP.C([h])),
" :db/tupleAttrs must be a sequential collection, got: ",$APP.aj.l($APP.C([d]))].join(""),c);if($APP.ae(d))throw $APP.Al.h([$APP.aj.l($APP.C([h]))," :db/tupleAttrs can’t be empty"].join(""),c);d=$APP.u(d);e=null;for(n=f=0;;)if(n<f){w=e.da(null,n);x=$APP.$h.j(c,$APP.YI,w);if($APP.ue($APP.D.h(a,w),d0))throw $APP.Al.h([$APP.aj.l($APP.C([h]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.aj.l($APP.C([w]))].join(""),x);if($APP.z.h(a0,n0.g($APP.D.h(a,w))))throw $APP.Al.h([$APP.aj.l($APP.C([h])),
" :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",$APP.aj.l($APP.C([w]))].join(""),x);n+=1}else if(d=$APP.u(d)){if($APP.je(d))f=$APP.Kc(d),d=$APP.Lc(d),e=f,f=$APP.Gd(f);else{e=$APP.v(d);f=$APP.$h.j(c,$APP.YI,e);if($APP.ue($APP.D.h(a,e),d0))throw $APP.Al.h([$APP.aj.l($APP.C([h]))," :db/tupleAttrs can’t depend on another tuple attribute: ",$APP.aj.l($APP.C([e]))].join(""),f);if($APP.z.h(a0,n0.g($APP.D.h(a,e))))throw $APP.Al.h([$APP.aj.l($APP.C([h]))," :db/tupleAttrs can’t depend on :db.cardinality/many attribute: ",
$APP.aj.l($APP.C([e]))].join(""),f);d=$APP.y(d);e=null;f=0}n=0}else break}b=$APP.y(b);c=null;d=0}e=0}else return null};p0=function(a,b){o0(a);return V_($APP.Ih([$APP.M_,Q_,U_,O_,F_,P_,$APP.N_,T_,S_,R_],[a,536870912,$APP.cj.g(0),a_($APP.$h.j(b,$Z,s_)),a_($APP.$h.j(b,$Z,t_)),0,a_($APP.$h.j(b,$Z,r_)),TY(),TY(),i0($APP.pl.l($APP.C([new $APP.k(null,1,[g0,new $APP.k(null,1,[X_,Y_],null)],null),a])))]))};
kQa=function(a,b,c){var d=function(){var e=WZ(b,m_.F(536870911,null,null,2147483647),m_.F(0,null,null,536870912));e=null==e?null:$APP.v(e);return null==e?null:$APP.pL.g(e)}();d=$APP.l($APP.l(d)?0<d:d)?d:0;a=b0.g(a);return $APP.De.j(function(e,f){f=WZ(c,m_.F(536870911,f,536870911,2147483647),m_.F(0,f,0,536870912));f=null==f?null:$APP.v(f);f=null==f?null:q0.g(f);return $APP.l($APP.l(f)?f>e:f)?f:e},d,a)};
r0=function(a,b,c){var d=$APP.v($APP.si.h(ZPa,a));if(null!=d)throw $APP.Al.h(["init-db expects list of Datoms, got ",$APP.aj.l($APP.C([$APP.pb(d)]))].join(""),new $APP.k(null,1,[$APP.RI,lQa],null));o0(b);d=i0($APP.pl.l($APP.C([new $APP.k(null,1,[g0,new $APP.k(null,1,[X_,Y_],null)],null),b])));var e=Z_.g(d),f=XY(a)?a:WY(a);f.sort(w_);var h=ZZ(r_,f,c);f.sort(x_);f=ZZ(s_,f,c);a=$APP.og.h(function(r){return $APP.ue(e,r.a)},a);a=$APP.Ee(a);a.sort(y_);c=ZZ(t_,a,c);a=kQa(d,h,c);var m=$APP.Iu.F($APP.Ii.g(function(r){return r.ib(null)}),
$APP.Mm,536870912,h);return V_($APP.Ih([$APP.M_,Q_,U_,O_,F_,P_,$APP.N_,T_,S_,R_],[b,m,$APP.cj.g(0),f,c,a,h,TY(),TY(),d]))};mQa=function(a,b){return $APP.$h.l(a,$APP.M_,b,$APP.C([R_,i0($APP.pl.l($APP.C([new $APP.k(null,1,[g0,new $APP.k(null,1,[X_,Y_],null)],null),b]))),S_,TY(),T_,TY(),U_,$APP.cj.g(0)]))};
$APP.t0=function(a){var b=$APP.xf(a);a=$APP.D.h(b,$APP.M_);b=$APP.D.h(b,$APP.s0);return r0($APP.Ii.h(function(c){var d=$APP.A.j(c,0,null),e=$APP.A.j(c,1,null),f=$APP.A.j(c,2,null);c=$APP.A.j(c,3,null);return m_.F(d,e,f,c)},b),a,$APP.wf)};u0=function(a,b,c,d,e,f,h,m){this.Ad=a;this.zd=b;this.Dd=c;this.Bd=d;this.Ed=e;this.B=f;this.o=h;this.D=m;this.J=2230716170;this.M=139264};
nQa=function(a){var b=$APP.ql.l(a,v0,$APP.C([w0,x0,y0,z0]));b=$APP.ge(a)?$APP.fh.h($APP.wf,b):b;return new u0(v0.g(a),w0.g(a),x0.g(a),y0.g(a),z0.g(a),null,$APP.yf(b),null)};A0=function(){return null};B0=function(){return null};C0=function(){return null};D0=function(){return null};oQa=function(){return null};E0=function(){return null};
G0=function(a){if(a instanceof $APP.G)return E0(a)?$APP.Ji.h($APP.cf(a),$APP.zi.h($APP.ji(a),1)):$APP.Ji.h($APP.cf(a),["_",$APP.ji(a)].join(""));if("string"===typeof a){var b=$APP.vi(/(?:([^\/]+)\/)?([^\/]+)/,a);$APP.A.j(b,0,null);a=$APP.A.j(b,1,null);b=$APP.A.j(b,2,null);return $APP.z.h("_",$APP.A.h(b,0))?$APP.l(a)?[$APP.p.g(a),"/",$APP.zi.h(b,1)].join(""):$APP.zi.h(b,1):$APP.l(a)?[$APP.p.g(a),"/_",$APP.p.g(b)].join(""):["_",$APP.p.g(b)].join("")}throw $APP.Al.h(["Bad attribute type: ",$APP.aj.l($APP.C([a])),
", expected keyword or string"].join(""),new $APP.k(null,2,[$APP.RI,F0,k0,a],null));};pQa=function(a,b,c){return $APP.Qm.j(function(d,e){return H0(a,d)&&$APP.de(e)?I0(a,e):e},d0.g($APP.D.h(J_(a),b)),c)};J0=function(){return null};qQa=function(){return null};K0=function(){this.id=$APP.dj.h(rQa,$APP.ud);this.J=2147483648;this.M=0};VY=function(){return null};L0=function(a){return $APP.Le(Q_.g(v0.g(a)))+1};
M0=function(a){return $APP.z.h(a,sQa)||$APP.z.h(a,":db/current-tx")||$APP.z.h(a,"datomic.tx")||$APP.z.h(a,"datascript.tx")};N0=function(a){return"number"===typeof a&&0>a||"string"===typeof a||VY(a)};tQa=function(a,b){return b>P_.g(a)&&536870912>b?$APP.$h.j(a,P_,b):a};
P0=function(a,b,c){var d=M0(b)?$APP.Am.ja($APP.Am.P(a,y0,$APP.$h,b,c),O0,$APP.Am,c,f0,b):a;d=N0(b)?$APP.Am.ja($APP.Am.P(d,y0,$APP.$h,b,c),O0,$APP.Am,c,f0,b):d;if(b=!N0(b))a=w0.g(a),b=c>P_.g(a)&&536870912>c;a=b?$APP.Am.P(d,y0,$APP.$h,c,c):d;return $APP.Am.F(a,w0,tQa,c)};
vQa=function(a,b){var c=$APP.M_.g(a),d=b.e,e=b.a,f=b.v;if($APP.z.h(e,g0)){if($APP.ib(c.g?c.g(f):c.call(null,f)))throw a=["Schema with attribute ",$APP.p.g(f)," does not exist"].join(""),d=new $APP.k(null,2,[$APP.RI,uQa,k0,f],null),$APP.Al.h(a,d);return $APP.nl.j($APP.Np(a,new $APP.H(null,2,5,$APP.I,[$APP.M_,d],null),$APP.ql.h(c.g?c.g(f):c.call(null,f),e)),new $APP.H(null,1,5,$APP.I,[$APP.M_],null),function(h){return $APP.ql.h(h,f)})}b=c.g?c.g(d):c.call(null,d);if($APP.l(b))return $APP.l(c.g?c.g(b):
c.call(null,b))?$APP.nl.j(a,new $APP.H(null,2,5,$APP.I,[$APP.M_,b],null),function(h){return $APP.ql.h(h,e)}):$APP.nl.j(a,new $APP.H(null,2,5,$APP.I,[$APP.M_,d],null),function(h){return $APP.ql.l(h,e,$APP.C([f]))});a=["Schema with entity id ",$APP.p.g(d)," does not exist"].join("");d=new $APP.k(null,4,[$APP.RI,uQa,Q0,d,k0,e,$APP.YI,d],null);throw $APP.Al.h(a,d);};wQa=function(a){a=$APP.M_.g(a);return $APP.l(a)?a:$APP.wf};
xQa=function(a){return $APP.$h.j(a,R_,i0($APP.pl.l($APP.C([new $APP.k(null,1,[g0,new $APP.k(null,1,[X_,Y_],null)],null),wQa(a)]))))};
AQa=function(a,b){var c=b.ld(null);c=$APP.l(c)?A0(a,b.a,X_):c;if($APP.l(c)&&(c=$APP.yf(B_(a,F_,b.a,b.v,null,null)),null!=c))throw $APP.Al.h(["Cannot add ",$APP.aj.l($APP.C([b]))," because of unique constraint: ",$APP.aj.l($APP.C([c]))].join(""),new $APP.k(null,3,[$APP.RI,yQa,k0,b.a,zQa,b],null));var d=G_(a,b.a);c=b.a;c=R0.g?R0.g(c):R0.call(null,c);if($APP.l(b.ld(null))){a=$APP.Am.P(a,$APP.N_,TZ,b,w_);a=$APP.Am.P(a,O_,TZ,b,x_);d=d?$APP.Am.P(a,F_,TZ,b,y_):a;d=tQa(d,b.e);d=$APP.$h.j(d,U_,$APP.cj.g(0));
if($APP.l(c)){var e=wQa(d);c=b.e;a=b.a;b=b.v;if($APP.z.h(a,g0)){var f=new $APP.H(null,2,5,$APP.I,[$APP.M_,b],null),h=$APP.pl.l,m=e.g?e.g(c):e.call(null,c);e=e.g?e.g(b):e.call(null,b);e=$APP.ee(m)?$APP.pl.l($APP.C([m,e])):e;b=$APP.Np($APP.Np(d,f,h.call($APP.pl,$APP.C([$APP.l(e)?e:$APP.wf,$APP.Ih([a],[b])]))),new $APP.H(null,2,5,$APP.I,[$APP.M_,c],null),b)}else f=e.g?e.g(c):e.call(null,c),b=$APP.l(f)?$APP.l(e.g?e.g(f):e.call(null,f))?$APP.Np(d,new $APP.H(null,3,5,$APP.I,[$APP.M_,f,a],null),b):$APP.Np(d,
new $APP.H(null,3,5,$APP.I,[$APP.M_,c,a],null),b):$APP.Np(d,new $APP.H(null,2,5,$APP.I,[$APP.M_,c],null),$APP.Ih([a],[b]));b=xQa(b)}else b=d;return b}e=A_(a,new $APP.H(null,3,5,$APP.I,[b.e,b.a,b.v],null));if(null==e)return a;a=$APP.Am.P(a,$APP.N_,UZ,e,w_);a=$APP.Am.P(a,O_,UZ,e,x_);d=d?$APP.Am.P(a,F_,UZ,e,y_):a;d=$APP.$h.j(d,U_,$APP.cj.g(0));return $APP.l(c)?xQa(vQa(d,b)):d};
BQa=function(a,b,c,d,e){return $APP.Ge(function(f,h,m){var r=$APP.D.h(f,h);$APP.l(r)||(r=q0.g($APP.v(B_(c,$APP.N_,d,h,null,null))),r=$APP.l(r)?r:$APP.Fe($APP.Lm.h($APP.Gd(d0.g($APP.D.h(J_(c),h))),null)));m=$APP.$h.j(r,m,e);return $APP.$h.j(f,h,m)},a,b)};
U0=function(a,b){var c=w0.g(a),d=S0.g(b);a=$APP.Am.F($APP.$h.j(a,w0,AQa(c,b)),x0,$APP.We,b);if(oQa(c,d)){var e=$APP.pL.g(b);b=$APP.l($APP.k_(b))?q0.g(b):null;var f=$APP.D.h(T0.g(a),e);f=$APP.l(f)?f:$APP.wf;d=$APP.D.h(K_(c,h0),d);c=BQa(f,d,c,e,b);return $APP.Am.P(a,T0,$APP.$h,e,c)}return a};
CQa=function(a,b){function c(f,h){return $APP.De.j(function(m,r){var n=d(f,r);return null==n?$APP.Am.F(m,0,$APP.We,r):$APP.Am.P(m,1,$APP.$h,r,n)},new $APP.H(null,2,5,$APP.I,[$APP.qg,$APP.wf],null),h)}function d(f,h){return H0(a,f)?N0(h)?null:$APP.pL.g($APP.v(B_(a,F_,f,J0(a,h),null,null))):$APP.pL.g($APP.v(B_(a,F_,f,h,null,null)))}var e=$APP.yf(K_(a,Y_));return null==e?new $APP.H(null,2,5,$APP.I,[b,null],null):$APP.Ge(function(f,h,m){var r=$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);if(!(h instanceof $APP.G||
"string"===typeof h))throw $APP.Al.h(["Bad entity attribute ",$APP.aj.l($APP.C([h]))," at ",$APP.aj.l($APP.C([b])),", expected keyword or string"].join(""),new $APP.k(null,3,[k0,h,V0,b,$APP.RI,F0],null));if(null==m)throw $APP.Al.h(["Cannot store nil as a value at ",$APP.aj.l($APP.C([b]))].join(""),new $APP.k(null,3,[$APP.YI,null,V0,b,$APP.RI,F0],null));if($APP.ue(e,h)){if(B0(a,h)&&(XY(m)||$APP.be(m)&&!$APP.ee(m))){var n=c(h,m);m=$APP.A.j(n,0,null);n=$APP.A.j(n,1,null);return new $APP.H(null,2,5,$APP.I,
[$APP.ae(m)?r:$APP.$h.j(r,h,m),$APP.ae(n)?f:$APP.$h.j(f,h,n)],null)}n=d(h,m);return null==n?new $APP.H(null,2,5,$APP.I,[$APP.$h.j(r,h,m),f],null):new $APP.H(null,2,5,$APP.I,[r,$APP.$h.j(f,h,$APP.vf([m,n]))],null)}return new $APP.H(null,2,5,$APP.I,[$APP.$h.j(r,h,m),f],null)},new $APP.H(null,2,5,$APP.I,[$APP.wf,$APP.wf],null),b)};
FQa=function(a,b){var c=$APP.Ge(function(h,m,r){return $APP.Ge(function(n,w,x){return $APP.$h.j(n,x,new $APP.H(null,2,5,$APP.I,[m,w],null))},h,r)},$APP.wf,b);if(2<=$APP.Gd(c)){b=$APP.v(c);a=$APP.A.j(b,0,null);var d=$APP.A.j(b,1,null);b=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);var e=$APP.Md(c);c=$APP.A.j(e,0,null);var f=$APP.A.j(e,1,null);e=$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);throw $APP.Al.h(["Conflicting upserts: ",$APP.aj.l($APP.C([new $APP.H(null,2,5,$APP.I,[b,d],null)]))," resolves to ",$APP.aj.l($APP.C([a])),
", but ",$APP.aj.l($APP.C([new $APP.H(null,2,5,$APP.I,[e,f],null)]))," resolves to ",$APP.aj.l($APP.C([c]))].join(""),new $APP.k(null,3,[$APP.RI,W0,DQa,new $APP.H(null,3,5,$APP.I,[a,b,d],null),EQa,new $APP.H(null,3,5,$APP.I,[c,e,f],null)],null));}d=$APP.v(c);b=$APP.A.j(d,0,null);c=$APP.A.j(d,1,null);d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);a=X0.g(a);if(null!=b&&null!=a&&!N0(a)&&$APP.Zh.h(b,a))throw $APP.Al.h(["Conflicting upsert: ",$APP.aj.l($APP.C([new $APP.H(null,2,5,$APP.I,[d,c],null)]))," resolves to ",
$APP.aj.l($APP.C([b])),", but entity already has :db/id ",$APP.aj.l($APP.C([a]))].join(""),new $APP.k(null,3,[$APP.RI,W0,DQa,new $APP.H(null,3,5,$APP.I,[b,d,c],null),EQa,new $APP.k(null,1,[X0,a],null)],null));return b};GQa=function(a,b,c){return E0(b)||B0(a,b)?XY(c)||$APP.be(c)&&!$APP.ee(c)?$APP.z.h($APP.Gd(c),2)&&A0(a,$APP.v(c),Y_)?new $APP.H(null,1,5,$APP.I,[c],null):c:new $APP.H(null,1,5,$APP.I,[c],null):new $APP.H(null,1,5,$APP.I,[c],null)};
HQa=function(a,b){var c=X0.g(b),d=$APP.Xf.h($APP.K,$APP.De.j(function(e,f){var h=$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);return $APP.Am.F(e,D0(a,h)?1:0,$APP.We,new $APP.H(null,2,5,$APP.I,[h,f],null))},new $APP.H(null,2,5,$APP.I,[$APP.qg,$APP.qg],null),b));return function h(f){return new $APP.gf(null,function(){for(var m=f;;){var r=$APP.u(m);if(r){var n=r,w=$APP.v(n),x=$APP.A.j(w,0,null),B=$APP.A.j(w,1,null);if($APP.Zh.h(x,X0)){var F=function(){var Y=x;if(Y instanceof $APP.G||"string"===typeof Y)return null;
var ba=$APP.vf([X0,c,x,B]);throw $APP.Al.h(["Bad entity attribute ",$APP.aj.l($APP.C([Y]))," at ",$APP.aj.l($APP.C([ba])),", expected keyword or string"].join(""),new $APP.k(null,3,[k0,Y,V0,ba,$APP.RI,F0],null));}(),M=E0(x),U=M?G0(x):x;if(M&&!H0(a,U))throw $APP.Al.h(["Bad attribute ",$APP.aj.l($APP.C([x])),": reverse attribute name requires {:db/valueType :db.type/ref} in schema"].join(""),new $APP.k(null,3,[$APP.RI,F0,k0,x,V0,$APP.vf([X0,c,x,B])],null));if(r=$APP.u(function(Y,ba,ca,ea,la,ta,pa,V,
P,X,R,W){return function oa(na){return new $APP.gf(null,function(wa,Ca,Ka,Ra,$a,jb,nb,db,hb,rb,ub){return function(){for(;;){var Sb=$APP.u(na);if(Sb){if($APP.je(Sb)){var Zb=$APP.Kc(Sb),tc=$APP.Gd(Zb),Gc=$APP.jf(tc);a:for(var $d=0;;)if($d<tc){var pc=$APP.Td(Zb,$d);$APP.nf(Gc,H0(a,Ra)&&$APP.ee(pc)?$APP.$h.j(pc,G0(nb),ub):Ka?new $APP.H(null,4,5,$APP.I,[Y0,pc,Ra,ub],null):new $APP.H(null,4,5,$APP.I,[Y0,ub,Ra,pc],null));$d+=1}else{Zb=!0;break a}return Zb?$APP.mf($APP.of(Gc),oa($APP.Lc(Sb))):$APP.mf($APP.of(Gc),
null)}Gc=$APP.v(Sb);return $APP.$e(H0(a,Ra)&&$APP.ee(Gc)?$APP.$h.j(Gc,G0(nb),ub):Ka?new $APP.H(null,4,5,$APP.I,[Y0,Gc,Ra,ub],null):new $APP.H(null,4,5,$APP.I,[Y0,ub,Ra,Gc],null),oa($APP.nd(Sb)))}return null}}}(Y,ba,ca,ea,la,ta,pa,V,P,X,R,W),null,null)}}(m,F,M,U,null,w,x,B,n,r,c,d)(GQa(a,x,B))))return $APP.K.h(r,h($APP.nd(m)))}m=$APP.nd(m)}else return null}},null,null)}(d)};
$0=function(a,b){$APP.A.j(b,0,null);var c=$APP.A.j(b,1,null),d=$APP.A.j(b,2,null),e=$APP.A.j(b,3,null),f=$APP.A.j(b,4,null);if(!(d instanceof $APP.G||"string"===typeof d))throw $APP.Al.h(["Bad entity attribute ",$APP.aj.l($APP.C([d]))," at ",$APP.aj.l($APP.C([b])),", expected keyword or string"].join(""),new $APP.k(null,3,[k0,d,V0,b,$APP.RI,F0],null));if(null==e)throw $APP.Al.h(["Cannot store nil as a value at ",$APP.aj.l($APP.C([b]))].join(""),new $APP.k(null,3,[$APP.YI,null,V0,b,$APP.RI,F0],null));
b=$APP.l(f)?f:L0(a);f=w0.g(a);c=I0(f,c);e=H0(f,d)?I0(f,e):e;var h=m_.F(c,d,e,b);f=B0(f,d)?A_(f,new $APP.H(null,3,5,$APP.I,[c,d,e],null)):A_(f,new $APP.H(null,2,5,$APP.I,[c,d],null));return null==f?U0(a,h):$APP.z.h(f.v,e)?$APP.Am.F(a,Z0,IQa,h):U0(U0(a,m_.P(c,d,f.v,b,!1)),h)};a1=function(a,b){var c=L0(a);return U0(a,m_.P(b.e,b.a,b.v,c,!1))};
JQa=function(a,b){return $APP.fh.j($APP.di,$APP.tp.h($APP.og.g(function(c){return C0(a,c.a)}),$APP.Ii.g(function(c){return new $APP.H(null,2,5,$APP.I,[b1,c.v],null)})),b)};
e1=function(a,b,c,d,e){var f=$APP.D.h(c1.g(a),d);if(null==f)return b=$APP.$h.j(y0.g(b),d,e),a=$APP.Am.P($APP.$h.j(a,y0,b),c1,$APP.$h,d,e),d1(a,c);throw $APP.Al.h(["Conflicting upsert: ",$APP.aj.l($APP.C([d]))," resolves both to ",$APP.aj.l($APP.C([e]))," and ",$APP.aj.l($APP.C([f]))].join(""),new $APP.k(null,1,[$APP.RI,W0],null));};
KQa=function(a){var b=w0.g(a);return $APP.Ge(function(c,d,e){return $APP.Ge(function(f,h,m){m=$APP.Qf($APP.fb,m)?null:m;var r=q0.g($APP.v(B_(b,$APP.N_,d,h,null,null)));return $APP.z.h(m,r)?f:null==m?$APP.We.h(f,$APP.Wd(new $APP.H(null,4,5,$APP.I,[f1,d,h,r],null),new $APP.k(null,1,[g1,!0],null))):$APP.We.h(f,$APP.Wd(new $APP.H(null,4,5,$APP.I,[Y0,d,h,m],null),new $APP.k(null,1,[g1,!0],null)))},c,e)},$APP.qg,T0.g(a))};
LQa=function(a){var b=h1.g(a);if($APP.l(b)){var c=$APP.zc(b);b=function(d,e){return $APP.l($APP.k_(e))?$APP.fv.h(d,$APP.pL.g(e)):d};c=$APP.De.j(b,c,x0.g(a));b=$APP.De.j(b,c,Z0.g(a));if(0===$APP.Gd(b))return $APP.ql.l(a,h1,$APP.C([Z0]));throw $APP.Al.h(["Tempids used only as value in transaction: ",$APP.aj.l($APP.C([$APP.lk.g($APP.Yh($APP.Bc(b)))]))].join(""),new $APP.k(null,2,[$APP.RI,F0,y0,b],null));}return $APP.ql.l(a,h1,$APP.C([Z0]))};
NQa=function(a){if($APP.l(IPa(a))){var b;if(b=$APP.ue(a,g0)){b=g0.g(a);var c=b instanceof $APP.G||"string"===typeof b;c?(b=$APP.cf($APP.Ji.g(b)),b=$APP.l(b)?$APP.z.h("db",$APP.v($APP.Jk.h(b,/\./))):!1):b=c}if(b)throw $APP.Al.h("Using namespace 'db' for attribute identifiers is not allowed",new $APP.k(null,2,[$APP.RI,MQa,i1,a],null));b=n0.g(a);b=$APP.l(b)?b:m0.g(a);if(b=$APP.l(b))b=g0.g(a),b=$APP.l(b)?n0.g(a):b,b=!$APP.l(b);if(b)throw $APP.Al.h("Incomplete schema transaction attributes, expected :db/ident, :db/cardinality",
new $APP.k(null,2,[$APP.RI,MQa,i1,a],null));}};OQa=function(){};j1=function(a,b,c){if(null!=a&&null!=a.ek)a=a.ek(a,b,c);else{var d=j1[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=j1._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.qb("IStorage.-store",a);}return a};
k1=function(a,b){if(null!=a&&null!=a.dk)a=a.dk(a,b);else{var c=k1[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=k1._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("IStorage.-restore",a);}return a};l1=function(a){return new $APP.H(null,4,5,$APP.I,[a.e,a.a,a.v,a.tx],null)};m1=function(a,b,c,d){this.storage=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};n1=function(a){return new m1(a,null,null,null)};
o1=function(a){return $APP.l(a)?$APP.N_.g(a).storage:null};p1=function(a){a=o1(a);return null==a?null:YZ.g(a)};
t1=function(a,b,c){$APP.dj.j(PQa,$APP.We,a);var d=q1;q1=$APP.dg($APP.zc($APP.qg));try{var e=$APP.N_.g(a),f=O_.g(a),h=F_.g(a),m=e.pf(null,b),r=f.pf(null,b),n=h.pf(null,b),w=$APP.pl.l($APP.C([$APP.Ih([$APP.M_,Q_,O_,QQa,F_,P_,$APP.N_,RQa,SQa,TQa],[$APP.M_.g(a),Q_.g(a),r,$APP.q(r1),n,P_.g(a),m,new $APP.k(null,2,[$APP.sI,f.O,c_,f.shift],null),new $APP.k(null,2,[$APP.sI,h.O,c_,h.shift],null),new $APP.k(null,2,[$APP.sI,e.O,c_,e.shift],null)]),g_($APP.N_.g(a))]));if($APP.l($APP.l(c)?c:0<$APP.Gd($APP.q(q1)))){$APP.Rc(q1,
$APP.pg.h($APP.q(q1),new $APP.H(null,2,5,$APP.I,[0,w],null)));$APP.Rc(q1,$APP.pg.h($APP.q(q1),new $APP.H(null,2,5,$APP.I,[1,$APP.qg],null)));var x=YZ.g(b),B=$APP.Dv.g($APP.D.h($APP.q(s1),x));$APP.dj.F(s1,$APP.$h,x,null);j1(x,$APP.Bc($APP.q(q1)),B)}return a}finally{q1=d}};UQa=function(a,b){return j1(p1(a),new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[1,$APP.Qm.h(function(c){return $APP.Qm.h(l1,c)},b)],null)],null),null)};
v1=function(a,b){var c=k1(a,0);if(null==c)return null;var d=k1(a,1),e=$APP.xf(c),f=$APP.D.h(e,SQa),h=$APP.D.h(e,TQa),m=$APP.D.h(e,$APP.M_),r=$APP.D.h(e,Q_),n=$APP.D.h(e,O_),w=$APP.D.h(e,QQa),x=$APP.D.h(e,F_),B=$APP.D.h(e,P_),F=$APP.D.h(e,$APP.N_);e=$APP.D.h(e,RQa);r1.hc(null,function(){var M=r1.Ia(null);return M>w?M:w}());b=$APP.pl.l($APP.C([c,b]));a=n1(a,b);f=u1(new $APP.k(null,6,[$APP.M_,m,$APP.N_,d_(r_,F,a,$APP.$h.j(b,b_,h)),O_,d_(s_,n,a,$APP.$h.j(b,b_,e)),F_,d_(t_,x,a,$APP.$h.j(b,b_,f)),P_,B,
Q_,r],null));$APP.dj.j(PQa,$APP.We,f);return new $APP.H(null,2,5,$APP.I,[f,$APP.Qm.h(function(M){return $APP.Qm.h(function(U){var Y=$APP.A.j(U,0,null),ba=$APP.A.j(U,1,null),ca=$APP.A.j(U,2,null);U=$APP.A.j(U,3,null);return m_.F(Y,ba,ca,U)},M)},d)],null)};w1=function(a,b){return $APP.De.j(function(c,d){if($APP.ae(d))return c;try{var e=$APP.De.j(AQa,c,d);return $APP.$h.j(e,Q_,VQa.g($APP.v(d)))}catch(f){return console.error(f),c}},a,b)};x1=function(a){return null==YZ.g(a)?a:$APP.Am.F(a,YZ,n1,a)};
y1=function(a,b,c,d){this.Rf=a;this.tf=b;this.rb=c;this.K=d;this.M=98306;this.J=6455552};WQa=function(a,b){if(null!=a&&!$APP.l(a.g?a.g(b):a.call(null,b)))throw $APP.Al.h("Invalid reference state",new $APP.k(null,1,[$APP.YI,b],null));};
A1=function(a,b,c){var d=$APP.q(a);b=$APP.Xf.j(b,d,c);WQa(a.tf,b);$APP.Kba(a.Rf,$APP.$h.j($APP.q(a.Rf),z1,d),$APP.$h.j($APP.q(a.Rf),z1,b));a:{c=$APP.u(a.rb);for(var e=null,f=0,h=0;;)if(h<f){var m=e.da(null,h),r=$APP.A.j(m,0,null);m=$APP.A.j(m,1,null);m.F?m.F(r,a,d,b):m.call(null,r,a,d,b);h+=1}else if(c=$APP.u(c))$APP.je(c)?(e=$APP.Kc(c),c=$APP.Lc(c),r=e,f=$APP.Gd(e),e=r):(e=$APP.v(c),r=$APP.A.j(e,0,null),m=$APP.A.j(e,1,null),m.F?m.F(r,a,d,b):m.call(null,r,a,d,b),c=$APP.y(c),e=null,f=0),h=0;else break a}return new $APP.H(null,
2,5,$APP.I,[d,b],null)};B1=function(a,b,c,d){return new y1(a,b,c,d)};C1=function(a){a=$APP.cj.g(a);return B1.g?B1.g(a):B1.call(null,a)};D1=function(a){switch(arguments.length){case 2:return D1.h(arguments[0],arguments[1]);case 3:return D1.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};E1=function(a,b){return w0.g(D1.h(a,b))};
I1=function(a){if(null==p1(a))return C1(new $APP.k(null,1,[z1,a],null));F1.g(a);return C1(new $APP.k(null,3,[z1,a,G1,$APP.qg,H1,a],null))};
YQa=function(a,b,c){var d=$APP.dg(null),e=XQa.g(c),f=$APP.ql.h(c,XQa);$APP.dj.h(a,function(r){r=D1.j(r,b,f);$APP.Rc(d,r);return w0.g(r)});if(null!=p1($APP.q(a))){c=$APP.q(d);var h=$APP.xf(c);c=$APP.D.h(h,w0);var m=$APP.D.h(h,x0);h=g_($APP.N_.g(c));a=$APP.ME.g(a);m=G1.g($APP.dj.l(a,$APP.Am,G1,$APP.We,$APP.C([m])));$APP.l(e)||($APP.Iu.F($APP.Ii.g($APP.Gd),$APP.Ju,0,m)>e_.g(h)?(t1(c,o1(c),!1),$APP.dj.l(a,$APP.$h,G1,$APP.qg,$APP.C([H1,c]))):UQa(c,m))}return $APP.q(d)};
J1=function(a,b){b=$APP.dj.j(a,mQa,b);null!=p1($APP.q(a))&&(t1(b,o1(b),!0),$APP.dj.l($APP.ME.g(a),$APP.$h,G1,$APP.qg,$APP.C([H1,b])));return b};L1=function(a,b){b="number"===typeof b||$APP.de(b)||b instanceof $APP.G?J0(a,b):null;if($APP.l(b)&&qQa(a,b)){var c=$APP.dg(!1),d=$APP.dg($APP.wf);return K1.F?K1.F(a,b,c,d):K1.call(null,a,b,c,d)}return null};
ZQa=function(a,b,c){return B0(a,b)?H0(a,b)?$APP.De.j(function(d,e){return $APP.We.h(d,L1(a,q0.g(e)))},$APP.di,c):$APP.De.j(function(d,e){return $APP.We.h(d,q0.g(e))},$APP.di,c):H0(a,b)?L1(a,q0.g($APP.v(c))):q0.g($APP.v(c))};$Qa=function(a,b,c,d){b=$APP.yf(z_(a,new $APP.H(null,3,5,$APP.I,[null,c,b],null)));return $APP.l(b)?C0(a,c)?L1(a,$APP.pL.g($APP.v(b))):$APP.De.j(function(e,f){return $APP.We.h(e,L1(a,$APP.pL.g(f)))},$APP.di,b):d};M1=function(a){return $APP.l(a)?$APP.Ee(a):null};
O1=function(a){N1.g?N1.g(a):N1.call(null,a);return function d(c){return new $APP.gf(null,function(){for(;;){var e=$APP.u(c);if(e){if($APP.je(e)){var f=$APP.Kc(e),h=$APP.Gd(f),m=$APP.jf(h);a:for(var r=0;;)if(r<h){var n=$APP.Td(f,r),w=$APP.A.j(n,0,null);n=$APP.A.j(n,1,null);$APP.nf(m,B0(a.db,w)?new $APP.H(null,2,5,$APP.I,[w,M1(n)],null):new $APP.H(null,2,5,$APP.I,[w,n],null));r+=1}else{f=!0;break a}return f?$APP.mf($APP.of(m),d($APP.Lc(e))):$APP.mf($APP.of(m),null)}f=$APP.v(e);m=$APP.A.j(f,0,null);
f=$APP.A.j(f,1,null);return $APP.$e(B0(a.db,m)?new $APP.H(null,2,5,$APP.I,[m,M1(f)],null):new $APP.H(null,2,5,$APP.I,[m,f],null),d($APP.nd(e)))}return null}},null,null)}($APP.q(a.cache))};P1=function(a,b,c,d){this.db=a;this.eid=b;this.li=c;this.cache=d;this.J=2162164483;this.M=0};K1=function(a,b,c,d){return new P1(a,b,c,d)};Q1=function(a){return a instanceof P1};R1=function(a,b){return b instanceof P1&&a.db===b.db&&$APP.z.h(a.eid,b.eid)};S1=function(a){return i_($APP.dd(a.eid),$APP.ia(a.db))};
aRa=function(a,b){return $APP.Ge(function(c,d,e){return $APP.$h.j(c,d,C0(a,d)?B0(a,d)?$APP.hi($APP.Ii.h(N1,e)):N1.g?N1.g(e):N1.call(null,e):e)},$APP.wf,b)};bRa=function(a,b){return $APP.De.j(function(c,d){var e=S0.g($APP.v(d));return $APP.$h.j(c,e,ZQa(a,e,d))},$APP.wf,$APP.Iv.h(S0,b))};N1=function(a){if(null!=a){if(!$APP.l($APP.q(a.li))){var b=$APP.yf(z_(a.db,new $APP.H(null,1,5,$APP.I,[a.eid],null)));$APP.l(b)&&($APP.eg(a.cache,aRa(a.db,bRa(a.db,b))),$APP.Rc(a.li,!0))}return a}return null};
T1=function(a){return $APP.De.j($APP.Ju,0,a)};cRa=function(a){return T1(a)/$APP.Gd(a)};
dRa=function(a){var b=cRa(a);return T1(function(){return function e(d){return new $APP.gf(null,function(){for(;;){var f=$APP.u(d);if(f){if($APP.je(f)){var h=$APP.Kc(f),m=$APP.Gd(h),r=$APP.jf(m);a:for(var n=0;;)if(n<m){var w=$APP.Td(h,n)-b;r.add(w*w);n+=1}else{h=!0;break a}return h?$APP.mf($APP.of(r),e($APP.Lc(f))):$APP.mf($APP.of(r),null)}r=$APP.v(f)-b;return $APP.$e(r*r,e($APP.nd(f)))}return null}},null,null)}(a)}())/$APP.Gd(a)};
U1=function(a,b,c,d,e,f,h,m,r,n,w,x,B,F,M){this.as=a;this.Fc=b;this.xb=c;this.name=d;this.pattern=e;this.mc=f;this.ya=h;this.qc=m;this.zb=r;this.lc=n;this.nc=w;this.jc=x;this.B=B;this.o=F;this.D=M;this.J=2230716170;this.M=139264};
eRa=function(a){var b=$APP.ql.l(a,$APP.qn,$APP.C([$APP.mm,V1,$APP.O,W1,X1,Y1,Z1,$1,a2,b2,c2]));b=$APP.ge(a)?$APP.fh.h($APP.wf,b):b;return new U1($APP.qn.g(a),$APP.mm.g(a),V1.g(a),$APP.O.g(a),W1.g(a),X1.g(a),Y1.g(a),Z1.g(a),$1.g(a),a2.g(a),b2.g(a),c2.g(a),null,$APP.yf(b),null)};d2=function(a,b,c,d,e,f,h,m){this.qa=a;this.dd=b;this.od=c;this.Yc=d;this.xc=e;this.B=f;this.o=h;this.D=m;this.J=2230716170;this.M=139264};
j2=function(a){var b=$APP.ql.l(a,e2,$APP.C([f2,g2,h2,i2]));b=$APP.ge(a)?$APP.fh.h($APP.wf,b):b;return new d2(e2.g(a),f2.g(a),g2.g(a),h2.g(a),i2.g(a),null,$APP.yf(b),null)};l2=function(a,b,c){if($APP.l(a))return null;throw $APP.Al.h(["Expected ",$APP.p.g(b),", got: ",$APP.aj.l($APP.C([c]))].join(""),new $APP.k(null,2,[$APP.RI,fRa,k2,c],null));};
hRa=function(a,b){var c=E0(b),d=c?G0(b):b,e=H0(a,d),f=C0(a,d);a=B0(a,d);if(c){l2(e,"reverse attribute having :db.type/ref",b);var h=!0}else h=null;return eRa($APP.Ih([$1,V1,Z1,$APP.O,$APP.qn,c2,b2,a2,W1],[$APP.He,a?1E3:null,h,d,b,f?!0:null,e?!0:null,a?!0:null,e?c?m2:f?gRa:m2:null]))};iRa=function(a,b,c){l2("number"===typeof c&&0<c||null==c,"(positive-number | nil)",c);l2(B0(a,$APP.O.g(b)),"limit attribute having :db.cardinality/many",$APP.O.g(b))};
jRa=function(a,b){var c=function(){var d=$APP.v(b);return n2.h?n2.h(a,d):n2.call(null,a,d)}();if(null==c)return null;l2($APP.Wf($APP.Gd($APP.y(b))),"even number of opts",b);return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);switch(f instanceof $APP.G?f.S:null){case "as":return $APP.$h.j(d,$APP.qn,e);case "limit":return iRa(a,d,e),$APP.$h.j(d,V1,e);case "default":return $APP.$h.j(d,$APP.mm,e);case "xform":f=$APP.$h.j;var h=$APP.Ud(e)?e:null;if($APP.l(h))e=h;else if(h=$APP.D.h(o2,
e),$APP.l(h))e=h;else throw $APP.Al.h(["Can't resolve symbol ",$APP.aj.l($APP.C([e]))].join(""),new $APP.k(null,2,[$APP.RI,fRa,k2,e],null));return f.call($APP.$h,d,$1,e);default:return l2(!1,"one of :as, :limit, :default, :xform",b)}},c,$APP.up.h(2,$APP.y(b)))};
n2=function(a,b){var c;!(c=b instanceof $APP.G)&&(c="string"===typeof b)&&(c=new $APP.ci(null,new $APP.k(null,2,["limit",null,"default",null],null),null),c=c.g?c.g(b):c.call(null,b),c=$APP.ib(c));if(c)return hRa(a,b);if($APP.de(b)){c=jRa(a,b);if($APP.l(c))return c;c=$APP.v(b);var d=new $APP.ci(null,new $APP.k(null,2,[$APP.Ena,null,"limit",null],null),null);c=d.g?d.g(c):d.call(null,c);$APP.l(c)?(l2($APP.z.h($APP.Gd(b),3),"['limit attr-name (positive-number | nil)]",b),$APP.A.j(b,0,null),d=$APP.A.j(b,
1,null),c=$APP.A.j(b,2,null),d=n2.h?n2.h(a,d):n2.call(null,a,d),iRa(a,d,c),c=$APP.$h.j(d,V1,c)):c=null;if($APP.l(c))return c;c=$APP.v(b);d=new $APP.ci(null,new $APP.k(null,2,[$APP.OK,null,"default",null],null),null);c=d.g?d.g(c):d.call(null,c);$APP.l(c)?(l2($APP.z.h($APP.Gd(b),3),"['default attr-name any-value]",b),$APP.A.j(b,0,null),d=$APP.A.j(b,1,null),c=$APP.A.j(b,2,null),a=n2.h?n2.h(a,d):n2.call(null,a,d),a=$APP.$h.j(a,$APP.mm,c)):a=null;return $APP.l(a)?a:l2(!1,"[attr-name attr-option+] | ['limit attr-name (positive-num | nil)] | ['default attr-name any-val]",
b)}return null};kRa=function(a,b){return $APP.Vf(function(c){var d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);return $APP.l(a.g?a.g(d):a.call(null,d))?c:null},$APP.Ii.j($APP.rv,b,$APP.$m.C()))};lRa=function(a,b){var c=$APP.l(Z1.g(b))?h2:e2,d=kRa(function(e){return $APP.z.h($APP.qn.g(e),$APP.qn.g(b))},$APP.D.h(a,c));return null==d?$APP.Am.F(a,c,$APP.We,b):$APP.Am.P(a,c,$APP.$h,d,b)};
q2=function(a,b){l2($APP.de(b),"pattern to be sequential?",b);for(var c=j2(new $APP.k(null,3,[e2,$APP.qg,h2,$APP.qg,i2,null],null));;){if($APP.ae(b)){var d=c.qa,e=function(){return function(m){m=m.name;var r=new $APP.ci(null,new $APP.k(null,2,[X0,null,":db/id",null],null),null);return r.g?r.g(m):r.call(null,m)}}(b,c,d);b=function(){return function(m){m=$APP.O.g(m);return m instanceof $APP.G?m:$APP.z.h(":",$APP.zi.j(m,0,1))?$APP.Ji.g($APP.zi.h(m,1)):$APP.Ji.g(m)}}(b,c,d,e);d=$APP.l(function(){var m=
c.xc;return $APP.l(m)?$APP.ib($APP.Vf(e,c.qa)):m}())?$APP.We.h(d,mRa):d;d=$APP.Ir.g($APP.Gu.h(b,d));var f=$APP.kr.h(e,d),h=$APP.v(f);f=$APP.Rd(f);return j2(new $APP.k(null,5,[e2,d,f2,h,g2,f,h2,$APP.Ir.g($APP.Gu.h(b,c.Yc)),i2,c.xc],null))}h=$APP.v(b);if($APP.z.h($APP.SG,h)||$APP.z.h("*",h)||$APP.z.h(nRa,h))b=$APP.y(b),c=d=$APP.$h.j(c,i2,!0);else if($APP.ee(h))d=$APP.Ge(function(){return function(m,r,n){var w=n2(a,r);l2(null!=w,"attr-name | attr-expr",r);l2(H0(a,$APP.O.g(w)),"attribute having :db.type/ref",
r);$APP.z.h(p2,n)||$APP.z.h("...",n)?r=$APP.$h.l(w,W1,null,$APP.C([Y1,!0,X1,null])):"number"===typeof n?(l2(0<n,"(positive-num | ...)",$APP.vf([r,n])),r=$APP.$h.l(w,W1,null,$APP.C([Y1,!0,X1,n]))):r=$APP.$h.j(w,W1,q2.h?q2.h(a,n):q2.call(null,a,n));return lRa(m,r)}}(b,c,h),c,h),b=$APP.y(b),c=d;else{d=n2(a,h);if(null==d)return l2(!1,"attr-name | attr-expr | map-spec | *",h);b=$APP.y(b);c=d=lRa(c,d)}}};r2=function(a){return null==a?null:$APP.Eb(a)};s2=function(a){return null==a?null:$APP.Hb(a)};
t2=function(a,b){return null==a?new $APP.E(null,b,null,1,null):$APP.Cb(a,b)};oRa=function(a,b,c){return null==c?a:$APP.hh.j(a,b,c)};u2=function(a,b,c,d,e){this.db=a;this.ne=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};v2=function(a,b,c,d,e){a=a.ne;null==a||(a.F?a.F(b,c,d,e):a.call(null,b,c,d,e))};
w2=function(a,b){if(null!=a&&null!=a.Xg)a=a.Xg(a,b);else{var c=w2[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=w2._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("IFrame.-merge",a);}return a};x2=function(a,b){if(null!=a&&null!=a.eg)a=a.eg(a,b);else{var c=x2[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=x2._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("IFrame.-run",a);}return a};
y2=function(a,b,c,d,e){this.value=a;this.va=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};z2=function(a,b,c,d,e,f){this.ma=a;this.ia=b;this.va=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};A2=function(a,b,c,d,e,f,h,m,r){this.ra=a;this.wa=b;this.ma=c;this.pattern=d;this.ia=e;this.va=f;this.B=h;this.o=m;this.D=r;this.J=2230716170;this.M=139264};
B2=function(a,b,c,d,e,f,h,m,r,n,w){this.ra=a;this.wa=b;this.ma=c;this.pattern=d;this.ia=e;this.qa=f;this.va=h;this.id=m;this.B=r;this.o=n;this.D=w;this.J=2230716170;this.M=139264};C2=function(a,b,c,d,e,f,h,m,r,n){this.ra=a;this.wa=b;this.ma=c;this.pattern=d;this.ia=e;this.qa=f;this.id=h;this.B=m;this.o=r;this.D=n;this.J=2230716170;this.M=139264};D2=function(a,b,c,d,e,f,h){return new C2(a,b,c,d,e,f,h,null,null,null)};
F2=function(a,b,c,d,e,f){var h=e.ya;$APP.l(h)||(h=e.jc,h=$APP.l(h)?e.pattern.xc:h);if($APP.ib(h))return d=e.pattern,E2.P?E2.P(a,b,c,d,f):E2.call(null,a,b,c,d,f);if($APP.l(b.g?b.g(f):b.call(null,f)))return new y2(new $APP.k(null,1,[X0,f],null),null,null,null,null);h=c.g?c.g(e):c.call(null,e);if($APP.l($APP.l(h)?0>=h&&!0:h))return new y2(null,null,null,null,null);b=$APP.We.h(b,f);c=$APP.l(h)?$APP.Am.j(c,e,$APP.Ie):$APP.l(e.mc)?$APP.$h.j(c,e,e.mc-1):c;d=$APP.l(e.ya)?d:e.pattern;return E2.P?E2.P(a,b,
c,d,f):E2.call(null,a,b,c,d,f)};
E2=function(a,b,c,d,e){var f=a.db,h=function(){var m=d.xc;if($APP.l($APP.l(m)?f instanceof $APP.L_&&!0:m))return VZ(f.Wb,m_.F(e,null,null,536870912),m_.F(e,null,null,2147483647));if($APP.l(d.xc))return z_(f,new $APP.H(null,1,5,$APP.I,[e],null));if(null==d.dd)return null;m=d.dd.name;var r=d.od.name;return f instanceof $APP.L_?VZ(f.Wb,m_.F(e,m,null,536870912),m_.F(e,r,null,2147483647)):C_(f,$APP.N_,e,null,null,null)}();$APP.l(d.xc)&&v2(a,pRa,e,null,null);return new B2(b,c,$APP.zc($APP.wf),d,r2(d.qa),
s2(d.qa),h,e,null,null,null)};G2=function(a,b){var c=$APP.xf(a);a=$APP.D.h(c,V0);c=$APP.D.h(c,W1);b=J0(a.db,b);if(null==b)return null;for(c=new $APP.E(null,E2(a,$APP.di,$APP.wf,c,b),null,1,null);;){b=r2(c);var d=s2(c);if(b instanceof y2){if(null==d)return b.value;c=r2(d);d=s2(d);c=t2(d,w2(c,b))}else c=$APP.De.j(t2,d,x2(b,a))}};I2=function(a,b,c){c=$APP.xf(c);c=$APP.D.h(c,H2);return new $APP.k(null,2,[W1,RY(fQa(a).Cc,b,function(){return q2(a,b)}),V0,new u2(a,c,null,null,null)],null)};
J2=function(a,b){return $APP.gb(a)?a[b]:$APP.A.h(a,b)};K2=function(a,b){return $APP.ee(a)?a.g?a.g(b):a.call(null,b):a[b]};L2=function(a,b){var c=Array($APP.Gd(b));$APP.De.j(function(d,e){c[d]=a.g?a.g(e):a.call(null,e);return d+1},0,b);return c};M2=function(a,b){var c=Array($APP.Gd(b));$APP.De.j(function(d,e){c[d]=a.h?a.h(d,e):a.call(null,d,e);return d+1},0,b);return c};qRa=function(a,b){return null==b.a?-1:0>=$APP.xe(a.a,b.a)?-1:1};
rRa=function(a){if($APP.ae(O_.g(a)))return $APP.qg;for(var b=$APP.zc(new $APP.H(null,1,5,$APP.I,[S0.g($APP.v(O_.g(a)))],null));;){var c=$APP.A.h(b,$APP.Gd(b)-1),d=m_.j(0,c,null),e=m_.j(2147483647,null,null);c=S0;var f=c.g,h=O_.g(a);d=QZ(h,d,e,qRa);c=f.call(c,$APP.v(d));if(null!=c)b=$APP.pg.h(b,c);else return $APP.Bc(b)}};sRa=function(a){return $APP.Aa(a,":")?$APP.Ji.g($APP.zi.h(a,1)):a};
vRa=function(a,b){b=$APP.xf(b);var c=$APP.D.j(b,tRa,$APP.aj),d=$APP.D.j(b,uRa,$APP.p);if($APP.l(p1(a)))throw $APP.Al.h("serializable doesn't work with databases that have :storage",$APP.wf);var e=rRa(a),f=$APP.fh.h($APP.wf,$APP.Ii.j($APP.rv,e,$APP.$m.C())),h=$APP.dg($APP.zc($APP.qg)),m=$APP.dg($APP.zc($APP.wf));b=M2(function(x,B){B.idx=x|0;x=B.e;var F=B.a;F=f.g?f.g(F):f.call(null,F);var M=B.v;if("string"!==typeof M)if("number"===typeof M)M=Infinity===M?[2]:-Infinity===M?[3]:$APP.l(isNaN(M))?[4]:M;
else if(!$APP.me(M))if(M instanceof $APP.G){var U=$APP.D.h($APP.q(m),M);$APP.l(U)?M=U:(U=h.hc(null,$APP.pg.h(h.Ia(null),M)),U=$APP.Gd(U)-1,m.hc(null,$APP.hh.j(m.Ia(null),M,U)),M=U);M=[0,M]}else M=[1,c.g?c.g(M):c.call(null,M)];return[x,F,M,B.tx-536870912]},$APP.N_.g(a));var r=M2(function(x,B){return B.idx},O_.g(a)),n=M2(function(x,B){return B.idx},F_.g(a)),w=function(){var x=$APP.M_.g(a);return c.g?c.g(x):c.call(null,x)}();e=L2(d,e);d=L2(d,$APP.Bc($APP.q(h)));return{count:$APP.Gd($APP.N_.g(a)),tx0:536870912,
"max-eid":P_.g(a),"max-tx":Q_.g(a),schema:w,attrs:e,keywords:d,eavt:b,aevt:r,avet:n}};N2=function(){};O2=function(a,b,c){if(null!=a&&null!=a.vb)a=a.vb(a,b,c);else{var d=O2[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=O2._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.qb("ITraversable.-collect",a);}return a};
P2=function(a,b){if(null!=a&&null!=a.wb)a=a.wb(a,b);else{var c=P2[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=P2._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("ITraversable.-collect-vars",a);}return a};Q2=function(a,b){return $APP.de(a)&&$APP.z.h($APP.Gd(a),b)};R2=function(a,b){return $APP.de(b)?$APP.De.j(function(c,d){d=a.g?a.g(d):a.call(null,d);return $APP.l(d)?$APP.We.h(c,d):$APP.xd(null)},$APP.qg,b):null};T2=function(a,b){return S2(a,b,$APP.qg)};
S2=function(a,b,c){return $APP.l(a.g?a.g(b):a.call(null,b))?$APP.We.h(c,b):(null!=b?$APP.cd===b.ub||(b.yd?0:$APP.ob(N2,b)):$APP.ob(N2,b))?O2(b,a,c):h_(b)?$APP.De.j(function(d,e){return S2(a,e,d)},c,b):c};U2=function(a){var b=$APP.ae(a);return b?b:$APP.Xf.h($APP.eo,a)};V2=function(a,b){return $APP.Wd(a,new $APP.k(null,1,[$APP.ol,b],null))};W2=function(a){var b=$APP.ol.g($APP.Xd(a));return $APP.l(b)?b:a};X2=function(a,b,c){this.B=a;this.o=b;this.D=c;this.J=2230716170;this.M=139264};
Y2=function(a,b,c,d){this.La=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};Z2=function(a,b,c,d){this.La=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};$2=function(a,b,c){this.B=a;this.o=b;this.D=c;this.J=2230716170;this.M=139264};a3=function(a,b,c){this.B=a;this.o=b;this.D=c;this.J=2230716170;this.M=139264};b3=function(a,b,c,d){this.value=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};
c3=function(a,b,c,d){this.La=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};d3=function(a){return a instanceof $APP.t&&$APP.z.h($APP.v($APP.ji(a)),"?")?new Y2(a,null,null,null):null};xRa=function(a){var b=d3(a);if($APP.l(b))return b;throw $APP.Al.h(["Cannot parse var, expected symbol starting with ?, got: ",$APP.aj.l($APP.C([a]))].join(""),new $APP.k(null,2,[$APP.RI,wRa,$APP.ly,a],null));};
e3=function(a){return a instanceof $APP.t&&$APP.z.h($APP.v($APP.ji(a)),"$")?new Z2(a,null,null,null):null};f3=function(a){return a instanceof $APP.t&&$APP.z.h($APP.v($APP.ji(a)),"?")?null:new b3(a,null,null,null)};g3=function(a){return a instanceof $APP.t&&$APP.ib(d3(a))&&$APP.ib(e3(a))&&$APP.ib($APP.z.h($APP.RG,a)?new a3(null,null,null):null)&&$APP.ib($APP.z.h($APP.YG,a)?new X2(null,null,null):null)?new c3(a,null,null,null):null};yRa=function(a){return $APP.l(g3(a))?new Y2(a,null,null,null):null};
h3=function(a){var b=d3(a);if($APP.l(b))return b;b=e3(a);return $APP.l(b)?b:f3(a)};i3=function(a,b,c,d,e){this.required=a;this.Nd=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
zRa=function(a){if($APP.de(a)){var b=$APP.de($APP.v(a))?new $APP.H(null,2,5,$APP.I,[$APP.v(a),$APP.y(a)],null):new $APP.H(null,2,5,$APP.I,[null,a],null),c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c=R2(xRa,c);b=R2(xRa,b);if($APP.ae(c)&&$APP.ae(b))throw $APP.Al.h("Cannot parse rule-vars, expected [ variable+ | ([ variable+ ] variable*) ]",new $APP.k(null,2,[$APP.RI,j3,$APP.ly,a],null));if(!$APP.l(U2($APP.K.h(c,b))))throw $APP.Al.h("Rule variables should be distinct",new $APP.k(null,2,[$APP.RI,j3,$APP.ly,
a],null));return new i3(c,b,null,null,null)}throw $APP.Al.h("Cannot parse rule-vars, expected [ variable+ | ([ variable+ ] variable*) ]",new $APP.k(null,2,[$APP.RI,j3,$APP.ly,a],null));};l3=function(a){return $APP.K.h($APP.l($APP.$F.g(a))?new $APP.H(null,1,5,$APP.I,[$APP.Qm.h($APP.cm,$APP.$F.g(a))],null):null,$APP.Qm.h($APP.cm,k3.g(a)))};m3=function(a){return new $APP.H(null,2,5,$APP.I,[$APP.Gd($APP.$F.g(a)),$APP.Gd(k3.g(a))],null)};
n3=function(a,b,c){this.B=a;this.o=b;this.D=c;this.J=2230716170;this.M=139264};o3=function(a,b,c,d){this.Tb=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};p3=function(a,b,c,d){this.yc=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};q3=function(a,b,c,d){this.Rb=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};ARa=function(a){return $APP.z.h($APP.YG,a)?V2(new n3(null,null,null),a):null};
BRa=function(a){var b=ARa(a);return $APP.l(b)?b:r3.g?r3.g(a):r3.call(null,a)};CRa=function(a){var b=R2(BRa,a);if($APP.l(b)){if($APP.ae(b))throw $APP.Al.h("Tuple binding cannot be empty",new $APP.k(null,2,[$APP.RI,s3,$APP.ly,a],null));return V2(new p3(b,null,null,null),a)}return null};
r3=function(a){a:{if(Q2(a,2)&&$APP.z.h($APP.Md(a),p2)){var b=$APP.v(a);b=r3.g?r3.g(b):r3.call(null,b);if($APP.l(b)){b=V2(new q3(b,null,null,null),a);break a}throw $APP.Al.h("Cannot parse collection binding",new $APP.k(null,2,[$APP.RI,s3,$APP.ly,a],null));}b=null}if($APP.l(b))return b;b=Q2(a,1)&&$APP.de($APP.v(a))?V2(new q3(CRa($APP.v(a)),null,null,null),a):null;if($APP.l(b))return b;b=CRa(a);if($APP.l(b))return b;b=ARa(a);if($APP.l(b))return b;b=d3(a);b=$APP.l(b)?V2(new o3(b,null,null,null),a):null;
if($APP.l(b))return b;throw $APP.Al.h("Cannot parse binding, expected (bind-scalar | bind-tuple | bind-coll | bind-rel)",new $APP.k(null,2,[$APP.RI,s3,$APP.ly,a],null));};t3=function(a){if(null!=a&&null!=a.Wg)a=a.Wg(a);else{var b=t3[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=t3._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.qb("IFindVars.-find-vars",a);}return a};u3=function(a,b,c,d,e){this.ha=a;this.xa=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
v3=function(a,b,c,d,e,f){this.source=a;this.Tb=b;this.pattern=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};w3=function(a){if(null!=a&&null!=a.dg)a=a.dg(a);else{var b=w3[$APP.da(null==a?null:a)];if(null!=b)a=b.g?b.g(a):b.call(null,a);else if(b=w3._,null!=b)a=b.g?b.g(a):b.call(null,a);else throw $APP.qb("IFindElements.find-elements",a);}return a};x3=function(a,b,c,d){this.elements=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};
y3=function(a,b,c,d){this.element=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};z3=function(a,b,c,d){this.element=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};A3=function(a,b,c,d){this.elements=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};B3=function(a){return a instanceof u3};DRa=function(a){return a instanceof v3};
C3=function(a){var b=d3(a);if($APP.l(b))return b;a:{if($APP.de(a)&&$APP.z.h($APP.v(a),ERa)){if(3<=$APP.Gd(a)&&4>=$APP.Gd(a)){var c=(b=$APP.z.h($APP.Gd(a),4))?$APP.A.h(a,1):FRa;b=b?$APP.Qd(a):$APP.y(a);var d=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c=e3(c);d=d3(d);var e=d3(b);$APP.l(e)?b=e:(e=yRa(b),b=$APP.l(e)?e:f3(b));if($APP.l($APP.l(c)?$APP.l(d)?b:d:c)){b=new v3(c,d,b,null,null,null);break a}}throw $APP.Al.h("Cannot parse pull expression, expect ['pull' src-var? variable (constant | variable | plain-symbol)]",
new $APP.k(null,2,[$APP.RI,GRa,k2,a],null));}b=null}if($APP.l(b))return b;a:{if($APP.de(a)&&$APP.z.h($APP.v(a),HRa)){if(3<=$APP.Gd(a)&&(b=$APP.u(a),$APP.v(b),c=$APP.y(b),b=$APP.v(c),c=$APP.y(c),b=d3(b),c=R2(h3,c),$APP.l($APP.l(b)?c:b))){b=new u3(b,c,null,null,null);break a}throw $APP.Al.h("Cannot parse custom aggregate call, expect ['aggregate' variable fn-arg+]",new $APP.k(null,2,[$APP.RI,GRa,k2,a],null));}b=null}$APP.l(b)?a=b:$APP.de(a)&&2<=$APP.Gd(a)?(b=$APP.u(a),a=$APP.v(b),b=$APP.y(b),a=g3(a),
b=R2(h3,b),a=$APP.l($APP.l(a)?b:a)?new u3(a,b,null,null,null):null):a=null;return a};
IRa=function(a){var b=R2(C3,a);b=null==b?null:new x3(b,null,null,null);if($APP.l(b))return b;a:{if($APP.de(a)&&$APP.z.h($APP.Gd(a),1)&&(b=$APP.v(a),$APP.de(b)&&$APP.z.h($APP.Gd(b),2)&&$APP.z.h($APP.Md(b),p2))){b=C3($APP.v(b));b=null==b?null:new y3(b,null,null,null);break a}b=null}if($APP.l(b))return b;$APP.de(a)&&$APP.z.h($APP.Gd(a),2)&&$APP.z.h($APP.Md(a),$APP.Xj)?(b=C3($APP.v(a)),b=null==b?null:new z3(b,null,null,null)):b=null;if($APP.l(b))return b;$APP.de(a)&&$APP.z.h($APP.Gd(a),1)?(b=$APP.v(a),
b=R2(C3,b),b=null==b?null:new A3(b,null,null,null)):b=null;if($APP.l(b))return b;throw $APP.Al.h("Cannot parse :find, expected: (find-rel | find-coll | find-tuple | find-scalar)",new $APP.k(null,2,[$APP.RI,GRa,k2,a],null));};D3=function(a,b,c,d,e){this.type=a;this.Sd=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
JRa=function(a,b){if(!$APP.ae(b)&&$APP.Qf($APP.fd,b))switch(a instanceof $APP.G?a.S:null){case "keys":return new D3(a,$APP.Qm.h($APP.Ji,b),null,null,null);case "syms":return new D3(a,$APP.Fe(b),null,null,null);case "strs":return new D3(a,$APP.Qm.h($APP.p,b),null,null,null);default:return null}else return null};KRa=function(a){var b=e3(a);$APP.l(b)||(b=$APP.z.h($APP.RG,a)?new a3(null,null,null):null,b=$APP.l(b)?b:yRa(a));return $APP.l(b)?V2(new o3(b,null,null,null),a):r3(a)};
MRa=function(a){var b=R2(KRa,a);if($APP.l(b))return b;throw $APP.Al.h("Cannot parse :in clause, expected (src-var | % | plain-symbol | bind-scalar | bind-tuple | bind-coll | bind-rel)",new $APP.k(null,2,[$APP.RI,LRa,$APP.ly,a],null));};E3=function(a,b,c,d,e){this.source=a;this.pattern=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};F3=function(a,b,c,d,e){this.ha=a;this.xa=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
G3=function(a,b,c,d,e,f){this.ha=a;this.xa=b;this.Rb=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};H3=function(a,b,c,d,e,f){this.source=a;this.name=b;this.xa=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};I3=function(a,b,c,d,e,f){this.source=a;this.Ub=b;this.Ca=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};J3=function(a,b,c,d,e,f){this.source=a;this.qd=b;this.Ca=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};
K3=function(a,b,c,d){this.Ca=a;this.B=b;this.o=c;this.D=d;this.J=2230716170;this.M=139264};NRa=function(a){var b=$APP.z.h($APP.YG,a)?new X2(null,null,null):null;if($APP.l(b))return b;b=d3(a);return $APP.l(b)?b:f3(a)};L3=function(a){if($APP.de(a)){var b=e3($APP.v(a));return $APP.l(b)?new $APP.H(null,2,5,$APP.I,[b,$APP.y(a)],null):new $APP.H(null,2,5,$APP.I,[new $2(null,null,null),a],null)}return null};
ORa=function(a){if($APP.de(a)){var b=$APP.u(a);a=$APP.v(b);b=$APP.y(b);b=null==b?$APP.qg:b;var c=g3(a);a=$APP.l(c)?c:d3(a);b=R2(h3,b);return $APP.l($APP.l(a)?b:a)?new $APP.H(null,2,5,$APP.I,[a,b],null):null}return null};PRa=function(a,b,c){if($APP.ae(a)&&$APP.ae(b))throw $APP.Al.h("Join variables should not be empty",new $APP.k(null,2,[$APP.RI,M3,$APP.ly,c],null));};QRa=function(a,b){PRa(null,$APP.RH.g(a),b);return a};
RRa=function(a,b){var c=$APP.xf(a);c=$APP.D.h(c,N3);var d=$APP.xf(c);c=$APP.D.h(d,$APP.$F);d=$APP.D.h(d,k3);PRa(c,d,b);return a};SRa=function(a){if($APP.de(a)&&$APP.z.h($APP.ns,$APP.v(a))){var b=$APP.y(a);b=O3.g?O3.g(b):O3.call(null,b);if($APP.l($APP.yf(b)))return new K3(b,null,null,null);throw $APP.Al.h("Cannot parse 'and' clause, expected [ 'and' clause+ ]",new $APP.k(null,2,[$APP.RI,M3,$APP.ly,a],null));}return null};
URa=function(a){a:{var b=L3(a);if($APP.l(b)){var c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);var d=$APP.u(b);b=$APP.v(d);d=$APP.y(d);if($APP.z.h($APP.sz,b)){b=O3.g?O3.g(d):O3.call(null,d);if($APP.l(b)){c=QRa(V2(new I3(c,$APP.Fe($APP.Dv.g(P3($APP.qg,b))),b,null,null,null),a),a);break a}throw $APP.Al.h("Cannot parse 'not' clause, expected [ src-var? 'not' clause+ ]",new $APP.k(null,2,[$APP.RI,M3,$APP.ly,a],null));}}c=null}if($APP.l(c))return c;a:{b=L3(a);if($APP.l(b)){c=$APP.A.j(b,0,null);b=$APP.A.j(b,
1,null);d=$APP.u(b);b=$APP.v(d);var e=$APP.y(d);d=$APP.v(e);e=$APP.y(e);if($APP.z.h(TRa,b)){b=R2(d3,d);d=O3.g?O3.g(e):O3.call(null,e);if($APP.l($APP.l(b)?d:b)){c=QRa(V2(new I3(c,b,d,null,null,null),a),a);break a}throw $APP.Al.h("Cannot parse 'not-join' clause, expected [ src-var? 'not-join' [variable+] clause+ ]",new $APP.k(null,2,[$APP.RI,M3,$APP.ly,a],null));}}c=null}if($APP.l(c))return c;a:{b=L3(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),d=$APP.u(b),b=$APP.v(d),d=$APP.y(d),$APP.z.h($APP.ss,
b))){b=R2($APP.mv.h(SRa,URa),d);if($APP.l(b)){c=RRa(V2(new J3(c,new i3(null,$APP.Fe($APP.Dv.g(P3($APP.qg,b))),null,null,null),b,null,null,null),a),a);break a}throw $APP.Al.h("Cannot parse 'or' clause, expected [ src-var? 'or' clause+ ]",new $APP.k(null,2,[$APP.RI,M3,$APP.ly,a],null));}c=null}if($APP.l(c))return c;a:{b=L3(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),d=$APP.u(b),b=$APP.v(d),e=$APP.y(d),d=$APP.v(e),e=$APP.y(e),$APP.z.h(Q3,b))){b=zRa(d);d=R2($APP.mv.h(SRa,URa),e);if($APP.l($APP.l(b)?
d:b)){c=RRa(V2(new J3(c,b,d,null,null,null),a),a);break a}throw $APP.Al.h("Cannot parse 'or-join' clause, expected [ src-var? 'or-join' [variable+] clause+ ]",new $APP.k(null,2,[$APP.RI,M3,$APP.ly,a],null));}c=null}if($APP.l(c))return c;a:{if(Q2(a,1)&&(b=ORa($APP.v(a)),$APP.l(b))){c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c=V2(new F3(c,b,null,null,null),a);break a}c=null}if($APP.l(c))return c;a:{if(Q2(a,2)&&(b=$APP.A.j(a,0,null),c=$APP.A.j(a,1,null),d=ORa(b),$APP.l(d))){b=$APP.A.j(d,0,null);d=$APP.A.j(d,
1,null);c=r3(c);c=$APP.l(c)?V2(new G3(b,d,c,null,null,null),a):null;break a}c=null}if($APP.l(c))return c;a:{b=L3(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),b=$APP.u(b),d=$APP.v(b),b=$APP.y(b),d=g3(d),e=R2(NRa,b),$APP.l(d))){if($APP.ae(b))throw $APP.Al.h("rule-expr requires at least one argument",new $APP.k(null,2,[$APP.RI,M3,$APP.ly,a],null));if(null==e)throw $APP.Al.h("Cannot parse rule-expr arguments, expected [ (variable | constant | '_')+ ]",new $APP.k(null,2,[$APP.RI,M3,$APP.ly,
a],null));c=new H3(c,d,e,null,null,null);break a}c=null}if($APP.l(c))return c;a:{b=L3(a);if($APP.l(b)&&(c=$APP.A.j(b,0,null),b=$APP.A.j(b,1,null),b=R2(NRa,b),$APP.l(b))){if($APP.ae(b))throw $APP.Al.h("Pattern could not be empty",new $APP.k(null,2,[$APP.RI,M3,$APP.ly,a],null));c=V2(new E3(c,b,null,null,null),a);break a}c=null}if($APP.l(c))return c;throw $APP.Al.h("Cannot parse clause, expected (data-pattern | pred-expr | fn-expr | rule-expr | not-clause | not-join-clause | or-clause | or-join-clause)",
new $APP.k(null,2,[$APP.RI,M3,$APP.ly,a],null));};O3=function(a){return R2(URa,a)};VRa=function(a){var b=O3(a);if($APP.l(b))return b;throw $APP.Al.h("Cannot parse :where clause, expected [clause+]",new $APP.k(null,2,[$APP.RI,M3,$APP.ly,a],null));};R3=function(a,b,c,d,e){this.Ub=a;this.Ca=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};S3=function(a,b,c,d,e){this.name=a;this.Hd=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
WRa=function(a){if($APP.de(a)){var b=$APP.u(a),c=$APP.v(b),d=$APP.y(b);if($APP.de(c)){b=$APP.u(c);var e=$APP.v(b);c=$APP.y(b);b=function(){var h=g3(e);if($APP.l(h))return h;throw $APP.Al.h("Cannot parse rule name, expected plain-symbol",new $APP.k(null,2,[$APP.RI,T3,$APP.ly,a],null));}();c=zRa(c);var f=function(){var h=$APP.yf(O3(d));if($APP.l(h))return h;throw $APP.Al.h("Rule branch should have clauses",new $APP.k(null,2,[$APP.RI,T3,$APP.ly,a],null));}();return new $APP.k(null,3,[$APP.O,b,$APP.RH,
c,$APP.JL,f],null)}throw $APP.Al.h(["Cannot parse rule head, expected [rule-name rule-vars], got: ",$APP.aj.l($APP.C([c]))].join(""),new $APP.k(null,2,[$APP.RI,T3,$APP.ly,a],null));}throw $APP.Al.h("Cannot parse rule, expected [rule-head clause+]",new $APP.k(null,2,[$APP.RI,T3,$APP.ly,a],null));};
YRa=function(a,b){var c=$APP.RH.g($APP.v(b)),d=m3(c);b=$APP.u($APP.y(b));for(var e=null,f=0,h=0;;)if(h<f){var m=e.da(null,h);m=$APP.RH.g(m);if($APP.Zh.h(d,m3(m)))throw $APP.Al.h(["Arity mismatch for rule '",$APP.aj.l($APP.C([$APP.cm.g(a)])),"': ",$APP.aj.l($APP.C([l3(c)]))," vs. ",$APP.aj.l($APP.C([l3(m)]))].join(""),new $APP.k(null,2,[$APP.RI,T3,XRa,a],null));h+=1}else if(b=$APP.u(b)){if($APP.je(b))f=$APP.Kc(b),b=$APP.Lc(b),e=f,f=$APP.Gd(f);else{m=$APP.v(b);e=$APP.RH.g(m);if($APP.Zh.h(d,m3(e)))throw $APP.Al.h(["Arity mismatch for rule '",
$APP.aj.l($APP.C([$APP.cm.g(a)])),"': ",$APP.aj.l($APP.C([l3(c)]))," vs. ",$APP.aj.l($APP.C([l3(e)]))].join(""),new $APP.k(null,2,[$APP.RI,T3,XRa,a],null));b=$APP.y(b);e=null;f=0}h=0}else break};
ZRa=function(a){$APP.Fe(function(){return function d(c){return new $APP.gf(null,function(){for(;;){var e=$APP.u(c);if(e){var f=e;if($APP.je(f)){var h=$APP.Kc(f),m=$APP.Gd(h),r=$APP.jf(m);return function(){for(var B=0;;)if(B<m){var F=$APP.Td(h,B),M=$APP.A.j(F,0,null),U=$APP.A.j(F,1,null);F=$APP.Qm.h(function(){return function(Y){return new R3($APP.RH.g(Y),$APP.JL.g(Y),null,null,null)}}(B,F,M,U,h,m,r,f,e),U);U=r;YRa(M,F);U.add(new S3(M,F,null,null,null));B+=1}else return!0}()?$APP.mf($APP.of(r),d($APP.Lc(f))):
$APP.mf($APP.of(r),null)}var n=$APP.v(f),w=$APP.A.j(n,0,null),x=$APP.A.j(n,1,null);n=$APP.Qm.h(function(){return function(B){return new R3($APP.RH.g(B),$APP.JL.g(B),null,null,null)}}(n,w,x,f,e),x);YRa(w,n);return $APP.$e(new S3(w,n,null,null,null),d($APP.nd(f)))}return null}},null,null)}($APP.gj($APP.O,R2(WRa,a)))}())};U3=function(a,b,c,d,e,f,h,m){this.ed=a;this.jd=b;this.gd=c;this.fd=d;this.hd=e;this.B=f;this.o=h;this.D=m;this.J=2230716170;this.M=139264};
$Ra=function(a){var b=$APP.ql.l(a,V3,$APP.C([W3,X3,Y3,Z3]));b=$APP.ge(a)?$APP.fh.h($APP.wf,b):b;return new U3(V3.g(a),W3.g(a),X3.g(a),Y3.g(a),Z3.g(a),null,$APP.yf(b),null)};aSa=function(a){for(var b=$APP.wf,c=null;;){var d=$APP.v(a);if($APP.l(d))d instanceof $APP.G?(c=d,a=$APP.y(a)):(b=$APP.nl.F(b,new $APP.H(null,1,5,$APP.I,[c],null),$APP.ym.h($APP.We,$APP.qg),d),a=$APP.y(a));else return b}};bSa=function(a){var b=$APP.ol.g(a);return a instanceof E3?b:null!=b?b instanceof $2?null:b:null};
fSa=function(a,b,c){var d=$APP.hi(P3($APP.qg,V3.g(a))),e=$APP.hi(W3.g(a)),f=$APP.hi(P3($APP.qg,Y3.g(a))),h=$APP.hi(P3($APP.qg,Z3.g(a)));f=$APP.qu.h($APP.LM.h(d,e),$APP.LM.h(h,f));d=$APP.ru.h(d,e);if(!$APP.ae(f))throw $APP.Al.h(["Query for unknown vars: ",$APP.aj.l($APP.C([$APP.Qm.h($APP.cm,f)]))].join(""),new $APP.k(null,3,[$APP.RI,$3,$APP.RH,f,$APP.ly,b],null));if(!$APP.ae(d))throw $APP.Al.h([":find and :with should not use same variables: ",$APP.aj.l($APP.C([$APP.Qm.h($APP.cm,d)]))].join(""),new $APP.k(null,
3,[$APP.RI,$3,$APP.RH,d,$APP.ly,b],null));d=X3.g(a);if(null!=d){if(V3.g(a)instanceof z3)throw $APP.Al.h([$APP.aj.l($APP.C([$APP.vl.g(d)]))," does not work with single-scalar :find"].join(""),new $APP.k(null,2,[$APP.RI,$3,$APP.ly,b],null));if(V3.g(a)instanceof y3)throw $APP.Al.h([$APP.aj.l($APP.C([$APP.vl.g(d)]))," does not work with collection :find"].join(""),new $APP.k(null,2,[$APP.RI,$3,$APP.ly,b],null));}d=a4.g(X3.g(a));if(null!=d&&(e=w3(V3.g(a)),!$APP.z.h($APP.Gd(d),$APP.Gd(e))))throw $APP.Al.h(["Count of ",
$APP.aj.l($APP.C([$APP.vl.g(X3.g(a))]))," must match count of :find"].join(""),new $APP.k(null,4,[$APP.RI,$3,cSa,$APP.$e($APP.vl.g(X3.g(a)),d),dSa,e,$APP.ly,b],null));if(1<$APP.Gd($APP.og.h($APP.kb,new $APP.H(null,3,5,$APP.I,[$APP.Hy.g(c),$APP.vr.g(c),eSa.g(c)],null))))throw $APP.Al.h("Only one of :keys/:syms/:strs must be present",new $APP.k(null,2,[$APP.RI,$3,$APP.ly,b],null));var m=P3($APP.qg,Y3.g(a)),r=T2(function(w){return w instanceof Z2},Y3.g(a)),n=T2(function(w){return w instanceof a3},Y3.g(a));
if(!$APP.l(function(){var w=U2(m);return $APP.l(w)?(w=U2(r),$APP.l(w)?U2(n):w):w}()))throw $APP.Al.h("Vars used in :in should be distinct",new $APP.k(null,2,[$APP.RI,$3,$APP.ly,b],null));c=P3($APP.qg,W3.g(a));if(!$APP.l(U2(c)))throw $APP.Al.h("Vars used in :with should be distinct",new $APP.k(null,2,[$APP.RI,$3,$APP.ly,b],null));c=S2(function(w){return w instanceof Z2},Y3.g(a),$APP.di);d=S2(function(w){return w instanceof Z2},Z3.g(a),$APP.di);c=$APP.qu.h(d,c);if(!$APP.ae(c))throw $APP.Al.h(["Where uses unknown source vars: ",
$APP.aj.l($APP.C([$APP.Qm.h($APP.cm,c)]))].join(""),new $APP.k(null,3,[$APP.RI,$3,$APP.RH,c,$APP.ly,b],null));c=T2(function(w){return w instanceof H3},Z3.g(a));a=T2(function(w){return w instanceof a3},Y3.g(a));if(!$APP.ae(c)&&$APP.ae(a))throw $APP.Al.h("Missing rules var '%' in :in",new $APP.k(null,2,[$APP.RI,$3,$APP.ly,b],null));};
iSa=function(a){if($APP.ee(a))var b=a;else if($APP.de(a))b=aSa(a);else throw $APP.Al.h("Query should be a vector or a map",new $APP.k(null,2,[$APP.RI,$3,$APP.ly,a],null));var c=b,d=VRa($APP.EC.h(c,$APP.qg));b=$Ra(new $APP.k(null,5,[V3,IRa(dSa.g(c)),W3,function(){var e=gSa.g(c);if($APP.l(e)){var f=R2(d3,e);if($APP.l(f))e=f;else throw $APP.Al.h("Cannot parse :with clause, expected [ variable+ ]",new $APP.k(null,2,[$APP.RI,hSa,$APP.ly,e],null));}else e=null;return e}(),X3,function(){var e=JRa($APP.Hy,
$APP.Hy.g(c));if($APP.l(e))return e;e=JRa($APP.vr,$APP.vr.g(c));return $APP.l(e)?e:JRa(eSa,eSa.g(c))}(),Y3,MRa(function(){var e=$APP.ysa.g(c);return $APP.l(e)?e:$APP.ae(T2(bSa,d))?$APP.qg:new $APP.H(null,1,5,$APP.I,[FRa],null)}()),Z3,d],null));fSa(b,a,c);return b};b4=function(a,b,c,d,e,f){this.je=a;this.sources=b;this.rules=c;this.B=d;this.o=e;this.D=f;this.J=2230716170;this.M=139264};c4=function(a,b,c,d,e){this.qa=a;this.Ce=b;this.B=c;this.o=d;this.D=e;this.J=2230716170;this.M=139264};
jSa=function(a,b){return $APP.ru.h($APP.hi($APP.Wh(a)),$APP.hi($APP.Wh(b)))};kSa=function(a,b){return $APP.z.h($APP.Gd(a),$APP.Gd(b))&&$APP.Qf(function(c){return $APP.ue(b,c)},$APP.Wh(a))&&$APP.Qf(function(c){return $APP.ue(a,c)},$APP.Wh(b))};lSa=function(a){return a instanceof $APP.t&&$APP.z.h("$",$APP.v($APP.ji(a)))};d4=function(a){return a instanceof $APP.t&&$APP.z.h("?",$APP.v($APP.ji(a)))};e4=function(a){return a instanceof $APP.G||"string"===typeof a};
mSa=function(a){return($APP.de(a)||XY(a))&&$APP.z.h(2,$APP.Gd(a))&&e4($APP.v(a))};nSa=function(a,b,c,d){for(var e=b.length,f=d.length,h=Array(e+f),m=0;;)if(m<e)h[m]=a[b[m]],m+=1;else break;for(a=0;;)if(a<f)h[e+a]=c[d[a]],a+=1;else break;return h};
oSa=function(a,b,c,d){var e=$APP.Fe(function(){return function r(m){return new $APP.gf(null,function(){for(;;){var n=$APP.u(m);if(n){if($APP.je(n)){var w=$APP.Kc(n),x=$APP.Gd(w),B=$APP.jf(x);a:for(var F=0;;)if(F<x){var M=$APP.Td(w,F),U=$APP.A.j(M,0,null);M=$APP.A.j(M,1,null);$APP.nf(B,new $APP.H(null,2,5,$APP.I,[M,a.g?a.g(U):a.call(null,U)],null));F+=1}else{w=!0;break a}return w?$APP.mf($APP.of(B),r($APP.Lc(n))):$APP.mf($APP.of(B),null)}w=$APP.v(n);B=$APP.A.j(w,0,null);w=$APP.A.j(w,1,null);return $APP.$e(new $APP.H(null,
2,5,$APP.I,[w,a.g?a.g(B):a.call(null,B)],null),r($APP.nd(n)))}return null}},null,null)}(c)}()),f=$APP.De.h($APP.Mm,$APP.Yh(a))+1;b=$APP.Bc($APP.De.j(function(h,m){for(var r=Array(f),n=$APP.u(e),w=null,x=0,B=0;;)if(B<x){var F=w.da(null,B),M=$APP.A.j(F,0,null);F=$APP.A.j(F,1,null);r[F]=m[M];B+=1}else if(n=$APP.u(n))$APP.je(n)?(x=$APP.Kc(n),n=$APP.Lc(n),w=x,x=$APP.Gd(x)):(x=$APP.v(n),w=$APP.A.j(x,0,null),x=$APP.A.j(x,1,null),r[x]=m[w],n=$APP.y(n),w=null,x=0),B=0;else break;return $APP.pg.h(h,r)},$APP.zc($APP.Fe(b)),
d));return new c4(a,b,null,null,null)};pSa=function(a){a=$APP.Ii.h($APP.cm,$APP.Fe($APP.Dv.g(P3($APP.qg,a))));return new c4($APP.ki(a,$APP.$m.C()),$APP.qg,null,null,null)};f4=function(a,b){if(null!=a&&null!=a.fg)a=a.fg(a,b);else{var c=f4[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=f4._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("IBinding.in-\x3erel",a);}return a};
qSa=function(a,b){var c=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);c instanceof o3&&g4.g(c)instanceof Z2?a=$APP.Am.P(a,h4,$APP.$h,$APP.Ao.h(c,new $APP.H(null,2,5,$APP.I,[g4,$APP.cm],null)),b):c instanceof o3&&g4.g(c)instanceof a3?(c=$APP.$h.j,b="string"===typeof b?$APP.xm.g(b):b,ZRa(b),b=$APP.gj($APP.Nd,b),a=c.call($APP.$h,a,$APP.IE,b)):a=$APP.Am.F(a,i4,$APP.We,f4(c,b));return a};
tSa=function(a,b,c){var d=$APP.Gd(b),e=$APP.Gd(c);if(d<e)throw $APP.Al.h(["Extra inputs passed, expected: ",$APP.aj.l($APP.C([$APP.Qm.h(function(f){return $APP.ol.g($APP.Xd(f))},b)])),", got: ",$APP.aj.l($APP.C([e]))].join(""),new $APP.k(null,3,[$APP.RI,rSa,$APP.xG,b,sSa,c],null));if(d>e)throw $APP.Al.h(["Too few inputs passed, expected: ",$APP.aj.l($APP.C([$APP.Qm.h(function(f){return $APP.ol.g($APP.Xd(f))},b)])),", got: ",$APP.aj.l($APP.C([e]))].join(""),new $APP.k(null,3,[$APP.RI,rSa,$APP.xG,b,
sSa,c],null));return $APP.De.j(qSa,a,$APP.ki(b,c))};uSa=function(a,b){var c=a.g?a.g(b):a.call(null,b);if($APP.ue(j4,b)){if($APP.re(c)){var d=c|0;return function(e){e=e[d];return"number"===typeof e?e:$APP.de(e)?J0(k4,e):XY(e)?J0(k4,e):e}}return function(e){e=e[c];return"number"===typeof e?e:$APP.de(e)?J0(k4,e):XY(e)?J0(k4,e):e}}return $APP.re(c)?(d=c|0,function(e){return e[d]}):function(e){return e[c]}};
l4=function(a,b){var c=$APP.Gd(b);if(1===c)return uSa(a,$APP.v(b));b=$APP.Ar.g(b);for(var d=0;;)if(d<c)b[d]=uSa(a,b[d]),d+=1;else return function(e,f,h){return function(m){return $APP.Ir.g(f.map(function(){return function(r){return r.g?r.g(m):r.call(null,m)}}(e,f,h)))}}(d,b,c)};vSa=function(a,b){var c=$APP.md;return $APP.Bc($APP.De.j(function(d,e){var f=a.g?a.g(e):a.call(null,e);return $APP.hh.j(d,f,$APP.We.h($APP.D.j(d,f,c),e))},$APP.zc($APP.wf),b))};
n4=function(a,b){var c=m4.g(a),d=m4.g(b),e=e2.g(a),f=e2.g(b),h=$APP.Fe(jSa(e2.g(a),e2.g(b)));a=$APP.Wh(e);b=$APP.Bc($APP.Ge(function(B,F){return $APP.l(e.g?e.g(F):e.call(null,F))?B:$APP.pg.h(B,F)},$APP.zc($APP.qg),f));var m=$APP.Ee($APP.Yh(e)),r=$APP.Ee($APP.Xi($APP.Ii.g(f),b)),n=l4(e,h),w=l4(f,h),x=vSa(n,c);c=$APP.Bc($APP.De.j(function(B,F){var M=w(F);M=$APP.D.h(x,M);return null==M?B:$APP.De.j(function(U,Y){return $APP.pg.h(U,nSa(Y,m,F,r))},B,M)},$APP.zc($APP.qg),d));return new c4($APP.ki($APP.K.h(a,
b),$APP.$m.C()),c,null,null,null)};wSa=function(a,b){var c=$APP.xf(a),d=$APP.D.h(c,e2);c=$APP.D.h(c,m4);var e=$APP.xf(b);b=$APP.D.h(e,e2);e=$APP.D.h(e,m4);var f=$APP.Fe(jSa(d,b));b=l4(b,f);var h=vSa(b,e),m=l4(d,f);return $APP.$h.j(a,m4,$APP.rg(function(r){r=m(r);return null==(h.g?h.g(r):h.call(null,r))},c))};o4=function(a,b){return $APP.Vf(function(c){return $APP.ue(e2.g(c),b)?c:null},i4.g(a))};
xSa=function(a,b){if(d4(b)){var c=o4(a,b);if(null==c)return null;a=$APP.v(m4.g(c));if(null==a)return null;if(null==$APP.Pd(m4.g(c)))return b=$APP.D.h(e2.g(c),b),a[b]}return null};ySa=function(a,b){return $APP.Qm.h(function(c){var d=xSa(a,c);return $APP.l(d)?d:c},b)};
zSa=function(a,b){if(null!=a?$APP.cd===a.Lh||(a.yd?0:$APP.ob(I_,a)):$APP.ob(I_,a)){var c=$APP.A.j(b,0,null),d=$APP.A.j(b,1,null),e=$APP.A.j(b,2,null),f=$APP.A.j(b,3,null);c=mSa(c)||e4(c)?I0(a,c):c;e=$APP.l($APP.l(e)?e4(d)&&H0(a,d)&&(mSa(e)||e4(e)):e)?I0(a,e):e;a=mSa(f)?I0(a,f):f;return $APP.Ik.j(new $APP.H(null,4,5,$APP.I,[c,d,e,a],null),0,$APP.Gd(b))}return b};
ASa=function(a,b,c){a=$APP.Qm.h(function(d){return $APP.z.h(d,$APP.YG)||d4(d)?null:d},zSa(b,ySa(a,c)));b=z_(b,a);c=$APP.fh.h($APP.wf,$APP.og.h(function(d){var e=$APP.A.j(d,0,null);$APP.A.j(d,1,null);return d4(e)},$APP.Ii.j($APP.rv,c,new $APP.H(null,4,5,$APP.I,["e","a","v","tx"],null))));return new c4(c,b,null,null,null)};
BSa=function(a,b){a=$APP.og.h(function(d){a:for(var e=b;;){var f=d;if($APP.l($APP.l(f)?e:f)){f=$APP.v(d);var h=$APP.v(e);if($APP.z.h(h,$APP.YG)||d4(h)||$APP.z.h(f,h))d=$APP.y(d),e=$APP.y(e);else{d=!1;break a}}else{d=!0;break a}}return d},a);var c=$APP.fh.h($APP.wf,$APP.og.h(function(d){var e=$APP.A.j(d,0,null);$APP.A.j(d,1,null);return d4(e)},$APP.Ii.j($APP.rv,b,$APP.$m.C())));return new c4(c,$APP.Qm.h($APP.Ee,a),null,null,null)};
CSa=function(a,b,c){return(null!=b?$APP.cd===b.Li||(b.yd?0:$APP.ob(bQa,b)):$APP.ob(bQa,b))?ASa(a,b,c):BSa(b,c)};p4=function(a,b){for(var c=$APP.qg;;){var d=$APP.v(a);if(null==d)return $APP.We.h(c,b);$APP.l($APP.yf(jSa(e2.g(b),e2.g(d))))?(a=$APP.y(a),b=n4(d,b)):(a=$APP.y(a),c=$APP.We.h(c,d))}};DSa=function(a,b){var c=o4(a,b);if(null==c)return null;a=$APP.v(m4.g(c));null==a?b=null:(c=e2.g(c),b=c.g?c.g(b):c.call(null,b),b=a[b]);return b};
ESa=function(a,b){return $APP.Vf(function(c){return $APP.ue(e2.g(a),c)},b)};FSa=function(a,b){var c=$APP.og.h(function(e){return ESa(e,b)},i4.g(a)),d=$APP.De.h(q4,c);return new $APP.H(null,2,5,$APP.I,[$APP.Am.j(a,i4,function(e){return $APP.kr.h($APP.hi(c),e)}),d],null)};
GSa=function(a,b,c,d){a=h4.g(a);b=e2.g(b);for(var e=$APP.Gd(d),f=Array(e),h=Array(e),m=0;;)if(m<e){var r=$APP.A.h(d,m);if(r instanceof $APP.t){var n=$APP.D.h(a,r);null==n?h[m]=$APP.D.h(b,r):f[m]=n}else f[m]=r;m+=1}else break;return c===$APP.rv?function(w){for(var x=f.slice(0),B=0;;)if(B<e){var F=h[B];null!=F&&(x[B]=w[F]);B+=1}else break;return $APP.Xf.h(c,x)}:function(w){for(var x=0;;)if(x<e){var B=h[x];null!=B&&(f[x]=w[B]);x+=1}else break;return $APP.Xf.h(c,f)}};
HSa=function(a,b){var c=$APP.A.j(b,0,null);c=$APP.u(c);var d=$APP.v(c),e=$APP.y(c),f=function(){var r=$APP.D.h(o2,d);if($APP.l(r))return r;r=DSa(a,d);if($APP.l(r))return r;if($APP.l(null))return null;if(null==o4(a,d))throw $APP.Al.h(["Unknown predicate '",$APP.aj.l($APP.C([d]))," in ",$APP.aj.l($APP.C([b]))].join(""),new $APP.k(null,3,[$APP.RI,r4,$APP.ly,b,$APP.ao,d],null));return null}();c=FSa(a,$APP.og.h($APP.fd,e));var h=$APP.A.j(c,0,null),m=$APP.A.j(c,1,null);c=$APP.l(f)?function(){var r=GSa(h,
m,f,e);return $APP.Am.j(m,m4,function(n){return $APP.og.h(r,n)})}():$APP.$h.j(m,m4,$APP.qg);return $APP.Am.F(h,i4,$APP.We,c)};
ISa=function(a,b){var c=$APP.A.j(b,0,null);c=$APP.u(c);var d=$APP.v(c),e=$APP.y(c);c=$APP.A.j(b,1,null);var f=r3(c),h=function(){var n=$APP.D.h(o2,d);if($APP.l(n))return n;n=DSa(a,d);if($APP.l(n))return n;if($APP.l(null))return null;if(null==o4(a,d))throw $APP.Al.h(["Unknown function '",$APP.aj.l($APP.C([d]))," in ",$APP.aj.l($APP.C([b]))].join(""),new $APP.k(null,3,[$APP.RI,r4,$APP.ly,b,$APP.ao,d],null));return null}();c=FSa(a,$APP.og.h($APP.fd,e));var m=$APP.A.j(c,0,null),r=$APP.A.j(c,1,null);c=
$APP.l(h)?function(){var n=GSa(m,r,h,e),w=function(){return function F(B){return new $APP.gf(null,function(){for(var M=B;;)if(M=$APP.u(M)){if($APP.je(M)){var U=$APP.Kc(M),Y=$APP.Gd(U),ba=$APP.jf(Y);a:for(var ca=0;;)if(ca<Y){var ea=$APP.Td(U,ca),la=n(ea);null!=la&&$APP.nf(ba,q4.h(new c4(e2.g(r),new $APP.H(null,1,5,$APP.I,[ea],null),null,null,null),f4(f,la)));ca+=1}else{U=!0;break a}return U?$APP.mf($APP.of(ba),F($APP.Lc(M))):$APP.mf($APP.of(ba),null)}ba=$APP.v(M);U=n(ba);if(null!=U)return $APP.$e(q4.h(new c4(e2.g(r),
new $APP.H(null,1,5,$APP.I,[ba],null),null,null,null),f4(f,U)),F($APP.nd(M)));M=$APP.nd(M)}else return null},null,null)}(m4.g(r))}();return $APP.ae(w)?q4.h(r,pSa(f)):$APP.De.h(s4,w)}():q4.h($APP.$h.j(r,m4,$APP.qg),pSa(f));return $APP.Am.F(m,i4,p4,c)};
JSa=function(a,b){if($APP.de(b)){var c=lSa($APP.v(b))?$APP.Md(b):$APP.v(b);if(c instanceof $APP.t){if(d4(c)||$APP.ue(new $APP.ci(null,new $APP.k(null,6,[$APP.ns,null,$APP.sz,null,TRa,null,Q3,null,$APP.ss,null,$APP.YG,null],null),null),c))return!1;if($APP.ue($APP.IE.g(a),c))return!0;throw $APP.Al.h(["Unknown rule '",$APP.aj.l($APP.C([c]))," in ",$APP.aj.l($APP.C([b]))].join(""),new $APP.k(null,2,[$APP.RI,r4,$APP.ly,b],null));}}return!1};
LSa=function(a,b){var c=$APP.u(a),d=$APP.v(c),e=$APP.y(c),f=$APP.dj.h(KSa,$APP.ud),h=$APP.D.h($APP.IE.g(b),d);return function n(r){return new $APP.gf(null,function(){for(;;){var w=$APP.u(r);if(w){var x=w;if($APP.je(x)){var B=$APP.Kc(x),F=$APP.Gd(B),M=$APP.jf(F);return function(){for(var ja=0;;)if(ja<F){var na=$APP.Td(B,ja),oa=na,wa=$APP.u(oa),Ca=$APP.v(wa),Ka=$APP.y(wa),Ra=Ca,$a=$APP.u(Ra),jb=$APP.v($a),nb=$APP.y($a),db=jb,hb=nb,rb=Ka,ub=$APP.ki(hb,e);$APP.nf(M,$APP.Gs(function(Sb,Zb,tc,Gc,$d,pc,
Xe,Rf,Lg,Mg,yh,xj,ug,zh,ck,sd,Ri,Ci,gi,oc,$c,he,Sf,ze,Mh,jg){return function(Hd){if(d4(Hd)){var Mf=ug.g?ug.g(Hd):ug.call(null,Hd);return null==Mf?$APP.Oi.g([$APP.ji(Hd),"__auto__",$APP.p.g(jg)].join("")):Mf}return Hd}}(ja,oa,wa,Ca,Ka,Ra,$a,jb,nb,db,hb,rb,ub,na,B,F,M,x,w,a,c,d,e,d,e,f,h),rb));ja+=1}else return!0}()?$APP.mf($APP.of(M),n($APP.Lc(x))):$APP.mf($APP.of(M),null)}var U=$APP.v(x),Y=U,ba=$APP.u(Y),ca=$APP.v(ba),ea=$APP.y(ba),la=ca,ta=$APP.u(la),pa=$APP.v(ta),V=$APP.y(ta),P=pa,X=V,R=ea,W=$APP.ki(X,
e);return $APP.$e($APP.Gs(function(ja,na,oa,wa,Ca,Ka,Ra,$a,jb,nb,db,hb,rb,ub,Sb,Zb,tc,Gc,$d,pc,Xe,Rf){return function(Lg){if(d4(Lg)){var Mg=hb.g?hb.g(Lg):hb.call(null,Lg);return null==Mg?$APP.Oi.g([$APP.ji(Lg),"__auto__",$APP.p.g(Rf)].join("")):Mg}return Lg}}(Y,ba,ca,ea,la,ta,pa,V,P,X,R,W,U,x,w,a,c,d,e,d,e,f,h),R),n($APP.nd(x)))}return null}},null,null)}(h)};
MSa=function(a,b){a=$APP.kr.h(function(c){var d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);return $APP.z.h(d,c)},$APP.Ii.j($APP.rv,a,b));return new $APP.H(null,2,5,$APP.I,[$APP.Ii.h($APP.v,a),$APP.Ii.h($APP.Md,a)],null)};
NSa=function(a,b){a=$APP.u(a);var c=$APP.v(a),d=$APP.y(a);return function h(f){return new $APP.gf(null,function(){for(;;){var m=$APP.u(f);if(m){if($APP.je(m)){var r=$APP.Kc(m),n=$APP.Gd(r),w=$APP.jf(n);a:for(var x=0;;)if(x<n){var B=$APP.Td(r,x),F=MSa(d,B);B=$APP.A.j(F,0,null);F=$APP.A.j(F,1,null);$APP.nf(w,new $APP.H(null,1,5,$APP.I,[$APP.K.l(new $APP.H(null,1,5,$APP.I,[t4],null),B,$APP.C([F]))],null));x+=1}else{r=!0;break a}return r?$APP.mf($APP.of(w),h($APP.Lc(m))):$APP.mf($APP.of(w),null)}w=$APP.v(m);
r=MSa(d,w);w=$APP.A.j(r,0,null);r=$APP.A.j(r,1,null);return $APP.$e(new $APP.H(null,1,5,$APP.I,[$APP.K.l(new $APP.H(null,1,5,$APP.I,[t4],null),w,$APP.C([r]))],null),h($APP.nd(m)))}return null}},null,null)}($APP.D.h(b,c))};u4=function(a){var b=$APP.cj.g($APP.qg);$APP.Gs(function(c){$APP.l(d4.g?d4.g(c):d4.call(null,c))&&$APP.dj.j(b,$APP.We,c);return c},a);return $APP.q(b)};
OSa=function(a,b){function c(e){e=$APP.A.j(e,0,null);e=$APP.u(e);$APP.v(e);e=$APP.y(e);return $APP.Qf(d,e)}var d=$APP.hi(u4(a));return new $APP.H(null,2,5,$APP.I,[$APP.og.h(c,b),$APP.kr.h(c,b)],null)};
QSa=function(a,b){function c(Ka){return $APP.Vf(function(Ra){return $APP.ae(m4.g(Ra))},i4.g(Ka))}function d(Ka,Ra){return $APP.De.j(v4,Ka,Ra)}for(var e=$APP.og.h(d4,b),f=$APP.ki(e,$APP.$m.C()),h=new $APP.E(null,new $APP.k(null,5,[w4,$APP.qg,x4,a,$APP.JL,new $APP.H(null,1,5,$APP.I,[b],null),y4,$APP.wf,z4,$APP.wf],null),null,1,null),m=new c4(f,$APP.qg,null,null,null);;){var r=$APP.v(h);if(null==r)return m;var n=r,w=$APP.ti(function(){return function(Ka){return!JSa(a,Ka)}}(h,m,n,r,e,f,d,c),$APP.JL.g(n)),
x=$APP.A.j(w,0,null),B=$APP.A.j(w,1,null),F=$APP.u(B),M=$APP.v(F),U=$APP.y(F),Y=M,ba=U;if(null==Y){b=d(x4.g(n),x);b=KPa($APP.Fe,A4?A4(b,e):PSa.call(null,b,e));var ca=new c4(f,b,null,null,null);b=$APP.y(h);ca=s4(m,ca);h=b;m=ca}else{var ea=Y,la=$APP.u(ea),ta=$APP.v(la),pa=$APP.y(la),V=ta,P=pa,X=NSa(Y,y4.g(n)),R=OSa($APP.K.h(w4.g(n),x),$APP.K.h(X,z4.g(n))),W=$APP.A.j(R,0,null),ja=$APP.A.j(R,1,null);if($APP.l($APP.Vf(function(){return function(Ka){return $APP.z.h(Ka,new $APP.H(null,1,5,$APP.I,[$APP.J(t4)],
null))}}(h,m,ea,la,ta,pa,V,P,X,R,W,ja,w,x,B,F,M,U,Y,ba,n,r,e,f,d,c),W)))b=$APP.y(h),ca=m,h=b,m=ca;else{var na=$APP.K.h(x,W),oa=d(x4.g(n),na);if($APP.l(c(oa)))b=$APP.y(h),ca=m,h=b,m=ca;else{var wa=$APP.$h.j(y4.g(n),V,$APP.We.h($APP.D.j(y4.g(n),V,$APP.qg),P)),Ca=LSa(Y,a);b=$APP.K.h(function(){return function(Ka,Ra,$a,jb,nb,db,hb,rb,ub,Sb,Zb,tc,Gc,$d,pc,Xe,Rf,Lg,Mg,yh,xj,ug,zh,ck,sd,Ri,Ci,gi,oc,$c){return function ze(Sf){return new $APP.gf(null,function(Mh,jg,Hd,Mf,yj,Cg,Nh,Ll,dk,fo,Si,Tm,Di,go,se,ek,
Um,Uk,Oh,Tf,Uf,ad,fe,wc){return function(){for(;;){var Df=$APP.u(Sf);if(Df){if($APP.je(Df)){var ho=$APP.Kc(Df),Jr=$APP.Gd(ho),pf=$APP.jf(Jr);a:for(var vg=0;;)if(vg<Jr){var RD=$APP.Td(ho,vg);$APP.nf(pf,new $APP.k(null,5,[w4,yj,x4,Cg,$APP.JL,$APP.fh.j($APP.qg,$APP.Vi,$APP.C([RD,wc])),y4,Hd,z4,ek],null));vg+=1}else{ho=!0;break a}return ho?$APP.mf($APP.of(pf),ze($APP.Lc(Df))):$APP.mf($APP.of(pf),null)}pf=$APP.v(Df);return $APP.$e(new $APP.k(null,5,[w4,yj,x4,Cg,$APP.JL,$APP.fh.j($APP.qg,$APP.Vi,$APP.C([pf,
wc])),y4,Hd,z4,ek],null),ze($APP.nd(Df)))}return null}}}(Ka,Ra,$a,jb,nb,db,hb,rb,ub,Sb,Zb,tc,Gc,$d,pc,Xe,Rf,Lg,Mg,yh,xj,ug,zh,ck,sd,Ri,Ci,gi,oc,$c),null,null)}}(h,m,wa,Ca,na,oa,ea,la,ta,pa,V,P,X,R,W,ja,w,x,B,F,M,U,Y,ba,n,r,e,f,d,c)(Ca)}(),$APP.y(h));ca=m;h=b;m=ca}}}}};RSa=function(a,b){var c=$APP.A.j(b,0,null),d=$APP.A.j(b,1,null),e=$APP.A.j(b,2,null);b=$APP.A.j(b,3,null);c=d4(c)?$APP.We.h($APP.di,c):$APP.di;c=d4(b)?$APP.We.h(c,b):c;return d4(e)&&!d4(d)&&H0(a,d)?$APP.We.h(c,e):c};
B4=function(a,b){return $APP.$h.j(a,i4,$APP.Vm.h(function(c){var d=$APP.yf($APP.ai(e2.g(c),b));return null==d?null:$APP.$h.j(c,e2,d)},i4.g(a)))};C4=function(a){return $APP.fh.h($APP.di,$APP.ng.l(function(b){return $APP.Wh(e2.g(b))},$APP.C([i4.g(a)])))};
D4=function(a,b,c){if($APP.Aja(b,a))return null;a=$APP.qu.h($APP.hi(b),a);throw $APP.Al.h(["Insufficient bindings: ",$APP.aj.l($APP.C([a]))," not bound in ",$APP.aj.l($APP.C([c]))].join(""),new $APP.k(null,3,[$APP.RI,r4,$APP.ly,c,$APP.RH,a],null));};
SSa=function(a,b,c){b=$APP.Qm.h(function(d){return $APP.qu.h($APP.hi(u4(d)),a)},b);if($APP.l($APP.Xf.h($APP.z,b)))return null;throw $APP.Al.h(["All clauses in 'or' must use same set of free vars, had ",$APP.aj.l($APP.C([b]))," in ",$APP.aj.l($APP.C([c]))].join(""),new $APP.k(null,3,[$APP.RI,r4,$APP.ly,c,$APP.RH,b],null));};
TSa=function(a,b,c){for(var d=$APP.hi($APP.kr.h(a,b)),e=$APP.u(c),f=null,h=0,m=0;;)if(m<h){c=f.da(null,m);var r=$APP.yf($APP.qu.h(d,$APP.hi(u4(c))));if(null!=r)throw e=r,$APP.Bt.l($APP.C([c,a,b,d])),$APP.Al.h(["All clauses in 'or' must use same set of free vars, had ",$APP.aj.l($APP.C([e]))," not bound in ",$APP.aj.l($APP.C([c]))].join(""),new $APP.k(null,3,[$APP.RI,r4,$APP.ly,c,$APP.RH,e],null));m+=1}else if(c=$APP.u(e)){e=c;if($APP.je(e))f=$APP.Kc(e),e=$APP.Lc(e),c=f,h=$APP.Gd(f),f=c;else{c=$APP.v(e);
f=$APP.yf($APP.qu.h(d,$APP.hi(u4(c))));if(null!=f)throw e=f,$APP.Bt.l($APP.C([c,a,b,d])),$APP.Al.h(["All clauses in 'or' must use same set of free vars, had ",$APP.aj.l($APP.C([e]))," not bound in ",$APP.aj.l($APP.C([c]))].join(""),new $APP.k(null,3,[$APP.RI,r4,$APP.ly,c,$APP.RH,e],null));e=$APP.y(e);f=null;h=0}m=0}else return null};USa=function(a,b){var c=k4;k4=$APP.D.h(h4.g(a),FRa);try{return $APP.De.j(E4,a,b)}finally{k4=c}};
VSa=function(a,b,c,d){return $APP.Xi($APP.tp.h($APP.Ii.g(function(e){return $APP.Xi($APP.Ii.g(function(f){for(var h=$APP.vb(e),m=0;;)if(m<c){var r=d[m];null!=r&&(h[m]=f[r]);m+=1}else break;return h}),m4.g(b))}),$APP.Vi),a)};PSa=function(a){switch(arguments.length){case 2:return A4(arguments[0],arguments[1]);case 3:return WSa(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};
A4=function(a,b){a=i4.g(a);return WSa(new $APP.H(null,1,5,$APP.I,[Array($APP.Gd(b))],null),a,b)};WSa=function(a,b,c){for(;;){var d=$APP.v(b);if(null==d)return a;if($APP.ae(m4.g(d)))return $APP.qg;var e=$APP.ai(e2.g(d),c);if($APP.ae(e))b=$APP.y(b);else{e=$APP.Ee($APP.Ii.h(function(h,m,r,n){return function(w){return $APP.D.h(n,w)}}(a,b,c,e,d),c));var f=$APP.Gd(c);a=VSa(a,d,f,e);b=$APP.y(b)}}};XSa=function(a,b){return $APP.fh.j($APP.di,$APP.Ii.g($APP.Fe),A4(a,b))};
F4=function(a,b){if(null!=a&&null!=a.gg)a=a.gg(a,b);else{var c=F4[$APP.da(null==a?null:a)];if(null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else if(c=F4._,null!=c)a=c.h?c.h(a,b):c.call(null,a,b);else throw $APP.qb("IContextResolve.-context-resolve",a);}return a};
YSa=function(a,b,c){return $APP.Qm.F(function(d,e,f){if(B3(d)){e=F4($APP.bo.g(d),b);d=$APP.Ii.h(function(m){return F4(m,b)},$APP.ii($APP.Gm.g(d)));var h=$APP.Ii.h(function(m){return $APP.A.h(m,f)},c);return $APP.Xf.h(e,$APP.K.h(d,new $APP.H(null,1,5,$APP.I,[h],null)))}return e},a,$APP.v(c),$APP.$m.C())};ZSa=function(a){var b=$APP.Yf(B3);return $APP.kr.h($APP.fb,$APP.Ii.j(function(c,d){return $APP.l(b.g?b.g(c):b.call(null,c))?d:null},a,$APP.$m.C()))};
$Sa=function(a,b,c){var d=ZSa(a);return function h(f){return new $APP.gf(null,function(){for(;;){var m=$APP.u(f);if(m){if($APP.je(m)){var r=$APP.Kc(m),n=$APP.Gd(r),w=$APP.jf(n);a:for(var x=0;;)if(x<n){var B=$APP.Td(r,x);$APP.A.j(B,0,null);B=$APP.A.j(B,1,null);$APP.nf(w,YSa(a,b,B));x+=1}else{r=!0;break a}return r?$APP.mf($APP.of(w),h($APP.Lc(m))):$APP.mf($APP.of(w),null)}w=$APP.v(m);$APP.A.j(w,0,null);w=$APP.A.j(w,1,null);return $APP.$e(YSa(a,b,w),h($APP.nd(m)))}return null}},null,null)}($APP.gj(function(f){return $APP.Ii.h(function(h){return $APP.A.h(f,
h)},d)},c))};aTa=function(a,b){return $APP.De.j(function(c,d){return $APP.We.h(c,a.g?a.g(d):a.call(null,d))},$APP.Sd(b),b)};bTa=function(a,b){var c=a4.g(a),d=$APP.$m.h(0,$APP.Gd(c));return aTa(function(e){return $APP.De.j(function(f,h){return $APP.$h.j(f,$APP.A.h(c,h),$APP.A.h(e,h))},$APP.wf,d)},b)};
cTa=function(a,b,c){if(null!=a&&null!=a.hg)a=a.hg(a,b,c);else{var d=cTa[$APP.da(null==a?null:a)];if(null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else if(d=cTa._,null!=d)a=d.j?d.j(a,b,c):d.call(null,a,b,c);else throw $APP.qb("IPostProcess.-post-process",a);}return a};
dTa=function(a,b,c){var d=function(){return function h(f){return new $APP.gf(null,function(){for(;;){var m=$APP.u(f);if(m){if($APP.je(m)){var r=$APP.Kc(m),n=$APP.Gd(r),w=$APP.jf(n);return function(){for(var B=0;;)if(B<n){var F=$APP.Td(r,B),M=w;if(DRa(F)){var U=F4($APP.ol.g(F),b);F=F4(W1.g(F),b);U=I2(U,F,null)}else U=null;M.add(U);B+=1}else return!0}()?$APP.mf($APP.of(w),h($APP.Lc(m))):$APP.mf($APP.of(w),null)}var x=$APP.v(m);return $APP.$e(DRa(x)?function(){var B=F4($APP.ol.g(x),b),F=F4(W1.g(x),b);
return I2(B,F,null)}():null,h($APP.nd(m)))}return null}},null,null)}(a)}();return function h(f){return new $APP.gf(null,function(){for(;;){var m=$APP.u(f);if(m){var r=m;if($APP.je(r)){var n=$APP.Kc(r),w=$APP.Gd(n),x=$APP.jf(w);return function(){for(var F=0;;)if(F<w){var M=$APP.Td(n,F);$APP.nf(x,$APP.Qm.j(function(){return function(U,Y){return $APP.l(U)?G2(U,Y):Y}}(F,M,n,w,x,r,m,d),d,M));F+=1}else return!0}()?$APP.mf($APP.of(x),h($APP.Lc(r))):$APP.mf($APP.of(x),null)}var B=$APP.v(r);return $APP.$e($APP.Qm.j(function(){return function(F,
M){return $APP.l(F)?G2(F,M):M}}(B,r,m,d),d,B),h($APP.nd(r)))}return null}},null,null)}(c)};eTa=function(a,b){if(a instanceof W_){var c=a.cc,d=a.wc;return new W_(d,function(e){var f=c.g?c.g(e):c.call(null,e);return $APP.l(f)?b.h?b.h(d,e):b.call(null,d,e):f},$APP.cj.g(0),null,null,null)}return new W_(a,function(e){return b.h?b.h(a,e):b.call(null,a,e)},$APP.cj.g(0),null,null,null)};fTa=function(a,b,c,d){return E_(a,b,c,d)};gTa=function(a){return $APP.q(a)};hTa=function(a){return g_($APP.N_.g(a))};
G4=function G4(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return G4.l(0<c.length?new $APP.jd(c.slice(0),0,null):null)};G4.l=function(a){return $APP.qca(a,$APP.$h.j($APP.Ya(),$APP.Qa,!1))};G4.A=0;G4.G=function(a){return this.l($APP.u(a))};iTa=new $APP.t("datascript.core","squuid","datascript.core/squuid",-408746813,null);Y_=new $APP.G("db.unique","identity","db.unique/identity",1675950722);f1=new $APP.G("db","retract","db/retract",-1549825231);
jTa=new $APP.t("datascript.db","IDatom","datascript.db/IDatom",293960966,null);kTa=new $APP.G(null,"-store","-store",86010660);lTa=new $APP.G(null,"incomparable","incomparable",1634329662);mTa=new $APP.t(null,"datom-tx","datom-tx",1349109608,null);eSa=new $APP.G(null,"strs","strs",1175537277);jQa=new $APP.G("db.cardinality","one","db.cardinality/one",1428352190);W0=new $APP.G("transact","upsert","transact/upsert",412688078);X3=new $APP.G(null,"qreturn-map","qreturn-map",1841215994);
MQa=new $APP.G("transact","schema","transact/schema",1426844139);nTa=new $APP.t(null,"datom-added","datom-added",-363961980,null);oTa=new $APP.t(null,"entity?","entity?",555338193,null);pTa=new $APP.t("datascript.core","filter","datascript.core/filter",-1276765471,null);H4=new $APP.G(null,"acc","acc",838566312);qTa=new $APP.G("lookup-ref","unique","lookup-ref/unique",-960647710);T3=new $APP.G("parser","rule","parser/rule",-464044566);
rTa=new $APP.t("datascript.impl.entity","lookup-entity","datascript.impl.entity/lookup-entity",243995956,null);sTa=new $APP.t("datascript.core","q","datascript.core/q",2106686416,null);H1=new $APP.G(null,"db-last-stored","db-last-stored",-2068760702);tTa=new $APP.t(null,"added","added",-596784081,null);GRa=new $APP.G("parser","find","parser/find",-801023103);uTa=new $APP.t(null,"entity","entity",1189561251,null);i2=new $APP.G(null,"wildcard?","wildcard?",-686044101);
Z0=new $APP.G("datascript.db","tx-redundant","datascript.db/tx-redundant",-1117921977);vTa=new $APP.t("datascript.storage","restore-impl","datascript.storage/restore-impl",1300814044,null);wTa=new $APP.t(null,"tail-addr","tail-addr",1565233666,null);xTa=new $APP.t("datascript.core","restore","datascript.core/restore",-655548009,null);$3=new $APP.G("parser","query","parser/query",1877320671);yTa=new $APP.t(null,"_opts","_opts",1634624069,null);g2=new $APP.G(null,"last-attr","last-attr",-526000708);
EQa=new $APP.G(null,"conflict","conflict",1978796605);zTa=new $APP.G("db","fn","db/fn",-1175261470);ATa=new $APP.t("datascript.core","touch","datascript.core/touch",632058772,null);BTa=new $APP.t(null,"nbb.impl.datascript","nbb.impl.datascript",-1651830048,null);X1=new $APP.G(null,"recursion-limit","recursion-limit",52345639);CTa=new $APP.t("datascript.storage","-restore","datascript.storage/-restore",708714346,null);b0=new $APP.G("db.type","ref","db.type/ref",-1728373079);
DTa=new $APP.t(null,"variance","variance",-1522424942,null);ETa=new $APP.t("datascript.core","reset-conn!","datascript.core/reset-conn!",-458464444,null);FTa=new $APP.t("datascript.core","with","datascript.core/with",-1124098173,null);GTa=new $APP.G(null,"-restore","-restore",-515892319);X0=new $APP.G("db","id","db/id",-1388397098);HTa=new $APP.G("db.fn","retractAttribute","db.fn/retractAttribute",937402164);ITa=new $APP.t("datascript.db","datom-added","datascript.db/datom-added",-560586371,null);
JTa=new $APP.G("lookup-ref","syntax","lookup-ref/syntax",-317304012);KTa=new $APP.t("datascript.storage","serializable-datom","datascript.storage/serializable-datom",33076367,null);LTa=new $APP.t("nbb.impl.datascript","-store","nbb.impl.datascript/-store",2093703726,null);MTa=new $APP.t("datascript.core","db","datascript.core/db",667170070,null);I4=new $APP.t(null,"addr","addr",42880790,null);NTa=new $APP.t(null,"-index-range","-index-range",898114142,null);
OTa=new $APP.t(null,"settings","settings",-1098290894,null);x0=new $APP.G(null,"tx-data","tx-data",934159761);y4=new $APP.G(null,"used-args","used-args",23596256);PTa=new $APP.t("datascript.core","rseek-datoms","datascript.core/rseek-datoms",-1377097474,null);QTa=new $APP.t("nbb.impl.datascript","-restore","nbb.impl.datascript/-restore",1970738477,null);RTa=new $APP.t(null,"make-storage-adapter","make-storage-adapter",937815346,null);Z3=new $APP.G(null,"qwhere","qwhere",-1645067378);
g0=new $APP.G("db","ident","db/ident",-737096);y0=new $APP.G(null,"tempids","tempids",1767509089);V3=new $APP.G(null,"qfind","qfind",1529332972);STa=new $APP.t("datascript.core","serializable","datascript.core/serializable",-630048076,null);x4=new $APP.G(null,"prefix-context","prefix-context",-1269613591);TTa=new $APP.t(null,"store-impl!","store-impl!",901017629,null);a0=new $APP.G("db.cardinality","many","db.cardinality/many",772806234);
T0=new $APP.G("datascript.db","queued-tuples","datascript.db/queued-tuples",-762852029);UTa=new $APP.t("datascript.core","pull","datascript.core/pull",-1213970902,null);VTa=new $APP.t("datascript.impl.entity","entity?","datascript.impl.entity/entity?",1686472137,null);w0=new $APP.G(null,"db-after","db-after",-571884666);M3=new $APP.G("parser","where","parser/where",-966053850);WTa=new $APP.t(null,"restore-impl","restore-impl",1420181842,null);J4=new $APP.G(null,"seen","seen",-518999789);
XTa=new $APP.t("clojure.string","starts-with?","clojure.string/starts-with?",656256322,null);$_=new $APP.G("db.unique","value","db.unique/value",276903088);YTa=new $APP.G("db","tupleTypes","db/tupleTypes",1512507626);b1=new $APP.G("db.fn","retractEntity","db.fn/retractEntity",-1423535441);K4=new $APP.t(null,"attr","attr",1036399174,null);ZTa=new $APP.t(null,"storage-adapter","storage-adapter",-1255219640,null);$Ta=new $APP.G("entity-id","missing","entity-id/missing",1234588374);
aUa=new $APP.t("datascript.storage","storage-adapter","datascript.storage/storage-adapter",-1942259762,null);Q3=new $APP.t(null,"or-join","or-join",591375469,null);bUa=new $APP.G("db.pull","reverse","db.pull/reverse",1999788297);cUa=new $APP.t(null,"db-from-reader","db-from-reader",1527469533,null);dUa=new $APP.t(null,"println-str","println-str",-2049216703,null);hSa=new $APP.G("parser","with","parser/with",-386255821);eUa=new $APP.t(null,"missing?","missing?",-1710383910,null);
fUa=new $APP.t("clojure.string","ends-with?","clojure.string/ends-with?",-745964149,null);gUa=new $APP.t("datascript.core","reset-schema!","datascript.core/reset-schema!",-331506672,null);hUa=new $APP.t("datascript.core","transact!","datascript.core/transact!",1506351773,null);F_=new $APP.G(null,"avet","avet",1383857032);L4=new $APP.t(null,"schema","schema",58529736,null);i1=new $APP.G(null,"entity","entity",-450970276);iUa=new $APP.t(null,"serializable-datom","serializable-datom",451141133,null);
jUa=new $APP.t("datascript.db","datom-tx","datascript.db/datom-tx",2084964209,null);LRa=new $APP.G("parser","in","parser/in",1617442048);lQa=new $APP.G(null,"init-db","init-db",1595181278);kUa=new $APP.G(null,"addresses","addresses",-559529694);$Z=new $APP.G(null,"cmp","cmp",575646375);U_=new $APP.G(null,"hash","hash",-13781596);lUa=new $APP.t(null,"with","with",104234651,null);a2=new $APP.G(null,"multival?","multival?",1072388383);fRa=new $APP.G("parser","pull","parser/pull",-2147427204);
M4=new $APP.t(null,"tx","tx",2107161945,null);mUa=new $APP.t("datascript.core","store","datascript.core/store",1386427333,null);G1=new $APP.G(null,"tx-tail","tx-tail",1116487556);nUa=new $APP.t(null,"reset-conn!","reset-conn!",1315177148,null);N3=new $APP.G(null,"rule-vars","rule-vars",1665972520);m0=new $APP.G("db","valueType","db/valueType",1827971944);uQa=new $APP.G("retract","schema","retract/schema",1546437764);O_=new $APP.G(null,"aevt","aevt",-585148059);
oUa=new $APP.G("datascript","db","datascript/db",-1190971692);N4=new $APP.t(null,"-store","-store",1726542187,null);pUa=new $APP.G(null,"thaw-fn","thaw-fn",-240544261);O4=new $APP.G(null,"binding","binding",539932593);DQa=new $APP.G(null,"assertion","assertion",-1645134882);$APP.s0=new $APP.G(null,"datoms","datoms",-290874434);ERa=new $APP.t(null,"pull","pull",779986722,null);b_=new $APP.G(null,"set-metadata","set-metadata",1293757705);
qUa=new $APP.t("datascript.core","conn-from-datoms","datascript.core/conn-from-datoms",253878827,null);rUa=new $APP.t(null,"untuple","untuple",-606149900,null);P4=new $APP.t(null,"c0","c0",2105080311,null);sUa=new $APP.t(null,"index-range","index-range",1044940937,null);t4=new $APP.t(null,"-differ?","-differ?",1465687357,null);c0=new $APP.G("db","isComponent","db/isComponent",423352398);Q4=new $APP.t(null,"db","db",-1661185010,null);tUa=new $APP.t(null,"sample","sample",1719555128,null);
R4=new $APP.t(null,"datom","datom",1268975437,null);uUa=new $APP.G(null,"serialize","serialize",-69216574);d0=new $APP.G("db","tupleAttrs","db/tupleAttrs",250080092);Y1=new $APP.G(null,"recursive?","recursive?",1340075244);vUa=new $APP.t(null,"conn","conn",1918841190,null);wUa=new $APP.G(null,"thaw-kw","thaw-kw",1076733097);z4=new $APP.G(null,"pending-guards","pending-guards",-1255527308);xUa=new $APP.G("query","binding","query/binding",698240489);
SQa=new $APP.G(null,"avet-metadata","avet-metadata",1556019837);cSa=new $APP.G(null,"return-map","return-map",1620104901);yUa=new $APP.t("datascript.core","seek-datoms","datascript.core/seek-datoms",1389812273,null);m4=new $APP.G(null,"tuples","tuples",-676032639);zUa=new $APP.t("datascript.core","settings","datascript.core/settings",273729994,null);S4=new $APP.G(null,"branches","branches",-1240337268);
AUa=new $APP.t("datascript.storage","maybe-adapt-storage","datascript.storage/maybe-adapt-storage",-1480358933,null);T4=new $APP.t(null,"datoms","datoms",1349657093,null);BUa=new $APP.G("transact","cas","transact/cas",816687170);CUa=new $APP.t("clojure.string","blank?","clojure.string/blank?",1772874244,null);DUa=new $APP.G(null,"listeners","listeners",394544445);EUa=new $APP.t(null,"validate-schema","validate-schema",758884380,null);$APP.N_=new $APP.G(null,"eavt","eavt",-666437073);
P_=new $APP.G(null,"max-eid","max-eid",2134868075);FUa=new $APP.t("datascript.storage","store","datascript.storage/store",-769865397,null);GUa=new $APP.t("datascript.core","index-range","datascript.core/index-range",-1484576383,null);HUa=new $APP.t(null,"tuple","tuple",1167864243,null);IUa=new $APP.G("db","retractEntity","db/retractEntity",-1452737935);JUa=new $APP.t("datascript.core","listen!","datascript.core/listen!",1659161258,null);k0=new $APP.G(null,"attribute","attribute",-2074029119);
$APP.M_=new $APP.G(null,"schema","schema",-1582001791);KUa=new $APP.t(null,"maybe-adapt-storage","maybe-adapt-storage",-554097303,null);LUa=new $APP.t("datascript.db","DB","datascript.db/DB",348347258,null);MUa=new $APP.t("datascript.storage","store-tail","datascript.storage/store-tail",-1145162646,null);NUa=new $APP.t("datascript.storage","-\x3eStorageAdapter","datascript.storage/-\x3eStorageAdapter",152620751,null);OUa=new $APP.t("datascript.db","Datom","datascript.db/Datom",1951800754,null);
U4=new $APP.G(null,"recursion-limits","recursion-limits",1762857814);p2=new $APP.t(null,"...","...",-1926939749,null);uRa=new $APP.G(null,"freeze-kw","freeze-kw",391758233);e0=new $APP.G("db.type","tuple","db.type/tuple",938234914);PUa=new $APP.t(null,"lookup-entity","lookup-entity",-936060612,null);Z_=new $APP.G("db","index","db/index",-1531680669);QQa=new $APP.G(null,"max-addr","max-addr",1373100454);tRa=new $APP.G(null,"freeze-fn","freeze-fn",-575885995);
QUa=new $APP.t("datascript.core","db-with","datascript.core/db-with",-1263574350,null);XQa=new $APP.G(null,"skip-store?","skip-store?",-484019625);RUa=new $APP.t(null,"db-with-tail","db-with-tail",-1072910014,null);SUa=new $APP.t("datascript.impl.entity","Entity","datascript.impl.entity/Entity",920807502,null);f_=new $APP.G(null,"ref-type","ref-type",-1367328851);X_=new $APP.G("db","unique","db/unique",329396388);TUa=new $APP.G("entity-id","syntax","entity-id/syntax",1921317045);
TQa=new $APP.G(null,"eavt-metadata","eavt-metadata",-1384819842);h4=new $APP.G(null,"sources","sources",-321166424);UUa=new $APP.G("datascript.db","flush-tuples","datascript.db/flush-tuples",-797350002);V4=new $APP.t(null,"delete-addrs","delete-addrs",742195107,null);RQa=new $APP.G(null,"aevt-metadata","aevt-metadata",-1844063817);z0=new $APP.G(null,"tx-meta","tx-meta",1159283194);VUa=new $APP.t(null,"pull-many","pull-many",1857679657,null);
WUa=new $APP.t(null,"conn-from-db","conn-from-db",-184109372,null);XUa=new $APP.t(null,"ground","ground",-1460862835,null);YUa=new $APP.t("datascript","Datom","datascript/Datom",-901340080,null);W1=new $APP.G(null,"pattern","pattern",242135423);wRa=new $APP.G("parser","rule-var","parser/rule-var",-1584354459);c1=new $APP.G("datascript.db","upserted-tempids","datascript.db/upserted-tempids",-1939648402);ZUa=new $APP.t("datascript.core","create-conn","datascript.core/create-conn",-768042587,null);
$Ua=new $APP.G(null,"new","new",-2085437848);dQa=new $APP.G(null,"index","index",-1531685915);aVa=new $APP.t("datascript.core","empty-db","datascript.core/empty-db",-807971396,null);bVa=new $APP.t(null,"stddev","stddev",775056588,null);Q0=new $APP.G(null,"entity-id","entity-id",1485898093);cVa=new $APP.t(null,"store-tail","store-tail",-757879320,null);dVa=new $APP.G("db","cas","db/cas",-451542322);
eVa=new $APP.t("datascript.core","from-serializable","datascript.core/from-serializable",-1560031101,null);Q_=new $APP.G(null,"max-tx","max-tx",1119558339);fVa=new $APP.G("db","tupleType","db/tupleType",448013354);f2=new $APP.G(null,"first-attr","first-attr",-1993039831);b2=new $APP.G(null,"ref?","ref?",1932693720);gVa=new $APP.t(null,"sum","sum",1777518341,null);W4=new $APP.G(null,"attr","attr",-604132353);H2=new $APP.G(null,"visitor","visitor",-1026865865);
X4=new $APP.G(null,"elements","elements",657646735);hVa=new $APP.G("datascript.impl.entity","nf","datascript.impl.entity/nf",-953741353);r4=new $APP.G("query","where","query/where",-1935159429);iVa=new $APP.t("datascript.storage","-store","datascript.storage/-store",-1879938067,null);V0=new $APP.G(null,"context","context",-830191113);jVa=new $APP.t("datascript.db","validate-schema","datascript.db/validate-schema",-783030261,null);
kVa=new $APP.t("datascript.storage","store-impl!","datascript.storage/store-impl!",1553932187,null);lVa=new $APP.t(null,"!\x3d","!\x3d",-201205829,null);i4=new $APP.G(null,"rels","rels",1770187185);mVa=new $APP.t("datascript.core","init-db","datascript.core/init-db",1493526573,null);v0=new $APP.G(null,"db-before","db-before",-553691536);nVa=new $APP.t(null,"adapter","adapter",444204808,null);h1=new $APP.G("datascript.db","value-tempids","datascript.db/value-tempids",244806162);
zQa=new $APP.G(null,"datom","datom",-371556090);YPa=new $APP.G(null,"strong","strong",269529E3);yQa=new $APP.G("transact","unique","transact/unique",-940992320);oVa=new $APP.t("datascript.db","datom","datascript.db/datom",399198004,null);pVa=new $APP.t(null,"seek-datoms","seek-datoms",-1423344839,null);qVa=new $APP.G(null,"old","old",-1825222690);rVa=new $APP.G("db.pull","attr","db.pull/attr",-533298746);z1=new $APP.G(null,"db","db",993250759);
sVa=new $APP.t("datascript.core","conn-from-db","datascript.core/conn-from-db",1590561228,null);pRa=new $APP.G("db.pull","wildcard","db.pull/wildcard",116316031);S_=new $APP.G(null,"pull-patterns","pull-patterns",-343695048);tVa=new $APP.t("datascript.storage","restore","datascript.storage/restore",1486895617,null);uVa=new $APP.t(null,"init-db","init-db",-1059254491,null);vVa=new $APP.G(null,"internal-ctor","internal-ctor",937392560);
wVa=new $APP.t(null,"datom-from-reader","datom-from-reader",1334075127,null);g4=new $APP.G(null,"variable","variable",-281346492);xVa=new $APP.t(null,"restore-conn","restore-conn",-1560700042,null);yVa=new $APP.t(null,"transact!","transact!",817805717,null);h0=new $APP.G("db","attrTuples","db/attrTuples",860541631);c2=new $APP.G(null,"component?","component?",407783990);FRa=new $APP.t(null,"$","$",-1580747756,null);HRa=new $APP.t(null,"aggregate","aggregate",-1142967327,null);
Y0=new $APP.G("db","add","db/add",235286841);T_=new $APP.G(null,"pull-attrs","pull-attrs",-974863177);VQa=new $APP.G(null,"tx","tx",466630418);s3=new $APP.G("parser","binding","parser/binding",-346395752);zVa=new $APP.t("datascript.db","datom-from-reader","datascript.db/datom-from-reader",2070683374,null);AVa=new $APP.t(null,"map-\x3eStorageAdapter","map-\x3eStorageAdapter",1827547664,null);Y4=new $APP.G(null,"element","element",1974019749);zZ=new $APP.G(null,"dirty","dirty",729553281);
BVa=new $APP.t("datascript.storage","map-\x3eStorageAdapter","datascript.storage/map-\x3eStorageAdapter",1938064274,null);Z4=new $APP.t(null,"DB","DB",1622874957,null);CVa=new $APP.t(null,"get-some","get-some",409442058,null);O0=new $APP.G("datascript.db","reverse-tempids","datascript.db/reverse-tempids",1165824950);DVa=new $APP.t(null,"avg","avg",1837937727,null);$4=new $APP.G(null,"unfiltered-db","unfiltered-db",-1363720391);e2=new $APP.G(null,"attrs","attrs",-2090668713);
eQa=new $APP.G(null,"components","components",-1073188942);YZ=new $APP.G(null,"storage","storage",1867247511);EVa=new $APP.t(null,"StorageAdapter","StorageAdapter",106942083,null);e_=new $APP.G(null,"branching-factor","branching-factor",1903198601);FVa=new $APP.t(null,"create-conn","create-conn",2071410861,null);GVa=new $APP.t("datascript.storage","tail-addr","datascript.storage/tail-addr",1147435392,null);$1=new $APP.G(null,"xform","xform",-1725711008);
TRa=new $APP.t(null,"not-join","not-join",-645515756,null);W3=new $APP.G(null,"qwith","qwith",-45809392);gSa=new $APP.G(null,"with","with",-1536296876);HVa=new $APP.t("datascript.core","datoms","datascript.core/datoms",961250077,null);j3=new $APP.G("parser","rule-vars","parser/rule-vars",-1493174969);IVa=new $APP.t("datascript.core","tx0","datascript.core/tx0",1432817831,null);JVa=new $APP.t("datascript.core","entity","datascript.core/entity",-1406213973,null);
h2=new $APP.G(null,"reverse-attrs","reverse-attrs",630097702);j0=new $APP.G("schema","validation","schema/validation",1178447161);sSa=new $APP.G(null,"got","got",-1674745710);a5=new $APP.t(null,"Datom","Datom",1208901035,null);Z1=new $APP.G(null,"reverse?","reverse?",-1672868474);rSa=new $APP.G("query","inputs","query/inputs",1042810394);n0=new $APP.G("db","cardinality","db/cardinality",-104975659);KVa=new $APP.t(null,"serializable","serializable",1941609404,null);
LVa=new $APP.t("datascript.db","db-from-reader","datascript.db/db-from-reader",266573302,null);MVa=new $APP.t(null,"count-distinct","count-distinct",-1566572514,null);NVa=new $APP.t("datascript.storage","storage","datascript.storage/storage",-366769060,null);b5=new $APP.t(null,"datascript.impl.entity","datascript.impl.entity",1561405407,null);OVa=new $APP.t(null,"listen!","listen!",-115577950,null);PVa=new $APP.t("datascript.storage","IStorage","datascript.storage/IStorage",247541567,null);
QVa=new $APP.t("datascript.storage","make-storage-adapter","datascript.storage/make-storage-adapter",521032624,null);RVa=new $APP.t(null,"db-with","db-with",233242042,null);c5=new $APP.G("db.fn","call","db.fn/call",-151594418);SVa=new $APP.t(null,"force?","force?",-815397094,null);TVa=new $APP.t(null,"G__38630","G__38630",-568506244,null);w4=new $APP.G(null,"prefix-clauses","prefix-clauses",1294180028);UVa=new $APP.G("db","doc","db/doc",1913350069);
VVa=new $APP.t(null,"touch","touch",-1158163300,null);WVa=new $APP.t("datascript.core","datom","datascript.core/datom",-1596234155,null);sQa=new $APP.G("db","current-tx","db/current-tx",1600722132);yZ=new $APP.G(null,"address","address",559499426);XVa=new $APP.t(null,"reset-schema!","reset-schema!",1937111832,null);YVa=new $APP.t("datascript.core","restore-conn","datascript.core/restore-conn",-877528562,null);
ZVa=new $APP.t("datascript.storage","db-with-tail","datascript.storage/db-with-tail",-1156179008,null);$Va=new $APP.G(null,"operation","operation",-1267664310);cQa=new $APP.G(null,"index-access","index-access",-1548960265);aWa=new $APP.t(null,"datascript.storage","datascript.storage",315947890,null);Y3=new $APP.G(null,"qin","qin",1372651151);d5=new $APP.t(null,"storage","storage",-787188258,null);a4=new $APP.G(null,"symbols","symbols",1211743);bWa=new $APP.t(null,"squuid","squuid",-1898207797,null);
k2=new $APP.G(null,"fragment","fragment",826775688);cWa=new $APP.G("transaction","filtered","transaction/filtered",1699706605);g1=new $APP.G("datascript.db","internal","datascript.db/internal",-249301114);R_=new $APP.G(null,"rschema","rschema",-1196134054);dWa=new $APP.t(null,"conn-from-datoms","conn-from-datoms",-1502002909,null);e5=new $APP.t(null,"addr+data-seq","addr+data-seq",1516602343,null);eWa=new $APP.t(null,"store","store",-1142205747,null);
fWa=new $APP.t(null,"median","median",-2084869638,null);gWa=new $APP.t("clojure.string","includes?","clojure.string/includes?",-1842146260,null);hWa=new $APP.t(null,"restore","restore",1907703951,null);iWa=new $APP.t(null,"empty-db","empty-db",1486862004,null);q0=new $APP.G(null,"v","v",21465059);F0=new $APP.G("transact","syntax","transact/syntax",-299207078);f5=new $APP.t(null,"-restore","-restore",1124639208,null);dSa=new $APP.G(null,"find","find",496279456);S0=new $APP.G(null,"a","a",-2123407586);
jWa=new $APP.t("datascript","DB","datascript/DB",-487332776,null);nRa=new $APP.G(null,"*","*",-1294732318);k3=new $APP.G(null,"free","free",801364328);kWa=new $APP.G("db.fn","cas","db.fn/cas",-379352172);c_=new $APP.G(null,"shift","shift",997140064);lWa=new $APP.t(null,"tx0","tx0",-4656209,null);XRa=new $APP.G(null,"rule","rule",729973257);mWa=new $APP.t(null,"rseek-datoms","rseek-datoms",857788390,null);nWa=new $APP.t(null,"from-serializable","from-serializable",945516427,null);
oWa=new $APP.t(null,"resolve-datom","resolve-datom",-294110827,null);pWa=new $APP.t(null,"datascript.storage.IStorage","datascript.storage.IStorage",348000814,null);qWa=new $APP.t(null,"IStorage","IStorage",668238001,null);rWa=new $APP.t(null,"get-else","get-else",1312024065,null);V1=new $APP.G(null,"limit","limit",-1355822363);sWa=new $APP.t(null,"-\x3eStorageAdapter","-\x3eStorageAdapter",269379393,null);tWa=new $APP.t("datascript.core","pull-many","datascript.core/pull-many",394351057,null);
g5=new $APP.t(null,"Entity","Entity",1953938502,null);var HPa,R0,iQa;datascript={};HPa=new $APP.ci(null,new $APP.k(null,12,[Z_,null,X_,null,m0,null,fVa,null,YTa,null,new $APP.G("db","noHistory","db/noHistory",-1975127444),null,c0,null,new $APP.G("db.install","_attribute","db.install/_attribute",1853441294),null,n0,null,UVa,null,g0,null,d0,null],null),null);R0=new $APP.ci(null,new $APP.k(null,11,[Z_,null,X_,null,m0,null,fVa,null,YTa,null,c0,null,n0,null,UVa,null,X0,null,g0,null,d0,null],null),null);
iQa=new $APP.ci(null,new $APP.k(null,7,[new $APP.G("db.type","number","db.type/number",-508502688),null,new $APP.G("db.type","instant","db.type/instant",-1024769248),null,e0,null,new $APP.G("db.type","uuid","db.type/uuid",1543195203),null,new $APP.G("db.type","string","db.type/string",1432572808),null,new $APP.G("db.type","keyword","db.type/keyword",205926793),null,b0,null],null),null);var JPa={},SY;$APP.g=OY.prototype;$APP.g.U=function(a,b,c){return QY.j?QY.j(this,b,c):QY.call(null,this,b,c)};$APP.g.ka=function(a,b){return $APP.Jb(this.lf,b)};$APP.g.fa=function(a,b){return $APP.Au(this.lf,b,null)};$APP.g.N=function(a,b,c){return $APP.Au(this.lf,b,c)};$APP.g.V=function(a,b,c){return $APP.rc(this.lf,b,c)};var h5=function h5(a){switch(arguments.length){case 0:return h5.C();case 1:return h5.g(arguments[0]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};h5.C=function(){return h5.g((new Date).getTime())};
h5.g=function(a){return $APP.Ej([$APP.p.g(UY(a/1E3|0,8)),"-",$APP.p.g(UY($APP.ej(65536),4)),"-",$APP.p.g(UY($APP.ej(65536)&4095|16384,4)),"-",$APP.p.g(UY($APP.ej(65536)&16383|32768,4)),"-",$APP.p.g(UY($APP.ej(65536),4)),$APP.p.g(UY($APP.ej(65536),4)),$APP.p.g(UY($APP.ej(65536),4))].join(""))};h5.A=1;var IQa=$APP.ym.h($APP.We,$APP.qg),f0=$APP.ym.h($APP.We,$APP.di);var dZ=Math.pow(2,31),RZ=Math.pow(2,5),sZ=RZ/2,SZ=RZ+sZ>>>1,OPa=RZ-1,bZ=WY($APP.Ii.h(function(a){return Math.pow(2,a)},$APP.$m.j(0,52,5)));$APP.g=AZ.prototype;$APP.g.pf=function(a,b){var c=this;vZ(this,$APP.Gd(c.children));$APP.Lv.g($APP.At.h(function(d,e){var f=c.children[d];e=$APP.l(f)?(e=null==e)?e:f.Of:f;return $APP.l(e)?(f=tZ(f,b),c.$c[d]=f):null},c.$c));a=$Y(b,this,c.sb);c.Of=!1;return c.sb=a};$APP.g.Zh=function(){var a=this.keys;return a[a.length-1]};$APP.g.Ri=function(){return this.keys.length};
$APP.g.ai=function(a,b,c){vZ(this,$APP.Gd(this.children));vZ(b,$APP.Gd(b.children));a=b.sb;$APP.l(a)&&aZ(c,new $APP.H(null,1,5,$APP.I,[a],null));return wZ(this.keys.concat(b.keys),this.children.concat(b.children),this.$c.concat(b.$c),$APP.C([new $APP.k(null,1,[yZ,this.sb],null)]))};
$APP.g.bi=function(a,b){vZ(this,$APP.Gd(this.children));vZ(b,$APP.Gd(b.children));a=iZ(this.keys,b.keys);var c=iZ(this.children,b.children),d=iZ(this.$c,b.$c);return jZ(wZ(a[0],c[0],d[0],$APP.C([new $APP.k(null,1,[yZ,this.sb],null)])),wZ(a[1],c[1],d[1],$APP.C([new $APP.k(null,1,[yZ,b.sb],null)])))};$APP.g.Ve=function(a,b){if($APP.z.h(-1,a))return null;var c=$APP.l(this.$c)?this.$c[a]:null;$APP.ib(this.children[a])?(b=YY(b,c),this.children[a]=b):$APP.l($APP.l(b)?c:b)&&ZY(b,c);return this.children[a]};
$APP.g.$h=function(a,b,c,d){a=RPa(b,this.keys,c);a=this.Ve(a,d);return $APP.l(a)?pZ(a,b,c,d):null};
$APP.g.Xh=function(a,b,c,d){vZ(this,$APP.Gd(this.children));a=fZ(b,this.keys,this.keys.length-2,c);var e=this.Ve(a,d);c=qZ(e,b,c,d);if($APP.l(c)){d=this.keys;e=a+1;var f=c.map(lZ);b=SPa(b,d,a,e,f,f.length)?d:hZ(d,a,e,f);d=hZ(this.children,a,a+1,c);a=hZ(this.$c,a,a+1,uZ(c));if(d.length<=RZ)return[wZ(b,d,a,$APP.C([new $APP.k(null,1,[yZ,this.sb],null)]))];c=d.length>>>1;return[wZ(b.slice(0,c),d.slice(0,c),a.slice(0,c),$APP.C([new $APP.k(null,1,[yZ,this.sb],null)])),xZ(b.slice(c),d.slice(c),a.slice(c))]}return null};
$APP.g.Yh=function(a,b,c,d,e,f,h){vZ(this,$APP.Gd(this.children));var m=RPa(b,this.keys,c);if(-1===m)return null;var r=this.Ve(m,h);a=0<=m-1?this.Ve(m-1,h):null;var n=m+1<this.children.length?this.Ve(m+1,h):null;c=rZ(r,b,c,!1,a,n,h);return $APP.l(c)?(a=$APP.l(a)?m-1:m,m=$APP.l(n)?2+m:1+m,n=this.keys,r=c.map(lZ),b=SPa(b,n,a,m,r,r.length)?n:hZ(n,a,m,r),n=hZ(this.children,a,m,c),c=hZ(this.$c,a,m,uZ(c)),m>a&&(a=$APP.qu.h($APP.hi($APP.kr.h($APP.fb,this.$c.slice(a,m))),$APP.hi($APP.kr.h($APP.fb,c))),$APP.l($APP.l(h)?
$APP.u(a):h)&&aZ(h,a)),TPa(wZ(b,n,c,$APP.C([new $APP.k(null,1,[yZ,this.sb],null)])),d,e,f,h)):null};var XZ=function XZ(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return XZ.l(arguments[0],1<c.length?new $APP.jd(c.slice(1),0,null):null)};XZ.l=function(a,b){var c=$APP.xf(b);b=$APP.D.h(c,yZ);c=$APP.D.j(c,zZ,!0);return new UPa(a,b,c)};XZ.A=1;XZ.G=function(a){var b=$APP.v(a);a=$APP.y(a);return this.l(b,a)};$APP.g=UPa.prototype;
$APP.g.pf=function(a,b){a=this.Of;return $APP.l($APP.l(a)?a:null==this.sb)?(b=$Y(b,this,this.sb),this.Of=!1,this.sb=b):this.sb};$APP.g.Zh=function(){var a=this.keys;return a[a.length-1]};$APP.g.Ri=function(){return this.keys.length};$APP.g.ai=function(a,b,c){a=b.sb;$APP.l(a)&&aZ(c,new $APP.H(null,1,5,$APP.I,[a],null));return XZ.l(this.keys.concat(b.keys),$APP.C([new $APP.k(null,1,[yZ,this.sb],null)]))};
$APP.g.bi=function(a,b){a=iZ(this.keys,b.keys);return jZ(XZ.l(a[0],$APP.C([new $APP.k(null,1,[yZ,this.sb],null)])),XZ.l(a[1],$APP.C([new $APP.k(null,1,[yZ,b.sb],null)])))};$APP.g.Ve=function(a){return this.keys[a]};$APP.g.$h=function(a,b,c,d){a=QPa(b,this.keys,c);return-1===a?null:this.Ve(a,d)};
$APP.g.Xh=function(a,b,c){a=fZ(b,this.keys,this.keys.length-1,c);var d=this.keys.length,e;if(e=a<d)e=this.keys[a],e=0===(b.h?b.h(c,e):b.call(null,c,e));return e?null:d===RZ?(b=d+1>>>1,a>b?[XZ.l(this.keys.slice(0,b),$APP.C([new $APP.k(null,1,[yZ,this.sb],null)])),XZ(gZ(this.keys,b,d,a,a,[c]))]:[XZ.l(gZ(this.keys,0,b,a,a,[c]),$APP.C([new $APP.k(null,1,[yZ,this.sb],null)])),XZ(this.keys.slice(b,d))]):[XZ.l(hZ(this.keys,a,a,[c]),$APP.C([new $APP.k(null,1,[yZ,this.sb],null)]))]};
$APP.g.Yh=function(a,b,c,d,e,f,h){a=QPa(b,this.keys,c);if(-1===a)return null;a=hZ(this.keys,a,a+1,[]);return TPa(XZ.l(a,$APP.C([new $APP.k(null,1,[yZ,this.sb],null)])),d,e,f,h)};$APP.g=$APP.CZ.prototype;$APP.g.ye=function(){var a=this.root;return $APP.l(a)?a:$APP.l(this.sb)?this.root=a=YY(this.storage,this.sb):null};$APP.g.toString=function(){return $APP.Uc(this)};$APP.g.fa=function(a,b){this.ye(null);return pZ(this.root,this.Wc,b,this.storage)};
$APP.g.N=function(a,b,c){this.ye(null);a=pZ(this.root,this.Wc,b,this.storage);return $APP.l(a)?a:c};$APP.g.V=function(a,b,c){return $APP.Ei(b,$APP.Hi,"#{"," ","}",c,$APP.u(this))};$APP.g.W=function(){return this.K};$APP.g.ba=function(){return new $APP.CZ(this.storage,this.root,this.shift,this.O,this.Wc,this.K,this.ad,this.sb)};$APP.g.aa=function(){return this.O};$APP.g.bd=function(){return $APP.ic(MZ.g?MZ.g(this):MZ.call(null,this))};$APP.g.Y=function(){var a=this.ad;return null!=a?a:this.ad=a=$APP.rd(this)};
$APP.g.R=function(a,b){var c=this;return $APP.ce(b)&&this.O===$APP.Gd(b)&&$APP.Qf(function(d){return $APP.ue(c,d)},b)};$APP.g.qe=function(){return this};$APP.g.Ja=function(){return new $APP.CZ(this.storage,XZ([]),0,0,this.Wc,this.K,null,null)};$APP.g.Hg=function(a,b){return UZ.j?UZ.j(this,b,this.Wc):UZ.call(null,this,b,this.Wc)};$APP.g.Ta=function(a,b){a=MZ.g?MZ.g(this):MZ.call(null,this);return $APP.l(a)?$APP.Bu(a,b):b.C?b.C():b.call(null)};
$APP.g.Qa=function(a,b,c){a=MZ.g?MZ.g(this):MZ.call(null,this);return $APP.l(a)?$APP.Bu(a,b,c):c};$APP.g.Zd=function(a,b){return TZ.j?TZ.j(this,b,this.Wc):TZ.call(null,this,b,this.Wc)};$APP.g.Ge=function(){return this};$APP.g.pf=function(a,b){null==this.storage&&(this.storage=b);this.ye(null);null==this.sb&&(this.sb=tZ(this.root,this.storage));return this.sb};$APP.g.Z=function(){return MZ.g?MZ.g(this):MZ.call(null,this)};
$APP.g.Dh=function(a,b){return UZ.j?UZ.j(this,b,this.Wc):UZ.call(null,this,b,this.Wc)};$APP.g.X=function(a,b){return new $APP.CZ(this.storage,this.root,this.shift,this.O,this.Wc,b,this.ad,this.sb)};$APP.g.ca=function(a,b){return TZ.j?TZ.j(this,b,this.Wc):TZ.call(null,this,b,this.Wc)};$APP.g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length-1)].join(""));}};
$APP.g.apply=function(a,b){return this.call.apply(this,[this].concat($APP.vb(b)))};$APP.g.g=function(a){return this.fa(null,a)};$APP.g.h=function(a,b){return this.N(null,a,b)};
var HZ=function HZ(a,b,c,d){var f=cZ(c,d);if(0<d){var h=DZ(b,f,a.storage),m=d-1;a=HZ.F?HZ.F(a,h,c,m):HZ.call(null,a,h,c,m);return null==a?f+1<b.children.length?eZ(0,d,f+1):null:eZ(a,d,f)}return f+1<b.keys.length?eZ(0,0,f+1):null},JZ=function JZ(a,b,c,d){var f=cZ(c,d);if(0===d&&0===f)return null;if(0===d)return eZ(0,0,f-1);if(f>=mZ(b))return GZ(b,c,d,a.storage);var h=DZ(b,f,a.storage);var m=d-1;h=JZ.F?JZ.F(a,h,c,m):JZ.call(null,a,h,c,m);if(null!=h)return eZ(h,d,f);if(0===f)return null;a=GZ(DZ(b,f-
1,a.storage),c,d-1,a.storage);return eZ(a,d,f-1)};$APP.g=VPa.prototype;$APP.g.aa=function(){return this.end-this.yb};$APP.g.da=function(a,b){return this.H[this.yb+b]};$APP.g.Va=function(a,b,c){return 0<=b&&b<this.end-this.yb?this.H[this.yb+b]:c};$APP.g.Uf=function(){if(this.yb===this.end)throw Error("-drop-first of empty chunk");return new $APP.kf(this.H,this.yb+1,this.end)};$APP.g.Ta=function(a,b){return this.yb===this.end?b.C?b.C():b.call(null):$APP.Bu(this.Uf(null),b,this.H[this.yb])};
$APP.g.Qa=function(a,b,c){for(a=this.yb;;)if(a<this.end){var d=this.H[a];c=b.h?b.h(c,d):b.call(null,c,d);if($APP.yd(c))return $APP.q(c);a+=1}else return c};$APP.g=NZ.prototype;$APP.g.toString=function(){return $APP.Uc(this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,$APP.Hi,"("," ",")",c,$APP.u(this))};
$APP.g.Pa=function(){if($APP.l(this.keys)){if(this.idx+1<this.keys.length){var a=this.left+1;return a<this.right?new NZ(this.set,a,this.right,this.keys,this.idx+1):null}a=IZ(this.set,this.left);return a<this.right?this.Zg(a,this.right):null}return null};$APP.g.bd=function(){if($APP.l(this.keys)){var a=this.set,b=KZ(this.set,this.left),c=KZ(this.set,this.right);return PZ.j?PZ.j(a,b,c):PZ.call(null,a,b,c)}return null};$APP.g.R=function(a,b){return $APP.Te(this,b)};
$APP.g.Ta=function(a,b){if(null==this.keys)return b.C?b.C():b.call(null);a=this.Ua(null);var c=this.Pa(null);return null==c?a:$APP.Bu(c,b,a)};$APP.g.Qa=function(a,b,c){a=this.left;for(var d=this.keys,e=this.idx;;){if(null==d)return c;var f=d[e];c=b.h?b.h(c,f):b.call(null,c,f);if($APP.yd(c))return $APP.q(c);if(e+1<d.length)if(a+=1,a<this.right)e+=1;else return c;else if(a=IZ(this.set,a),a<this.right)f=a,d=EZ(this.set,a),e=cZ(a,0),a=f;else return c}};
$APP.g.Ua=function(){return $APP.l(this.keys)?this.keys[this.idx]:null};$APP.g.ob=function(){var a=this.Pa(null);return $APP.l(a)?a:$APP.md};$APP.g.Z=function(){return $APP.l(this.keys)?this:null};$APP.g.zf=function(){var a=this.left,b=this.right;return new VPa(this.keys,this.idx,(a<dZ&&b<dZ?a>>>5===b>>>5:Math.floor(a/RZ)===Math.floor(b/RZ))?cZ(this.right,0):this.keys.length)};$APP.g.Ee=function(){var a=this.bf();return $APP.l(a)?a:$APP.md};
$APP.g.Zg=function(a,b){return new NZ(this.set,a,b,EZ(this.set,a),cZ(a,0))};$APP.g.bf=function(){var a=IZ(this.set,eZ(this.left,0,this.keys.length-1));return a<this.right?this.Zg(a,this.right):null};$APP.g=OZ.prototype;$APP.g.toString=function(){return $APP.Uc(this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,$APP.Hi,"("," ",")",c,$APP.u(this))};
$APP.g.Pa=function(){if($APP.l(this.keys)){if(0<this.idx){var a=this.right-1;return this.left<a?new OZ(this.set,this.left,a,this.keys,this.idx-1):null}a=KZ(this.set,this.right);return this.left<a?this.Zg(this.left,a):null}return null};$APP.g.bd=function(){return $APP.l(this.keys)?LZ(this.set,IZ(this.set,this.left),IZ(this.set,this.right)):null};$APP.g.R=function(a,b){return $APP.Te(this,b)};$APP.g.Ua=function(){return $APP.l(this.keys)?this.keys[this.idx]:null};
$APP.g.ob=function(){var a=this.Pa(null);return $APP.l(a)?a:$APP.md};$APP.g.Z=function(){return $APP.l(this.keys)?this:null};$APP.g.Zg=function(a,b){return new OZ(this.set,a,b,EZ(this.set,b),cZ(b,0))};var uWa=Error,i5=function i5(a){throw $APP.Al.h(["Not implemented: (",$APP.p.g(i5),$APP.Om.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.wf);},j5=function j5(a,b){throw $APP.Al.h(["Not implemented: (",$APP.p.g(j5),$APP.Om.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);},k5=function k5(a){throw $APP.Al.h(["Not implemented: (",$APP.p.g(k5),$APP.Om.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.wf);},l5=function l5(a){switch(arguments.length){case 2:return l5.h(arguments[0],
arguments[1]);case 3:return l5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};l5.h=function(a,b){throw $APP.Al.h(["Not implemented: (",$APP.p.g(l5),$APP.Om.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);};l5.j=function(a,b,c){throw $APP.Al.h(["Not implemented: (",$APP.p.g(l5),$APP.Om.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.wf);};l5.A=3;
var m5=function m5(a,b,c){throw $APP.Al.h(["Not implemented: (",$APP.p.g(m5),$APP.Om.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.wf);},n5=function n5(a,b,c){throw $APP.Al.h(["Not implemented: (",$APP.p.g(n5),$APP.Om.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.wf);};$APP.g=$APP.l_.prototype;$APP.g.ib=function(){return 0<this.tx?this.tx:-this.tx};$APP.g.ld=function(){return 0<this.tx};$APP.g.Y=function(){return 0===this.ad?this.ad=i5(this):this.ad};
$APP.g.R=function(a,b){return b instanceof $APP.l_&&j5(this,b)};$APP.g.Z=function(){return k5(this)};$APP.g.fa=function(a,b){return n5(this,b,null)};$APP.g.N=function(a,b,c){return n5(this,b,c)};$APP.g.da=function(a,b){return l5.h(this,b)};$APP.g.Va=function(a,b,c){return l5.j(this,b,c)};$APP.g.U=function(a,b,c){return m5(this,b,c)};$APP.g.V=function(a,b,c){return $APP.Ei(b,$APP.Hi,"#datascript/Datom ["," ","]",c,new $APP.H(null,5,5,$APP.I,[this.e,this.a,this.v,this.ib(null),this.ld(null)],null))};
GPa("datascript.db.Datom",$APP.l_);var m_=function m_(a){switch(arguments.length){case 3:return m_.j(arguments[0],arguments[1],arguments[2]);case 4:return m_.F(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return m_.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};m_.j=function(a,b,c){return new $APP.l_(a,b,c,536870912,0,0)};m_.F=function(a,b,c,d){return new $APP.l_(a,b,c,d,0,0)};
m_.P=function(a,b,c,d,e){return new $APP.l_(a,b,c,$APP.l(e)?d:-d,0,0)};m_.A=5;i5=function(){return null};i5=function(a){return i_(i_($APP.dd(a.e),$APP.dd(a.a)),$APP.dd(a.v))};j5=function(){return null};j5=function(a,b){return a.e===b.e&&$APP.z.h(a.a,b.a)&&$APP.z.h(a.v,b.v)};k5=function(){return null};k5=function(a){return new $APP.E(null,a.e,new $APP.E(null,a.a,new $APP.E(null,a.v,new $APP.E(null,a.ib(null),new $APP.E(null,a.ld(null),null,1,null),2,null),3,null),4,null),5,null)};n5=function(){return null};
n5=function(a,b,c){if(b instanceof $APP.G)switch(b instanceof $APP.G?b.S:null){case "e":return a.e;case "a":return a.a;case "v":return a.v;case "tx":return a.ib(null);case "added":return a.ld(null);default:return c}else if("string"===typeof b)switch(b){case "e":return a.e;case "a":return a.a;case "v":return a.v;case "tx":return a.ib(null);case "added":return a.ld(null);default:return c}else return c};
l5=function(a){switch(arguments.length){case 2:return l5.h(arguments[0],arguments[1]);case 3:return l5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};l5.h=function(){return null};l5.j=function(){return null};l5.A=3;
l5=function(a){switch(arguments.length){case 2:return l5.h(arguments[0],arguments[1]);case 3:return l5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};l5.h=function(a,b){switch(b){case 0:return a.e;case 1:return a.a;case 2:return a.v;case 3:return a.ib(null);case 4:return a.ld(null);default:throw Error(["Datom/-nth: Index out of bounds: ",$APP.p.g(b)].join(""));}};
l5.j=function(a,b,c){switch(b){case 0:return a.e;case 1:return a.a;case 2:return a.v;case 3:return a.ib(null);case 4:return a.ld(null);default:return c}};l5.A=3;m5=function(){return null};
m5=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "e":return m_.P(c,a.a,a.v,a.ib(null),a.ld(null));case "a":return m_.P(a.e,c,a.v,a.ib(null),a.ld(null));case "v":return m_.P(a.e,a.a,c,a.ib(null),a.ld(null));case "tx":return m_.P(a.e,a.a,a.v,c,a.ld(null));case "added":return m_.P(a.e,a.a,a.v,a.ib(null),c);default:throw new uWa(["invalid key for #datascript/Datom: ",$APP.p.g(b)].join(""));}};
var p_=function p_(a,b){throw $APP.Al.h(["Not implemented: (",$APP.p.g(p_),$APP.Om.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);};p_=function(){return null};
p_=function(a,b){try{return $APP.z.h(a,b)?0:$APP.de(a)&&$APP.de(b)?aQa(a,b):(null!=a?a.M&2048||$APP.cd===a.Xd||(a.M?0:$APP.ob($APP.Hc,a)):$APP.ob($APP.Hc,a))?$APP.Ic(a,b):$APP.pb(a)===$APP.pb(b)?"number"===typeof a||"string"===typeof a||$APP.gb(a)||!0===a||!1===a?$APP.Ma(a,b):$APP.dd(a)-$APP.dd(b):$Pa(a,b)}catch(d){if(d instanceof Error){var c=d;if($APP.pb(a)===$APP.pb(b))throw c;return $Pa(a,b)}throw d;}};
var o5=function o5(a){throw $APP.Al.h(["Not implemented: (",$APP.p.g(o5),$APP.Om.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.wf);},p5=function p5(a){throw $APP.Al.h(["Not implemented: (",$APP.p.g(p5),$APP.Om.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.wf);},q5=function q5(a,b){throw $APP.Al.h(["Not implemented: (",$APP.p.g(q5),$APP.Om.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);},u1=function u1(a){throw $APP.Al.h(["Not implemented: (",$APP.p.g(u1),
$APP.Om.h(" ",new $APP.H(null,1,5,$APP.I,[a],null))].join(""),$APP.wf);},G_=function G_(a,b){throw $APP.Al.h(["Not implemented: (",$APP.p.g(G_),$APP.Om.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);},r5=function r5(a,b,c){throw $APP.Al.h(["Not implemented: (",$APP.p.g(r5),$APP.Om.h(" ",new $APP.H(null,3,5,$APP.I,[a,b,c],null))].join(""),$APP.wf);},s5=function s5(a,b,c,d,e,f,h){throw $APP.Al.h(["Not implemented: (",$APP.p.g(s5),$APP.Om.h(" ",new $APP.H(null,7,5,$APP.I,[a,b,c,d,e,
f,h],null))].join(""),$APP.wf);},t5=function t5(a,b,c,d,e,f,h,m){throw $APP.Al.h(["Not implemented: (",$APP.p.g(t5),$APP.Om.h(" ",new $APP.H(null,8,5,$APP.I,[a,b,c,d,e,f,h,m],null))].join(""),$APP.wf);};$APP.g=$APP.L_.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "schema":return this.rc;case "eavt":return this.Wb;case "aevt":return this.tc;case "avet":return this.fc;case "max-eid":return this.Lc;case "max-tx":return this.Mc;case "rschema":return this.vc;case "pull-patterns":return this.Cc;case "pull-attrs":return this.Bc;case "hash":return this.hash;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.db.DB{",", ","}",c,$APP.K.h(new $APP.H(null,10,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.M_,this.rc],null),new $APP.H(null,2,5,$APP.I,[$APP.N_,this.Wb],null),new $APP.H(null,2,5,$APP.I,[O_,this.tc],null),new $APP.H(null,2,5,$APP.I,[F_,this.fc],null),new $APP.H(null,2,5,$APP.I,[P_,this.Lc],null),new $APP.H(null,2,5,$APP.I,[Q_,this.Mc],null),new $APP.H(null,2,5,$APP.I,[R_,this.vc],null),new $APP.H(null,
2,5,$APP.I,[S_,this.Cc],null),new $APP.H(null,2,5,$APP.I,[T_,this.Bc],null),new $APP.H(null,2,5,$APP.I,[U_,this.hash],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,10,new $APP.H(null,10,5,$APP.I,[$APP.M_,$APP.N_,O_,F_,P_,Q_,R_,S_,T_,U_],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new $APP.L_(this.rc,this.Wb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,this.o,this.D)};
$APP.g.aa=function(){return 10+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1515640948^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.rc,b.rc)&&$APP.z.h(this.Wb,b.Wb)&&$APP.z.h(this.tc,b.tc)&&$APP.z.h(this.fc,b.fc)&&$APP.z.h(this.Lc,b.Lc)&&$APP.z.h(this.Mc,b.Mc)&&$APP.z.h(this.vc,b.vc)&&$APP.z.h(this.Cc,b.Cc)&&$APP.z.h(this.Bc,b.Bc)&&$APP.z.h(this.hash,b.hash)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,10,[$APP.M_,null,Q_,null,U_,null,O_,null,F_,null,P_,null,$APP.N_,null,T_,null,S_,null,R_,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new $APP.L_(this.rc,this.Wb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "schema":case "eavt":case "aevt":case "avet":case "max-eid":case "max-tx":case "rschema":case "pull-patterns":case "pull-attrs":case "hash":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.M_,b):$APP.bf.call(null,$APP.M_,b))?new $APP.L_(c,this.Wb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.N_,b):$APP.bf.call(null,$APP.N_,b))?new $APP.L_(this.rc,c,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(O_,b):$APP.bf.call(null,O_,b))?new $APP.L_(this.rc,this.Wb,c,this.fc,this.Lc,this.Mc,this.vc,
this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(F_,b):$APP.bf.call(null,F_,b))?new $APP.L_(this.rc,this.Wb,this.tc,c,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(P_,b):$APP.bf.call(null,P_,b))?new $APP.L_(this.rc,this.Wb,this.tc,this.fc,c,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(Q_,b):$APP.bf.call(null,Q_,b))?new $APP.L_(this.rc,this.Wb,this.tc,this.fc,this.Lc,c,this.vc,this.Cc,
this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(R_,b):$APP.bf.call(null,R_,b))?new $APP.L_(this.rc,this.Wb,this.tc,this.fc,this.Lc,this.Mc,c,this.Cc,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(S_,b):$APP.bf.call(null,S_,b))?new $APP.L_(this.rc,this.Wb,this.tc,this.fc,this.Lc,this.Mc,this.vc,c,this.Bc,this.hash,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(T_,b):$APP.bf.call(null,T_,b))?new $APP.L_(this.rc,this.Wb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,
c,this.hash,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(U_,b):$APP.bf.call(null,U_,b))?new $APP.L_(this.rc,this.Wb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,c,this.B,this.o,null):new $APP.L_(this.rc,this.Wb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,10,5,$APP.I,[new $APP.ve($APP.M_,this.rc,null),new $APP.ve($APP.N_,this.Wb,null),new $APP.ve(O_,this.tc,null),new $APP.ve(F_,this.fc,null),new $APP.ve(P_,this.Lc,null),new $APP.ve(Q_,this.Mc,null),new $APP.ve(R_,this.vc,null),new $APP.ve(S_,this.Cc,null),new $APP.ve(T_,this.Bc,null),new $APP.ve(U_,this.hash,null)],null),this.o))};
$APP.g.X=function(a,b){return new $APP.L_(this.rc,this.Wb,this.tc,this.fc,this.Lc,this.Mc,this.vc,this.Cc,this.Bc,this.hash,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};
$APP.g.Ji=function(a,b){a:for(var c=$APP.N_.g(b),d=b=a=$APP.qg,e=this.Wb;;){if($APP.ae(e)){var f=new $APP.H(null,3,5,$APP.I,[$APP.yf(a),$APP.yf($APP.fh.h(b,c)),$APP.yf(d)],null);break a}if($APP.ae(c)){f=new $APP.H(null,3,5,$APP.I,[$APP.yf($APP.fh.h(a,e)),$APP.yf(b),$APP.yf(d)],null);break a}var h=$APP.v(e),m=$APP.v(c);try{f=v_.h?v_.h(h,m):v_.call(null,h,m)}catch(r){if(r instanceof Error)f=lTa;else throw r;}if($APP.z.h(f,lTa))a=$APP.We.h(a,h),b=$APP.We.h(b,m),e=$APP.y(e),c=$APP.y(c);else if(0===f)d=
$APP.We.h(d,h),e=$APP.y(e),c=$APP.y(c);else if(0>f)a=$APP.We.h(a,h),e=$APP.y(e);else if(0<f)b=$APP.We.h(b,m),c=$APP.y(c);else{f=null;break a}}return f};$APP.g.Ka=$APP.cd;$APP.g.V=function(a,b,c){return r5(this,b,c)};$APP.g.sh=$APP.cd;$APP.g.aa=function(){return $APP.Gd(this.Wb)};$APP.g.Wj=$APP.cd;$APP.g.bd=function(){return $APP.ic(this.Wb)};$APP.g.Vf=$APP.cd;$APP.g.Y=function(){return o5(this)};$APP.g.R=function(a,b){return q5(this,b)};$APP.g.th=$APP.cd;
$APP.g.qe=function(){return $APP.Am.j($APP.Am.j($APP.Am.j(this,$APP.N_,$APP.rf),O_,$APP.rf),F_,$APP.rf)};$APP.g.uh=$APP.cd;$APP.g.Ja=function(){return $APP.Wd(u1(new $APP.k(null,5,[$APP.M_,this.rc,R_,this.vc,$APP.N_,$APP.Sd(this.Wb),O_,$APP.Sd(this.tc),F_,$APP.Sd(this.fc)],null)),$APP.Xd(this))};$APP.g.Zd=function(){throw $APP.Al.h("datascript.DB/conj! is not supported",$APP.wf);};$APP.g.Ge=function(){return $APP.Am.j($APP.Am.j($APP.Am.j(this,$APP.N_,$APP.sf),O_,$APP.sf),F_,$APP.sf)};$APP.g.Ki=function(){return oUa};
$APP.g.Oh=function(a,b,c,d,e,f){H_(this,b,c,d,e,f);return VZ($APP.D.h(this,b),t5(this,b,c,d,e,f,0,536870912),t5(this,b,c,d,e,f,2147483647,2147483647))};$APP.g.Rh=function(a,b,c,d,e,f){H_(this,b,c,d,e,f);return VZ($APP.D.h(this,b),t5(this,b,c,d,e,f,0,536870912),m_.F(2147483647,null,null,2147483647))};$APP.g.Qh=function(a,b,c,d,e,f){H_(this,b,c,d,e,f);return WZ($APP.D.h(this,b),t5(this,b,c,d,e,f,2147483647,2147483647),m_.F(0,null,null,536870912))};
$APP.g.Ph=function(a,b,c,d){H_(this,F_,b,null,null,null);if(!(b instanceof $APP.G||"string"===typeof b))throw a=new $APP.E(null,NTa,new $APP.E(null,Q4,new $APP.E(null,b,new $APP.E(null,c,new $APP.E(null,d,null,1,null),2,null),3,null),4,null),5,null),$APP.Al.h(["Bad entity attribute ",$APP.aj.l($APP.C([b]))," at ",$APP.aj.l($APP.C([a])),", expected keyword or string"].join(""),new $APP.k(null,3,[k0,b,V0,a,$APP.RI,F0],null));return VZ(this.fc,s5(this,null,b,c,null,0,536870912),s5(this,null,b,d,null,
2147483647,2147483647))};$APP.g.Lh=$APP.cd;$APP.g.Nh=function(){return this.rc};$APP.g.Mh=function(a,b){a=this.vc;return a.g?a.g(b):a.call(null,b)};$APP.g.Li=$APP.cd;
$APP.g.Sh=function(a,b){a=$APP.A.j(b,0,null);var c=$APP.A.j(b,1,null),d=$APP.A.j(b,2,null),e=$APP.A.j(b,3,null);b=this.Wb;var f=this.tc,h=this.fc;$APP.ue(K_(this,a0),c);return $APP.l(a)?$APP.l(c)?null!=d?$APP.l(e)?VZ(b,m_.F(a,c,d,e),m_.F(a,c,d,e)):VZ(b,m_.F(a,c,d,536870912),m_.F(a,c,d,2147483647)):$APP.l(e)?$APP.Xi($APP.og.g(function(m){return $APP.z.h(e,m.ib(null))}),VZ(b,m_.F(a,c,null,536870912),m_.F(a,c,null,2147483647))):VZ(b,m_.F(a,c,null,536870912),m_.F(a,c,null,2147483647)):null!=d?$APP.l(e)?
$APP.Xi($APP.og.g(function(m){return $APP.z.h(d,m.v)&&$APP.z.h(e,m.ib(null))}),VZ(b,m_.F(a,null,null,536870912),m_.F(a,null,null,2147483647))):$APP.Xi($APP.og.g(function(m){return $APP.z.h(d,m.v)}),VZ(b,m_.F(a,null,null,536870912),m_.F(a,null,null,2147483647))):$APP.l(e)?$APP.Xi($APP.og.g(function(m){return $APP.z.h(e,m.ib(null))}),VZ(b,m_.F(a,null,null,536870912),m_.F(a,null,null,2147483647))):VZ(b,m_.F(a,null,null,536870912),m_.F(a,null,null,2147483647)):$APP.l(c)?null!=d?$APP.l(e)?G_(this,c)?$APP.Xi($APP.og.g(function(m){return $APP.z.h(e,
m.ib(null))}),VZ(h,m_.F(0,c,d,536870912),m_.F(2147483647,c,d,2147483647))):$APP.Xi($APP.og.g(function(m){return $APP.z.h(d,m.v)&&$APP.z.h(e,m.ib(null))}),VZ(f,m_.F(0,c,null,536870912),m_.F(2147483647,c,null,2147483647))):G_(this,c)?VZ(h,m_.F(0,c,d,536870912),m_.F(2147483647,c,d,2147483647)):$APP.Xi($APP.og.g(function(m){return $APP.z.h(d,m.v)}),VZ(f,m_.F(0,c,null,536870912),m_.F(2147483647,c,null,2147483647))):$APP.l(e)?$APP.Xi($APP.og.g(function(m){return $APP.z.h(e,m.ib(null))}),VZ(f,m_.F(0,c,null,
536870912),m_.F(2147483647,c,null,2147483647))):VZ(f,m_.F(0,c,null,536870912),m_.F(2147483647,c,null,2147483647)):null!=d?$APP.l(e)?$APP.og.h(function(m){return $APP.z.h(d,m.v)&&$APP.z.h(e,m.ib(null))},b):$APP.og.h(function(m){return $APP.z.h(d,m.v)},b):$APP.l(e)?$APP.og.h(function(m){return $APP.z.h(e,m.ib(null))},b):b};$APP.g=W_.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "unfiltered-db":return this.wc;case "pred":return this.cc;case "hash":return this.hash;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.db.FilteredDB{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$4,this.wc],null),new $APP.H(null,2,5,$APP.I,[$APP.lB,this.cc],null),new $APP.H(null,2,5,$APP.I,[U_,this.hash],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,3,new $APP.H(null,3,5,$APP.I,[$4,$APP.lB,U_],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new W_(this.wc,this.cc,this.hash,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-351969977^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.wc,b.wc)&&$APP.z.h(this.cc,b.cc)&&$APP.z.h(this.hash,b.hash)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,3,[U_,null,$APP.lB,null,$4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new W_(this.wc,this.cc,this.hash,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "unfiltered-db":case "pred":case "hash":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($4,b):$APP.bf.call(null,$4,b))?new W_(c,this.cc,this.hash,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.lB,b):$APP.bf.call(null,$APP.lB,b))?new W_(this.wc,c,this.hash,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(U_,b):$APP.bf.call(null,U_,b))?new W_(this.wc,this.cc,c,this.B,this.o,null):new W_(this.wc,this.cc,this.hash,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.ve($4,this.wc,null),new $APP.ve($APP.lB,this.cc,null),new $APP.ve(U_,this.hash,null)],null),this.o))};$APP.g.X=function(a,b){return new W_(this.wc,this.cc,this.hash,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.yi=$APP.cd;$APP.g.fa=function(){throw Error("-lookup is not supported on FilteredDB");};
$APP.g.N=function(){throw Error("-lookup is not supported on FilteredDB");};$APP.g.Ka=$APP.cd;$APP.g.V=function(a,b,c){return r5(this,b,c)};$APP.g.sh=$APP.cd;$APP.g.aa=function(){return $APP.Gd(B_(this,$APP.N_,null,null,null,null))};$APP.g.Vf=$APP.cd;$APP.g.Y=function(){return p5(this)};$APP.g.R=function(a,b){return q5(this,b)};$APP.g.uh=$APP.cd;$APP.g.Ja=function(){throw Error("-empty is not supported on FilteredDB");};$APP.g.rh=$APP.cd;
$APP.g.ka=function(){throw Error("-contains-key? is not supported on FilteredDB");};$APP.g.U=function(){throw Error("-assoc is not supported on FilteredDB");};$APP.g.Oh=function(a,b,c,d,e,f){return $APP.og.h(this.cc,B_(this.wc,b,c,d,e,f))};$APP.g.Rh=function(a,b,c,d,e,f){return $APP.og.h(this.cc,C_(this.wc,b,c,d,e,f))};$APP.g.Qh=function(a,b,c,d,e,f){return $APP.og.h(this.cc,D_(this.wc,b,c,d,e,f))};$APP.g.Ph=function(a,b,c,d){return $APP.og.h(this.cc,E_(this.wc,b,c,d))};$APP.g.Lh=$APP.cd;
$APP.g.Nh=function(){return J_(this.wc)};$APP.g.Mh=function(a,b){return K_(this.wc,b)};$APP.g.Li=$APP.cd;$APP.g.Sh=function(a,b){return $APP.og.h(this.cc,z_(this.wc,b))};u1=function(a){a=$APP.xf(a);$APP.D.h(a,$APP.M_);$APP.D.h(a,$APP.N_);$APP.D.h(a,O_);$APP.D.h(a,F_);$APP.D.h(a,P_);$APP.D.h(a,Q_);return null};
u1=function(a){var b=$APP.xf(a);a=$APP.D.h(b,$APP.M_);var c=$APP.D.h(b,$APP.N_),d=$APP.D.h(b,O_),e=$APP.D.h(b,F_),f=$APP.D.h(b,P_),h=$APP.D.h(b,Q_);h=$APP.l(h)?h:536870912;var m=$APP.cj.g(0);f=$APP.l(f)?f:0;var r=TY(),n=TY();b=R_.g(b);b=$APP.l(b)?b:i0($APP.pl.l($APP.C([new $APP.k(null,1,[g0,new $APP.k(null,1,[X_,Y_],null)],null),a])));return V_($APP.Ih([$APP.M_,Q_,U_,O_,F_,P_,$APP.N_,T_,S_,R_],[a,h,m,d,e,f,c,r,n,b]))};o5=function(){return null};
o5=function(a){var b=$APP.q(a.hash);return 0===b?$APP.ag(a.hash,i_($APP.dd(a.rc),$APP.dd(a.Wb))):b};p5=function(){return null};p5=function(a){var b=$APP.q(a.hash);(function(){var c=B_(a,$APP.N_,null,null,null,null);return $APP.l(c)?c:$APP.di})();return 0===b?(b=function(){var c=B_(a,$APP.N_,null,null,null,null);return $APP.l(c)?c:$APP.di}(),$APP.ag(a.hash,i_($APP.dd(J_(a)),$APP.rd(b)))):b};q5=function(){return null};
q5=function(a,b){var c;if(c=b instanceof $APP.L_||b instanceof W_)if(c=$APP.z.h(J_(a),J_(b)))a:for(a=B_(a,$APP.N_,null,null,null,null),c=B_(b,$APP.N_,null,null,null,null),b=$APP.u(a),a=$APP.u(c);;){if(null==b){c=null==a;break a}if($APP.z.h($APP.v(b),$APP.v(a)))b=$APP.y(b),a=$APP.y(a);else{c=!1;break a}}return c};r5=function(){return null};
r5=function(a,b,c){$APP.nc(b,"#datascript/DB {");$APP.nc(b,":schema ");$APP.Hi(J_(a),b,c);$APP.nc(b,", :datoms ");$APP.Ei(b,function(d,e,f){return $APP.Ei(e,$APP.Hi,"["," ","]",f,new $APP.H(null,4,5,$APP.I,[d.e,d.a,d.v,$APP.j_(d)],null))},"["," ","]",c,B_(a,$APP.N_,null,null,null,null));return $APP.nc(b,"}")};
var I0=function I0(a,b){throw $APP.Al.h(["Not implemented: (",$APP.p.g(I0),$APP.Om.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);},H0=function H0(a,b){throw $APP.Al.h(["Not implemented: (",$APP.p.g(H0),$APP.Om.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);};s5=function(){return null};
s5=function(a,b,c,d,e,f,h){if(null!=c&&!(c instanceof $APP.G||"string"===typeof c))throw a=new $APP.E(null,oWa,new $APP.E(null,Q4,new $APP.E(null,b,new $APP.E(null,c,new $APP.E(null,d,new $APP.E(null,e,null,1,null),2,null),3,null),4,null),5,null),6,null),$APP.Al.h(["Bad entity attribute ",$APP.aj.l($APP.C([c]))," at ",$APP.aj.l($APP.C([a])),", expected keyword or string"].join(""),new $APP.k(null,3,[k0,c,V0,a,$APP.RI,F0],null));return m_.F(null!=b?I0(a,b):f,c,null!=d&&H0(a,c)?I0(a,d):d,null!=e?I0(a,
e):h)};t5=function(){return null};t5=function(a,b,c,d,e,f,h,m){b=b instanceof $APP.G?b.S:null;switch(b){case "eavt":return s5(a,c,d,e,f,h,m);case "aevt":return s5(a,d,c,e,f,h,m);case "avet":return s5(a,e,c,d,f,h,m);default:throw Error(["No matching clause: ",$APP.p.g(b)].join(""));}};$APP.g=u0.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "db-before":return this.Ad;case "db-after":return this.zd;case "tx-data":return this.Dd;case "tempids":return this.Bd;case "tx-meta":return this.Ed;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.db.TxReport{",", ","}",c,$APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[v0,this.Ad],null),new $APP.H(null,2,5,$APP.I,[w0,this.zd],null),new $APP.H(null,2,5,$APP.I,[x0,this.Dd],null),new $APP.H(null,2,5,$APP.I,[y0,this.Bd],null),new $APP.H(null,2,5,$APP.I,[z0,this.Ed],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,5,new $APP.H(null,5,5,$APP.I,[v0,w0,x0,y0,z0],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new u0(this.Ad,this.zd,this.Dd,this.Bd,this.Ed,this.B,this.o,this.D)};$APP.g.aa=function(){return 5+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-2022644885^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.Ad,b.Ad)&&$APP.z.h(this.zd,b.zd)&&$APP.z.h(this.Dd,b.Dd)&&$APP.z.h(this.Bd,b.Bd)&&$APP.z.h(this.Ed,b.Ed)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,5,[y0,null,w0,null,v0,null,x0,null,z0,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new u0(this.Ad,this.zd,this.Dd,this.Bd,this.Ed,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "db-before":case "db-after":case "tx-data":case "tempids":case "tx-meta":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(v0,b):$APP.bf.call(null,v0,b))?new u0(c,this.zd,this.Dd,this.Bd,this.Ed,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(w0,b):$APP.bf.call(null,w0,b))?new u0(this.Ad,c,this.Dd,this.Bd,this.Ed,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(x0,b):$APP.bf.call(null,x0,b))?new u0(this.Ad,this.zd,c,this.Bd,this.Ed,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(y0,b):$APP.bf.call(null,y0,b))?new u0(this.Ad,this.zd,this.Dd,c,this.Ed,this.B,this.o,
null):$APP.l($APP.bf.h?$APP.bf.h(z0,b):$APP.bf.call(null,z0,b))?new u0(this.Ad,this.zd,this.Dd,this.Bd,c,this.B,this.o,null):new u0(this.Ad,this.zd,this.Dd,this.Bd,this.Ed,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.ve(v0,this.Ad,null),new $APP.ve(w0,this.zd,null),new $APP.ve(x0,this.Dd,null),new $APP.ve(y0,this.Bd,null),new $APP.ve(z0,this.Ed,null)],null),this.o))};
$APP.g.X=function(a,b){return new u0(this.Ad,this.zd,this.Dd,this.Bd,this.Ed,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};A0=function(a,b,c){return $APP.ue(K_(a,c),b)};B0=function(a,b){return A0(a,b,a0)};H0=function(){return null};H0=function(a,b){return A0(a,b,b0)};C0=function(a,b){return A0(a,b,c0)};G_=function(){return null};G_=function(a,b){return A0(a,b,Z_)};D0=function(a,b){return A0(a,b,e0)};
oQa=function(a,b){return A0(a,b,h0)};E0=function(a){if(a instanceof $APP.G)return $APP.z.h("_",$APP.A.h($APP.ji(a),0));if("string"===typeof a)return $APP.Pa($APP.vi(/(?:([^\/]+)\/)?_([^\/]+)/,a));throw $APP.Al.h(["Bad attribute type: ",$APP.aj.l($APP.C([a])),", expected keyword or string"].join(""),new $APP.k(null,2,[$APP.RI,F0,k0,a],null));};
J0=function(a,b){for(;;){if("number"===typeof b&&0<b){if(2147483647<b)throw $APP.Al.h(["Highest supported entity id is ",$APP.aj.l($APP.C([2147483647])),", got ",$APP.aj.l($APP.C([b]))].join(""),new $APP.k(null,2,[$APP.RI,Q0,$APP.YI,b],null));return b}if($APP.de(b)){var c=b,d=$APP.A.j(c,0,null);c=$APP.A.j(c,1,null);if($APP.Zh.h($APP.Gd(b),2))throw $APP.Al.h(["Lookup ref should contain 2 elements: ",$APP.aj.l($APP.C([b]))].join(""),new $APP.k(null,2,[$APP.RI,JTa,Q0,b],null));if(A0(a,d,X_))return D0(a,
d)?(b=pQa(a,d,c),$APP.pL.g($APP.v(B_(a,F_,d,b,null,null)))):null==c?null:$APP.pL.g($APP.v(B_(a,F_,d,c,null,null)));throw $APP.Al.h(["Lookup ref attribute should be marked as :db/unique: ",$APP.aj.l($APP.C([b]))].join(""),new $APP.k(null,2,[$APP.RI,qTa,Q0,b],null));}if($APP.gb(b))b=$APP.C(b);else{if(b instanceof $APP.G)return $APP.pL.g($APP.v(B_(a,F_,g0,b,null,null)));throw $APP.Al.h(["Expected number or lookup ref for entity id, got ",$APP.aj.l($APP.C([b]))].join(""),new $APP.k(null,2,[$APP.RI,TUa,
Q0,b],null));}}};qQa=function(a,b){return $APP.z.h(b,$APP.pL.g($APP.v(C_(a,$APP.N_,b,null,null,null))))};I0=function(){return null};I0=function(a,b){a=J0(a,b);if($APP.l(a))return a;throw $APP.Al.h(["Nothing found for entity id ",$APP.aj.l($APP.C([b]))].join(""),new $APP.k(null,2,[$APP.RI,$Ta,Q0,b],null));};var rQa=$APP.cj.g(0);K0.prototype.V=function(a,b,c){return $APP.Ei(b,$APP.Hi,"#datascript/AutoTempid ["," ","]",c,new $APP.H(null,1,5,$APP.I,[this.id],null))};
VY=function(a){return a instanceof K0};
var u5=function u5(a,b){return function f(e){return new $APP.gf(null,function(){for(;;){var h=$APP.u(e);if(h){var m=h;if($APP.je(m)){var r=$APP.Kc(m),n=$APP.Gd(r),w=$APP.jf(n);return function(){for(var B=0;;)if(B<n){var F=$APP.Td(r,B);$APP.nf(w,$APP.ee(F)?$APP.Ge(function(){return function(M,U,Y){return U instanceof $APP.G||"string"===typeof U?H0(a,U)&&B0(a,U)&&$APP.de(Y)?$APP.$h.j(M,U,u5.h?u5.h(a,Y):u5.call(null,a,Y)):H0(a,U)?$APP.$h.j(M,U,$APP.v(function(){var ba=new $APP.H(null,1,5,$APP.I,[Y],
null);return u5.h?u5.h(a,ba):u5.call(null,a,ba)}())):E0(U)&&$APP.de(Y)?$APP.$h.j(M,U,u5.h?u5.h(a,Y):u5.call(null,a,Y)):E0(U)?$APP.$h.j(M,U,$APP.v(function(){var ba=new $APP.H(null,1,5,$APP.I,[Y],null);return u5.h?u5.h(a,ba):u5.call(null,a,ba)}())):$APP.$h.j(M,U,Y):$APP.$h.j(M,U,Y)}}(B,F,r,n,w,m,h),$APP.wf,$APP.ue(F,X0)?F:$APP.$h.j(F,X0,new K0)):function(){var M=$APP.dg(null);if(function(){var la=$APP.de(F);if(la){la=$APP.Rc(M,F);var ta=$APP.A.j(la,0,null);$APP.A.j(la,1,null);var pa=$APP.A.j(la,2,
null);$APP.A.j(la,3,null);return $APP.z.h(Y0,ta)&&H0(a,pa)&&!0}return la}()){var U=$APP.q(M),Y=$APP.A.j(U,0,null),ba=$APP.A.j(U,1,null),ca=$APP.A.j(U,2,null),ea=$APP.A.j(U,3,null);return B0(a,ca)&&$APP.de(ea)?new $APP.H(null,4,5,$APP.I,[Y,ba,ca,u5.h?u5.h(a,ea):u5.call(null,a,ea)],null):new $APP.H(null,4,5,$APP.I,[Y,ba,ca,$APP.v(function(){var la=new $APP.H(null,1,5,$APP.I,[ea],null);return u5.h?u5.h(a,la):u5.call(null,a,la)}())],null)}return F}());B+=1}else return!0}()?$APP.mf($APP.of(w),f($APP.Lc(m))):
$APP.mf($APP.of(w),null)}var x=$APP.v(m);return $APP.$e($APP.ee(x)?$APP.Ge(function(){return function(B,F,M){return F instanceof $APP.G||"string"===typeof F?H0(a,F)&&B0(a,F)&&$APP.de(M)?$APP.$h.j(B,F,u5.h?u5.h(a,M):u5.call(null,a,M)):H0(a,F)?$APP.$h.j(B,F,$APP.v(function(){var U=new $APP.H(null,1,5,$APP.I,[M],null);return u5.h?u5.h(a,U):u5.call(null,a,U)}())):E0(F)&&$APP.de(M)?$APP.$h.j(B,F,u5.h?u5.h(a,M):u5.call(null,a,M)):E0(F)?$APP.$h.j(B,F,$APP.v(function(){var U=new $APP.H(null,1,5,$APP.I,[M],
null);return u5.h?u5.h(a,U):u5.call(null,a,U)}())):$APP.$h.j(B,F,M):$APP.$h.j(B,F,M)}}(x,m,h),$APP.wf,$APP.ue(x,X0)?x:$APP.$h.j(x,X0,new K0)):function(){var B=$APP.dg(null);if(function(){var ca=$APP.de(x);if(ca){ca=$APP.Rc(B,x);var ea=$APP.A.j(ca,0,null);$APP.A.j(ca,1,null);var la=$APP.A.j(ca,2,null);$APP.A.j(ca,3,null);return $APP.z.h(Y0,ea)&&H0(a,la)&&!0}return ca}()){var F=$APP.q(B),M=$APP.A.j(F,0,null),U=$APP.A.j(F,1,null),Y=$APP.A.j(F,2,null),ba=$APP.A.j(F,3,null);return B0(a,Y)&&$APP.de(ba)?
new $APP.H(null,4,5,$APP.I,[M,U,Y,u5.h?u5.h(a,ba):u5.call(null,a,ba)],null):new $APP.H(null,4,5,$APP.I,[M,U,Y,$APP.v(function(){var ca=new $APP.H(null,1,5,$APP.I,[ba],null);return u5.h?u5.h(a,ca):u5.call(null,a,ca)}())],null)}return x}(),f($APP.nd(m)))}return null}},null,null)}(b)},d1=function d1(a,b){throw $APP.Al.h(["Not implemented: (",$APP.p.g(d1),$APP.Om.h(" ",new $APP.H(null,2,5,$APP.I,[a,b],null))].join(""),$APP.wf);},vWa=new $APP.ci(null,new $APP.k(null,8,[c5,null,dVa,null,b1,null,IUa,null,
f1,null,HTa,null,kWa,null,Y0,null],null),null);d1=function(){return null};
d1=function(a,b){for(var c=!$APP.ae(K_(w0.g(a),e0)),d=c?$APP.Fm.h(b,$APP.Lm.g(UUa)):b,e=a,f=d;;){if($APP.ae(f))return $APP.Am.P($APP.Am.P($APP.Am.j($APP.ql.h($APP.ql.h(LQa(e),c1),O0),y0,function(){return function(wd){return MPa(wd)}}(e,f,a,c,d)),y0,$APP.$h,sQa,L0(e)),w0,$APP.Am,Q_,$APP.ud);var h=f,m=$APP.u(h),r=$APP.v(m),n=$APP.y(m),w=r,x=n;if(null==w)f=x;else if($APP.z.h(UUa,w))if($APP.ue(e,T0)){var B=$APP.ql.h(e,T0),F=$APP.K.h(KQa(e),x);e=B;f=F}else f=x;else{var M=w0.g(e),U=y0.g(e);if($APP.ee(w)){var Y=
X0.g(w);NQa(w);if(M0(Y)){var ba=L0(e),ca=P0(e,Y,ba),ea=$APP.$e($APP.$h.j(w,X0,ba),x);e=ca;f=ea}else if($APP.de(Y)){ba=I0(M,Y);var la=e,ta=$APP.$e($APP.$h.j(w,X0,ba),x);e=la;f=ta}else{var pa=CQa(M,w),V=$APP.A.j(pa,0,null),P=$APP.A.j(pa,1,null),X=FQa(V,P);if(null!=X){if(N0(Y)&&$APP.ue(U,Y)&&$APP.Zh.h(X,$APP.D.h(U,Y)))return e1(a,e,b,Y,X);var R=$APP.Am.F(P0(e,Y,X),Z0,IQa,m_.F(X,null,null,536870912)),W=$APP.K.h(HQa(M,$APP.$h.j(V,X0,X)),x);e=R;f=W}else if("number"===typeof Y||null==Y||"string"===typeof Y||
VY(Y)){var ja=e,na=$APP.K.h(HQa(M,w),x);e=ja;f=na}else throw $APP.Al.h(["Expected number, string or lookup ref for :db/id, got ",$APP.aj.l($APP.C([Y]))].join(""),new $APP.k(null,2,[$APP.RI,TUa,i1,w],null));}}else if($APP.de(w)){var oa=w,wa=$APP.A.j(oa,0,null),Ca=$APP.A.j(oa,1,null),Ka=$APP.A.j(oa,2,null),Ra=$APP.A.j(oa,3,null);if($APP.z.h(wa,c5)){var $a=$APP.u(w),jb=$APP.v($a),nb=$APP.y($a),db=jb,hb=$APP.v(nb),rb=$APP.y(nb),ub=e,Sb=$APP.K.h(u5(M,$APP.Xf.j(hb,M,rb)),x);e=ub;f=Sb}else if(wa instanceof
$APP.G&&$APP.ib(vWa.g?vWa.g(wa):vWa.call(null,wa))){var Zb=J0(M,wa);if(null==Zb)throw $APP.Al.h(["Can’t find entity for transaction fn ",$APP.aj.l($APP.C([wa]))].join(""),new $APP.k(null,3,[$APP.RI,F0,$Va,c5,x0,w],null));var tc=q0.g(A_(M,new $APP.H(null,2,5,$APP.I,[Zb,zTa],null)));rb=$APP.y(w);if($APP.Ud(tc)){var Gc=e,$d=$APP.K.h($APP.Xf.j(tc,M,rb),x);e=Gc;f=$d}else throw $APP.Al.h(["Entity ",$APP.aj.l($APP.C([wa]))," expected to have :db/fn attribute with fn? value"].join(""),new $APP.k(null,3,[$APP.RI,
F0,$Va,c5,x0,w],null));}else{if(N0(Ca)&&$APP.Zh.h(wa,Y0))throw $APP.Al.h(["Can't use tempid in '",$APP.aj.l($APP.C([w])),"'. Tempids are allowed in :db/add only"].join(""),new $APP.k(null,2,[$APP.RI,F0,$APP.kG,w],null));if($APP.z.h(wa,kWa)||$APP.z.h(wa,dVa)){var pc=w;db=$APP.A.j(pc,0,null);var Xe=$APP.A.j(pc,1,null),Rf=$APP.A.j(pc,2,null),Lg=$APP.A.j(pc,3,null),Mg=$APP.A.j(pc,4,null),yh=I0(M,Xe),xj=function(){var wd=Rf;if(wd instanceof $APP.G||"string"===typeof wd)return null;var fk=w;throw $APP.Al.h(["Bad entity attribute ",
$APP.aj.l($APP.C([wd]))," at ",$APP.aj.l($APP.C([fk])),", expected keyword or string"].join(""),new $APP.k(null,3,[k0,wd,V0,fk,$APP.RI,F0],null));}(),ug=H0(M,Rf)?I0(M,Lg):Lg,zh=H0(M,Rf)?I0(M,Mg):Mg,ck=null==zh?function(){var wd=w;throw $APP.Al.h(["Cannot store nil as a value at ",$APP.aj.l($APP.C([wd]))].join(""),new $APP.k(null,3,[$APP.YI,null,V0,wd,$APP.RI,F0],null));}():null,sd=$APP.Fe(z_(M,new $APP.H(null,2,5,$APP.I,[yh,Rf],null)));if(B0(M,Rf))if($APP.l($APP.Vf(function(wd,fk,Ph,SD,nJ,oJ,pJ,TD,
qJ,rJ,rA){return function(Kr){return $APP.z.h(Kr.v,rA)}}(e,f,pc,db,Xe,Rf,Lg,Mg,yh,xj,ug,zh,ck,sd,oa,wa,Ca,Ka,Ra,M,U,h,m,r,n,w,x,a,c,d),sd))){var Ri=$0(e,new $APP.H(null,4,5,$APP.I,[Y0,yh,Rf,zh],null)),Ci=x;e=Ri;f=Ci}else throw $APP.Al.h([":db.fn/cas failed on datom [",$APP.aj.l($APP.C([yh]))," ",$APP.aj.l($APP.C([Rf]))," ",$APP.aj.l($APP.C([$APP.Ii.h(q0,sd)])),"], expected ",$APP.aj.l($APP.C([ug]))].join(""),new $APP.k(null,4,[$APP.RI,BUa,qVa,sd,$APP.xG,ug,$Ua,zh],null));else{var gi=q0.g($APP.v(sd));
if($APP.z.h(gi,ug)){var oc=$0(e,new $APP.H(null,4,5,$APP.I,[Y0,yh,Rf,zh],null)),$c=x;e=oc;f=$c}else throw $APP.Al.h([":db.fn/cas failed on datom [",$APP.aj.l($APP.C([yh]))," ",$APP.aj.l($APP.C([Rf]))," ",$APP.aj.l($APP.C([gi])),"], expected ",$APP.aj.l($APP.C([ug]))].join(""),new $APP.k(null,4,[$APP.RI,BUa,qVa,$APP.v(sd),$APP.xG,ug,$Ua,zh],null));}}else if(M0(Ca)){var he=P0(e,Ca,L0(e)),Sf=$APP.$e(new $APP.H(null,4,5,$APP.I,[wa,L0(e),Ka,Ra],null),x);e=he;f=Sf}else if(H0(M,Ka)&&M0(Ra)){var ze=P0(e,
Ra,L0(e)),Mh=$APP.$e(new $APP.H(null,4,5,$APP.I,[wa,Ca,Ka,L0(e)],null),x);e=ze;f=Mh}else if(H0(M,Ka)&&N0(Ra))if(Zb=$APP.D.h(U,Ra),null==Zb){var jg=$APP.Le(P_.g(M))+1,Hd=$APP.Am.P(P0(e,Ra,jg),h1,$APP.$h,jg,Ra),Mf=f;e=Hd;f=Mf}else{jg=Zb;var yj=Hd=$APP.Am.P(e,h1,$APP.$h,jg,Ra),Cg=$APP.$e(new $APP.H(null,4,5,$APP.I,[wa,Ca,Ka,jg],null),x);e=yj;f=Cg}else{var Nh=$APP.dg(null);if(function(){var wd=$APP.z.h(wa,Y0)||$APP.z.h(wa,f1);return wd?(wd=$APP.ib(g1.g($APP.Xd(w))))?(wd=D0(M,Ka))?(wd=$APP.eg(Nh,pQa(M,
Ka,Ra)),$APP.Zh.h(Ra,wd)&&!0):wd:wd:wd}()){var Ll=$APP.q(Nh),dk=e,fo=$APP.$e(new $APP.H(null,4,5,$APP.I,[wa,Ca,Ka,Ll],null),x);e=dk;f=fo}else if(N0(Ca)){X=A0(M,Ka,Y_)?$APP.pL.g($APP.v(B_(M,F_,Ka,Ra,null,null))):null;var Si=$APP.D.h(U,Ca);if($APP.l(function(){var wd=X;return $APP.l(wd)?(wd=Si,$APP.l(wd)?$APP.Zh.h(X,Si):wd):wd}()))return e1(a,e,b,Ca,X);var Tm=function(){var wd=X;if($APP.l(wd))return wd;wd=Si;return $APP.l(wd)?wd:$APP.Le(P_.g(M))+1}(),Di=P0(e,Ca,Tm),go=$APP.$e(new $APP.H(null,4,5,$APP.I,
[wa,Tm,Ka,Ra],null),x);e=Di;f=go}else{var se=$APP.dg(null);if($APP.l(function(){var wd=A0(M,Ka,Y_);if(wd){if(wd=$APP.ue(O0.g(e),Ca)){wd=$APP.eg(se,$APP.pL.g($APP.v(B_(M,F_,Ka,Ra,null,null))));var fk=Ca;return $APP.l(fk)?$APP.l(wd)?$APP.Zh.h(Ca,wd)&&!0:wd:fk}return wd}return wd}())){X=$APP.q(se);var ek=$APP.D.h(O0.g(e),Ca),Um=LPa(function(wd){return function(fk){return!$APP.ue(c1.g(wd),fk)}}(e,f,ek,X,se,Nh,oa,wa,Ca,Ka,Ra,M,U,h,m,r,n,w,x,a,c,d),ek);if($APP.l(Um))return e1(a,e,b,Um,X);throw $APP.Al.h(["Conflicting upsert: ",
$APP.aj.l($APP.C([Ca]))," resolves to ",$APP.aj.l($APP.C([X]))," via ",$APP.aj.l($APP.C([w]))].join(""),new $APP.k(null,1,[$APP.RI,W0],null));}if($APP.ib(g1.g($APP.Xd(w)))&&D0(M,Ka)){var Uk=$APP.Ao.h(M,new $APP.H(null,3,5,$APP.I,[$APP.M_,Ka,d0],null));if($APP.z.h($APP.Gd(Uk),$APP.Gd(Ra))&&$APP.Qf($APP.kb,Ra)&&$APP.Qf(function(wd,fk,Ph,SD,nJ,oJ,pJ,TD,qJ,rJ,rA){return function(Kr){var Pw=$APP.A.j(Kr,0,null);Kr=$APP.A.j(Kr,1,null);Pw=q0.g($APP.v(B_(rA,$APP.N_,TD,Pw,null,null)));return $APP.z.h(Kr,Pw)}}(e,
f,Uk,se,Nh,oa,wa,Ca,Ka,Ra,M,U,h,m,r,n,w,x,a,c,d),$APP.Ii.j($APP.rv,Uk,Ra)))f=x;else throw $APP.Al.h(["Can’t modify tuple attrs directly: ",$APP.aj.l($APP.C([w]))].join(""),new $APP.k(null,2,[$APP.RI,F0,x0,w],null));}else if($APP.z.h(wa,Y0)){var Oh=$0(e,w),Tf=x;e=Oh;f=Tf}else if($APP.z.h(wa,f1)&&null!=Ra)if(Zb=J0(M,Ca),null==Zb)f=x;else{Xe=Zb;gi=H0(M,Ka)?I0(M,Ra):Ra;var Uf=Ka;if(!(Uf instanceof $APP.G||"string"===typeof Uf)){var ad=w;throw $APP.Al.h(["Bad entity attribute ",$APP.aj.l($APP.C([Uf])),
" at ",$APP.aj.l($APP.C([ad])),", expected keyword or string"].join(""),new $APP.k(null,3,[k0,Uf,V0,ad,$APP.RI,F0],null));}if(null==gi){var fe=w;throw $APP.Al.h(["Cannot store nil as a value at ",$APP.aj.l($APP.C([fe]))].join(""),new $APP.k(null,3,[$APP.YI,null,V0,fe,$APP.RI,F0],null));}var wc=A_(M,new $APP.H(null,3,5,$APP.I,[Xe,Ka,gi],null));if(null==wc)f=x;else{var Df=a1(e,wc),ho=x;e=Df;f=ho}}else if($APP.z.h(wa,HTa)||$APP.z.h(wa,f1))if(Zb=J0(M,Ca),null==Zb)f=x;else{Xe=Zb;db=function(){var wd=Ka;
if(wd instanceof $APP.G||"string"===typeof wd)return null;var fk=w;throw $APP.Al.h(["Bad entity attribute ",$APP.aj.l($APP.C([wd]))," at ",$APP.aj.l($APP.C([fk])),", expected keyword or string"].join(""),new $APP.k(null,3,[k0,wd,V0,fk,$APP.RI,F0],null));}();sd=$APP.Fe(z_(M,new $APP.H(null,2,5,$APP.I,[Xe,Ka],null)));var Jr=$APP.De.j(a1,e,sd),pf=$APP.K.h(JQa(M,sd),x);e=Jr;f=pf}else if($APP.z.h(wa,b1)||$APP.z.h(wa,IUa))if(Zb=J0(M,Ca),null==Zb)f=x;else{Xe=Zb;var vg=$APP.Fe(z_(M,new $APP.H(null,1,5,$APP.I,
[Xe],null))),RD=$APP.Fe($APP.ng.l(function(wd,fk,Ph,SD,nJ,oJ,pJ,TD,qJ,rJ,rA,Kr,Pw){return function(fP){return z_(Pw,new $APP.H(null,3,5,$APP.I,[null,fP,SD],null))}}(e,f,vg,Xe,Zb,se,Nh,oa,wa,Ca,Ka,Ra,M,U,h,m,r,n,w,x,a,c,d),$APP.C([K_(M,b0)]))),YO=$APP.De.j(a1,e,$APP.K.h(vg,RD)),ZO=$APP.K.h(JQa(M,vg),x);e=YO;f=ZO}else throw $APP.Al.h(["Unknown operation at ",$APP.aj.l($APP.C([w])),", expected :db/add, :db/retract, :db.fn/call, :db.fn/retractAttribute, :db.fn/retractEntity or an ident corresponding to an installed transaction function (e.g. {:db/ident \x3ckeyword\x3e :db/fn \x3cIfn\x3e}, usage of :db/ident requires {:db/unique :db.unique/identity} in schema)"].join(""),
new $APP.k(null,3,[$APP.RI,F0,$Va,wa,x0,w],null));}}}}else if(ZPa(w)){var Ow=w;Ca=$APP.A.j(Ow,0,null);Ka=$APP.A.j(Ow,1,null);Ra=$APP.A.j(Ow,2,null);var $O=$APP.A.j(Ow,3,null),aP=$APP.A.j(Ow,4,null);if($APP.l(aP)){var bP=$0(e,new $APP.H(null,5,5,$APP.I,[Y0,Ca,Ka,Ra,$O],null)),cP=x;e=bP;f=cP}else{var dP=e,eP=$APP.$e(new $APP.H(null,4,5,$APP.I,[f1,Ca,Ka,Ra],null),x);e=dP;f=eP}}else throw $APP.Al.h(["Bad entity type at ",$APP.aj.l($APP.C([w])),", expected map or vector"].join(""),new $APP.k(null,2,[$APP.RI,
F0,x0,w],null));}}};var q1,s1=$APP.cj.g($APP.wf),r1=$APP.dg(1E6);$APP.g=m1.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "storage":return this.storage;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.storage.StorageAdapter{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[YZ,this.storage],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[YZ],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new m1(this.storage,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1627330428^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.storage,b.storage)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[YZ,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new m1(this.storage,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "storage":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(YZ,b):$APP.bf.call(null,YZ,b))?new m1(c,this.B,this.o,null):new m1(this.storage,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve(YZ,this.storage,null)],null),this.o))};$APP.g.X=function(a,b){return new m1(this.storage,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.Ui=function(a,b,c){a=$APP.l($APP.l(c)?b instanceof AZ&&$APP.ue($APP.hi(b.$c),c):c)?r1.hc(null,r1.Ia(null)+1):$APP.l(c)?c:r1.hc(null,r1.Ia(null)+1);c=$APP.Qm.h(l1,b.keys);c=new $APP.k(null,1,[$APP.Hy,c],null);b=b instanceof AZ?$APP.$h.j(c,kUa,b.$c):c;$APP.Rc(q1,$APP.pg.h($APP.q(q1),new $APP.H(null,2,5,$APP.I,[a,b],null)));return a};
$APP.g.Ti=function(a,b){a=k1(this.storage,b);a=$APP.xf(a);var c=$APP.D.h(a,$APP.Hy);a=$APP.D.h(a,kUa);if($APP.l(c)){c=WY($APP.Ii.h(function(e){var f=$APP.A.j(e,0,null),h=$APP.A.j(e,1,null),m=$APP.A.j(e,2,null);e=$APP.A.j(e,3,null);return m_.F(f,h,m,e)},c));b=new $APP.k(null,2,[yZ,b,zZ,!1],null);if($APP.l(a)){var d=Array($APP.Gd(a));return wZ(c,d,a,$APP.C([b]))}return XZ.l(c,$APP.C([b]))}return null};$APP.g.lk=function(){return null};
$APP.g.Si=function(a,b){return $APP.dj.F(s1,$APP.Am,this.storage,function(c){return $APP.fh.h(c,$APP.kr.h($APP.fb,b))})};var PQa=$APP.cj.g($APP.qg),F1=function F1(a){switch(arguments.length){case 1:return F1.g(arguments[0]);case 2:return F1.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};F1.g=function(a){var b=o1(a);if(null==b)throw $APP.Al.h("Database has no associated storage",$APP.wf);return t1(a,b,!1)};
F1.h=function(a,b){var c=o1(a);if(null==c)return $APP.N_.g(a),c=new m1(b,null,null,null),t1(a,c,!1);var d=YZ.g(c);if(d===b)return t1(a,c,!1);throw $APP.Al.h("Database is already stored with another IStorage",new $APP.k(null,1,[YZ,d],null));};F1.A=2;var v5=function v5(a){switch(arguments.length){case 1:return v5.g(arguments[0]);case 2:return v5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};v5.g=function(a){return v5.h(a,$APP.wf)};
v5.h=function(a,b){b=v1(a,b);a=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);return w1(a,b)};v5.A=2;$APP.g=y1.prototype;$APP.g.equiv=function(a){return this.R(null,a)};$APP.g.ef=function(a,b,c){a=$APP.u(this.rb);for(var d=null,e=0,f=0;;)if(f<e){var h=d.da(null,f),m=$APP.A.j(h,0,null);h=$APP.A.j(h,1,null);h.F?h.F(m,this,b,c):h.call(null,m,this,b,c);f+=1}else if(a=$APP.u(a))$APP.je(a)?(d=$APP.Kc(a),a=$APP.Lc(a),m=d,e=$APP.Gd(d),d=m):(d=$APP.v(a),m=$APP.A.j(d,0,null),h=$APP.A.j(d,1,null),h.F?h.F(m,this,b,c):h.call(null,m,this,b,c),a=$APP.y(a),d=null,e=0),f=0;else return null};
$APP.g.Ef=function(a,b,c){this.rb=$APP.$h.j(this.rb,b,c);return this};$APP.g.Ff=function(a,b){return this.rb=$APP.ql.h(this.rb,b)};$APP.g.R=function(a,b){return this===b};$APP.g.Y=function(){return $APP.ia(this)};$APP.g.Qc=function(a,b){return $APP.A.h(A1(this,$APP.Zf(b),$APP.md),1)};$APP.g.Yf=function(a,b){return $APP.A.h(A1(this,b,$APP.md),1)};$APP.g.Zf=function(a,b,c){return $APP.A.h(A1(this,b,new $APP.E(null,c,null,1,null)),1)};
$APP.g.$f=function(a,b,c,d){return $APP.A.h(A1(this,b,new $APP.E(null,c,new $APP.E(null,d,null,1,null),2,null)),1)};$APP.g.ag=function(a,b,c,d,e){return $APP.A.h(A1(this,b,$APP.$e(c,$APP.$e(d,e))),1)};$APP.g.W=function(){return this.K};$APP.g.Ia=function(){return z1.g($APP.q(this.Rf))};$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "atom":return this.Rf;default:return c}};
B1=function(a){switch(arguments.length){case 1:return B1.g(arguments[0]);default:for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;return B1.l(arguments[0],new $APP.jd(b.slice(1),0,null))}};B1.g=function(a){return new y1(a,null,$APP.wf,$APP.wf)};B1.l=function(a,b){b=$APP.Xf.h($APP.jo,b);a=new y1(a,null,$APP.wf,$APP.wf);var c=$APP.iv.g(b);null!=c&&(WQa(c,$APP.q(a)),a.tf=c);b=$APP.Ta.g(b);null!=b&&(a.K=b);return a};
B1.G=function(a){var b=$APP.v(a);a=$APP.y(a);return this.l(b,a)};B1.A=1;D1.h=function(a,b){return D1.j(a,b,null)};D1.j=function(a,b,c){if(a instanceof W_)throw $APP.Al.h("Filtered DB cannot be modified",new $APP.k(null,1,[$APP.RI,cWa],null));a=new u0(a,a,$APP.qg,$APP.wf,c,null,null,null);if(null!=b&&!$APP.de(b))throw $APP.Al.h(["Bad transaction data ",$APP.aj.l($APP.C([b])),", expected sequential collection"].join(""),new $APP.k(null,2,[$APP.RI,F0,x0,b],null));b=u5(v0.g(a),b);return d1(a,b)};
D1.A=3;var w5=function w5(a){switch(arguments.length){case 1:return w5.g(arguments[0]);case 2:return w5.h(arguments[0],arguments[1]);case 3:return w5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};w5.g=function(a){return I1(r0(a,null,$APP.wf))};w5.h=function(a,b){return I1(r0(a,b,$APP.wf))};w5.j=function(a,b,c){return I1(r0(a,b,x1(c)))};w5.A=3;
var x5=function x5(a){switch(arguments.length){case 0:return x5.C();case 1:return x5.g(arguments[0]);case 2:return x5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};x5.C=function(){return I1(p0(null,$APP.wf))};x5.g=function(a){return I1(p0(a,$APP.wf))};x5.h=function(a,b){return I1(p0(a,x1(b)))};x5.A=2;
var y5=function y5(a){switch(arguments.length){case 1:return y5.g(arguments[0]);case 2:return y5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};y5.g=function(a){return y5.h(a,$APP.wf)};y5.h=function(a,b){b=v1(a,b);if(null==b)return null;a=$APP.A.j(b,0,null);b=$APP.A.j(b,1,null);return C1(new $APP.k(null,3,[z1,w1(a,b),G1,b,H1,a],null))};y5.A=2;
var z5=function z5(a){switch(arguments.length){case 2:return z5.h(arguments[0],arguments[1]);case 3:return z5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};z5.h=function(a,b){return z5.j(a,b,null)};
z5.j=function(a,b,c){b=YQa(a,b,c);a=$APP.u(DUa.g($APP.q($APP.ME.g(a))));c=null;for(var d=0,e=0;;)if(e<d){var f=c.da(null,e);$APP.A.j(f,0,null);f=$APP.A.j(f,1,null);f.g?f.g(b):f.call(null,b);e+=1}else if(a=$APP.u(a))$APP.je(a)?(d=$APP.Kc(a),a=$APP.Lc(a),c=d,d=$APP.Gd(d)):(c=$APP.v(a),$APP.A.j(c,0,null),c=$APP.A.j(c,1,null),c.g?c.g(b):c.call(null,b),a=$APP.y(a),c=null,d=0),e=0;else break;return b};z5.A=3;
var A5=function A5(a){switch(arguments.length){case 2:return A5.h(arguments[0],arguments[1]);case 3:return A5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};A5.h=function(a,b){return A5.j(a,b,null)};
A5.j=function(a,b,c){var d=$APP.q(a);c=nQa(new $APP.k(null,4,[v0,d,w0,b,x0,$APP.K.h($APP.l(d)?$APP.Ii.h(function(m){return $APP.$h.j(m,$APP.Pz,!1)},B_(d,$APP.N_,null,null,null,null)):null,B_(b,$APP.N_,null,null,null,null)),z0,c],null));null==p1(d)?$APP.ag(a,b):(F1.g(b),$APP.dj.l($APP.ME.g(a),$APP.$h,z1,b,$APP.C([G1,$APP.qg,H1,b])));a=$APP.u(DUa.g($APP.q($APP.ME.g(a))));d=null;for(var e=0,f=0;;)if(f<e){var h=d.da(null,f);$APP.A.j(h,0,null);h=$APP.A.j(h,1,null);h.g?h.g(c):h.call(null,c);f+=1}else if(a=
$APP.u(a))$APP.je(a)?(e=$APP.Kc(a),a=$APP.Lc(a),d=e,e=$APP.Gd(e)):(d=$APP.v(a),$APP.A.j(d,0,null),d=$APP.A.j(d,1,null),d.g?d.g(c):d.call(null,c),a=$APP.y(a),d=null,e=0),f=0;else break;return b};A5.A=3;var B5=function B5(a){switch(arguments.length){case 2:return B5.h(arguments[0],arguments[1]);case 3:return B5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};B5.h=function(a,b){return B5.j(a,$APP.Vv.C(),b)};
B5.j=function(a,b,c){$APP.dj.l($APP.ME.g(a),$APP.Am,DUa,$APP.$h,$APP.C([b,c]));return b};B5.A=3;$APP.g=P1.prototype;$APP.g.entry_set=function(){return $APP.Ee($APP.Ii.h($APP.Ee,O1(this)))};
$APP.g.forEach=function(){function a(d,e){for(var f=$APP.u(O1(this)),h=null,m=0,r=0;;)if(r<m){var n=h.da(null,r),w=$APP.A.j(n,0,null);n=$APP.A.j(n,1,null);d.call(e,n,w,this);r+=1}else if(f=$APP.u(f))$APP.je(f)?(h=$APP.Kc(f),f=$APP.Lc(f),w=h,m=$APP.Gd(h),h=w):(h=$APP.v(f),w=$APP.A.j(h,0,null),n=$APP.A.j(h,1,null),d.call(e,n,w,this),f=$APP.y(f),h=null,m=0),r=0;else return null}function b(d){for(var e=$APP.u(O1(this)),f=null,h=0,m=0;;)if(m<h){var r=f.da(null,m),n=$APP.A.j(r,0,null);r=$APP.A.j(r,1,null);
d.j?d.j(r,n,this):d.call(null,r,n,this);m+=1}else if(e=$APP.u(e))$APP.je(e)?(f=$APP.Kc(e),e=$APP.Lc(e),n=f,h=$APP.Gd(f),f=n):(f=$APP.v(e),n=$APP.A.j(f,0,null),r=$APP.A.j(f,1,null),d.j?d.j(r,n,this):d.call(null,r,n,this),e=$APP.y(e),f=null,h=0),m=0;else return null}var c=null;c=function(d,e){switch(arguments.length){case 1:return b.call(this,d);case 2:return a.call(this,d,e)}throw Error("Invalid arity: "+arguments.length);};c.g=b;c.h=a;return c}();
$APP.g.get=function(a){if($APP.z.h(a,":db/id"))return this.eid;if(E0(a))return M1($Qa(this.db,this.eid,G0(a),null));var b=C5.h?C5.h(this,a):C5.call(null,this,a);return B0(this.db,a)?M1(b):b};$APP.g.key_set=function(){return $APP.Ee($APP.Wh(this))};$APP.g.entries=function(){return $APP.Zg(O1(this))};$APP.g.value_set=function(){return $APP.Ee($APP.Ii.h($APP.Md,O1(this)))};$APP.g.toString=function(){return $APP.Uc(this)};$APP.g.keys=function(){return $APP.od($APP.Wh(this))};
$APP.g.values=function(){return $APP.od($APP.Ii.h($APP.Md,O1(this)))};$APP.g.equiv=function(a){return R1.h?R1.h(this,a):R1.call(null,this,a)};$APP.g.has=function(a){return null!=this.get(a)};$APP.g.fa=function(a,b){return C5.j?C5.j(this,b,null):C5.call(null,this,b,null)};$APP.g.N=function(a,b,c){return C5.j?C5.j(this,b,c):C5.call(null,this,b,c)};$APP.g.V=function(a,b,c){return $APP.rc($APP.$h.j($APP.q(this.cache),X0,this.eid),b,c)};$APP.g.aa=function(){N1.g?N1.g(this):N1.call(null,this);return $APP.Gd($APP.q(this.cache))};
$APP.g.Y=function(){return S1.g?S1.g(this):S1.call(null,this)};$APP.g.R=function(a,b){return R1.h?R1.h(this,b):R1.call(null,this,b)};$APP.g.ka=function(a,b){return $APP.Zh.h(hVa,C5.j?C5.j(this,b,hVa):C5.call(null,this,b,hVa))};$APP.g.Z=function(){N1.g?N1.g(this):N1.call(null,this);return $APP.u($APP.q(this.cache))};
$APP.g.call=function(a){switch(arguments.length-1){case 1:return this.g(arguments[1]);case 2:return this.h(arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length-1)].join(""));}};$APP.g.apply=function(a,b){return this.call.apply(this,[this].concat($APP.vb(b)))};$APP.g.g=function(a){return C5.h?C5.h(this,a):C5.call(null,this,a)};$APP.g.h=function(a,b){return C5.j?C5.j(this,a,b):C5.call(null,this,a,b)};
var C5=function C5(a){switch(arguments.length){case 2:return C5.h(arguments[0],arguments[1]);case 3:return C5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};C5.h=function(a,b){return C5.j(a,b,null)};
C5.j=function(a,b,c){if($APP.z.h(b,X0))return a.eid;if(E0(b))return $Qa(a.db,a.eid,G0(b),c);var d=$APP.q(a.cache);d=d.g?d.g(b):d.call(null,b);if(null==d){if($APP.l($APP.q(a.li)))return c;d=$APP.yf(z_(a.db,new $APP.H(null,2,5,$APP.I,[a.eid,b],null)));if(null==d)return c;c=ZQa(a.db,b,d);$APP.eg(a.cache,$APP.$h.j($APP.q(a.cache),b,c));return c}return d};C5.A=3;GPa("datascript.impl.entity.Entity",P1);var D5=function D5(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return D5.l(0<c.length?new $APP.jd(c.slice(0),0,null):null)};D5.l=function(a){var b=$APP.Gd(a);return $APP.Zh.h($APP.hg.h(b/2,a),$APP.ig.h(b/2,a))};D5.A=0;D5.G=function(a){return this.l($APP.u(a))};var E5=function E5(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return E5.l(arguments[0],arguments[1],2<c.length?new $APP.jd(c.slice(2),0,null):null)};
E5.l=function(a,b,c){return $APP.De.j(function(d,e){d=$APP.v(z_(a,new $APP.H(null,2,5,$APP.I,[J0(a,b),e],null)));return null==d?null:$APP.xd(new $APP.H(null,2,5,$APP.I,[S0.g(d),q0.g(d)],null))},null,c)};E5.A=2;E5.G=function(a){var b=$APP.v(a),c=$APP.y(a);a=$APP.v(c);c=$APP.y(c);return this.l(b,a,c)};var F5=function F5(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return F5.l(0<c.length?new $APP.jd(c.slice(0),0,null):null)};
F5.l=function(a){return $APP.De.j(function(b,c){return $APP.l(c)?c:$APP.xd(c)},!0,a)};F5.A=0;F5.G=function(a){return this.l($APP.u(a))};var G5=function G5(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return G5.l(0<c.length?new $APP.jd(c.slice(0),0,null):null)};G5.l=function(a){return $APP.De.j(function(b,c){return $APP.l(c)?$APP.xd(c):c},null,a)};G5.A=0;G5.G=function(a){return this.l($APP.u(a))};
var H5=function H5(a){switch(arguments.length){case 1:return H5.g(arguments[0]);case 2:return H5.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return H5.l(arguments[0],arguments[1],new $APP.jd(c.slice(2),0,null))}};H5.g=function(){return!0};H5.h=function(a,b){return 0>p_(a,b)};H5.l=function(a,b,c){for(;;)if(H5.h(a,b))if($APP.y(c))a=b,b=$APP.v(c),c=$APP.y(c);else return H5.h(b,$APP.v(c));else return!1};
H5.G=function(a){var b=$APP.v(a),c=$APP.y(a);a=$APP.v(c);c=$APP.y(c);return this.l(b,a,c)};H5.A=2;var I5=function I5(a){switch(arguments.length){case 1:return I5.g(arguments[0]);case 2:return I5.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return I5.l(arguments[0],arguments[1],new $APP.jd(c.slice(2),0,null))}};I5.g=function(){return!0};I5.h=function(a,b){return 0<p_(a,b)};
I5.l=function(a,b,c){for(;;)if(I5.h(a,b))if($APP.y(c))a=b,b=$APP.v(c),c=$APP.y(c);else return I5.h(b,$APP.v(c));else return!1};I5.G=function(a){var b=$APP.v(a),c=$APP.y(a);a=$APP.v(c);c=$APP.y(c);return this.l(b,a,c)};I5.A=2;
var J5=function J5(a){switch(arguments.length){case 1:return J5.g(arguments[0]);case 2:return J5.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return J5.l(arguments[0],arguments[1],new $APP.jd(c.slice(2),0,null))}};J5.g=function(){return!0};J5.h=function(a,b){return!(0<p_(a,b))};J5.l=function(a,b,c){for(;;)if(J5.h(a,b))if($APP.y(c))a=b,b=$APP.v(c),c=$APP.y(c);else return J5.h(b,$APP.v(c));else return!1};
J5.G=function(a){var b=$APP.v(a),c=$APP.y(a);a=$APP.v(c);c=$APP.y(c);return this.l(b,a,c)};J5.A=2;var K5=function K5(a){switch(arguments.length){case 1:return K5.g(arguments[0]);case 2:return K5.h(arguments[0],arguments[1]);default:for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return K5.l(arguments[0],arguments[1],new $APP.jd(c.slice(2),0,null))}};K5.g=function(){return!0};K5.h=function(a,b){return!(0>p_(a,b))};
K5.l=function(a,b,c){for(;;)if(K5.h(a,b))if($APP.y(c))a=b,b=$APP.v(c),c=$APP.y(c);else return K5.h(b,$APP.v(c));else return!1};K5.G=function(a){var b=$APP.v(a),c=$APP.y(a);a=$APP.v(c);c=$APP.y(c);return this.l(b,a,c)};K5.A=2;
var o2=$APP.Ih([$APP.vI,$APP.ns,$APP.Vw,rWa,$APP.JH,$APP.uF,$APP.BH,$APP.XE,CVa,$APP.rw,rUa,$APP.Zz,$APP.dm,$APP.SL,$APP.sC,$APP.sz,$APP.yD,t4,HUa,$APP.JG,$APP.xH,XTa,$APP.CH,$APP.uJ,$APP.UG,$APP.mz,eUa,XUa,$APP.Qx,$APP.hJ,$APP.HH,$APP.WD,$APP.VK,$APP.YK,$APP.UK,$APP.lx,$APP.SG,$APP.tA,dUa,$APP.rx,$APP.RF,lVa,$APP.mG,$APP.LK,$APP.Oy,$APP.Bx,$APP.Fz,$APP.tx,$APP.sF,$APP.AH,$APP.nD,$APP.jJ,$APP.VG,$APP.mD,$APP.Gw,$APP.hG,$APP.uz,$APP.yA,$APP.ix,fUa,$APP.PH,$APP.kK,gWa,$APP.SA,$APP.Nz,$APP.yE,$APP.NB,
$APP.zE,CUa,$APP.$A,$APP.ss,$APP.mJ,$APP.SF,$APP.$x],[$APP.le,F5,$APP.Jba,function(a,b,c,d){if(null==d)throw $APP.Al.h("get-else: nil default value is not supported",new $APP.k(null,1,[$APP.RI,r4],null));a=$APP.v(z_(a,new $APP.H(null,2,5,$APP.I,[J0(a,b),c],null)));return null==a?d:q0.g(a)},K5,$APP.Ov,I5,$APP.Gd,E5,$APP.fb,$APP.He,$APP.ud,$APP.Lu,$APP.Me,$APP.Oaa,$APP.ib,$APP.He,D5,$APP.rv,$APP.yi,J5,$APP.Mk,$APP.z,$APP.Qu,$APP.Ju,$APP.ji,function(a,b,c){return null==$APP.D.h(L1(a,b),c)},$APP.He,$APP.ej,
$APP.Yf,$APP.Hk,$APP.ko,$APP.xe,$APP.$m,$APP.Mm,$APP.ae,$APP.Ku,$APP.aj,G4,$APP.Xd,$APP.Qe,$APP.Zh,$APP.Mv,$APP.Ie,$APP.Ai,$APP.rv,$APP.Zh,$APP.D,$APP.p,H5,$APP.cf,$APP.Ji,$APP.Xn,$APP.kb,$APP.Pe,$APP.Vv,$APP.vi,$APP.J,$APP.ue,$APP.Tca,$APP.zi,$APP.Ke,$APP.Nk,$APP.jo,$APP.Ne,$APP.Wf,$APP.pb,$APP.Re,$APP.Lk,$APP.yf,G5,$APP.eb,$APP.hi,$APP.wi]),L5=function L5(a){switch(arguments.length){case 1:return L5.g(arguments[0]);case 2:return L5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",
$APP.p.g(arguments.length)].join(""));}};L5.g=function(a){return $APP.De.j(function(b,c){return 0>$APP.xe(c,b)?c:b},$APP.v(a),$APP.y(a))};L5.h=function(a,b){return $APP.Fe($APP.De.j(function(c,d){return $APP.Gd(c)<a?$APP.lk.h($APP.xe,$APP.We.h(c,d)):0>$APP.xe(d,$APP.Rd(c))?$APP.lk.h($APP.xe,$APP.We.h($APP.ii(c),d)):c},$APP.qg,b))};L5.A=2;
var M5=function M5(a){switch(arguments.length){case 1:return M5.g(arguments[0]);case 2:return M5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};M5.g=function(a){return $APP.De.j(function(b,c){return 0<$APP.xe(c,b)?c:b},$APP.v(a),$APP.y(a))};M5.h=function(a,b){return $APP.Fe($APP.De.j(function(c,d){return $APP.Gd(c)<a?$APP.lk.h($APP.xe,$APP.We.h(c,d)):0<$APP.xe(d,$APP.v(c))?$APP.lk.h($APP.xe,$APP.We.h($APP.y(c),d)):c},$APP.qg,b))};
M5.A=2;var N5=function N5(a){switch(arguments.length){case 1:return N5.g(arguments[0]);case 2:return N5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};N5.g=function(a){return $APP.fj(a)};N5.h=function(a,b){return $APP.Fe($APP.Or.h(a,function(){return $APP.fj(b)}))};N5.A=2;
var wWa=$APP.Ih([DTa,$APP.XE,fWa,gVa,$APP.uJ,$APP.UK,MVa,$APP.lI,DVa,bVa,$APP.hG,tUa],[dRa,$APP.Gd,function(a){var b=$APP.lk.g(a);a=$APP.Gd(a);var c=a>>1,d=$APP.A.h(b,c);return $APP.Wf(a)?(d+$APP.A.h(b,c-1))/2:d},T1,L5,M5,function(a){return $APP.Gd($APP.Dv.g(a))},$APP.hi,cRa,function(a){return Math.sqrt(dRa(a))},N5,function(a,b){return $APP.Fe($APP.hg.h(a,$APP.Saa(b)))}]);$APP.g=U1.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "as":return this.as;case "default":return this.Fc;case "limit":return this.xb;case "name":return this.name;case "pattern":return this.pattern;case "recursion-limit":return this.mc;case "recursive?":return this.ya;case "reverse?":return this.qc;case "xform":return this.zb;case "multival?":return this.lc;case "ref?":return this.nc;case "component?":return this.jc;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.pull-parser.PullAttr{",", ","}",c,$APP.K.h(new $APP.H(null,12,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.qn,this.as],null),new $APP.H(null,2,5,$APP.I,[$APP.mm,this.Fc],null),new $APP.H(null,2,5,$APP.I,[V1,this.xb],null),new $APP.H(null,2,5,$APP.I,[$APP.O,this.name],null),new $APP.H(null,2,5,$APP.I,[W1,this.pattern],null),new $APP.H(null,2,5,$APP.I,[X1,this.mc],null),new $APP.H(null,2,5,$APP.I,
[Y1,this.ya],null),new $APP.H(null,2,5,$APP.I,[Z1,this.qc],null),new $APP.H(null,2,5,$APP.I,[$1,this.zb],null),new $APP.H(null,2,5,$APP.I,[a2,this.lc],null),new $APP.H(null,2,5,$APP.I,[b2,this.nc],null),new $APP.H(null,2,5,$APP.I,[c2,this.jc],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,12,new $APP.H(null,12,5,$APP.I,[$APP.qn,$APP.mm,V1,$APP.O,W1,X1,Y1,Z1,$1,a2,b2,c2],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new U1(this.as,this.Fc,this.xb,this.name,this.pattern,this.mc,this.ya,this.qc,this.zb,this.lc,this.nc,this.jc,this.B,this.o,this.D)};$APP.g.aa=function(){return 12+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1743810262^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.as,b.as)&&$APP.z.h(this.default,b.default)&&$APP.z.h(this.xb,b.xb)&&$APP.z.h(this.name,b.name)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.mc,b.mc)&&$APP.z.h(this.ya,b.ya)&&$APP.z.h(this.qc,b.qc)&&$APP.z.h(this.zb,b.zb)&&$APP.z.h(this.lc,b.lc)&&$APP.z.h(this.nc,b.nc)&&$APP.z.h(this.jc,b.jc)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,12,[$1,null,V1,null,Z1,null,X1,null,$APP.mm,null,$APP.O,null,$APP.qn,null,Y1,null,c2,null,b2,null,a2,null,W1,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new U1(this.as,this.Fc,this.xb,this.name,this.pattern,this.mc,this.ya,this.qc,this.zb,this.lc,this.nc,this.jc,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "as":case "default":case "limit":case "name":case "pattern":case "recursion-limit":case "recursive?":case "reverse?":case "xform":case "multival?":case "ref?":case "component?":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.qn,b):$APP.bf.call(null,$APP.qn,b))?new U1(c,this.Fc,this.xb,this.name,this.pattern,this.mc,this.ya,this.qc,this.zb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.mm,b):$APP.bf.call(null,$APP.mm,b))?new U1(this.as,c,this.xb,this.name,this.pattern,this.mc,this.ya,this.qc,this.zb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(V1,b):$APP.bf.call(null,V1,b))?new U1(this.as,this.Fc,c,this.name,
this.pattern,this.mc,this.ya,this.qc,this.zb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.O,b):$APP.bf.call(null,$APP.O,b))?new U1(this.as,this.Fc,this.xb,c,this.pattern,this.mc,this.ya,this.qc,this.zb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(W1,b):$APP.bf.call(null,W1,b))?new U1(this.as,this.Fc,this.xb,this.name,c,this.mc,this.ya,this.qc,this.zb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(X1,b):$APP.bf.call(null,
X1,b))?new U1(this.as,this.Fc,this.xb,this.name,this.pattern,c,this.ya,this.qc,this.zb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(Y1,b):$APP.bf.call(null,Y1,b))?new U1(this.as,this.Fc,this.xb,this.name,this.pattern,this.mc,c,this.qc,this.zb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(Z1,b):$APP.bf.call(null,Z1,b))?new U1(this.as,this.Fc,this.xb,this.name,this.pattern,this.mc,this.ya,c,this.zb,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.bf.h?
$APP.bf.h($1,b):$APP.bf.call(null,$1,b))?new U1(this.as,this.Fc,this.xb,this.name,this.pattern,this.mc,this.ya,this.qc,c,this.lc,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(a2,b):$APP.bf.call(null,a2,b))?new U1(this.as,this.Fc,this.xb,this.name,this.pattern,this.mc,this.ya,this.qc,this.zb,c,this.nc,this.jc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(b2,b):$APP.bf.call(null,b2,b))?new U1(this.as,this.Fc,this.xb,this.name,this.pattern,this.mc,this.ya,this.qc,this.zb,this.lc,c,
this.jc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(c2,b):$APP.bf.call(null,c2,b))?new U1(this.as,this.Fc,this.xb,this.name,this.pattern,this.mc,this.ya,this.qc,this.zb,this.lc,this.nc,c,this.B,this.o,null):new U1(this.as,this.Fc,this.xb,this.name,this.pattern,this.mc,this.ya,this.qc,this.zb,this.lc,this.nc,this.jc,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,12,5,$APP.I,[new $APP.ve($APP.qn,this.as,null),new $APP.ve($APP.mm,this.Fc,null),new $APP.ve(V1,this.xb,null),new $APP.ve($APP.O,this.name,null),new $APP.ve(W1,this.pattern,null),new $APP.ve(X1,this.mc,null),new $APP.ve(Y1,this.ya,null),new $APP.ve(Z1,this.qc,null),new $APP.ve($1,this.zb,null),new $APP.ve(a2,this.lc,null),new $APP.ve(b2,this.nc,null),new $APP.ve(c2,this.jc,null)],null),this.o))};
$APP.g.X=function(a,b){return new U1(this.as,this.Fc,this.xb,this.name,this.pattern,this.mc,this.ya,this.qc,this.zb,this.lc,this.nc,this.jc,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g=d2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "attrs":return this.qa;case "first-attr":return this.dd;case "last-attr":return this.od;case "reverse-attrs":return this.Yc;case "wildcard?":return this.xc;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.pull-parser.PullPattern{",", ","}",c,$APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[e2,this.qa],null),new $APP.H(null,2,5,$APP.I,[f2,this.dd],null),new $APP.H(null,2,5,$APP.I,[g2,this.od],null),new $APP.H(null,2,5,$APP.I,[h2,this.Yc],null),new $APP.H(null,2,5,$APP.I,[i2,this.xc],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,5,new $APP.H(null,5,5,$APP.I,[e2,f2,g2,h2,i2],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new d2(this.qa,this.dd,this.od,this.Yc,this.xc,this.B,this.o,this.D)};$APP.g.aa=function(){return 5+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-795554044^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.qa,b.qa)&&$APP.z.h(this.dd,b.dd)&&$APP.z.h(this.od,b.od)&&$APP.z.h(this.Yc,b.Yc)&&$APP.z.h(this.xc,b.xc)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,5,[h2,null,f2,null,e2,null,i2,null,g2,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new d2(this.qa,this.dd,this.od,this.Yc,this.xc,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "attrs":case "first-attr":case "last-attr":case "reverse-attrs":case "wildcard?":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(e2,b):$APP.bf.call(null,e2,b))?new d2(c,this.dd,this.od,this.Yc,this.xc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(f2,b):$APP.bf.call(null,f2,b))?new d2(this.qa,c,this.od,this.Yc,this.xc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(g2,b):$APP.bf.call(null,g2,b))?new d2(this.qa,this.dd,c,this.Yc,this.xc,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(h2,b):$APP.bf.call(null,h2,b))?new d2(this.qa,this.dd,this.od,c,this.xc,this.B,this.o,
null):$APP.l($APP.bf.h?$APP.bf.h(i2,b):$APP.bf.call(null,i2,b))?new d2(this.qa,this.dd,this.od,this.Yc,c,this.B,this.o,null):new d2(this.qa,this.dd,this.od,this.Yc,this.xc,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.ve(e2,this.qa,null),new $APP.ve(f2,this.dd,null),new $APP.ve(g2,this.od,null),new $APP.ve(h2,this.Yc,null),new $APP.ve(i2,this.xc,null)],null),this.o))};
$APP.g.X=function(a,b){return new d2(this.qa,this.dd,this.od,this.Yc,this.xc,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};var mRa=eRa(new $APP.k(null,3,[$APP.O,X0,$APP.qn,X0,$1,$APP.He],null)),m2=j2(new $APP.k(null,1,[e2,new $APP.E(null,mRa,null,1,null)],null)),gRa=$APP.$h.j(m2,i2,!0);$APP.g=u2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "db":return this.db;case "visitor":return this.ne;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.pull-api.Context{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[z1,this.db],null),new $APP.H(null,2,5,$APP.I,[H2,this.ne],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,2,new $APP.H(null,2,5,$APP.I,[z1,H2],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new u2(this.db,this.ne,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1727735959^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.db,b.db)&&$APP.z.h(this.ne,b.ne)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,2,[z1,null,H2,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new u2(this.db,this.ne,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "db":case "visitor":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(z1,b):$APP.bf.call(null,z1,b))?new u2(c,this.ne,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(H2,b):$APP.bf.call(null,H2,b))?new u2(this.db,c,this.B,this.o,null):new u2(this.db,this.ne,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.ve(z1,this.db,null),new $APP.ve(H2,this.ne,null)],null),this.o))};$APP.g.X=function(a,b){return new u2(this.db,this.ne,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g=y2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "value":return this.value;case "datoms":return this.va;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.pull-api.ResultFrame{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.YI,this.value],null),new $APP.H(null,2,5,$APP.I,[$APP.s0,this.va],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.YI,$APP.s0],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new y2(this.value,this.va,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=836381841^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.value,b.value)&&$APP.z.h(this.va,b.va)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,2,[$APP.YI,null,$APP.s0,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new y2(this.value,this.va,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "value":case "datoms":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.YI,b):$APP.bf.call(null,$APP.YI,b))?new y2(c,this.va,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.s0,b):$APP.bf.call(null,$APP.s0,b))?new y2(this.value,c,this.B,this.o,null):new y2(this.value,this.va,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.ve($APP.YI,this.value,null),new $APP.ve($APP.s0,this.va,null)],null),this.o))};
$APP.g.X=function(a,b){return new y2(this.value,this.va,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g=z2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "acc":return this.ma;case "attr":return this.ia;case "datoms":return this.va;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.pull-api.MultivalAttrFrame{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[H4,this.ma],null),new $APP.H(null,2,5,$APP.I,[W4,this.ia],null),new $APP.H(null,2,5,$APP.I,[$APP.s0,this.va],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,3,new $APP.H(null,3,5,$APP.I,[H4,W4,$APP.s0],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new z2(this.ma,this.ia,this.va,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1829867699^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ma,b.ma)&&$APP.z.h(this.ia,b.ia)&&$APP.z.h(this.va,b.va)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,3,[H4,null,$APP.s0,null,W4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new z2(this.ma,this.ia,this.va,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "acc":case "attr":case "datoms":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(H4,b):$APP.bf.call(null,H4,b))?new z2(c,this.ia,this.va,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(W4,b):$APP.bf.call(null,W4,b))?new z2(this.ma,c,this.va,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.s0,b):$APP.bf.call(null,$APP.s0,b))?new z2(this.ma,this.ia,c,this.B,this.o,null):new z2(this.ma,this.ia,this.va,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.ve(H4,this.ma,null),new $APP.ve(W4,this.ia,null),new $APP.ve($APP.s0,this.va,null)],null),this.o))};$APP.g.X=function(a,b){return new z2(this.ma,this.ia,this.va,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};
$APP.g.eg=function(){for(var a=this,b=a.ma,c=a.va;;){var d=r2(c);if(null==d||$APP.Zh.h(d.a,a.ia.name))return new $APP.H(null,1,5,$APP.I,[new y2($APP.yf($APP.Bc(b)),function(){var h=c;return $APP.l(h)?h:$APP.md}(),null,null,null)],null);if($APP.l(function(){var h=a.ia.xb;return $APP.l(h)?$APP.Gd(b)>=a.ia.xb&&!0:h}()))for(var e=c;;){d=r2(e);if(null==d||$APP.Zh.h(d.a,a.ia.name))return new $APP.H(null,1,5,$APP.I,[new y2($APP.Bc(b),function(){var h=e;return $APP.l(h)?h:$APP.md}(),null,null,null)],null);
e=s2(e)}else{d=$APP.pg.h(b,d.v);var f=s2(c);b=d;c=f}}};$APP.g=A2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "seen":return this.ra;case "recursion-limits":return this.wa;case "acc":return this.ma;case "pattern":return this.pattern;case "attr":return this.ia;case "datoms":return this.va;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.pull-api.MultivalRefAttrFrame{",", ","}",c,$APP.K.h(new $APP.H(null,6,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[J4,this.ra],null),new $APP.H(null,2,5,$APP.I,[U4,this.wa],null),new $APP.H(null,2,5,$APP.I,[H4,this.ma],null),new $APP.H(null,2,5,$APP.I,[W1,this.pattern],null),new $APP.H(null,2,5,$APP.I,[W4,this.ia],null),new $APP.H(null,2,5,$APP.I,[$APP.s0,this.va],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,6,new $APP.H(null,6,5,$APP.I,[J4,U4,H4,W1,W4,$APP.s0],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new A2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.va,this.B,this.o,this.D)};$APP.g.aa=function(){return 6+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1769511936^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ra,b.ra)&&$APP.z.h(this.wa,b.wa)&&$APP.z.h(this.ma,b.ma)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.ia,b.ia)&&$APP.z.h(this.va,b.va)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,6,[H4,null,J4,null,U4,null,$APP.s0,null,W1,null,W4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new A2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.va,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "datoms":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(J4,b):$APP.bf.call(null,J4,b))?new A2(c,this.wa,this.ma,this.pattern,this.ia,this.va,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(U4,b):$APP.bf.call(null,U4,b))?new A2(this.ra,c,this.ma,this.pattern,this.ia,this.va,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(H4,b):$APP.bf.call(null,H4,b))?new A2(this.ra,this.wa,c,this.pattern,this.ia,this.va,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(W1,b):$APP.bf.call(null,W1,b))?new A2(this.ra,
this.wa,this.ma,c,this.ia,this.va,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(W4,b):$APP.bf.call(null,W4,b))?new A2(this.ra,this.wa,this.ma,this.pattern,c,this.va,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.s0,b):$APP.bf.call(null,$APP.s0,b))?new A2(this.ra,this.wa,this.ma,this.pattern,this.ia,c,this.B,this.o,null):new A2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.va,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,6,5,$APP.I,[new $APP.ve(J4,this.ra,null),new $APP.ve(U4,this.wa,null),new $APP.ve(H4,this.ma,null),new $APP.ve(W1,this.pattern,null),new $APP.ve(W4,this.ia,null),new $APP.ve($APP.s0,this.va,null)],null),this.o))};$APP.g.X=function(a,b){return new A2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.va,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};
$APP.g.Xg=function(a,b){a=this.ra;var c=this.wa,d=this.ma;b=b.value;b=null==b?d:$APP.pg.h(d,b);return new A2(a,c,b,this.pattern,this.ia,s2(this.va),null,null,null)};
$APP.g.eg=function(a,b){var c=this;a=r2(c.va);if(null==a||$APP.Zh.h(a.a,c.ia.name))return new $APP.H(null,1,5,$APP.I,[new y2($APP.yf($APP.Bc(c.ma)),function(){var e=c.va;return $APP.l(e)?e:$APP.md}(),null,null,null)],null);if($APP.l(function(){var e=c.ia.xb;return $APP.l(e)?$APP.Gd(c.ma)>=c.ia.xb&&!0:e}()))for(var d=c.va;;){b=r2(d);if(null==b||$APP.Zh.h(b.a,c.ia.name))return new $APP.H(null,1,5,$APP.I,[new y2($APP.Bc(c.ma),function(){var e=d;return $APP.l(e)?e:$APP.md}(),null,null,null)],null);d=
s2(d)}else return a=$APP.l(c.ia.qc)?a.e:a.v,new $APP.H(null,2,5,$APP.I,[this,F2.ja?F2.ja(b,c.ra,c.wa,c.pattern,c.ia,a):F2.call(null,b,c.ra,c.wa,c.pattern,c.ia,a)],null)};$APP.g=B2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "seen":return this.ra;case "recursion-limits":return this.wa;case "acc":return this.ma;case "pattern":return this.pattern;case "attr":return this.ia;case "attrs":return this.qa;case "datoms":return this.va;case "id":return this.id;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.pull-api.AttrsFrame{",", ","}",c,$APP.K.h(new $APP.H(null,8,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[J4,this.ra],null),new $APP.H(null,2,5,$APP.I,[U4,this.wa],null),new $APP.H(null,2,5,$APP.I,[H4,this.ma],null),new $APP.H(null,2,5,$APP.I,[W1,this.pattern],null),new $APP.H(null,2,5,$APP.I,[W4,this.ia],null),new $APP.H(null,2,5,$APP.I,[e2,this.qa],null),new $APP.H(null,2,5,$APP.I,[$APP.s0,this.va],
null),new $APP.H(null,2,5,$APP.I,[$APP.Ip,this.id],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,8,new $APP.H(null,8,5,$APP.I,[J4,U4,H4,W1,W4,e2,$APP.s0,$APP.Ip],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new B2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,this.B,this.o,this.D)};$APP.g.aa=function(){return 8+$APP.Gd(this.o)};
$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1127179791^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ra,b.ra)&&$APP.z.h(this.wa,b.wa)&&$APP.z.h(this.ma,b.ma)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.ia,b.ia)&&$APP.z.h(this.qa,b.qa)&&$APP.z.h(this.va,b.va)&&$APP.z.h(this.id,b.id)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,8,[H4,null,J4,null,$APP.Ip,null,U4,null,e2,null,$APP.s0,null,W1,null,W4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new B2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "attrs":case "datoms":case "id":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(J4,b):$APP.bf.call(null,J4,b))?new B2(c,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(U4,b):$APP.bf.call(null,U4,b))?new B2(this.ra,c,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(H4,b):$APP.bf.call(null,H4,b))?new B2(this.ra,this.wa,c,this.pattern,this.ia,this.qa,this.va,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(W1,
b):$APP.bf.call(null,W1,b))?new B2(this.ra,this.wa,this.ma,c,this.ia,this.qa,this.va,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(W4,b):$APP.bf.call(null,W4,b))?new B2(this.ra,this.wa,this.ma,this.pattern,c,this.qa,this.va,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(e2,b):$APP.bf.call(null,e2,b))?new B2(this.ra,this.wa,this.ma,this.pattern,this.ia,c,this.va,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.s0,b):$APP.bf.call(null,$APP.s0,b))?new B2(this.ra,this.wa,this.ma,
this.pattern,this.ia,this.qa,c,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.Ip,b):$APP.bf.call(null,$APP.Ip,b))?new B2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,c,this.B,this.o,null):new B2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,8,5,$APP.I,[new $APP.ve(J4,this.ra,null),new $APP.ve(U4,this.wa,null),new $APP.ve(H4,this.ma,null),new $APP.ve(W1,this.pattern,null),new $APP.ve(W4,this.ia,null),new $APP.ve(e2,this.qa,null),new $APP.ve($APP.s0,this.va,null),new $APP.ve($APP.Ip,this.id,null)],null),this.o))};$APP.g.X=function(a,b){return new B2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.va,this.id,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.Xg=function(a,b){var c=this;return new B2(c.ra,c.wa,oRa(c.ma,c.ia.as,function(){var d=b.value,e=c.ia.zb;return e.g?e.g(d):e.call(null,d)}()),c.pattern,r2(c.qa),s2(c.qa),$APP.yf(function(){var d=b.va;return $APP.l(d)?d:s2(c.va)}()),c.id,null,null,null)};
$APP.g.eg=function(a,b){var c=this,d=c.ma,e=c.ia;a=c.qa;for(var f=c.va;;){if(null==f&&null==e)return new $APP.H(null,1,5,$APP.I,[function(){var B=c.ra,F=c.wa,M=d,U=c.pattern,Y=r2(c.pattern.Yc),ba=s2(c.pattern.Yc),ca=c.id;return D2.Fa?D2.Fa(B,F,M,U,Y,ba,ca):D2.call(null,B,F,M,U,Y,ba,ca)}()],null);if(null!=e&&$APP.z.h(X0,e.name)){var h=$APP.hh.j(d,e.as,function(){var B=e.zb;return B.g?B.g(c.id):B.call(null,c.id)}()),m=r2(a);a=s2(a);d=h;e=m}else{var r=r2(f),n=$APP.l(function(){var B=r;return $APP.l(B)?
e:B}())?$APP.xe(e.name,r.a):null,w=function(){var B=null==e;if(B)return B;B=n;return $APP.l(B)?0<n:B}(),x=function(){var B=null==r;if(B)return B;B=n;return $APP.l(B)?0>n:B}();if($APP.l(function(){var B=c.pattern.xc;return $APP.l(B)?(B=null!=r)?(B=w,$APP.l(B)?!0:B):B:B}()))m=RY(fQa(b.db).Bc,r.a,function(B,F,M,U,Y){return function(){return hRa(b.db,Y.a)}}(d,e,a,f,r,n,w,x,this)),h=d,a=$APP.l(e)?t2(a,e):null,d=h,e=m;else if($APP.l(w))h=d,m=e,f=s2(f),d=h,e=m;else if(v2(b,rVa,c.id,e.name,null),$APP.l(function(){var B=
x;return $APP.l(B)?null==e&&!0:B}()))h=d,m=r2(a),a=s2(a),d=h,e=m;else if($APP.l(function(){var B=x;return $APP.l(B)?null!=$APP.mm.g(e)&&!0:B}()))h=$APP.hh.j(d,e.as,$APP.mm.g(e)),m=r2(a),a=s2(a),d=h,e=m;else if($APP.l(x))h=function(){var B=e.zb;return B.g?B.g(null):B.call(null,null)}(),null==h?(h=d,m=r2(a),a=s2(a),d=h,e=m):(h=$APP.hh.j(d,e.as,h),m=r2(a),a=s2(a),d=h,e=m);else{if($APP.l(function(){var B=e.lc;return $APP.l(B)?(B=e.nc,$APP.l(B)?!0:B):B}()))return new $APP.H(null,2,5,$APP.I,[new B2(c.ra,
c.wa,d,c.pattern,e,a,f,c.id,null,null,null),new A2(c.ra,c.wa,$APP.zc($APP.qg),c.pattern,e,f,null,null,null)],null);if($APP.l(e.lc))return new $APP.H(null,2,5,$APP.I,[new B2(c.ra,c.wa,d,c.pattern,e,a,f,c.id,null,null,null),new z2($APP.zc($APP.qg),e,f,null,null,null)],null);if($APP.l(e.nc))return new $APP.H(null,2,5,$APP.I,[new B2(c.ra,c.wa,d,c.pattern,e,a,f,c.id,null,null,null),function(){var B=c.ra,F=c.wa,M=c.pattern,U=e,Y=r.v;return F2.ja?F2.ja(b,B,F,M,U,Y):F2.call(null,b,B,F,M,U,Y)}()],null);h=
$APP.hh.j(d,e.as,function(){var B=r.v,F=e.zb;return F.g?F.g(B):F.call(null,B)}());m=r2(a);a=s2(a);f=s2(f);d=h;e=m}}}};$APP.g=C2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "seen":return this.ra;case "recursion-limits":return this.wa;case "acc":return this.ma;case "pattern":return this.pattern;case "attr":return this.ia;case "attrs":return this.qa;case "id":return this.id;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.pull-api.ReverseAttrsFrame{",", ","}",c,$APP.K.h(new $APP.H(null,7,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[J4,this.ra],null),new $APP.H(null,2,5,$APP.I,[U4,this.wa],null),new $APP.H(null,2,5,$APP.I,[H4,this.ma],null),new $APP.H(null,2,5,$APP.I,[W1,this.pattern],null),new $APP.H(null,2,5,$APP.I,[W4,this.ia],null),new $APP.H(null,2,5,$APP.I,[e2,this.qa],null),new $APP.H(null,2,5,$APP.I,[$APP.Ip,
this.id],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,7,new $APP.H(null,7,5,$APP.I,[J4,U4,H4,W1,W4,e2,$APP.Ip],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new C2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.id,this.B,this.o,this.D)};$APP.g.aa=function(){return 7+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=470210558^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ra,b.ra)&&$APP.z.h(this.wa,b.wa)&&$APP.z.h(this.ma,b.ma)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.ia,b.ia)&&$APP.z.h(this.qa,b.qa)&&$APP.z.h(this.id,b.id)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,7,[H4,null,J4,null,$APP.Ip,null,U4,null,e2,null,W1,null,W4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new C2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.id,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "seen":case "recursion-limits":case "acc":case "pattern":case "attr":case "attrs":case "id":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(J4,b):$APP.bf.call(null,J4,b))?new C2(c,this.wa,this.ma,this.pattern,this.ia,this.qa,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(U4,b):$APP.bf.call(null,U4,b))?new C2(this.ra,c,this.ma,this.pattern,this.ia,this.qa,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(H4,b):$APP.bf.call(null,H4,b))?new C2(this.ra,this.wa,c,this.pattern,this.ia,this.qa,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(W1,b):$APP.bf.call(null,
W1,b))?new C2(this.ra,this.wa,this.ma,c,this.ia,this.qa,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(W4,b):$APP.bf.call(null,W4,b))?new C2(this.ra,this.wa,this.ma,this.pattern,c,this.qa,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(e2,b):$APP.bf.call(null,e2,b))?new C2(this.ra,this.wa,this.ma,this.pattern,this.ia,c,this.id,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.Ip,b):$APP.bf.call(null,$APP.Ip,b))?new C2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,c,this.B,
this.o,null):new C2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.id,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,7,5,$APP.I,[new $APP.ve(J4,this.ra,null),new $APP.ve(U4,this.wa,null),new $APP.ve(H4,this.ma,null),new $APP.ve(W1,this.pattern,null),new $APP.ve(W4,this.ia,null),new $APP.ve(e2,this.qa,null),new $APP.ve($APP.Ip,this.id,null)],null),this.o))};
$APP.g.X=function(a,b){return new C2(this.ra,this.wa,this.ma,this.pattern,this.ia,this.qa,this.id,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.Xg=function(a,b){a=this.ra;var c=this.wa,d=this.ma,e=this.ia.as;b=b.value;var f=this.ia.zb;b=f.g?f.g(b):f.call(null,b);return new C2(a,c,oRa(d,e,b),this.pattern,r2(this.qa),s2(this.qa),this.id,null,null,null)};
$APP.g.eg=function(a,b){var c=this.ma;a=this.ia;for(var d=this.qa;;){if(null==a)return new $APP.H(null,1,5,$APP.I,[new y2($APP.yf($APP.Bc(c)),null,null,null,null)],null);var e=a.name,f=b.db;f=f instanceof $APP.L_?VZ(f.fc,m_.F(0,e,this.id,536870912),m_.F(2147483647,e,this.id,2147483647)):z_(f,new $APP.H(null,3,5,$APP.I,[null,e,this.id],null));v2(b,bUa,null,e,this.id);if($APP.ae(f)&&null!=$APP.mm.g(a))c=$APP.hh.j(c,a.as,$APP.mm.g(a)),a=r2(d),d=e=s2(d);else if($APP.ae(f))a=r2(d),d=e=s2(d);else{if($APP.l(a.jc)){e=
$APP.I;c=new C2(this.ra,this.wa,c,this.pattern,a,d,this.id,null,null,null);d=this.ra;var h=this.wa,m=this.pattern;f=r2(f).e;b=F2.ja?F2.ja(b,d,h,m,a,f):F2.call(null,b,d,h,m,a,f);b=new $APP.H(null,2,5,e,[c,b],null)}else b=new $APP.H(null,2,5,$APP.I,[new C2(this.ra,this.wa,c,this.pattern,a,d,this.id,null,null,null),new A2(this.ra,this.wa,$APP.zc($APP.qg),this.pattern,a,f,null,null,null)],null);return b}}};
var O5=function O5(a){switch(arguments.length){case 3:return O5.j(arguments[0],arguments[1],arguments[2]);case 4:return O5.F(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};O5.j=function(a,b,c){return O5.F(a,b,c,$APP.wf)};O5.F=function(a,b,c,d){a=I2(a,b,d);return G2(a,c)};O5.A=4;
var P5=function P5(a){switch(arguments.length){case 3:return P5.j(arguments[0],arguments[1],arguments[2]);case 4:return P5.F(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};P5.j=function(a,b,c){return P5.F(a,b,c,$APP.wf)};P5.F=function(a,b,c,d){var e=I2(a,b,d);return $APP.Qm.h(function(f){return G2(e,f)},c)};P5.A=4;var Q5=function Q5(a){switch(arguments.length){case 1:return Q5.g(arguments[0]);case 2:return Q5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};Q5.g=function(a){return vRa(a,$APP.wf)};Q5.h=function(a,b){return vRa(a,b)};Q5.A=2;var R5=function R5(a){switch(arguments.length){case 1:return R5.g(arguments[0]);case 2:return R5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};
R5.g=function(a){return R5.h(a,$APP.wf)};
R5.h=function(a,b){b=$APP.xf(b);var c=$APP.D.j(b,pUa,$APP.kM),d=$APP.D.j(b,wUa,sRa),e=K2(a,"tx0"),f=function(){var w=K2(a,"schema");return c.g?c.g(w):c.call(null,w)}();(function(){var w=new $APP.hd(function(){return o0},jVa,$APP.Ih([$APP.Ts,$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[!0,$APP.wL,EUa,"datascript/db.cljc",23,1,931,931,$APP.J(new $APP.H(null,1,5,$APP.I,[L4],null)),null,$APP.l(o0)?o0.I:null]));return w.g?w.g(f):w.call(null,f)})();var h=$APP.Qm.h(d,K2(a,
"attrs")),m=$APP.Qm.h(d,K2(a,"keywords")),r=L2(function(w){var x=J2(w,0),B=$APP.A.h(h,J2(w,1)),F=J2(w,2);if("number"===typeof F)var M=F;else if("string"===typeof F)M=F;else if($APP.me(F))M=F;else if($APP.gb(F)||$APP.ie(F))M=function(){var U=J2(F,0);if($APP.l($APP.Hk.h?$APP.Hk.h(0,U):$APP.Hk.call(null,0,U)))return $APP.A.h(m,J2(F,1));if($APP.l($APP.Hk.h?$APP.Hk.h(1,U):$APP.Hk.call(null,1,U)))return U=J2(F,1),c.g?c.g(U):c.call(null,U);if($APP.l($APP.Hk.h?$APP.Hk.h(2,U):$APP.Hk.call(null,2,U)))return Infinity;
if($APP.l($APP.Hk.h?$APP.Hk.h(3,U):$APP.Hk.call(null,3,U)))return-Infinity;if($APP.l($APP.Hk.h?$APP.Hk.h(4,U):$APP.Hk.call(null,4,U)))return NaN;throw $APP.Al.h(["Unexpected value marker ",$APP.aj.l($APP.C([U]))," in ",$APP.aj.l($APP.C([$APP.aj.l($APP.C([F]))]))].join(""),new $APP.k(null,2,[$APP.RI,uUa,$APP.YI,F],null));}();else throw $APP.Al.h(["Unexpected value type ",$APP.aj.l($APP.C([$APP.pb(F)]))," (",$APP.aj.l($APP.C([$APP.aj.l($APP.C([F]))])),")"].join(""),new $APP.k(null,2,[$APP.RI,uUa,$APP.YI,
F],null));w=e+J2(w,3);return m_.F(x,B,M,w)},K2(a,"eavt"));d=function(){var w=K2(a,"aevt");return null==w?null:L2(function(x){return r[x]},w)}();var n=function(){var w=K2(a,"avet");return null==w?null:L2(function(x){return r[x]},w)}();b=$APP.pl.l($APP.C([new $APP.k(null,2,[e_,K2(a,"branching-factor"),f_,function(){var w=K2(a,"ref-type");return null==w?null:$APP.Ji.g(w)}()],null),$APP.ai(b,new $APP.H(null,2,5,$APP.I,[e_,f_],null))]));return u1(new $APP.k(null,6,[$APP.M_,f,$APP.N_,ZZ(r_,r,b),O_,ZZ(s_,
d,b),F_,ZZ(t_,n,b),P_,K2(a,"max-eid"),Q_,K2(a,"max-tx")],null))};R5.A=2;$APP.g=X2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){return $APP.D.j(this.o,b,c)};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Placeholder{",", ","}",c,$APP.K.h($APP.qg,this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,0,$APP.qg,$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new X2(this.B,this.o,this.D)};$APP.g.aa=function(){return 0+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-528488587^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue($APP.di,b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new X2(this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){return $APP.ue(this.o,b)};$APP.g.U=function(a,b,c){return new X2(this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.qg,this.o))};$APP.g.X=function(a,b){return new X2(b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};
$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return c};$APP.g.wb=function(a,b){return b};$APP.g=Y2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "symbol":return this.La;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Variable{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.cm,this.La],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.cm],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new Y2(this.La,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=736891289^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.La,b.La)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[$APP.cm,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new Y2(this.La,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "symbol":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.cm,b):$APP.bf.call(null,$APP.cm,b))?new Y2(c,this.B,this.o,null):new Y2(this.La,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve($APP.cm,this.La,null)],null),this.o))};$APP.g.X=function(a,b){return new Y2(this.La,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.La,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.La):P3.call(null,b,this.La)};$APP.g=Z2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "symbol":return this.La;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.SrcVar{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.cm,this.La],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.cm],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new Z2(this.La,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1648766309^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.La,b.La)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[$APP.cm,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new Z2(this.La,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "symbol":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.cm,b):$APP.bf.call(null,$APP.cm,b))?new Z2(c,this.B,this.o,null):new Z2(this.La,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve($APP.cm,this.La,null)],null),this.o))};$APP.g.X=function(a,b){return new Z2(this.La,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;
$APP.g.vb=function(a,b,c){return S2(b,this.La,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.La):P3.call(null,b,this.La)};$APP.g=$2.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){return $APP.D.j(this.o,b,c)};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.DefaultSrc{",", ","}",c,$APP.K.h($APP.qg,this.o))};$APP.g.ga=function(){return new $APP.Yg(this,0,$APP.qg,$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new $2(this.B,this.o,this.D)};$APP.g.aa=function(){return 0+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-350962559^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue($APP.di,b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new $2(this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){return $APP.ue(this.o,b)};$APP.g.U=function(a,b,c){return new $2(this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.qg,this.o))};$APP.g.X=function(a,b){return new $2(b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return c};$APP.g.wb=function(a,b){return b};$APP.g=a3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){return $APP.D.j(this.o,b,c)};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.RulesVar{",", ","}",c,$APP.K.h($APP.qg,this.o))};$APP.g.ga=function(){return new $APP.Yg(this,0,$APP.qg,$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new a3(this.B,this.o,this.D)};$APP.g.aa=function(){return 0+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1504050517^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue($APP.di,b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new a3(this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){return $APP.ue(this.o,b)};$APP.g.U=function(a,b,c){return new a3(this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.qg,this.o))};$APP.g.X=function(a,b){return new a3(b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return c};$APP.g.wb=function(a,b){return b};$APP.g=b3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "value":return this.value;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Constant{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.YI,this.value],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.YI],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new b3(this.value,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-812884714^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.value,b.value)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[$APP.YI,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new b3(this.value,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "value":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.YI,b):$APP.bf.call(null,$APP.YI,b))?new b3(c,this.B,this.o,null):new b3(this.value,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve($APP.YI,this.value,null)],null),this.o))};$APP.g.X=function(a,b){return new b3(this.value,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;
$APP.g.vb=function(a,b,c){return S2(b,this.value,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.value):P3.call(null,b,this.value)};$APP.g=c3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "symbol":return this.La;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.PlainSymbol{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.cm,this.La],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.cm],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new c3(this.La,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1509921913^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.La,b.La)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[$APP.cm,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new c3(this.La,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "symbol":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.cm,b):$APP.bf.call(null,$APP.cm,b))?new c3(c,this.B,this.o,null):new c3(this.La,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve($APP.cm,this.La,null)],null),this.o))};$APP.g.X=function(a,b){return new c3(this.La,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.La,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.La):P3.call(null,b,this.La)};$APP.g=i3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "required":return this.required;case "free":return this.Nd;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.RuleVars{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.$F,this.required],null),new $APP.H(null,2,5,$APP.I,[k3,this.Nd],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.$F,k3],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new i3(this.required,this.Nd,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=892963297^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.required,b.required)&&$APP.z.h(this.Nd,b.Nd)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,2,[k3,null,$APP.$F,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new i3(this.required,this.Nd,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "required":case "free":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.$F,b):$APP.bf.call(null,$APP.$F,b))?new i3(c,this.Nd,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(k3,b):$APP.bf.call(null,k3,b))?new i3(this.required,c,this.B,this.o,null):new i3(this.required,this.Nd,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.ve($APP.$F,this.required,null),new $APP.ve(k3,this.Nd,null)],null),this.o))};$APP.g.X=function(a,b){return new i3(this.required,this.Nd,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.Nd,S2(b,this.required,c))};
$APP.g.wb=function(a,b){a=P3.h?P3.h(b,this.required):P3.call(null,b,this.required);b=this.Nd;return P3.h?P3.h(a,b):P3.call(null,a,b)};$APP.g=n3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){return $APP.D.j(this.o,b,c)};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.BindIgnore{",", ","}",c,$APP.K.h($APP.qg,this.o))};$APP.g.ga=function(){return new $APP.Yg(this,0,$APP.qg,$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new n3(this.B,this.o,this.D)};$APP.g.aa=function(){return 0+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-890522983^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue($APP.di,b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new n3(this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){return $APP.ue(this.o,b)};$APP.g.U=function(a,b,c){return new n3(this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h($APP.qg,this.o))};$APP.g.X=function(a,b){return new n3(b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return c};$APP.g.wb=function(a,b){return b};$APP.g=o3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "variable":return this.Tb;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.BindScalar{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[g4,this.Tb],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[g4],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new o3(this.Tb,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1522792445^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.Tb,b.Tb)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[g4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new o3(this.Tb,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "variable":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(g4,b):$APP.bf.call(null,g4,b))?new o3(c,this.B,this.o,null):new o3(this.Tb,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve(g4,this.Tb,null)],null),this.o))};$APP.g.X=function(a,b){return new o3(this.Tb,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.Tb,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.Tb):P3.call(null,b,this.Tb)};$APP.g=p3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "bindings":return this.yc;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.BindTuple{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.Fp,this.yc],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.Fp],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new p3(this.yc,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1637239347^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.yc,b.yc)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[$APP.Fp,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new p3(this.yc,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "bindings":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.Fp,b):$APP.bf.call(null,$APP.Fp,b))?new p3(c,this.B,this.o,null):new p3(this.yc,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve($APP.Fp,this.yc,null)],null),this.o))};$APP.g.X=function(a,b){return new p3(this.yc,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.yc,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.yc):P3.call(null,b,this.yc)};$APP.g=q3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "binding":return this.Rb;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.BindColl{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[O4,this.Rb],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[O4],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new q3(this.Rb,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1930368089^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.Rb,b.Rb)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[O4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new q3(this.Rb,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "binding":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(O4,b):$APP.bf.call(null,O4,b))?new q3(c,this.B,this.o,null):new q3(this.Rb,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve(O4,this.Rb,null)],null),this.o))};$APP.g.X=function(a,b){return new q3(this.Rb,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.Rb,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.Rb):P3.call(null,b,this.Rb)};
Y2.prototype.Wg=function(){return new $APP.H(null,1,5,$APP.I,[this.La],null)};$APP.g=u3.prototype;$APP.g.Wg=function(){return t3($APP.Rd(this.xa))};$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "fn":return this.ha;case "args":return this.xa;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Aggregate{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.bo,this.ha],null),new $APP.H(null,2,5,$APP.I,[$APP.Gm,this.xa],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.bo,$APP.Gm],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new u3(this.ha,this.xa,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-91097383^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ha,b.ha)&&$APP.z.h(this.xa,b.xa)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,2,[$APP.Gm,null,$APP.bo,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new u3(this.ha,this.xa,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "fn":case "args":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.bo,b):$APP.bf.call(null,$APP.bo,b))?new u3(c,this.xa,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.Gm,b):$APP.bf.call(null,$APP.Gm,b))?new u3(this.ha,c,this.B,this.o,null):new u3(this.ha,this.xa,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.ve($APP.bo,this.ha,null),new $APP.ve($APP.Gm,this.xa,null)],null),this.o))};
$APP.g.X=function(a,b){return new u3(this.ha,this.xa,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.xa,S2(b,this.ha,c))};$APP.g.wb=function(a,b){a=P3.h?P3.h(b,this.ha):P3.call(null,b,this.ha);b=this.xa;return P3.h?P3.h(a,b):P3.call(null,a,b)};$APP.g=v3.prototype;$APP.g.Wg=function(){return t3(this.Tb)};$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "source":return this.source;case "variable":return this.Tb;case "pattern":return this.pattern;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Pull{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.ol,this.source],null),new $APP.H(null,2,5,$APP.I,[g4,this.Tb],null),new $APP.H(null,2,5,$APP.I,[W1,this.pattern],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,3,new $APP.H(null,3,5,$APP.I,[$APP.ol,g4,W1],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new v3(this.source,this.Tb,this.pattern,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-2108867663^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.source,b.source)&&$APP.z.h(this.Tb,b.Tb)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,3,[g4,null,$APP.ol,null,W1,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new v3(this.source,this.Tb,this.pattern,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "source":case "variable":case "pattern":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.ol,b):$APP.bf.call(null,$APP.ol,b))?new v3(c,this.Tb,this.pattern,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(g4,b):$APP.bf.call(null,g4,b))?new v3(this.source,c,this.pattern,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(W1,b):$APP.bf.call(null,W1,b))?new v3(this.source,this.Tb,c,this.B,this.o,null):new v3(this.source,this.Tb,this.pattern,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.ve($APP.ol,this.source,null),new $APP.ve(g4,this.Tb,null),new $APP.ve(W1,this.pattern,null)],null),this.o))};$APP.g.X=function(a,b){return new v3(this.source,this.Tb,this.pattern,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.pattern,S2(b,this.Tb,S2(b,this.source,c)))};
$APP.g.wb=function(a,b){a=P3.h?P3.h(b,this.source):P3.call(null,b,this.source);b=this.Tb;a=P3.h?P3.h(a,b):P3.call(null,a,b);b=this.pattern;return P3.h?P3.h(a,b):P3.call(null,a,b)};$APP.g=x3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "elements":return this.elements;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.FindRel{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[X4,this.elements],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[X4],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new x3(this.elements,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=744809563^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.elements,b.elements)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[X4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new x3(this.elements,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.dg=function(){return this.elements};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "elements":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(X4,b):$APP.bf.call(null,X4,b))?new x3(c,this.B,this.o,null):new x3(this.elements,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve(X4,this.elements,null)],null),this.o))};$APP.g.X=function(a,b){return new x3(this.elements,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;
$APP.g.vb=function(a,b,c){return S2(b,this.elements,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.elements):P3.call(null,b,this.elements)};$APP.g=y3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "element":return this.element;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.FindColl{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Y4,this.element],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[Y4],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new y3(this.element,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=124241361^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.element,b.element)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[Y4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new y3(this.element,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.dg=function(){return new $APP.H(null,1,5,$APP.I,[this.element],null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "element":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(Y4,b):$APP.bf.call(null,Y4,b))?new y3(c,this.B,this.o,null):new y3(this.element,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve(Y4,this.element,null)],null),this.o))};
$APP.g.X=function(a,b){return new y3(this.element,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.element,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.element):P3.call(null,b,this.element)};$APP.g=z3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "element":return this.element;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.FindScalar{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Y4,this.element],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[Y4],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new z3(this.element,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-661542332^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.element,b.element)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[Y4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new z3(this.element,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.dg=function(){return new $APP.H(null,1,5,$APP.I,[this.element],null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "element":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(Y4,b):$APP.bf.call(null,Y4,b))?new z3(c,this.B,this.o,null):new z3(this.element,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve(Y4,this.element,null)],null),this.o))};
$APP.g.X=function(a,b){return new z3(this.element,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.element,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.element):P3.call(null,b,this.element)};$APP.g=A3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "elements":return this.elements;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.FindTuple{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[X4,this.elements],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[X4],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new A3(this.elements,this.B,this.o,this.D)};
$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=681530371^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.elements,b.elements)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[X4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new A3(this.elements,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.dg=function(){return this.elements};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "elements":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(X4,b):$APP.bf.call(null,X4,b))?new A3(c,this.B,this.o,null):new A3(this.elements,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve(X4,this.elements,null)],null),this.o))};$APP.g.X=function(a,b){return new A3(this.elements,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.elements,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.elements):P3.call(null,b,this.elements)};$APP.g=D3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "type":return this.type;case "symbols":return this.Sd;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.ReturnMap{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.vl,this.type],null),new $APP.H(null,2,5,$APP.I,[a4,this.Sd],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.vl,a4],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new D3(this.type,this.Sd,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-2025547471^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.type,b.type)&&$APP.z.h(this.Sd,b.Sd)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,2,[$APP.vl,null,a4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new D3(this.type,this.Sd,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "type":case "symbols":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.vl,b):$APP.bf.call(null,$APP.vl,b))?new D3(c,this.Sd,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(a4,b):$APP.bf.call(null,a4,b))?new D3(this.type,c,this.B,this.o,null):new D3(this.type,this.Sd,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.ve($APP.vl,this.type,null),new $APP.ve(a4,this.Sd,null)],null),this.o))};$APP.g.X=function(a,b){return new D3(this.type,this.Sd,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.Sd,S2(b,this.type,c))};
$APP.g.wb=function(a,b){a=P3.h?P3.h(b,this.type):P3.call(null,b,this.type);b=this.Sd;return P3.h?P3.h(a,b):P3.call(null,a,b)};$APP.g=E3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "source":return this.source;case "pattern":return this.pattern;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Pattern{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.ol,this.source],null),new $APP.H(null,2,5,$APP.I,[W1,this.pattern],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.ol,W1],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new E3(this.source,this.pattern,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=575220587^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.source,b.source)&&$APP.z.h(this.pattern,b.pattern)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,2,[$APP.ol,null,W1,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new E3(this.source,this.pattern,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "source":case "pattern":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.ol,b):$APP.bf.call(null,$APP.ol,b))?new E3(c,this.pattern,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(W1,b):$APP.bf.call(null,W1,b))?new E3(this.source,c,this.B,this.o,null):new E3(this.source,this.pattern,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.ve($APP.ol,this.source,null),new $APP.ve(W1,this.pattern,null)],null),this.o))};$APP.g.X=function(a,b){return new E3(this.source,this.pattern,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.pattern,S2(b,this.source,c))};
$APP.g.wb=function(a,b){a=P3.h?P3.h(b,this.source):P3.call(null,b,this.source);b=this.pattern;return P3.h?P3.h(a,b):P3.call(null,a,b)};$APP.g=F3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "fn":return this.ha;case "args":return this.xa;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Predicate{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.bo,this.ha],null),new $APP.H(null,2,5,$APP.I,[$APP.Gm,this.xa],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.bo,$APP.Gm],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new F3(this.ha,this.xa,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-1523376880^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ha,b.ha)&&$APP.z.h(this.xa,b.xa)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,2,[$APP.Gm,null,$APP.bo,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new F3(this.ha,this.xa,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "fn":case "args":return!0;default:return $APP.ue(this.o,b)}};$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.bo,b):$APP.bf.call(null,$APP.bo,b))?new F3(c,this.xa,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.Gm,b):$APP.bf.call(null,$APP.Gm,b))?new F3(this.ha,c,this.B,this.o,null):new F3(this.ha,this.xa,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.ve($APP.bo,this.ha,null),new $APP.ve($APP.Gm,this.xa,null)],null),this.o))};$APP.g.X=function(a,b){return new F3(this.ha,this.xa,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.xa,S2(b,this.ha,c))};
$APP.g.wb=function(a,b){a=P3.h?P3.h(b,this.ha):P3.call(null,b,this.ha);b=this.xa;return P3.h?P3.h(a,b):P3.call(null,a,b)};$APP.g=G3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "fn":return this.ha;case "args":return this.xa;case "binding":return this.Rb;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Function{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.bo,this.ha],null),new $APP.H(null,2,5,$APP.I,[$APP.Gm,this.xa],null),new $APP.H(null,2,5,$APP.I,[O4,this.Rb],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,3,new $APP.H(null,3,5,$APP.I,[$APP.bo,$APP.Gm,O4],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new G3(this.ha,this.xa,this.Rb,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=589494199^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ha,b.ha)&&$APP.z.h(this.xa,b.xa)&&$APP.z.h(this.Rb,b.Rb)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,3,[$APP.Gm,null,$APP.bo,null,O4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new G3(this.ha,this.xa,this.Rb,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "fn":case "args":case "binding":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.bo,b):$APP.bf.call(null,$APP.bo,b))?new G3(c,this.xa,this.Rb,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.Gm,b):$APP.bf.call(null,$APP.Gm,b))?new G3(this.ha,c,this.Rb,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(O4,b):$APP.bf.call(null,O4,b))?new G3(this.ha,this.xa,c,this.B,this.o,null):new G3(this.ha,this.xa,this.Rb,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.ve($APP.bo,this.ha,null),new $APP.ve($APP.Gm,this.xa,null),new $APP.ve(O4,this.Rb,null)],null),this.o))};$APP.g.X=function(a,b){return new G3(this.ha,this.xa,this.Rb,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.Rb,S2(b,this.xa,S2(b,this.ha,c)))};
$APP.g.wb=function(a,b){a=P3.h?P3.h(b,this.ha):P3.call(null,b,this.ha);b=this.xa;a=P3.h?P3.h(a,b):P3.call(null,a,b);b=this.Rb;return P3.h?P3.h(a,b):P3.call(null,a,b)};$APP.g=H3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "source":return this.source;case "name":return this.name;case "args":return this.xa;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.RuleExpr{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.ol,this.source],null),new $APP.H(null,2,5,$APP.I,[$APP.O,this.name],null),new $APP.H(null,2,5,$APP.I,[$APP.Gm,this.xa],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,3,new $APP.H(null,3,5,$APP.I,[$APP.ol,$APP.O,$APP.Gm],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new H3(this.source,this.name,this.xa,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-444662011^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.source,b.source)&&$APP.z.h(this.name,b.name)&&$APP.z.h(this.xa,b.xa)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,3,[$APP.Gm,null,$APP.O,null,$APP.ol,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new H3(this.source,this.name,this.xa,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "source":case "name":case "args":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.ol,b):$APP.bf.call(null,$APP.ol,b))?new H3(c,this.name,this.xa,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.O,b):$APP.bf.call(null,$APP.O,b))?new H3(this.source,c,this.xa,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.Gm,b):$APP.bf.call(null,$APP.Gm,b))?new H3(this.source,this.name,c,this.B,this.o,null):new H3(this.source,this.name,this.xa,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.ve($APP.ol,this.source,null),new $APP.ve($APP.O,this.name,null),new $APP.ve($APP.Gm,this.xa,null)],null),this.o))};$APP.g.X=function(a,b){return new H3(this.source,this.name,this.xa,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.xa,S2(b,this.name,S2(b,this.source,c)))};
$APP.g.wb=function(a,b){a=P3.h?P3.h(b,this.source):P3.call(null,b,this.source);b=this.name;a=P3.h?P3.h(a,b):P3.call(null,a,b);b=this.xa;return P3.h?P3.h(a,b):P3.call(null,a,b)};$APP.g=I3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "source":return this.source;case "vars":return this.Ub;case "clauses":return this.Ca;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Not{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.ol,this.source],null),new $APP.H(null,2,5,$APP.I,[$APP.RH,this.Ub],null),new $APP.H(null,2,5,$APP.I,[$APP.JL,this.Ca],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,3,new $APP.H(null,3,5,$APP.I,[$APP.ol,$APP.RH,$APP.JL],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new I3(this.source,this.Ub,this.Ca,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1394671061^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.source,b.source)&&$APP.z.h(this.Ub,b.Ub)&&$APP.z.h(this.Ca,b.Ca)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,3,[$APP.ol,null,$APP.JL,null,$APP.RH,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new I3(this.source,this.Ub,this.Ca,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "source":case "vars":case "clauses":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.ol,b):$APP.bf.call(null,$APP.ol,b))?new I3(c,this.Ub,this.Ca,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.RH,b):$APP.bf.call(null,$APP.RH,b))?new I3(this.source,c,this.Ca,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.JL,b):$APP.bf.call(null,$APP.JL,b))?new I3(this.source,this.Ub,c,this.B,this.o,null):new I3(this.source,this.Ub,this.Ca,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.ve($APP.ol,this.source,null),new $APP.ve($APP.RH,this.Ub,null),new $APP.ve($APP.JL,this.Ca,null)],null),this.o))};$APP.g.X=function(a,b){return new I3(this.source,this.Ub,this.Ca,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.Ca,S2(b,this.Ub,S2(b,this.source,c)))};
$APP.g.wb=function(a,b){a=P3.h?P3.h(b,this.source):P3.call(null,b,this.source);b=this.Ub;a=P3.h?P3.h(a,b):P3.call(null,a,b);b=this.Ca;return P3.h?P3.h(a,b):P3.call(null,a,b)};$APP.g=J3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "source":return this.source;case "rule-vars":return this.qd;case "clauses":return this.Ca;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Or{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.ol,this.source],null),new $APP.H(null,2,5,$APP.I,[N3,this.qd],null),new $APP.H(null,2,5,$APP.I,[$APP.JL,this.Ca],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,3,new $APP.H(null,3,5,$APP.I,[$APP.ol,N3,$APP.JL],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new J3(this.source,this.qd,this.Ca,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1461934571^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.source,b.source)&&$APP.z.h(this.qd,b.qd)&&$APP.z.h(this.Ca,b.Ca)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,3,[N3,null,$APP.ol,null,$APP.JL,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new J3(this.source,this.qd,this.Ca,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "source":case "rule-vars":case "clauses":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.ol,b):$APP.bf.call(null,$APP.ol,b))?new J3(c,this.qd,this.Ca,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(N3,b):$APP.bf.call(null,N3,b))?new J3(this.source,c,this.Ca,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.JL,b):$APP.bf.call(null,$APP.JL,b))?new J3(this.source,this.qd,c,this.B,this.o,null):new J3(this.source,this.qd,this.Ca,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.ve($APP.ol,this.source,null),new $APP.ve(N3,this.qd,null),new $APP.ve($APP.JL,this.Ca,null)],null),this.o))};$APP.g.X=function(a,b){return new J3(this.source,this.qd,this.Ca,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.Ca,S2(b,this.qd,S2(b,this.source,c)))};
$APP.g.wb=function(a,b){a=P3.h?P3.h(b,this.source):P3.call(null,b,this.source);b=this.qd;a=P3.h?P3.h(a,b):P3.call(null,a,b);b=this.Ca;return P3.h?P3.h(a,b):P3.call(null,a,b)};$APP.g=K3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "clauses":return this.Ca;default:return $APP.D.j(this.o,b,c)}};
$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.And{",", ","}",c,$APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.JL,this.Ca],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,1,new $APP.H(null,1,5,$APP.I,[$APP.JL],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new K3(this.Ca,this.B,this.o,this.D)};$APP.g.aa=function(){return 1+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-131856804^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.Ca,b.Ca)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,1,[$APP.JL,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new K3(this.Ca,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "clauses":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.JL,b):$APP.bf.call(null,$APP.JL,b))?new K3(c,this.B,this.o,null):new K3(this.Ca,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,1,5,$APP.I,[new $APP.ve($APP.JL,this.Ca,null)],null),this.o))};$APP.g.X=function(a,b){return new K3(this.Ca,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;
$APP.g.vb=function(a,b,c){return S2(b,this.Ca,c)};$APP.g.wb=function(a,b){return P3.h?P3.h(b,this.Ca):P3.call(null,b,this.Ca)};var P3=function P3(a,b){return b instanceof Y2?$APP.We.h(a,b):b instanceof I3?$APP.fh.h(a,b.Ub):b instanceof J3?(b=b.qd,P3.h?P3.h(a,b):P3.call(null,a,b)):(null!=b?$APP.cd===b.ub||(b.yd?0:$APP.ob(N2,b)):$APP.ob(N2,b))?P2(b,a):$APP.de(b)?$APP.De.j(P3,a,b):a};$APP.g=R3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "vars":return this.Ub;case "clauses":return this.Ca;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.RuleBranch{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.RH,this.Ub],null),new $APP.H(null,2,5,$APP.I,[$APP.JL,this.Ca],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.RH,$APP.JL],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new R3(this.Ub,this.Ca,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1024755006^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.Ub,b.Ub)&&$APP.z.h(this.Ca,b.Ca)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,2,[$APP.JL,null,$APP.RH,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new R3(this.Ub,this.Ca,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "vars":case "clauses":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.RH,b):$APP.bf.call(null,$APP.RH,b))?new R3(c,this.Ca,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.JL,b):$APP.bf.call(null,$APP.JL,b))?new R3(this.Ub,c,this.B,this.o,null):new R3(this.Ub,this.Ca,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.ve($APP.RH,this.Ub,null),new $APP.ve($APP.JL,this.Ca,null)],null),this.o))};
$APP.g.X=function(a,b){return new R3(this.Ub,this.Ca,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.Ca,S2(b,this.Ub,c))};$APP.g.wb=function(a,b){return P3(P3(b,this.Ub),this.Ca)};$APP.g=S3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "name":return this.name;case "branches":return this.Hd;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Rule{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.O,this.name],null),new $APP.H(null,2,5,$APP.I,[S4,this.Hd],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,2,new $APP.H(null,2,5,$APP.I,[$APP.O,S4],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new S3(this.name,this.Hd,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=-900273052^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.name,b.name)&&$APP.z.h(this.Hd,b.Hd)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,2,[$APP.O,null,S4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new S3(this.name,this.Hd,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "name":case "branches":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h($APP.O,b):$APP.bf.call(null,$APP.O,b))?new S3(c,this.Hd,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(S4,b):$APP.bf.call(null,S4,b))?new S3(this.name,c,this.B,this.o,null):new S3(this.name,this.Hd,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.ve($APP.O,this.name,null),new $APP.ve(S4,this.Hd,null)],null),this.o))};
$APP.g.X=function(a,b){return new S3(this.name,this.Hd,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.Hd,S2(b,this.name,c))};$APP.g.wb=function(a,b){return P3(P3(b,this.name),this.Hd)};$APP.g=U3.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "qfind":return this.ed;case "qwith":return this.jd;case "qreturn-map":return this.gd;case "qin":return this.fd;case "qwhere":return this.hd;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.parser.Query{",", ","}",c,$APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[V3,this.ed],null),new $APP.H(null,2,5,$APP.I,[W3,this.jd],null),new $APP.H(null,2,5,$APP.I,[X3,this.gd],null),new $APP.H(null,2,5,$APP.I,[Y3,this.fd],null),new $APP.H(null,2,5,$APP.I,[Z3,this.hd],null)],null),this.o))};
$APP.g.ga=function(){return new $APP.Yg(this,5,new $APP.H(null,5,5,$APP.I,[V3,W3,X3,Y3,Z3],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};$APP.g.ba=function(){return new U3(this.ed,this.jd,this.gd,this.fd,this.hd,this.B,this.o,this.D)};$APP.g.aa=function(){return 5+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=181307977^$APP.rd(this)};
$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.ed,b.ed)&&$APP.z.h(this.jd,b.jd)&&$APP.z.h(this.gd,b.gd)&&$APP.z.h(this.fd,b.fd)&&$APP.z.h(this.hd,b.hd)&&$APP.z.h(this.o,b.o)};$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,5,[V3,null,Z3,null,Y3,null,W3,null,X3,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new U3(this.ed,this.jd,this.gd,this.fd,this.hd,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};
$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "qfind":case "qwith":case "qreturn-map":case "qin":case "qwhere":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(V3,b):$APP.bf.call(null,V3,b))?new U3(c,this.jd,this.gd,this.fd,this.hd,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(W3,b):$APP.bf.call(null,W3,b))?new U3(this.ed,c,this.gd,this.fd,this.hd,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(X3,b):$APP.bf.call(null,X3,b))?new U3(this.ed,this.jd,c,this.fd,this.hd,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(Y3,b):$APP.bf.call(null,Y3,b))?new U3(this.ed,this.jd,this.gd,c,this.hd,this.B,this.o,
null):$APP.l($APP.bf.h?$APP.bf.h(Z3,b):$APP.bf.call(null,Z3,b))?new U3(this.ed,this.jd,this.gd,this.fd,c,this.B,this.o,null):new U3(this.ed,this.jd,this.gd,this.fd,this.hd,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,5,5,$APP.I,[new $APP.ve(V3,this.ed,null),new $APP.ve(W3,this.jd,null),new $APP.ve(X3,this.gd,null),new $APP.ve(Y3,this.fd,null),new $APP.ve(Z3,this.hd,null)],null),this.o))};
$APP.g.X=function(a,b){return new U3(this.ed,this.jd,this.gd,this.fd,this.hd,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g.ub=$APP.cd;$APP.g.vb=function(a,b,c){return S2(b,this.hd,S2(b,this.fd,S2(b,this.gd,S2(b,this.jd,S2(b,this.ed,c)))))};$APP.g.wb=function(a,b){return P3(P3(P3(P3(P3(b,this.ed),this.jd),this.gd),this.fd),this.hd)};var xWa=TY();$APP.g=b4.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "rels":return this.je;case "sources":return this.sources;case "rules":return this.rules;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.query.Context{",", ","}",c,$APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[i4,this.je],null),new $APP.H(null,2,5,$APP.I,[h4,this.sources],null),new $APP.H(null,2,5,$APP.I,[$APP.IE,this.rules],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,3,new $APP.H(null,3,5,$APP.I,[i4,h4,$APP.IE],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new b4(this.je,this.sources,this.rules,this.B,this.o,this.D)};$APP.g.aa=function(){return 3+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1014232958^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.je,b.je)&&$APP.z.h(this.sources,b.sources)&&$APP.z.h(this.rules,b.rules)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,3,[h4,null,$APP.IE,null,i4,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new b4(this.je,this.sources,this.rules,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "rels":case "sources":case "rules":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(i4,b):$APP.bf.call(null,i4,b))?new b4(c,this.sources,this.rules,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(h4,b):$APP.bf.call(null,h4,b))?new b4(this.je,c,this.rules,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h($APP.IE,b):$APP.bf.call(null,$APP.IE,b))?new b4(this.je,this.sources,c,this.B,this.o,null):new b4(this.je,this.sources,this.rules,this.B,$APP.$h.j(this.o,b,c),null)};
$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,3,5,$APP.I,[new $APP.ve(i4,this.je,null),new $APP.ve(h4,this.sources,null),new $APP.ve($APP.IE,this.rules,null)],null),this.o))};$APP.g.X=function(a,b){return new b4(this.je,this.sources,this.rules,b,this.o,this.D)};$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};$APP.g=c4.prototype;$APP.g.fa=function(a,b){return this.N(null,b,null)};
$APP.g.N=function(a,b,c){switch(b instanceof $APP.G?b.S:null){case "attrs":return this.qa;case "tuples":return this.Ce;default:return $APP.D.j(this.o,b,c)}};$APP.g.la=function(a,b,c){return $APP.De.j(function(d,e){var f=$APP.A.j(e,0,null);e=$APP.A.j(e,1,null);return b.j?b.j(d,f,e):b.call(null,d,f,e)},c,this)};
$APP.g.V=function(a,b,c){return $APP.Ei(b,function(d){return $APP.Ei(b,$APP.Hi,""," ","",c,d)},"#datascript.query.Relation{",", ","}",c,$APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[e2,this.qa],null),new $APP.H(null,2,5,$APP.I,[m4,this.Ce],null)],null),this.o))};$APP.g.ga=function(){return new $APP.Yg(this,2,new $APP.H(null,2,5,$APP.I,[e2,m4],null),$APP.l(this.o)?$APP.Sc(this.o):$APP.Cf())};$APP.g.W=function(){return this.B};
$APP.g.ba=function(){return new c4(this.qa,this.Ce,this.B,this.o,this.D)};$APP.g.aa=function(){return 2+$APP.Gd(this.o)};$APP.g.Y=function(){var a=this.D;return null!=a?a:this.D=a=1107093117^$APP.rd(this)};$APP.g.R=function(a,b){return null!=b&&this.constructor===b.constructor&&$APP.z.h(this.qa,b.qa)&&$APP.z.h(this.Ce,b.Ce)&&$APP.z.h(this.o,b.o)};
$APP.g.sa=function(a,b){return $APP.ue(new $APP.ci(null,new $APP.k(null,2,[m4,null,e2,null],null),null),b)?$APP.ql.h($APP.ac($APP.fh.h($APP.wf,this),this.B),b):new c4(this.qa,this.Ce,this.B,$APP.yf($APP.ql.h(this.o,b)),null)};$APP.g.ka=function(a,b){switch(b instanceof $APP.G?b.S:null){case "attrs":case "tuples":return!0;default:return $APP.ue(this.o,b)}};
$APP.g.U=function(a,b,c){return $APP.l($APP.bf.h?$APP.bf.h(e2,b):$APP.bf.call(null,e2,b))?new c4(c,this.Ce,this.B,this.o,null):$APP.l($APP.bf.h?$APP.bf.h(m4,b):$APP.bf.call(null,m4,b))?new c4(this.qa,c,this.B,this.o,null):new c4(this.qa,this.Ce,this.B,$APP.$h.j(this.o,b,c),null)};$APP.g.Z=function(){return $APP.u($APP.K.h(new $APP.H(null,2,5,$APP.I,[new $APP.ve(e2,this.qa,null),new $APP.ve(m4,this.Ce,null)],null),this.o))};$APP.g.X=function(a,b){return new c4(this.qa,this.Ce,b,this.o,this.D)};
$APP.g.ca=function(a,b){return $APP.ie(b)?this.U(null,$APP.Td(b,0),$APP.Td(b,1)):$APP.De.j($APP.Cb,this,b)};
var S5=function S5(a,b){return $APP.z.h($APP.YG,a)?!0:$APP.z.h(new $APP.H(null,1,5,$APP.I,[$APP.SG],null),a)?$APP.de(b):a instanceof $APP.t?$APP.z.h(b,a):$APP.de(a)?$APP.z.h($APP.Rd(a),$APP.SG)?$APP.de(b)&&$APP.Qf(function(d){var e=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);return S5.h?S5.h(e,d):S5.call(null,e,d)},$APP.Ii.j($APP.rv,$APP.ii(a),b)):$APP.de(b)&&$APP.z.h($APP.Gd(b),$APP.Gd(a))&&$APP.Qf(function(d){var e=$APP.A.j(d,0,null);d=$APP.A.j(d,1,null);return S5.h?S5.h(e,d):S5.call(null,e,d)},$APP.Ii.j($APP.rv,
a,b)):a.g?a.g(b):a.call(null,b)},s4=function s4(a,b){var d=$APP.xf(a),e=$APP.D.h(d,e2);d=$APP.D.h(d,m4);var f=$APP.xf(b),h=$APP.D.h(f,e2);f=$APP.D.h(f,m4);if($APP.z.h(e,h))return new c4(e,$APP.fh.h($APP.Fe(d),f),null,null,null);if($APP.ae(d))return b;if($APP.ae(f))return a;if(kSa(e,h)){if($APP.Qf($APP.paa,$APP.Yh(e)))return oSa(e,d,h,f);a=$APP.ki($APP.Wh(e),$APP.$m.C());e=oSa(a,$APP.qg,e,d);return s4.h?s4.h(e,b):s4.call(null,e,b)}throw $APP.Al.h(["Can’t sum relations with different attrs: ",$APP.aj.l($APP.C([e])),
" and ",$APP.aj.l($APP.C([h]))].join(""),new $APP.k(null,1,[$APP.RI,r4],null));},q4=function q4(a){switch(arguments.length){case 0:return q4.C();case 2:return q4.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};q4.C=function(){return new c4($APP.wf,new $APP.H(null,1,5,$APP.I,[[]],null),null,null,null)};
q4.h=function(a,b){var c=$APP.Wh(e2.g(a)),d=$APP.Wh(e2.g(b)),e=$APP.Ee($APP.Ii.h(e2.g(a),c)),f=$APP.Ee($APP.Ii.h(e2.g(b),d));return new c4($APP.ki($APP.K.h(c,d),$APP.$m.C()),$APP.Bc($APP.De.j(function(h,m){return $APP.De.j(function(r,n){return $APP.pg.h(r,nSa(m,e,n,f))},h,m4.g(b))},$APP.zc($APP.qg),m4.g(a))),null,null,null)};q4.A=2;n3.prototype.fg=function(){return q4.C()};
o3.prototype.fg=function(a,b){return new c4($APP.vf([$APP.Ao.h(this,new $APP.H(null,2,5,$APP.I,[g4,$APP.cm],null)),0]),new $APP.H(null,1,5,$APP.I,[$APP.Ar.g(new $APP.H(null,1,5,$APP.I,[b],null))],null),null,null,null)};
q3.prototype.fg=function(a,b){var c=this;if(h_(b))return $APP.ae(b)?pSa(c):$APP.De.h(s4,$APP.Ii.h(function(d){return f4(c.Rb,d)},b));throw $APP.Al.h(["Cannot bind value ",$APP.aj.l($APP.C([b]))," to collection ",$APP.aj.l($APP.C([W2(c)]))].join(""),new $APP.k(null,3,[$APP.RI,xUa,$APP.YI,b,O4,W2(c)],null));};
p3.prototype.fg=function(a,b){if(h_(b)){if($APP.Gd(b)<$APP.Gd(this.yc))throw $APP.Al.h(["Not enough elements in a collection ",$APP.aj.l($APP.C([b]))," to bind tuple ",$APP.aj.l($APP.C([W2(this)]))].join(""),new $APP.k(null,3,[$APP.RI,xUa,$APP.YI,b,O4,W2(this)],null));return $APP.De.h(q4,$APP.Ii.j(function(c,d){return f4(c,d)},this.yc,b))}throw $APP.Al.h(["Cannot bind value ",$APP.aj.l($APP.C([b]))," to tuple ",$APP.aj.l($APP.C([W2(this)]))].join(""),new $APP.k(null,3,[$APP.RI,xUa,$APP.YI,b,O4,W2(this)],
null));};var j4=null,k4=null,KSa=$APP.cj.g(0),v4=function v4(a){switch(arguments.length){case 2:return v4.h(arguments[0],arguments[1]);case 3:return v4.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};v4.h=function(a,b){return v4.j(a,b,b)};
v4.j=function(a,b,c){for(;;){var d=S5,e=b;if($APP.l(function(){var ca=new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.fd,$APP.SG],null)],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}()))return D4(C4(a),$APP.og.h(d4,$APP.Od(b)),b),HSa(a,b);if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.fd,$APP.SG],null),$APP.YG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}()))return D4(C4(a),$APP.og.h(d4,$APP.Od(b)),b),ISa(a,b);if($APP.l(function(){var ca=
new $APP.H(null,2,5,$APP.I,[lSa,$APP.SG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){var f=$APP.u(b);c=$APP.v(f);f=$APP.y(f);var h=k4;k4=$APP.D.h(h4.g(a),c);try{return v4.j(a,f,b)}finally{k4=h}}else{if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[$APP.ss,$APP.SG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){var m=b,r=$APP.u(m),n=$APP.v(r),w=$APP.y(r);f=n;h=w;var x=SSa(C4(a),h,b),B=$APP.Ii.h(function(ca){return function(ea){return E4.h?E4.h(ca,ea):E4.call(null,ca,ea)}}(a,
b,c,m,r,n,w,f,h,x,d,e),h);b=$APP.Ii.h(function(){return function(ca){return $APP.De.h(n4,i4.g(ca))}}(a,b,c,m,r,n,w,f,h,x,B,d,e),B);return $APP.$h.j($APP.v(B),i4,new $APP.H(null,1,5,$APP.I,[$APP.De.h(s4,b)],null))}if($APP.l(function(){var ca=new $APP.H(null,3,5,$APP.I,[Q3,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[$APP.SG],null),$APP.SG],null),$APP.SG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){h=$APP.u(b);f=$APP.v(h);h=$APP.y(h);m=$APP.v(h);f=$APP.y(h);m=$APP.u(m);h=$APP.v(m);
m=$APP.y(m);x=h;h=f;f=C4(a);D4(f,x,c);TSa(f,m,h);c=$APP.Ir.j(Q3,$APP.K.h(x,m),h);f=b;b=c;c=f;continue}else{if($APP.l(function(){var ca=new $APP.H(null,3,5,$APP.I,[Q3,new $APP.H(null,1,5,$APP.I,[$APP.SG],null),$APP.SG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){n=b;w=$APP.u(n);var F=$APP.v(w),M=$APP.y(w);f=F;var U=$APP.v(M),Y=$APP.y(M);m=U;h=Y;var ba=$APP.hi(m);x=TSa(C4(a),ba,h);r=B4(a,ba);B=$APP.Ii.h(function(ca,ea,la,ta,pa,V,P,X,R,W,ja,na,oa,wa,Ca){return function(Ka){return B4(E4.h?
E4.h(Ca,Ka):E4.call(null,Ca,Ka),oa)}}(a,b,c,n,w,F,M,f,U,Y,m,h,ba,x,r,d,e),h);b=$APP.Ii.h(function(){return function(ca){return $APP.De.h(n4,i4.g(ca))}}(a,b,c,n,w,F,M,f,U,Y,m,h,ba,x,r,B,d,e),B);b=$APP.De.h(s4,b);return $APP.Am.F(a,i4,p4,b)}if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[$APP.ns,$APP.SG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}()))return c=$APP.u(b),b=$APP.v(c),c=$APP.y(c),f=b,b=c,$APP.De.j(E4,a,b);if($APP.l(function(){var ca=new $APP.H(null,2,5,$APP.I,[$APP.sz,
$APP.SG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){f=$APP.u(b);b=$APP.v(f);h=$APP.y(f);f=b;b=h;f=C4(a);h=$APP.hi(u4(b));if($APP.ae($APP.ru.h(f,h)))throw $APP.Al.h(["Insufficient bindings: none of ",$APP.aj.l($APP.C([h]))," is bound in ",$APP.aj.l($APP.C([c]))].join(""),new $APP.k(null,2,[$APP.RI,r4,$APP.ly,c],null));x=null;a=$APP.$h.j(a,i4,new $APP.H(null,1,5,$APP.I,[$APP.De.h(n4,i4.g(a))],null));b=$APP.De.j(E4,a,b);b=wSa($APP.v(i4.g(a)),$APP.De.h(n4,i4.g(b)));return $APP.$h.j(a,i4,
new $APP.H(null,1,5,$APP.I,[b],null))}if($APP.l(function(){var ca=new $APP.H(null,3,5,$APP.I,[TRa,new $APP.H(null,1,5,$APP.I,[$APP.SG],null),$APP.SG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}()))return b=$APP.u(b),f=$APP.v(b),b=$APP.y(b),f=$APP.v(b),b=$APP.y(b),m=f,f=C4(a),x=D4(f,m,c),a=$APP.$h.j(a,i4,new $APP.H(null,1,5,$APP.I,[$APP.De.h(n4,i4.g(a))],null)),r=B4(a,m),b=B4($APP.De.j(E4,r,b),m),b=wSa($APP.v(i4.g(a)),$APP.De.h(n4,i4.g(b))),$APP.$h.j(a,i4,new $APP.H(null,1,5,$APP.I,[b],null));
if($APP.l(function(){var ca=new $APP.H(null,1,5,$APP.I,[$APP.SG],null),ea=e;return d.h?d.h(ca,ea):d.call(null,ca,ea)}())){c=k4;b=zSa(c,b);f=CSa(a,c,b);h=j4;j4=(null!=c?$APP.cd===c.Lh||(c.yd?0:$APP.ob(I_,c)):$APP.ob(I_,c))?RSa(c,b):j4;try{return $APP.Am.F(a,i4,p4,f)}finally{j4=h}}else throw Error(["No matching clause: ",$APP.p.g(e)].join(""));}}break}};v4.A=3;
var E4=function E4(a,b){if($APP.l($APP.Vf($APP.tp.h($APP.ae,m4),i4.g(a))))return a;if(JSa(a,b))if(lSa($APP.v(b))){var d=k4;k4=$APP.D.h(h4.g(a),$APP.v(b));try{var e=$APP.y(b);return E4.h?E4.h(a,e):E4.call(null,a,e)}finally{k4=d}}else return $APP.Am.F(a,i4,p4,QSa(a,b));else return v4.h(a,b)};Y2.prototype.gg=function(a,b){return DSa(b,this.La)};Z2.prototype.gg=function(a,b){return $APP.Ao.h(b,new $APP.H(null,2,5,$APP.I,[h4,this.La],null))};
c3.prototype.gg=function(){var a=$APP.D.h(wWa,this.La);return $APP.l(a)?a:null};b3.prototype.gg=function(){return this.value};x3.prototype.hg=function(a,b,c){return null==b?c:bTa(b,c)};y3.prototype.hg=function(a,b,c){return $APP.fh.j($APP.qg,$APP.Ii.g($APP.v),c)};z3.prototype.hg=function(a,b,c){return $APP.Nd(c)};A3.prototype.hg=function(a,b,c){return null!=b?$APP.v(bTa(b,new $APP.H(null,1,5,$APP.I,[$APP.v(c)],null))):$APP.v(c)};
var T5=function T5(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;return T5.l(arguments[0],1<c.length?new $APP.jd(c.slice(1),0,null):null)};
T5.l=function(a,b){var c=RY(xWa,a,function(){return iSa(a)}),d=V3.g(c),e=w3(d),f=$APP.ng.l(t3,$APP.C([w3(d)])),h=$APP.Gd(e),m=W3.g(c);m=$APP.K.h(f,$APP.Ii.h($APP.cm,m));f=$APP.de(a)?aSa(a):a;var r=$APP.EC.g(f);b=tSa(new b4($APP.qg,$APP.wf,$APP.wf,null,null,null),Y3.g(c),b);m=XSa(USa(b,r),m);f=$APP.l(gSa.g(f))?$APP.Qm.h(function(n){return $APP.Fe($APP.Ik.j(n,0,h))},m):m;f=$APP.l($APP.Vf(B3,e))?$Sa(e,b,f):f;e=$APP.l($APP.Vf(DRa,e))?dTa(e,b,f):f;return cTa(d,X3.g(c),e)};T5.A=1;
T5.G=function(a){var b=$APP.v(a);a=$APP.y(a);return this.l(b,a)};var U5=function U5(a){switch(arguments.length){case 0:return U5.C();case 1:return U5.g(arguments[0]);case 2:return U5.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};U5.C=function(){return p0(null,$APP.wf)};U5.g=function(a){return p0(a,$APP.wf)};U5.h=function(a,b){return p0(a,x1(b))};U5.A=2;
var V5=function V5(a){switch(arguments.length){case 1:return V5.g(arguments[0]);case 2:return V5.h(arguments[0],arguments[1]);case 3:return V5.j(arguments[0],arguments[1],arguments[2]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};V5.g=function(a){return r0(a,null,$APP.wf)};V5.h=function(a,b){return r0(a,b,$APP.wf)};V5.j=function(a,b,c){return r0(a,b,x1(c))};V5.A=3;
var W5=function W5(a){switch(arguments.length){case 2:return W5.h(arguments[0],arguments[1]);case 3:return W5.j(arguments[0],arguments[1],arguments[2]);case 4:return W5.F(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return W5.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return W5.ja(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};
W5.h=function(a,b){return B_(a,b,null,null,null,null)};W5.j=function(a,b,c){return B_(a,b,c,null,null,null)};W5.F=function(a,b,c,d){return B_(a,b,c,d,null,null)};W5.P=function(a,b,c,d,e){return B_(a,b,c,d,e,null)};W5.ja=function(a,b,c,d,e,f){return B_(a,b,c,d,e,f)};W5.A=6;
var X5=function X5(a){switch(arguments.length){case 2:return X5.h(arguments[0],arguments[1]);case 3:return X5.j(arguments[0],arguments[1],arguments[2]);case 4:return X5.F(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return X5.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return X5.ja(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};
X5.h=function(a,b){return C_(a,b,null,null,null,null)};X5.j=function(a,b,c){return C_(a,b,c,null,null,null)};X5.F=function(a,b,c,d){return C_(a,b,c,d,null,null)};X5.P=function(a,b,c,d,e){return C_(a,b,c,d,e,null)};X5.ja=function(a,b,c,d,e,f){return C_(a,b,c,d,e,f)};X5.A=6;
var Y5=function Y5(a){switch(arguments.length){case 2:return Y5.h(arguments[0],arguments[1]);case 3:return Y5.j(arguments[0],arguments[1],arguments[2]);case 4:return Y5.F(arguments[0],arguments[1],arguments[2],arguments[3]);case 5:return Y5.P(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);case 6:return Y5.ja(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]);default:throw Error(["Invalid arity: ",$APP.p.g(arguments.length)].join(""));}};
Y5.h=function(a,b){return D_(a,b,null,null,null,null)};Y5.j=function(a,b,c){return D_(a,b,c,null,null,null)};Y5.F=function(a,b,c,d){return D_(a,b,c,d,null,null)};Y5.P=function(a,b,c,d,e){return D_(a,b,c,d,e,null)};Y5.ja=function(a,b,c,d,e,f){return D_(a,b,c,d,e,f)};Y5.A=6;
for(var yWa=$APP.u(new $APP.k(null,2,[YUa,$APP.n_,jWa,$APP.t0],null)),zWa=null,AWa=0,Z5=0;;)if(Z5<AWa){var BWa=zWa.da(null,Z5),CWa=$APP.A.j(BWa,0,null),DWa=$APP.A.j(BWa,1,null),EWa=CWa,FWa=DWa;$APP.D.h($APP.q($APP.dM),EWa);$APP.dj.F($APP.dM,$APP.$h,EWa,FWa);Z5+=1}else{var GWa=$APP.u(yWa);if(GWa){var $5=GWa;if($APP.je($5)){var HWa=$APP.Kc($5),IWa=$APP.Lc($5),JWa=HWa,KWa=$APP.Gd(HWa);yWa=IWa;zWa=JWa;AWa=KWa}else{var LWa=$APP.v($5),MWa=$APP.A.j(LWa,0,null),NWa=$APP.A.j(LWa,1,null),OWa=MWa,PWa=NWa;$APP.D.h($APP.q($APP.dM),
OWa);$APP.dj.F($APP.dM,$APP.$h,OWa,PWa);yWa=$APP.y($5);zWa=null;AWa=0}Z5=0}else break}$APP.cj.g(-1E6);var a6=$APP.GO.h($APP.LJ,null),b6=$APP.GO.h($APP.wL,null),c6=$APP.GO.h(aWa,null),QWa=$APP.GO.h(b5,null),RWa=$APP.Ih([lUa,VUa,uTa,hWa,$APP.tH,OVa,R4,RVa,sUa,WUa,xVa,nUa,yVa,bWa,Q4,KVa,dWa,mWa,nWa,iWa,uVa,VVa,lWa,$APP.oC,eWa,T4,XVa,pVa,ERa,OTa,FVa],[function(){var a=new $APP.hd(function(){return D1},FTa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,lUa,"datascript/core.cljc",60,1,267,267,$APP.md,"Same as [[transact!]], but applies to an immutable database value. Returns transaction report (see [[transact!]]).",
$APP.l(D1)?D1.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return P5},tWa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,VUa,"datascript/core.cljc",
12,1,119,129,$APP.md,'Same as [[pull]], but accepts sequence of ids and returns sequence of maps.\n\n             Usage:\n\n             ```\n             (pull-many db [:db/id :name] [1 2])\n             ; \x3d\x3e [{:db/id 1, :name "Ivan"}\n             ;     {:db/id 2, :name "Oleg"}]\n             ```',$APP.l(P5)?P5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?
$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return L1},JVa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.fm,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,uTa,"datascript/core.cljc",9,1,26,76,g5,$APP.md,"Retrieves an entity by its id from database. Entities are lazy map-like structures to navigate DataScript database content.\n\n             For `eid` pass entity id or lookup attr:\n\n                 (entity db 1)\n                 (entity db [:unique-attr :value])\n\n             If entity does not exist, `nil` is returned:\n\n                 (entity db 100500) ; \x3d\x3e nil\n\n             Creating an entity by id is very cheap, almost no-op, as attr access is on-demand:\n\n                 (entity db 1) ; \x3d\x3e {:db/id 1}\n\n             Entity attributes can be lazily accessed through key lookups:\n\n                 (:attr (entity db 1)) ; \x3d\x3e :value\n                 (get (entity db 1) :attr) ; \x3d\x3e :value\n\n             Cardinality many attributes are returned sequences:\n\n                 (:attrs (entity db 1)) ; \x3d\x3e [:v1 :v2 :v3]\n\n             Reference attributes are returned as another entities:\n\n                 (:ref (entity db 1)) ; \x3d\x3e {:db/id 2}\n                 (:ns/ref (entity db 1)) ; \x3d\x3e {:db/id 2}\n\n             References can be walked backwards by prepending `_` to name part of an attribute:\n\n                 (:_ref (entity db 2)) ; \x3d\x3e [{:db/id 1}]\n                 (:ns/_ref (entity db 2)) ; \x3d\x3e [{:db/id 1}]\n\n             Reverse reference lookup returns sequence of entities unless attribute is marked as `:db/isComponent`:\n\n                 (:_component-ref (entity db 2)) ; \x3d\x3e {:db/id 1}\n\n             Entity gotchas:\n\n             - Entities print as map, but are not exactly maps (they have compatible get interface though).\n             - Entities are effectively immutable “views” into a particular version of a database.\n             - Entities retain reference to the whole database.\n             - You can’t change database through entities, only read.\n             - Creating an entity by id is very cheap, almost no-op (attributes are looked up on demand).\n             - Comparing entities just compares their ids. Be careful when comparing entities taken from different dbs or from different versions of the same db.\n             - Accessed entity attributes are cached on entity itself (except backward references).\n             - When printing, only cached attributes (the ones you have accessed before) are printed. See [[touch]].",
$APP.l(L1)?L1.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return v5},xTa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,hWa,"datascript/core.cljc",
54,1,702,702,$APP.md,"Lazy-loads database from storage. Ultra-fast, fetches the rest as it’s needed",$APP.l(v5)?v5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return T5},sTa,$APP.Ih([$APP.S,$APP.O,
$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,$APP.tH,"datascript/core.cljc",4,1,133,145,$APP.md,'Executes a datalog query. See [docs.datomic.com/on-prem/query.html](https://docs.datomic.com/on-prem/query.html).\n\n          Usage:\n\n          ```\n          (q \'[:find ?value\n               :where [_ :likes ?value]]\n             db)\n          ; \x3d\x3e #{["fries"] ["candy"] ["pie"] ["pizza"]}\n          ```',$APP.l(T5)?T5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?
null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return B5},JUa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,OVa,"datascript/core.cljc",65,1,565,565,$APP.md,"Listen for changes on the given connection. Whenever a transaction is applied to the database via [[transact!]], the callback is called\n   with the transaction report. `key` is any opaque unique value.\n\n   Idempotent. Calling [[listen!]] with the same key twice will override old callback with the new value.\n\n   Returns the key under which this listener is registered. See also [[unlisten!]].",
$APP.l(B5)?B5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return m_},WVa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.fm,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,R4,"datascript/core.cljc",
8,1,181,188,a5,$APP.md,"Low-level fn to create raw datoms.\n\n             Optionally with transaction id (number) and `added` flag (`true` for addition, `false` for retraction).\n\n             See also [[init-db]].",$APP.l(m_)?m_.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?
$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return E1},QUa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.fm,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,RVa,"datascript/core.cljc",50,1,271,271,Z4,$APP.md,"Applies transaction to an immutable db value, returning new immutable db value. Same as `(:db-after (with db tx-data))`.",$APP.l(E1)?E1.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,
$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return fTa},GUa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,sUa,"datascript/core.cljc",18,1,412,412,$APP.J(new $APP.H(null,4,5,$APP.I,[Q4,K4,$APP.mw,$APP.$I],null)),'Returns part of `:avet` index between `[_ attr start]` and `[_ attr end]` in AVET sort order.\n\n   Same properties as [[datoms]].\n\n   `attr` must be a reference, unique attribute or marked as `:db/index true`.\n\n   Usage:\n\n       (index-range db :likes "a" "zzzzzzzzz")\n       ; \x3d\x3e (#datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       (index-range db :likes "egg" "pineapple")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [2 :likes "pie"])\n\n   Useful patterns:\n\n       ; find all entities with age in a specific range (inclusive)\n       (-\x3e\x3e (index-range db :age 18 60) (map :e))',
$APP.l(fTa)?fTa.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return I1},sVa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,WUa,"datascript/core.cljc",
39,1,446,446,$APP.md,"Creates a mutable reference to a given immutable database. See [[create-conn]].",$APP.l(I1)?I1.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return y5},YVa,$APP.Ih([$APP.S,$APP.O,
$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,xVa,"datascript/core.cljc",59,1,466,466,$APP.md,"Lazy-load database from storage and make conn out of it.\n   Returns nil if there’s no database yet in storage",$APP.l(y5)?y5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?
e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return A5},ETa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,nUa,"datascript/core.cljc",61,1,558,558,$APP.md,"Forces underlying `conn` value to become `db`. Will generate a tx-report that will remove everything from old value and insert everything from the new one.",$APP.l(A5)?A5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,
4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return z5},hUa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,yVa,"datascript/core.cljc",69,1,471,471,$APP.md,'Applies transaction the underlying database value and atomically updates connection reference to point to the result of that transaction, new db value.\n\n   Returns transaction report, a map:\n\n       {:db-before ...      ; db value before transaction\n        :db-after  ...      ; db value after transaction\n        :tx-data   [...]    ; plain datoms that were added/retracted from db-before\n        :tempids   {...}    ; map of tempid from tx-data \x3d\x3e assigned entid in db-after\n        :tx-meta   tx-meta} ; the exact value you passed as `tx-meta`\n\n  Note! `conn` will be updated in-place and is not returned from [[transact!]].\n\n  Usage:\n\n      ; add a single datom to an existing entity (1)\n      (transact! conn [[:db/add 1 :name "Ivan"]])\n\n      ; retract a single datom\n      (transact! conn [[:db/retract 1 :name "Ivan"]])\n\n      ; retract single entity attribute\n      (transact! conn [[:db.fn/retractAttribute 1 :name]])\n\n      ; ... or equivalently (since Datomic changed its API to support this):\n      (transact! conn [[:db/retract 1 :name]])\n\n      ; retract all entity attributes (effectively deletes entity)\n      (transact! conn [[:db.fn/retractEntity 1]])\n\n      ; create a new entity (`-1`, as any other negative value, is a tempid\n      ; that will be replaced with DataScript to a next unused eid)\n      (transact! conn [[:db/add -1 :name "Ivan"]])\n\n      ; check assigned id (here `*1` is a result returned from previous `transact!` call)\n      (def report *1)\n      (:tempids report) ; \x3d\x3e {-1 296}\n\n      ; check actual datoms inserted\n      (:tx-data report) ; \x3d\x3e [#datascript/Datom [296 :name "Ivan"]]\n\n      ; tempid can also be a string\n      (transact! conn [[:db/add "ivan" :name "Ivan"]])\n      (:tempids *1) ; \x3d\x3e {"ivan" 297}\n\n      ; reference another entity (must exist)\n      (transact! conn [[:db/add -1 :friend 296]])\n\n      ; create an entity and set multiple attributes (in a single transaction\n      ; equal tempids will be replaced with the same yet unused entid)\n      (transact! conn [[:db/add -1 :name "Ivan"]\n                       [:db/add -1 :likes "fries"]\n                       [:db/add -1 :likes "pizza"]\n                       [:db/add -1 :friend 296]])\n\n      ; create an entity and set multiple attributes (alternative map form)\n      (transact! conn [{:db/id  -1\n                        :name   "Ivan"\n                        :likes  ["fries" "pizza"]\n                        :friend 296}])\n\n      ; update an entity (alternative map form). Can’t retract attributes in\n      ; map form. For cardinality many attrs, value (fish in this example)\n      ; will be added to the list of existing values\n      (transact! conn [{:db/id  296\n                        :name   "Oleg"\n                        :likes  ["fish"]}])\n\n      ; ref attributes can be specified as nested map, that will create nested entity as well\n      (transact! conn [{:db/id  -1\n                        :name   "Oleg"\n                        :friend {:db/id -2\n                                 :name "Sergey"}}])\n\n      ; reverse attribute name can be used if you want created entity to become\n      ; a value in another entity reference\n      (transact! conn [{:db/id  -1\n                        :name   "Oleg"\n                        :_friend 296}])\n      ; equivalent to\n      (transact! conn [{:db/id  -1, :name   "Oleg"}\n                       {:db/id 296, :friend -1}])\n      ; equivalent to\n      (transact! conn [[:db/add  -1 :name   "Oleg"]\n                       [:db/add 296 :friend -1]])',
$APP.l(z5)?z5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return h5},iTa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,bWa,"datascript/core.cljc",
38,1,677,677,$APP.md,"Generates a UUID that grow with time. Such UUIDs will always go to the end  of the index and that will minimize insertions in the middle.\n\n   Consist of 64 bits of current UNIX timestamp (in seconds) and 64 random bits (2^64 different unique values per second).",$APP.l(h5)?h5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):
$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return gTa},MTa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.fm,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,Q4,"datascript/core.cljc",13,1,617,617,Z4,$APP.J(new $APP.H(null,1,5,$APP.I,[vUa],null)),"Returns the underlying immutable database value from a connection.\n\n   Exists for Datomic API compatibility. Prefer using `@conn` directly if possible.",
$APP.l(gTa)?gTa.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return Q5},STa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,KVa,"datascript/core.cljc",
15,1,206,218,$APP.md,"Converts db into a data structure (not string!) that can be fed to serializer\n             of your choice (e.g. `js/JSON.stringify` in CLJS, `cheshire.core/generate-string`\n             or `jsonista.core/write-value-as-string` in CLJ).\n\n             On JVM, `serializable` holds a global lock that prevents any two serializations\n             to run in parallel (an implementation constraint, be aware).\n\n             Options:\n\n             `:freeze-fn` Non-primitive values will be serialized using this. Optional.\n             `pr-str` by default.",
$APP.l(Q5)?Q5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return w5},qUa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,dWa,"datascript/core.cljc",
84,1,450,450,$APP.md,"Creates an empty DB and a mutable reference to it. See [[create-conn]].",$APP.l(w5)?w5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return Y5},PTa,$APP.Ih([$APP.S,$APP.O,$APP.xl,
$APP.Uw,$APP.cI,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,mWa,"datascript/core.cljc",19,new $APP.k(null,6,[$APP.wx,!1,$APP.Ur,6,$APP.DK,6,$APP.UJ,new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Q4,$APP.FC],null),new $APP.H(null,3,5,$APP.I,[Q4,$APP.FC,P4],null),new $APP.H(null,4,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB],null),new $APP.H(null,5,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB],null),new $APP.H(null,6,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB,$APP.pB],null)],null),$APP.Z,$APP.J(new $APP.H(null,
2,5,$APP.I,[Q4,$APP.FC],null),new $APP.H(null,3,5,$APP.I,[Q4,$APP.FC,P4],null),new $APP.H(null,4,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB],null),new $APP.H(null,5,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB],null),new $APP.H(null,6,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB,$APP.pB],null)),$APP.CC,$APP.J(null,null,null,null,null)],null),1,404,404,$APP.J(new $APP.H(null,2,5,$APP.I,[Q4,$APP.FC],null),new $APP.H(null,3,5,$APP.I,[Q4,$APP.FC,P4],null),new $APP.H(null,4,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB],null),new $APP.H(null,
5,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB],null),new $APP.H(null,6,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB,$APP.pB],null)),"Same as [[seek-datoms]], but goes backwards until the beginning of the index.",$APP.l(Y5)?Y5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,
b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return R5},eVa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.fm,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,nWa,"datascript/core.cljc",20,1,220,229,Z4,$APP.md,"Creates db from a data structure (not string!) produced by serializable.\n\n             Opts:\n\n             `:thaw-fn` Non-primitive values will be deserialized using this.\n             Must match :freeze-fn from serializable. Optional. `clojure.edn/read-string`\n             by default.",
$APP.l(R5)?R5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return U5},aVa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.cI,$APP.om,$APP.yl,$APP.XL,$APP.fm,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,iWa,"datascript/core.cljc",
19,new $APP.k(null,6,[$APP.wx,!1,$APP.Ur,2,$APP.DK,2,$APP.UJ,new $APP.H(null,3,5,$APP.I,[$APP.qg,new $APP.H(null,1,5,$APP.I,[L4],null),new $APP.H(null,2,5,$APP.I,[L4,$APP.pE],null)],null),$APP.Z,$APP.J($APP.qg,new $APP.H(null,1,5,$APP.I,[L4],null),new $APP.H(null,2,5,$APP.I,[L4,$APP.pE],null)),$APP.CC,$APP.J(null,null,null)],null),1,150,150,Z4,$APP.J($APP.qg,new $APP.H(null,1,5,$APP.I,[L4],null),new $APP.H(null,2,5,$APP.I,[L4,$APP.pE],null)),"Creates an empty database with an optional schema.\n\n   Usage:\n\n   ```\n   (empty-db) ; \x3d\x3e #datascript/DB {:schema {}, :datoms []}\n\n   (empty-db {:likes {:db/cardinality :db.cardinality/many}})\n   ; \x3d\x3e #datascript/DB {:schema {:likes {:db/cardinality :db.cardinality/many}}\n   ;                    :datoms []}\n   ```\n\n   Options are:\n\n   :branching-factor \x3cint\x3e, default 512. B-tree max node length\n   :ref-type         :strong | :soft | :weak, default :soft. How will nodes that are already\n                     stored on disk be referenced. Soft or weak means they might be unloaded\n                     from memory under memory pressure and later fetched from storage again.\n   :storage          \x3cIStorage\x3e. Will be used to store this db later with `(d/store db)`",
$APP.l(U5)?U5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return V5},mVa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.cI,$APP.om,$APP.yl,$APP.XL,$APP.fm,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,uVa,"datascript/core.cljc",
18,new $APP.k(null,6,[$APP.wx,!1,$APP.Ur,3,$APP.DK,3,$APP.UJ,new $APP.H(null,3,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[T4],null),new $APP.H(null,2,5,$APP.I,[T4,L4],null),new $APP.H(null,3,5,$APP.I,[T4,L4,$APP.pE],null)],null),$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[T4],null),new $APP.H(null,2,5,$APP.I,[T4,L4],null),new $APP.H(null,3,5,$APP.I,[T4,L4,$APP.pE],null)),$APP.CC,$APP.J(null,null,null)],null),1,194,194,Z4,$APP.J(new $APP.H(null,1,5,$APP.I,[T4],null),new $APP.H(null,2,5,$APP.I,[T4,L4],null),
new $APP.H(null,3,5,$APP.I,[T4,L4,$APP.pE],null)),"Low-level fn for creating database quickly from a trusted sequence of datoms.\n   Does no validation on inputs, so `datoms` must be well-formed and match schema.\n   Used internally in db (de)serialization. See also [[datom]].\n   For options, see [[empty-db]]",$APP.l(V5)?V5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?
$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return N1},ATa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.fm,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,VVa,"datascript/core.cljc",8,1,90,100,g5,$APP.md,"Forces all entity attributes to be eagerly fetched and cached. Only usable for debug output.\n\n             Usage:\n\n             ```\n             (entity db 1) ; \x3d\x3e {:db/id 1}\n             (touch (entity db 1)) ; \x3d\x3e {:db/id 1, :dislikes [:pie], :likes [:pizza]}\n             ```",
$APP.l(N1)?N1.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return 536870912},IVa,$APP.Ih([$APP.rt,$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.qx,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[!0,$APP.LJ,
lWa,"datascript/core.cljc",26,1,!0,21,21,$APP.md,null,$APP.l(536870912)?(536870912).I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return eTa},pTa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,
$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,$APP.oC,"datascript/core.cljc",13,1,246,246,$APP.J(new $APP.H(null,2,5,$APP.I,[Q4,$APP.zL],null)),"Returns a view over database that has same interface but only includes datoms for which the `(pred db datom)` is true. Can be applied multiple times.\n\n   Filtered DB gotchas:\n\n   - All operations on filtered database are proxied to original DB, then filter pred is applied.\n   - Not cached. You pay filter penalty every time.\n   - Supports entities, pull, queries, index access.\n   - Does not support [[with]] and [[db-with]].",
$APP.l(eTa)?eTa.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return F1},mUa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,eWa,"datascript/core.cljc",
45,1,693,693,$APP.md,"Stores databases to provided storage. If database was created\n      with :storage option or restored from storage, use single-argument version.\n\n      Subsequent stores are incremental, i.e. only newly added nodes will be actually stored.\n\n      Storing already stored dbs into another storage is not supported (may change).",$APP.l(F1)?F1.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,
$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return W5},HVa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.cI,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,T4,"datascript/core.cljc",13,new $APP.k(null,6,[$APP.wx,!1,$APP.Ur,6,$APP.DK,6,$APP.UJ,new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Q4,$APP.FC],null),new $APP.H(null,
3,5,$APP.I,[Q4,$APP.FC,P4],null),new $APP.H(null,4,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB],null),new $APP.H(null,5,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB],null),new $APP.H(null,6,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB,$APP.pB],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[Q4,$APP.FC],null),new $APP.H(null,3,5,$APP.I,[Q4,$APP.FC,P4],null),new $APP.H(null,4,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB],null),new $APP.H(null,5,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB],null),new $APP.H(null,6,5,$APP.I,[Q4,$APP.FC,
P4,$APP.nB,$APP.oB,$APP.pB],null)),$APP.CC,$APP.J(null,null,null,null,null)],null),1,282,282,$APP.J(new $APP.H(null,2,5,$APP.I,[Q4,$APP.FC],null),new $APP.H(null,3,5,$APP.I,[Q4,$APP.FC,P4],null),new $APP.H(null,4,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB],null),new $APP.H(null,5,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB],null),new $APP.H(null,6,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB,$APP.pB],null)),'Index lookup. Returns a sequence of datoms (lazy iterator over actual DB index) which components (e, a, v) match passed arguments.\n\n   Datoms are sorted in index sort order. Possible `index` values are: `:eavt`, `:aevt`, `:avet`.\n\n   Usage:\n\n       ; find all datoms for entity id \x3d\x3d 1 (any attrs and values)\n       ; sort by attribute, then value\n       (datoms db :eavt 1)\n       ; \x3d\x3e (#datascript/Datom [1 :friends 2]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [1 :name "Ivan"])\n\n       ; find all datoms for entity id \x3d\x3d 1 and attribute \x3d\x3d :likes (any values)\n       ; sorted by value\n       (datoms db :eavt 1 :likes)\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"])\n\n       ; find all datoms for entity id \x3d\x3d 1, attribute \x3d\x3d :likes and value \x3d\x3d "pizza"\n       (datoms db :eavt 1 :likes "pizza")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "pizza"])\n\n       ; find all datoms for attribute \x3d\x3d :likes (any entity ids and values)\n       ; sorted by entity id, then value\n       (datoms db :aevt :likes)\n       ; \x3d\x3e (#datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       ; find all datoms that have attribute \x3d\x3d `:likes` and value \x3d\x3d `"pizza"` (any entity id)\n       ; `:likes` must be a unique attr, reference or marked as `:db/index true`\n       (datoms db :avet :likes "pizza")\n       ; \x3d\x3e (#datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       ; find all datoms sorted by entity id, then attribute, then value\n       (datoms db :eavt) ; \x3d\x3e (...)\n\n   Useful patterns:\n\n       ; get all values of :db.cardinality/many attribute\n       (-\x3e\x3e (datoms db :eavt eid attr) (map :v))\n\n       ; lookup entity ids by attribute value\n       (-\x3e\x3e (datoms db :avet attr value) (map :e))\n\n       ; find all entities with a specific attribute\n       (-\x3e\x3e (datoms db :aevt attr) (map :e))\n\n       ; find “singleton” entity by its attr\n       (-\x3e\x3e (datoms db :aevt attr) first :e)\n\n       ; find N entities with lowest attr value (e.g. 10 earliest posts)\n       (-\x3e\x3e (datoms db :avet attr) (take N))\n\n       ; find N entities with highest attr value (e.g. 10 latest posts)\n       (-\x3e\x3e (datoms db :avet attr) (reverse) (take N))\n\n   Gotchas:\n\n   - Index lookup is usually more efficient than doing a query with a single clause.\n   - Resulting iterator is calculated in constant time and small constant memory overhead.\n   - Iterator supports efficient `first`, `next`, `reverse`, `seq` and is itself a sequence.\n   - Will not return datoms that are not part of the index (e.g. attributes with no `:db/index` in schema when querying `:avet` index).\n     - `:eavt` and `:aevt` contain all datoms.\n     - `:avet` only contains datoms for references, `:db/unique` and `:db/index` attributes.',
$APP.l(W5)?W5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return J1},gUa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,XVa,"datascript/core.cljc",
49,1,562,562,$APP.md,null,$APP.l(J1)?J1.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return X5},yUa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.cI,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,
pVa,"datascript/core.cljc",18,new $APP.k(null,6,[$APP.wx,!1,$APP.Ur,6,$APP.DK,6,$APP.UJ,new $APP.H(null,5,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[Q4,$APP.FC],null),new $APP.H(null,3,5,$APP.I,[Q4,$APP.FC,P4],null),new $APP.H(null,4,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB],null),new $APP.H(null,5,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB],null),new $APP.H(null,6,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB,$APP.pB],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[Q4,$APP.FC],null),new $APP.H(null,3,5,$APP.I,[Q4,
$APP.FC,P4],null),new $APP.H(null,4,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB],null),new $APP.H(null,5,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB],null),new $APP.H(null,6,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB,$APP.pB],null)),$APP.CC,$APP.J(null,null,null,null,null)],null),1,367,367,$APP.J(new $APP.H(null,2,5,$APP.I,[Q4,$APP.FC],null),new $APP.H(null,3,5,$APP.I,[Q4,$APP.FC,P4],null),new $APP.H(null,4,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB],null),new $APP.H(null,5,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB],null),new $APP.H(null,
6,5,$APP.I,[Q4,$APP.FC,P4,$APP.nB,$APP.oB,$APP.pB],null)),'Similar to [[datoms]], but will return datoms starting from specified components and including rest of the database until the end of the index.\n\n   If no datom matches passed arguments exactly, iterator will start from first datom that could be considered “greater” in index order.\n\n   Usage:\n\n       (seek-datoms db :eavt 1)\n       ; \x3d\x3e (#datascript/Datom [1 :friends 2]\n       ;     #datascript/Datom [1 :likes "fries"]\n       ;     #datascript/Datom [1 :likes "pizza"]\n       ;     #datascript/Datom [1 :name "Ivan"]\n       ;     #datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       (seek-datoms db :eavt 1 :name)\n       ; \x3d\x3e (#datascript/Datom [1 :name "Ivan"]\n       ;     #datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       (seek-datoms db :eavt 2)\n       ; \x3d\x3e (#datascript/Datom [2 :likes "candy"]\n       ;     #datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])\n\n       ; no datom [2 :likes "fish"], so starts with one immediately following such in index\n       (seek-datoms db :eavt 2 :likes "fish")\n       ; \x3d\x3e (#datascript/Datom [2 :likes "pie"]\n       ;     #datascript/Datom [2 :likes "pizza"])',
$APP.l(X5)?X5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return O5},UTa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,ERa,"datascript/core.cljc",
7,1,105,117,$APP.md,'Fetches data from database using recursive declarative description. See [docs.datomic.com/on-prem/pull.html](https://docs.datomic.com/on-prem/pull.html).\n\n             Unlike [[entity]], returns plain Clojure map (not lazy).\n\n             Usage:\n\n                 (pull db [:db/id, :name, :likes, {:friends [:db/id :name]}] 1)\n                 ; \x3d\x3e {:db/id   1,\n                 ;     :name    "Ivan"\n                 ;     :likes   [:pizza]\n                 ;     :friends [{:db/id 2, :name "Oleg"}]}',
$APP.l(O5)?O5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return hTa},zUa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,OTa,"datascript/core.cljc",
15,1,735,735,$APP.J(new $APP.H(null,1,5,$APP.I,[Q4],null)),null,$APP.l(hTa)?hTa.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),function(){var a=new $APP.hd(function(){return x5},ZUa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,
$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.LJ,FVa,"datascript/core.cljc",59,1,454,454,$APP.md,"Creates a mutable reference (a “connection”) to an empty immutable database.\n\n   Connections are lightweight in-memory structures (~atoms) with direct support of transaction listeners ([[listen!]], [[unlisten!]]) and other handy DataScript APIs ([[transact!]], [[reset-conn!]], [[db]]).\n\n   To access underlying immutable DB value, deref: `@conn`.\n\n   For list of options, see [[empty-db]].\n\n   If you specify `:storage` option, conn will be stored automatically after each transaction",
$APP.l(x5)?x5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,a6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}()]),SWa=new $APP.k(null,7,[cUa,function(){var a=new $APP.hd(function(){return $APP.t0},LVa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.wL,
cUa,"datascript/db.cljc",21,1,1124,1124,$APP.J(new $APP.H(null,1,5,$APP.I,[new $APP.k(null,1,[$APP.Hy,new $APP.H(null,2,5,$APP.I,[L4,T4],null)],null)],null)),null,$APP.l($APP.t0)?$APP.t0.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),wVa,
function(){var a=new $APP.hd(function(){return $APP.n_},zVa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.fm,$APP.Z,$APP.N,$APP.JC],[$APP.wL,wVa,"datascript/db.cljc",31,1,333,333,a5,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.$J],null)),null,$APP.l($APP.n_)?$APP.n_.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=
$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),nTa,function(){var a=new $APP.hd(function(){return $APP.k_},ITa,$APP.Ih([$APP.Fq,$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[jTa,$APP.wL,nTa,"datascript/db.cljc",15,1,179,181,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.zB],null)),null,$APP.l($APP.k_)?$APP.k_.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),
$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),mTa,function(){var a=new $APP.hd(function(){return $APP.j_},jUa,$APP.Ih([$APP.Fq,$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[jTa,$APP.wL,mTa,"datascript/db.cljc",12,1,179,180,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.zB],null)),null,$APP.l($APP.j_)?$APP.j_.I:null])),b=$APP.q(a),c=$APP.Xd(a);
a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),R4,function(){var a=new $APP.hd(function(){return m_},oVa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.cI,$APP.om,$APP.yl,$APP.XL,$APP.fm,$APP.Z,$APP.N,$APP.JC],[$APP.wL,R4,"datascript/db.cljc",19,new $APP.k(null,6,[$APP.wx,!1,
$APP.Ur,5,$APP.DK,5,$APP.UJ,new $APP.H(null,3,5,$APP.I,[new $APP.H(null,3,5,$APP.I,[$APP.hH,$APP.bH,$APP.wH],null),new $APP.H(null,4,5,$APP.I,[$APP.hH,$APP.bH,$APP.wH,M4],null),new $APP.H(null,5,5,$APP.I,[$APP.hH,$APP.bH,$APP.wH,M4,tTa],null)],null),$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.hH,$APP.bH,$APP.wH],null),new $APP.H(null,4,5,$APP.I,[$APP.hH,$APP.bH,$APP.wH,M4],null),new $APP.H(null,5,5,$APP.I,[$APP.hH,$APP.bH,$APP.wH,M4,tTa],null)),$APP.CC,$APP.J(null,null,null)],null),1,257,257,a5,
$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.hH,$APP.bH,$APP.wH],null),new $APP.H(null,4,5,$APP.I,[$APP.hH,$APP.bH,$APP.wH,M4],null),new $APP.H(null,5,5,$APP.I,[$APP.hH,$APP.bH,$APP.wH,M4,tTa],null)),null,$APP.l(m_)?m_.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,
d):$APP.lt.j(a,b,d)}(),Z4,function(){var a=new $APP.hd(function(){return $APP.L_},LUa,new $APP.k(null,8,[$APP.S,$APP.wL,$APP.N,null,$APP.xl,"datascript/db.cljc",$APP.yl,672,$APP.om,22,$APP.O,Z4,$APP.JC,$APP.l($APP.L_)?$APP.L_.I:null,$APP.Z,$APP.md],null)),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?
e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),a5,function(){var a=new $APP.hd(function(){return $APP.l_},OUa,new $APP.k(null,8,[$APP.S,$APP.wL,$APP.N,null,$APP.xl,"datascript/db.cljc",$APP.yl,185,$APP.om,10,$APP.O,a5,$APP.JC,$APP.l($APP.l_)?$APP.l_.I:null,$APP.Z,$APP.md],null)),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,b6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=
$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}()],null),TWa=new $APP.k(null,3,[PUa,function(){var a=new $APP.hd(function(){return C5},rTa,$APP.Ih([$APP.Ts,$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.cI,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[!0,b5,PUa,"datascript/impl/entity.cljc",21,new $APP.k(null,6,[$APP.wx,!1,$APP.Ur,3,$APP.DK,3,$APP.UJ,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.zB,K4],null),new $APP.H(null,3,5,$APP.I,[$APP.Wd($APP.zB,new $APP.k(null,
1,[$APP.fm,g5],null)),K4,$APP.Px],null)],null),$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.zB,K4],null),new $APP.H(null,3,5,$APP.I,[$APP.Wd($APP.zB,new $APP.k(null,1,[$APP.fm,g5],null)),K4,$APP.Px],null)),$APP.CC,$APP.J(null,null)],null),1,165,165,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.zB,K4],null),new $APP.H(null,3,5,$APP.I,[$APP.Wd($APP.zB,new $APP.k(null,1,[$APP.fm,g5],null)),K4,$APP.Px],null)),null,$APP.l(C5)?C5.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,
4,[$APP.S,QWa,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),g5,function(){var a=new $APP.hd(function(){return P1},SUa,new $APP.k(null,8,[$APP.S,b5,$APP.N,null,$APP.xl,"datascript/impl/entity.cljc",$APP.yl,48,$APP.om,10,$APP.O,g5,$APP.JC,$APP.l(P1)?P1.I:null,$APP.Z,$APP.md],null)),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);
var d=new $APP.k(null,4,[$APP.S,QWa,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),oTa,function(){var a=new $APP.hd(function(){return Q1},VTa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[b5,oTa,"datascript/impl/entity.cljc",14,1,147,147,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.yH],null)),null,$APP.l(Q1)?
Q1.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,QWa,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}()],null),d6,UWa=$APP.cj.g($APP.wf),VWa=$APP.cj.g($APP.wf),WWa=$APP.cj.g($APP.wf),XWa=$APP.cj.g($APP.wf),YWa=$APP.D.j($APP.wf,$APP.nq,$APP.mj.C?$APP.mj.C():$APP.mj.call(null));
d6=new $APP.Cj($APP.Oi.h("nbb.impl.datascript","-store"),$APP.bq,$APP.mm,YWa,UWa,VWa,WWa,XWa);var e6,ZWa=$APP.cj.g($APP.wf),$Wa=$APP.cj.g($APP.wf),aXa=$APP.cj.g($APP.wf),bXa=$APP.cj.g($APP.wf),cXa=$APP.D.j($APP.wf,$APP.nq,$APP.mj.C?$APP.mj.C():$APP.mj.call(null));e6=new $APP.Cj($APP.Oi.h("nbb.impl.datascript","-restore"),$APP.bq,$APP.mm,cXa,ZWa,$Wa,aXa,bXa);d6.Da(null,$APP.Zw,function(a,b){var c=$APP.Jo(a);c=$APP.D.h(c,N4);return c.h?c.h(a,b):c.call(null,a,b)});var dXa=j1;
d6.Da(null,$APP.mm,function(a,b){return dXa.h?dXa.h(a,b):dXa.call(null,a,b)});j1=function(a,b){return d6.h(a,b)};e6.Da(null,$APP.Zw,function(a,b){var c=$APP.Jo(a);c=$APP.D.h(c,f5);return c.h?c.h(a,b):c.call(null,a,b)});var eXa=k1;e6.Da(null,$APP.mm,function(a,b){return eXa.h?eXa.h(a,b):eXa.call(null,a,b)});k1=function(a,b){return e6.h(a,b)};
var fXa=$APP.lt.h(pWa,new $APP.k(null,3,[$APP.Fq,OQa,$APP.Eq,$APP.ei([e6,d6]),$APP.S,c6],null)),gXa=$APP.$h.l($APP.nt($APP.Ih([$APP.Wd(iUa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.Wd($APP.cH,new $APP.k(null,1,[$APP.fm,a5],null))],null)))],null)),$APP.Wd(sWa,new $APP.k(null,4,[vVa,!0,$APP.aK,$APP.Vpa,$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[d5],null))),$APP.N,"Positional factory function for datascript.storage/StorageAdapter."],null)),$APP.Wd(ZTa,
new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J($APP.Wd(new $APP.H(null,1,5,$APP.I,[Q4],null),new $APP.k(null,1,[$APP.fm,EVa],null))))],null)),$APP.Wd(cVa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,2,5,$APP.I,[Q4,$APP.rC],null)))],null)),$APP.Wd(qWa,new $APP.k(null,4,[$APP.MF,!0,$APP.hx,new $APP.k(null,1,[$APP.Eq,new $APP.k(null,2,[$APP.Wd(N4,new $APP.k(null,1,[$APP.N,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)"],
null)),new $APP.H(null,1,5,$APP.I,[new $APP.H(null,3,5,$APP.I,[$APP.YG,e5,V4],null)],null),$APP.Wd(f5,new $APP.k(null,1,[$APP.N,"Read back and deserialize data stored under single `addr`"],null)),new $APP.H(null,1,5,$APP.I,[new $APP.H(null,2,5,$APP.I,[$APP.YG,I4],null)],null)],null)],null),$APP.gH,new $APP.k(null,2,[kTa,new $APP.k(null,3,[$APP.O,N4,$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.YG,e5,V4],null)),$APP.N,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)"],
null),GTa,new $APP.k(null,3,[$APP.O,f5,$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.YG,I4],null)),$APP.N,"Read back and deserialize data stored under single `addr`"],null)],null),$APP.bF,$APP.J("@interface")],null)),$APP.Wd(hWa,new $APP.k(null,2,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[d5],null),new $APP.H(null,2,5,$APP.I,[d5,$APP.pE],null))),$APP.cI,new $APP.k(null,6,[$APP.wx,!1,$APP.Ur,2,$APP.DK,2,$APP.UJ,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[d5],null),new $APP.H(null,
2,5,$APP.I,[d5,$APP.pE],null)],null),$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[d5],null),new $APP.H(null,2,5,$APP.I,[d5,$APP.pE],null)),$APP.CC,$APP.J(null,null)],null)],null)),$APP.Wd(d5,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[Q4],null)))],null)),$APP.Wd(N4,new $APP.k(null,3,[$APP.Fq,PVa,$APP.N,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)",
$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.YG,e5,V4],null)))],null)),$APP.Wd(TTa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,3,5,$APP.I,[Q4,nVa,SVa],null)))],null)),$APP.Wd(f5,new $APP.k(null,3,[$APP.Fq,PVa,$APP.N,"Read back and deserialize data stored under single `addr`",$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.YG,I4],null)))],null)),$APP.Wd(WTa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,2,5,$APP.I,[d5,$APP.pE],null)))],
null)),$APP.Wd(KUa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.pE],null)))],null)),$APP.Wd(RTa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,2,5,$APP.I,[d5,yTa],null)))],null)),$APP.Wd(eWa,new $APP.k(null,2,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[Q4],null),new $APP.H(null,2,5,$APP.I,[Q4,d5],null))),$APP.cI,new $APP.k(null,6,[$APP.wx,!1,$APP.Ur,2,$APP.DK,2,$APP.UJ,new $APP.H(null,2,5,$APP.I,[new $APP.H(null,1,5,$APP.I,[Q4],null),
new $APP.H(null,2,5,$APP.I,[Q4,d5],null)],null),$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[Q4],null),new $APP.H(null,2,5,$APP.I,[Q4,d5],null)),$APP.CC,$APP.J(null,null)],null)],null)),$APP.Wd(AVa,new $APP.k(null,4,[vVa,!0,$APP.aK,$APP.Zl,$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,1,5,$APP.I,[TVa],null))),$APP.N,"Factory function for datascript.storage/StorageAdapter, taking a map of keywords to field values."],null)),$APP.Wd(RUa,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Zj,$APP.J(new $APP.H(null,2,5,
$APP.I,[Q4,$APP.rC],null)))],null))],[new $APP.k(null,3,[$APP.O,KTa,$APP.mt,l1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.Wd($APP.cH,new $APP.k(null,1,[$APP.fm,a5],null))],null))],null)],null),new $APP.k(null,3,[$APP.O,NUa,$APP.mt,function(a){return new m1(a,null,null,null)},$APP.Ta,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[d5],null)),$APP.N,"Positional factory function for datascript.storage/StorageAdapter."],null)],null),new $APP.k(null,3,[$APP.O,
aUa,$APP.mt,o1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J($APP.Wd(new $APP.H(null,1,5,$APP.I,[Q4],null),new $APP.k(null,1,[$APP.fm,EVa],null)))],null)],null),new $APP.k(null,3,[$APP.O,MUa,$APP.mt,UQa,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[Q4,$APP.rC],null))],null)],null),new $APP.k(null,3,[$APP.O,PVa,$APP.mt,OQa,$APP.Ta,$APP.wf],null),new $APP.k(null,3,[$APP.O,tVa,$APP.mt,v5,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[d5],null),new $APP.H(null,
2,5,$APP.I,[d5,$APP.pE],null))],null)],null),new $APP.k(null,3,[$APP.O,NVa,$APP.mt,p1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[Q4],null))],null)],null),new $APP.k(null,3,[$APP.O,iVa,$APP.mt,j1,$APP.Ta,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[$APP.YG,e5,V4],null)),$APP.N,"Gives you a sequence of `[addr data]` pairs to serialize and store.\n\n     `addr`s are 64 bit integers.\n     `data`s are clojure-serializable data structure (maps, keywords, lists, integers etc)"],
null)],null),new $APP.k(null,3,[$APP.O,kVa,$APP.mt,t1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,3,5,$APP.I,[Q4,nVa,SVa],null))],null)],null),new $APP.k(null,3,[$APP.O,CTa,$APP.mt,k1,$APP.Ta,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[$APP.YG,I4],null)),$APP.N,"Read back and deserialize data stored under single `addr`"],null)],null),new $APP.k(null,3,[$APP.O,vTa,$APP.mt,v1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[d5,$APP.pE],null))],null)],
null),new $APP.k(null,3,[$APP.O,AUa,$APP.mt,x1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[$APP.pE],null))],null)],null),new $APP.k(null,3,[$APP.O,QVa,$APP.mt,n1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[d5,yTa],null))],null)],null),new $APP.k(null,3,[$APP.O,FUa,$APP.mt,F1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[Q4],null),new $APP.H(null,2,5,$APP.I,[Q4,d5],null))],null)],null),new $APP.k(null,3,[$APP.O,BVa,$APP.mt,function(a){var b=
$APP.ql.h(a,YZ);b=$APP.ge(a)?$APP.fh.h($APP.wf,b):b;return new m1(YZ.g(a),null,$APP.yf(b),null)},$APP.Ta,new $APP.k(null,2,[$APP.Z,$APP.J(new $APP.H(null,1,5,$APP.I,[TVa],null)),$APP.N,"Factory function for datascript.storage/StorageAdapter, taking a map of keywords to field values."],null)],null),new $APP.k(null,3,[$APP.O,ZVa,$APP.mt,w1,$APP.Ta,new $APP.k(null,1,[$APP.Z,$APP.J(new $APP.H(null,2,5,$APP.I,[Q4,$APP.rC],null))],null)],null)]),c6),N4,function(){var a=new $APP.hd(function(){return d6},
LTa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.Wd(BTa,new $APP.k(null,1,[$APP.rt,!0],null)),N4,"nbb/impl/datascript.cljs",17,1,65,65,$APP.md,null,$APP.l(d6)?d6.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,c6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,
b,d)}(),$APP.C([f5,function(){var a=new $APP.hd(function(){return e6},QTa,$APP.Ih([$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[$APP.Wd(BTa,new $APP.k(null,1,[$APP.rt,!0],null)),f5,"nbb/impl/datascript.cljs",19,1,66,66,$APP.md,null,$APP.l(e6)?e6.I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,c6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?$APP.AO.j(a,b,d):$APP.l(function(){var e=
$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}(),qWa,fXa,wTa,function(){var a=new $APP.hd(function(){return 1},GVa,$APP.Ih([$APP.Ts,$APP.S,$APP.O,$APP.xl,$APP.Uw,$APP.om,$APP.yl,$APP.XL,$APP.Z,$APP.N,$APP.JC],[!0,aWa,wTa,"datascript/storage.cljs",25,1,31,31,$APP.md,null,$APP.l(1)?(1).I:null])),b=$APP.q(a),c=$APP.Xd(a);a=$APP.l(null)?null:$APP.O.g(c);var d=new $APP.k(null,4,[$APP.S,c6,$APP.O,a,$APP.Z,$APP.Z.g(c),$APP.N,$APP.N.g(c)],null);return $APP.l($APP.Wp.g(c))?
$APP.AO.j(a,b,d):$APP.l(function(){var e=$APP.pp.g(c);return $APP.l(e)?e:$APP.Dp.g(c)}())?$APP.BO.j(a,b,d):$APP.lt.j(a,b,d)}()]));$APP.$t(new $APP.k(null,1,[$APP.Mp,new $APP.k(null,4,[$APP.LJ,RWa,$APP.wL,SWa,aWa,gXa,b5,TWa],null)],null));