import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
import "./nbb_goog_string.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$node_fs from"node:fs";
var pZa=function(){return"@logseq/nbb-logseq"},qZa=function(a){if(a instanceof $APP.r)return new $APP.k(null,1,[$APP.Q,a],null);if($APP.Me(a)){a=$APP.y.h($APP.zk,$APP.v(a))?$APP.he(a):a;var b=$APP.u(a);a=$APP.v(b);b=$APP.w(b);a=new $APP.k(null,1,[$APP.Q,a],null);for(b=$APP.u(b);;)if(b){var c=$APP.v(b);switch(c instanceof $APP.G?c.S:null){case "as":a=$APP.vi.j(a,$APP.ko,$APP.he(b));b=$APP.me(b);continue;case "refer":c=$APP.he(b);$APP.Me(c)?(a=$APP.vi.j(a,$APP.Jr,$APP.he(b)),b=$APP.me(b)):b=$APP.me(b);
continue;default:b=$APP.me(b)}}else return a}else return null},rZa=function(a){var b=$APP.Yf(a);a=$APP.C.h(b,$APP.Q);b=$APP.C.h(b,$APP.ko);return new $APP.H(null,3,5,$APP.I,[a,$APP.ko,b],null)},sZa=function(a){return $APP.qn.h(function(b){if($APP.Me(b)){var c=$APP.v(b);return $APP.y.h($APP.un,c)?(b=$APP.qn.h(qZa,$APP.Ld(b)),b=$APP.fj.h(rZa,b),$APP.ys.h($APP.un,b)):null}return b},a)},tZa=function(a){return $APP.qn.h(function(b){return $APP.Le(b)&&$APP.y.h($APP.zk,$APP.v(b))?$APP.he(b):null},a)},uZa=
function(a){a=tZa($APP.Ld(a));a=$APP.fj.h(qZa,a);return $APP.ys.h($APP.tG,$APP.fj.h(function(b){return new $APP.D(null,$APP.zk,new $APP.D(null,rZa(b),null,1,null),2,null)},a))},vZa=function(a){a=tZa($APP.Ld(a));a=$APP.fj.h(function(b){return new $APP.D(null,$APP.zk,new $APP.D(null,b,null,1,null),2,null)},a);return $APP.u(a)?$APP.ys.h($APP.HP,a):null},K_=function(a){var b=$APP.p($APP.rq);return[$APP.l(b)?[$APP.m.g(b),":"].join(""):null,$APP.m.g($APP.wl(a)),":",$APP.m.g($APP.xl(a))].join("")},xZa=function(a){var b=
$APP.Yf(a);a=$APP.C.h(b,$APP.Zr);b=$APP.C.h(b,wZa);a=$APP.vi.j(a,$APP.Vr,!0);var c=$APP.Wf([$APP.Fq,$APP.p($APP.Fq),$APP.rq,$APP.p($APP.rq),$APP.DQ,$APP.ff]);$APP.Vp(c);try{var d=$APP.u(b);b=null;for(var e=c=0;;)if(e<c){for(var f=b.ca(null,e),h=$APP.up(f);;){try{var n=$APP.Hu.j(a,h,new $APP.k(null,1,[$APP.Io,new $APP.Bi(null,new $APP.k(null,2,[$APP.Iu,null,$APP.Ju,null],null),null)],null))}catch(ha){console.log($APP.ik(ha)),n=console.error("[babashka]","Ignoring read error while assembling uberscript near",
K_(h))}if($APP.y.h($APP.UH,n))break;else if($APP.Le(n)){var t=$APP.v(n),q=$APP.y.h($APP.sk,t)?sZa(n):$APP.y.h($APP.tG,t)?uZa(n):$APP.y.h($APP.HP,t)?vZa(n):null;if($APP.l(q))try{$APP.bu(a,q)}catch(ha){console.log(ha),console.error("[babashka]","Ignoring read error while assembling uberscript near",K_(h))}}}e+=1}else{var x=$APP.u(d);if(x){var z=x;if($APP.Ge(z)){var E=$APP.cd(z),F=$APP.dd(z);z=E;var N=$APP.ce(E);d=F;b=z;c=N}else{f=$APP.v(z);for(var S=$APP.up(f);;){try{var Y=$APP.Hu.j(a,S,new $APP.k(null,
1,[$APP.Io,new $APP.Bi(null,new $APP.k(null,2,[$APP.Iu,null,$APP.Ju,null],null),null)],null))}catch(ha){console.log($APP.ik(ha)),Y=console.error("[babashka]","Ignoring read error while assembling uberscript near",K_(S))}if($APP.y.h($APP.UH,Y))break;else if($APP.Le(Y)){var aa=$APP.v(Y),ca=$APP.y.h($APP.sk,aa)?sZa(Y):$APP.y.h($APP.tG,aa)?uZa(Y):$APP.y.h($APP.HP,aa)?vZa(Y):null;if($APP.l(ca))try{$APP.bu(a,ca)}catch(ha){console.log(ha),console.error("[babashka]","Ignoring read error while assembling uberscript near",
K_(S))}}}d=$APP.w(z);b=null;c=0}e=0}else break}}finally{$APP.Xp()}},wZa=new $APP.G(null,"expressions","expressions",255689909);(function(){function a(db){return $APP.Cj.h(q,function(fb){return[$APP.m.g(fb),$APP.ui.h("",fb)?"\n":null,$APP.m.g(db)].join("")})}var b=$APP.p($APP.AS);b=$APP.Yf(b);b=$APP.C.h(b,$APP.oL);var c=$APP.Yf(b);b=$APP.C.h(c,$APP.Cn);var d=$APP.C.h(c,$APP.rn),e=$APP.C.h(c,$APP.an);c=$APP.lC.g(b);var f=function(){var db=$APP.v(d);return $APP.l(db)?db:$APP.v(e)}(),h=$APP.Bj.g($APP.Kd),n=$APP.Bj.g($APP.Sg),t=$APP.Bj.g($APP.Kd),q=$APP.Bj.g(""),x=$APP.wu(),z=$APP.$t(x,"(set (map ns-name (all-ns)))");x=$APP.Yt(x,
new $APP.k(null,1,[$APP.Xr,function(db){db=$APP.Yf(db);var fb=$APP.C.h(db,$APP.Yr);db=$APP.C.h(db,$APP.Zr);var qb=$APP.C.h($APP.lDa,fb);"string"===typeof fb?$APP.Cj.j(h,$APP.wf,$APP.v($APP.hl.j(fb,/\$/,2))):$APP.y.h($APP.KI,fb)?($APP.Cj.j(n,$APP.wf,"./nbb_reagent.js"),$APP.Cj.j(h,$APP.wf,"react")):$APP.y.h($APP.MN,fb)?$APP.Cj.j(n,$APP.wf,"./nbb_reagent.js"):$APP.y.h($APP.gG,fb)?($APP.Cj.j(n,$APP.wf,"./nbb_reagent_dom_server.js"),$APP.Cj.D(h,$APP.wf,"react","react-dom/server")):$APP.l(qb)?$APP.Cj.j(n,
$APP.wf,qb):fb instanceof $APP.r&&!$APP.Te(z,fb)&&(fb=$APP.bl($APP.bl($APP.m.g(fb),".","/"),"-","_"),fb=$APP.dja(fb),fb=esm_import$node_fs.readFileSync(fb,"utf-8"),$APP.Cj.j(t,$APP.wf,fb),xZa(new $APP.k(null,2,[$APP.Zr,db,wZa,new $APP.H(null,1,5,$APP.I,[fb],null)],null)));return $APP.Xf}],null));if($APP.l(c))return $APP.wy.l($APP.B(["\nBundle: produce single JS file for usage with bundlers.\n\nUsage:\n\n  nbb bundle \x3cinput.cljs\x3e [opts]\n\nOptions:\n\n -o, --out [file]  Write to file instead of stdout"]));
c=$APP.GS;$APP.GS=!0;try{var E=esm_import$node_fs.readFileSync(f,"utf-8");$APP.Cj.j(t,$APP.wf,E);xZa(new $APP.k(null,2,[$APP.Zr,x,wZa,new $APP.H(null,1,5,$APP.I,[E],null)],null));a($APP.A_("import { loadFile, loadString, registerModule } from '%s'",pZa()));var F=$APP.u($APP.iy.g($APP.p(h)));E=null;for(x=f=0;;)if(x<f){var N=E.ca(null,x),S=$APP.Ik(N),Y=$APP.bl($APP.m.g(S),".","_dot_");a($APP.A_("import * as %s from '%s'",Y,N));a($APP.A_("registerModule(%s, '%s')",Y,N));x+=1}else{var aa=$APP.u(F);if(aa){var ca=
aa;if($APP.Ge(ca)){var ha=$APP.cd(ca),la=$APP.dd(ca);ca=ha;var ua=$APP.ce(ha);F=la;E=ca;f=ua}else{var pa=$APP.v(ca),W=$APP.Ik(pa),R=$APP.bl($APP.m.g(W),".","_dot_");a($APP.A_("import * as %s from '%s'",R,pa));a($APP.A_("registerModule(%s, '%s')",R,pa));F=$APP.w(ca);E=null;f=0}x=0}else break}var V=$APP.u($APP.iy.g($APP.p(n)));F=null;for(S=N=0;;)if(S<N){var U=F.ca(null,S);a($APP.A_("import '%s/lib/%s'",pZa(),U));S+=1}else{var X=$APP.u(V);if(X){Y=X;if($APP.Ge(Y)){var ma=$APP.cd(Y),va=$APP.dd(Y);Y=ma;
var da=$APP.ce(ma);V=va;F=Y;N=da}else{var na=$APP.v(Y);a($APP.A_("import '%s/lib/%s'",pZa(),na));V=$APP.w(Y);F=null;N=0}S=0}else break}var ra=$APP.u($APP.iy.g($APP.p(t)));V=null;for(X=U=0;;)if(X<U){var ta=V.ca(null,X);a($APP.A_("await loadString(%s, {disableConfig: true})",$APP.zj.l($APP.B([ta]))));X+=1}else{var Ia=$APP.u(ra);if(Ia){ma=Ia;if($APP.Ge(ma)){var Ra=$APP.cd(ma),Wa=$APP.dd(ma);ma=Ra;var $a=$APP.ce(Ra);ra=Wa;V=ma;U=$a}else{var Xa=$APP.v(ma);a($APP.A_("await loadString(%s, {disableConfig: true})",
$APP.zj.l($APP.B([Xa]))));ra=$APP.w(ma);V=null;U=0}X=0}else break}var eb=$APP.Zwa.g(b);return $APP.l(eb)?esm_import$node_fs.writeFileSync(eb,$APP.p(q),"utf-8"):$APP.wy.l($APP.B([$APP.p(q)]))}finally{$APP.GS=c}})();