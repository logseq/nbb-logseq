import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
import "./nbb_goog_string.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$node_fs from"node:fs";
var Sab=function(){return"@logseq/nbb-logseq"},Tab=function(a){if(a instanceof $APP.q)return new $APP.h(null,1,[$APP.Q,a],null);if($APP.Ke(a)){a=$APP.x.h($APP.Ak,$APP.v(a))?$APP.ge(a):a;var b=$APP.r(a);a=$APP.v(b);b=$APP.w(b);a=new $APP.h(null,1,[$APP.Q,a],null);for(b=$APP.r(b);;)if(b){var c=$APP.v(b);switch(c instanceof $APP.F?c.N:null){case "as":a=$APP.ui.j(a,$APP.ko,$APP.ge(b));b=$APP.le(b);continue;case "refer":c=$APP.ge(b);$APP.Ke(c)?(a=$APP.ui.j(a,$APP.Pr,$APP.ge(b)),b=$APP.le(b)):b=$APP.le(b);
continue;default:b=$APP.le(b)}}else return a}else return null},Uab=function(a){var b=$APP.Yf(a);a=$APP.C.h(b,$APP.Q);b=$APP.C.h(b,$APP.ko);return new $APP.H(null,3,5,$APP.I,[a,$APP.ko,b],null)},Vab=function(a){return $APP.sn.h(function(b){if($APP.Ke(b)){var c=$APP.v(b);return $APP.x.h($APP.wn,c)?(b=$APP.sn.h(Tab,$APP.Id(b)),b=$APP.ej.h(Uab,b),$APP.Es.h($APP.wn,b)):null}return b},a)},Wab=function(a){return $APP.sn.h(function(b){return $APP.Je(b)&&$APP.x.h($APP.Ak,$APP.v(b))?$APP.ge(b):null},a)},Xab=
function(a){a=Wab($APP.Id(a));a=$APP.ej.h(Tab,a);return $APP.Es.h($APP.ZG,$APP.ej.h(function(b){return new $APP.D(null,$APP.Ak,new $APP.D(null,Uab(b),null,1,null),2,null)},a))},Yab=function(a){a=Wab($APP.Id(a));a=$APP.ej.h(function(b){return new $APP.D(null,$APP.Ak,new $APP.D(null,b,null,1,null),2,null)},a);return $APP.r(a)?$APP.Es.h($APP.ZL,a):null},$_=function(a){var b=$APP.n($APP.xq);return[$APP.k(b)?[$APP.m.g(b),":"].join(""):null,$APP.m.g($APP.ul(a)),":",$APP.m.g($APP.vl(a))].join("")},$ab=function(a){var b=
$APP.Yf(a);a=$APP.C.h(b,$APP.es);b=$APP.C.h(b,Zab);a=$APP.ui.j(a,$APP.as,!0);var c=$APP.Wf([$APP.Lq,$APP.n($APP.Lq),$APP.xq,$APP.n($APP.xq),$APP.WM,$APP.ef]);$APP.Xp(c);try{var d=$APP.r(b);b=null;for(var e=c=0;;)if(e<c){for(var f=b.ea(null,e),l=$APP.wp(f);;){try{var p=$APP.Nu.j(a,l,new $APP.h(null,1,[$APP.Io,new $APP.zi(null,new $APP.h(null,2,[$APP.Ou,null,$APP.Pu,null],null),null)],null))}catch(ia){console.log($APP.gk(ia)),p=console.error("[babashka]","Ignoring read error while assembling uberscript near",
$_(l))}if($APP.x.h($APP.WH,p))break;else if($APP.Je(p)){var u=$APP.v(p),t=$APP.x.h($APP.tk,u)?Vab(p):$APP.x.h($APP.ZG,u)?Xab(p):$APP.x.h($APP.ZL,u)?Yab(p):null;if($APP.k(t))try{$APP.fu(a,t)}catch(ia){console.log(ia),console.error("[babashka]","Ignoring read error while assembling uberscript near",$_(l))}}}e+=1}else{var A=$APP.r(d);if(A){var B=A;if($APP.Ee(B)){var E=$APP.cd(B),G=$APP.dd(B);B=E;var O=$APP.be(E);d=G;b=B;c=O}else{f=$APP.v(B);for(var T=$APP.wp(f);;){try{var Z=$APP.Nu.j(a,T,new $APP.h(null,
1,[$APP.Io,new $APP.zi(null,new $APP.h(null,2,[$APP.Ou,null,$APP.Pu,null],null),null)],null))}catch(ia){console.log($APP.gk(ia)),Z=console.error("[babashka]","Ignoring read error while assembling uberscript near",$_(T))}if($APP.x.h($APP.WH,Z))break;else if($APP.Je(Z)){var ba=$APP.v(Z),da=$APP.x.h($APP.tk,ba)?Vab(Z):$APP.x.h($APP.ZG,ba)?Xab(Z):$APP.x.h($APP.ZL,ba)?Yab(Z):null;if($APP.k(da))try{$APP.fu(a,da)}catch(ia){console.log(ia),console.error("[babashka]","Ignoring read error while assembling uberscript near",
$_(T))}}}d=$APP.w(B);b=null;c=0}e=0}else break}}finally{$APP.Zp()}},Zab=new $APP.F(null,"expressions","expressions",255689909);(function(){function a(hb){return $APP.Bj.h(t,function(mb){return[$APP.m.g(mb),$APP.ti.h("",mb)?"\n":null,$APP.m.g(hb)].join("")})}var b=$APP.n($APP.KO);b=$APP.Yf(b);b=$APP.C.h(b,$APP.OJ);var c=$APP.Yf(b);b=$APP.C.h(c,$APP.Fn);var d=$APP.C.h(c,$APP.tn),e=$APP.C.h(c,$APP.cn);c=$APP.NC.g(b);var f=function(){var hb=$APP.v(d);return $APP.k(hb)?hb:$APP.v(e)}(),l=$APP.Aj.g($APP.Hd),p=$APP.Aj.g($APP.Sg),u=$APP.Aj.g($APP.Hd),t=$APP.Aj.g(""),A=$APP.Cu(),B=$APP.du(A,"(set (map ns-name (all-ns)))");A=$APP.bu(A,
new $APP.h(null,1,[$APP.cs,function(hb){hb=$APP.Yf(hb);var mb=$APP.C.h(hb,$APP.ds);hb=$APP.C.h(hb,$APP.es);var Ab=$APP.C.h($APP.XHa,mb);"string"===typeof mb?$APP.Bj.j(l,$APP.vf,$APP.v($APP.fl.j(mb,/\$/,2))):$APP.x.h($APP.pI,mb)?($APP.Bj.j(p,$APP.vf,"./nbb_reagent.js"),$APP.Bj.j(l,$APP.vf,"react")):$APP.x.h($APP.XK,mb)?$APP.Bj.j(p,$APP.vf,"./nbb_reagent.js"):$APP.x.h($APP.MG,mb)?($APP.Bj.j(p,$APP.vf,"./nbb_reagent_dom_server.js"),$APP.Bj.F(l,$APP.vf,"react","react-dom/server")):$APP.k(Ab)?$APP.Bj.j(p,
$APP.vf,Ab):mb instanceof $APP.q&&!$APP.Se(B,mb)&&(mb=$APP.$k($APP.$k($APP.m.g(mb),".","/"),"-","_"),mb=$APP.Yia(mb),mb=esm_import$node_fs.readFileSync(mb,"utf-8"),$APP.Bj.j(u,$APP.vf,mb),$ab(new $APP.h(null,2,[$APP.es,hb,Zab,new $APP.H(null,1,5,$APP.I,[mb],null)],null)));return $APP.Xf}],null));if($APP.k(c))return $APP.Ry.l($APP.z(["\nBundle: produce single JS file for usage with bundlers.\n\nUsage:\n\n  nbb bundle \x3cinput.cljs\x3e [opts]\n\nOptions:\n\n -o, --out [file]  Write to file instead of stdout"]));
c=$APP.QO;$APP.QO=!0;try{var E=esm_import$node_fs.readFileSync(f,"utf-8");$APP.Bj.j(u,$APP.vf,E);$ab(new $APP.h(null,2,[$APP.es,A,Zab,new $APP.H(null,1,5,$APP.I,[E],null)],null));a($APP.rV("import { loadFile, loadString, registerModule } from '%s'",Sab()));var G=$APP.r($APP.Fy.g($APP.n(l)));E=null;for(A=f=0;;)if(A<f){var O=E.ea(null,A),T=$APP.Jk(O),Z=$APP.$k($APP.m.g(T),".","_dot_");a($APP.rV("import * as %s from '%s'",Z,O));a($APP.rV("registerModule(%s, '%s')",Z,O));A+=1}else{var ba=$APP.r(G);if(ba){var da=
ba;if($APP.Ee(da)){var ia=$APP.cd(da),ma=$APP.dd(da);da=ia;var ya=$APP.be(ia);G=ma;E=da;f=ya}else{var sa=$APP.v(da),X=$APP.Jk(sa),S=$APP.$k($APP.m.g(X),".","_dot_");a($APP.rV("import * as %s from '%s'",S,sa));a($APP.rV("registerModule(%s, '%s')",S,sa));G=$APP.w(da);E=null;f=0}A=0}else break}var W=$APP.r($APP.Fy.g($APP.n(p)));G=null;for(T=O=0;;)if(T<O){var U=G.ea(null,T);a($APP.rV("import '%s/lib/%s'",Sab(),U));T+=1}else{var Y=$APP.r(W);if(Y){Z=Y;if($APP.Ee(Z)){var na=$APP.cd(Z),za=$APP.dd(Z);Z=na;
var ea=$APP.be(na);W=za;G=Z;O=ea}else{var pa=$APP.v(Z);a($APP.rV("import '%s/lib/%s'",Sab(),pa));W=$APP.w(Z);G=null;O=0}T=0}else break}var ua=$APP.r($APP.Fy.g($APP.n(u)));W=null;for(Y=U=0;;)if(Y<U){var xa=W.ea(null,Y);a($APP.rV("await loadString(%s, {disableConfig: true})",$APP.yj.l($APP.z([xa]))));Y+=1}else{var Na=$APP.r(ua);if(Na){na=Na;if($APP.Ee(na)){var Wa=$APP.cd(na),bb=$APP.dd(na);na=Wa;var fb=$APP.be(Wa);ua=bb;W=na;U=fb}else{var db=$APP.v(na);a($APP.rV("await loadString(%s, {disableConfig: true})",
$APP.yj.l($APP.z([db]))));ua=$APP.w(na);W=null;U=0}Y=0}else break}var kb=$APP.pAa.g(b);return $APP.k(kb)?esm_import$node_fs.writeFileSync(kb,$APP.n(t),"utf-8"):$APP.Ry.l($APP.z([$APP.n(t)]))}finally{$APP.QO=c}})();