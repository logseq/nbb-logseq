import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
import "./nbb_goog_string.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$node_fs from"node:fs";
var Afb=function(){return"@logseq/nbb-logseq"},Bfb=function(a){if(a instanceof $APP.q)return new $APP.h(null,1,[$APP.P,a],null);if($APP.Le(a)){a=$APP.x.h($APP.Bk,$APP.v(a))?$APP.he(a):a;var b=$APP.r(a);a=$APP.v(b);b=$APP.w(b);a=new $APP.h(null,1,[$APP.P,a],null);for(b=$APP.r(b);;)if(b){var c=$APP.v(b);switch(c instanceof $APP.F?c.N:null){case "as":a=$APP.vi.j(a,$APP.mo,$APP.he(b));b=$APP.le(b);continue;case "refer":c=$APP.he(b);$APP.Le(c)?(a=$APP.vi.j(a,$APP.Sr,$APP.he(b)),b=$APP.le(b)):b=$APP.le(b);
continue;default:b=$APP.le(b)}}else return a}else return null},Cfb=function(a){var b=$APP.Wf(a);a=$APP.B.h(b,$APP.P);b=$APP.B.h(b,$APP.mo);return new $APP.G(null,3,5,$APP.H,[a,$APP.mo,b],null)},Dfb=function(a){return $APP.un.h(function(b){if($APP.Le(b)){var c=$APP.v(b);return $APP.x.h($APP.yn,c)?(b=$APP.un.h(Bfb,$APP.Jd(b)),b=$APP.fj.h(Cfb,b),$APP.Hs.h($APP.yn,b)):null}return b},a)},Efb=function(a){return $APP.un.h(function(b){return $APP.Ke(b)&&$APP.x.h($APP.Bk,$APP.v(b))?$APP.he(b):null},a)},Ffb=
function(a){a=Efb($APP.Jd(a));a=$APP.fj.h(Bfb,a);return $APP.Hs.h($APP.BF,$APP.fj.h(function(b){return new $APP.D(null,$APP.Bk,new $APP.D(null,Cfb(b),null,1,null),2,null)},a))},Gfb=function(a){a=Efb($APP.Jd(a));a=$APP.fj.h(function(b){return new $APP.D(null,$APP.Bk,new $APP.D(null,b,null,1,null),2,null)},a);return $APP.r(a)?$APP.Hs.h($APP.FK,a):null},a0=function(a){var b=$APP.n($APP.wq);return[$APP.k(b)?[$APP.l.g(b),":"].join(""):null,$APP.l.g($APP.vl(a)),":",$APP.l.g($APP.wl(a))].join("")},Ifb=function(a){var b=
$APP.Wf(a);a=$APP.B.h(b,$APP.hs);b=$APP.B.h(b,Hfb);a=$APP.vi.j(a,$APP.ds,!0);var c=$APP.Uf([$APP.Oq,$APP.n($APP.Oq),$APP.wq,$APP.n($APP.wq),$APP.CL,$APP.ff]);$APP.Zp(c);try{var d=$APP.r(b);b=null;for(var e=c=0;;)if(e<c){for(var f=b.ha(null,e),m=$APP.yp(f);;){try{var p=$APP.Qu.j(a,m,new $APP.h(null,1,[$APP.Ko,new $APP.yi(null,new $APP.h(null,2,[$APP.Ru,null,$APP.Su,null],null),null)],null))}catch(ja){console.log($APP.hk(ja)),p=console.error("[babashka]","Ignoring read error while assembling uberscript near",
a0(m))}if($APP.x.h($APP.tG,p))break;else if($APP.Ke(p)){var u=$APP.v(p),t=$APP.x.h($APP.rk,u)?Dfb(p):$APP.x.h($APP.BF,u)?Ffb(p):$APP.x.h($APP.FK,u)?Gfb(p):null;if($APP.k(t))try{$APP.iu(a,t)}catch(ja){console.log(ja),console.error("[babashka]","Ignoring read error while assembling uberscript near",a0(m))}}}e+=1}else{var A=$APP.r(d);if(A){var C=A;if($APP.Fe(C)){var E=$APP.dd(C),I=$APP.ed(C);C=E;var Q=$APP.ce(E);d=I;b=C;c=Q}else{f=$APP.v(C);for(var T=$APP.yp(f);;){try{var Z=$APP.Qu.j(a,T,new $APP.h(null,
1,[$APP.Ko,new $APP.yi(null,new $APP.h(null,2,[$APP.Ru,null,$APP.Su,null],null),null)],null))}catch(ja){console.log($APP.hk(ja)),Z=console.error("[babashka]","Ignoring read error while assembling uberscript near",a0(T))}if($APP.x.h($APP.tG,Z))break;else if($APP.Ke(Z)){var ba=$APP.v(Z),da=$APP.x.h($APP.rk,ba)?Dfb(Z):$APP.x.h($APP.BF,ba)?Ffb(Z):$APP.x.h($APP.FK,ba)?Gfb(Z):null;if($APP.k(da))try{$APP.iu(a,da)}catch(ja){console.log(ja),console.error("[babashka]","Ignoring read error while assembling uberscript near",
a0(T))}}}d=$APP.w(C);b=null;c=0}e=0}else break}}finally{$APP.aq()}},Hfb=new $APP.F(null,"expressions","expressions",255689909);(function(){function a(ib){return $APP.Cj.h(t,function(nb){return[$APP.l.g(nb),$APP.ui.h("",nb)?"\n":null,$APP.l.g(ib)].join("")})}var b=$APP.n($APP.qN);b=$APP.Wf(b);b=$APP.B.h(b,$APP.nI);var c=$APP.Wf(b);b=$APP.B.h(c,$APP.Gn);var d=$APP.B.h(c,$APP.vn),e=$APP.B.h(c,$APP.dn);c=$APP.SC.g(b);var f=function(){var ib=$APP.v(d);return $APP.k(ib)?ib:$APP.v(e)}(),m=$APP.Bj.g($APP.Id),p=$APP.Bj.g($APP.Tg),u=$APP.Bj.g($APP.Id),t=$APP.Bj.g(""),A=$APP.Du(),C=$APP.gu(A,"(set (map ns-name (all-ns)))");A=$APP.eu(A,
new $APP.h(null,1,[$APP.fs,function(ib){ib=$APP.Wf(ib);var nb=$APP.B.h(ib,$APP.gs);ib=$APP.B.h(ib,$APP.hs);var Gb=$APP.B.h($APP.AJa,nb);"string"===typeof nb?$APP.Cj.j(m,$APP.wf,$APP.v($APP.gl.j(nb,/\$/,2))):$APP.x.h($APP.OG,nb)?($APP.Cj.j(p,$APP.wf,"./nbb_reagent.js"),$APP.Cj.j(m,$APP.wf,"react")):$APP.x.h($APP.xJ,nb)?$APP.Cj.j(p,$APP.wf,"./nbb_reagent.js"):$APP.x.h($APP.uF,nb)?($APP.Cj.j(p,$APP.wf,"./nbb_reagent_dom_server.js"),$APP.Cj.F(m,$APP.wf,"react","react-dom/server")):$APP.k(Gb)?$APP.Cj.j(p,
$APP.wf,Gb):nb instanceof $APP.q&&!$APP.Se(C,nb)&&(nb=$APP.al($APP.al($APP.l.g(nb),".","/"),"-","_"),nb=$APP.Via(nb),nb=esm_import$node_fs.readFileSync(nb,"utf-8"),$APP.Cj.j(u,$APP.wf,nb),Ifb(new $APP.h(null,2,[$APP.hs,ib,Hfb,new $APP.G(null,1,5,$APP.H,[nb],null)],null)));return $APP.Vf}],null));if($APP.k(c))return $APP.Vy.l($APP.z(["\nBundle: produce single JS file for usage with bundlers.\n\nUsage:\n\n  nbb bundle \x3cinput.cljs\x3e [opts]\n\nOptions:\n\n -o, --out [file]  Write to file instead of stdout"]));
c=$APP.wN;$APP.wN=!0;try{var E=esm_import$node_fs.readFileSync(f,"utf-8");$APP.Cj.j(u,$APP.wf,E);Ifb(new $APP.h(null,2,[$APP.hs,A,Hfb,new $APP.G(null,1,5,$APP.H,[E],null)],null));a($APP.YT("import { loadFile, loadString, registerModule } from '%s'",Afb()));var I=$APP.r($APP.Jy.g($APP.n(m)));E=null;for(A=f=0;;)if(A<f){var Q=E.ha(null,A),T=$APP.Kk(Q),Z=$APP.al($APP.l.g(T),".","_dot_");a($APP.YT("import * as %s from '%s'",Z,Q));a($APP.YT("registerModule(%s, '%s')",Z,Q));A+=1}else{var ba=$APP.r(I);if(ba){var da=
ba;if($APP.Fe(da)){var ja=$APP.dd(da),la=$APP.ed(da);da=ja;var xa=$APP.ce(ja);I=la;E=da;f=xa}else{var sa=$APP.v(da),X=$APP.Kk(sa),S=$APP.al($APP.l.g(X),".","_dot_");a($APP.YT("import * as %s from '%s'",S,sa));a($APP.YT("registerModule(%s, '%s')",S,sa));I=$APP.w(da);E=null;f=0}A=0}else break}var W=$APP.r($APP.Jy.g($APP.n(p)));I=null;for(T=Q=0;;)if(T<Q){var V=I.ha(null,T);a($APP.YT("import '%s/lib/%s'",Afb(),V));T+=1}else{var Y=$APP.r(W);if(Y){Z=Y;if($APP.Fe(Z)){var oa=$APP.dd(Z),za=$APP.ed(Z);Z=oa;
var ha=$APP.ce(oa);W=za;I=Z;Q=ha}else{var qa=$APP.v(Z);a($APP.YT("import '%s/lib/%s'",Afb(),qa));W=$APP.w(Z);I=null;Q=0}T=0}else break}var ua=$APP.r($APP.Jy.g($APP.n(u)));W=null;for(Y=V=0;;)if(Y<V){var ya=W.ha(null,Y);a($APP.YT("await loadString(%s, {disableConfig: true})",$APP.xj.l($APP.z([ya]))));Y+=1}else{var Oa=$APP.r(ua);if(Oa){oa=Oa;if($APP.Fe(oa)){var Za=$APP.dd(oa),db=$APP.ed(oa);oa=Za;var gb=$APP.ce(Za);ua=db;W=oa;V=gb}else{var eb=$APP.v(oa);a($APP.YT("await loadString(%s, {disableConfig: true})",
$APP.xj.l($APP.z([eb]))));ua=$APP.w(oa);W=null;V=0}Y=0}else break}var lb=$APP.WBa.g(b);return $APP.k(lb)?esm_import$node_fs.writeFileSync(lb,$APP.n(t),"utf-8"):$APP.Vy.l($APP.z([$APP.n(t)]))}finally{$APP.wN=c}})();