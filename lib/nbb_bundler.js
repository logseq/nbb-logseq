import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
import "./nbb_goog_string.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$fs from"fs";
var tMa=function(){return"@logseq/nbb-logseq"},Wua=function(a){if(a instanceof $APP.r)return new $APP.g(null,1,[$APP.O,a],null);if($APP.Xe(a)){a=$APP.B.h($APP.Bm,$APP.x(a))?$APP.ne(a):a;var b=$APP.u(a);a=$APP.x(b);b=$APP.z(b);a=new $APP.g(null,1,[$APP.O,a],null);for(b=$APP.u(b);;)if(b){var c=$APP.x(b);switch(c instanceof $APP.k?c.T:null){case "as":a=$APP.K.j(a,$APP.rq,$APP.ne(b));b=$APP.se(b);continue;case "refer":c=$APP.ne(b);$APP.Xe(c)?(a=$APP.K.j(a,$APP.Wu,$APP.ne(b)),b=$APP.se(b)):b=$APP.se(b);
continue;default:b=$APP.se(b)}}else return a}else return null},dva=function(a){var b=$APP.ph(a);a=$APP.gf.h(b,$APP.O);b=$APP.gf.h(b,$APP.rq);return new $APP.H(null,3,5,$APP.I,[a,$APP.rq,b],null)},eva=function(a){return $APP.Et.h(function(b){if($APP.Xe(b)){var c=$APP.x(b);return $APP.B.h($APP.zo,c)?(b=$APP.Et.h(Wua,$APP.Jd(b)),b=$APP.Wk.h(dva,b),$APP.Ut.h($APP.zo,b)):null}return b},a)},fva=function(a){return $APP.Et.h(function(b){return $APP.We(b)&&$APP.B.h($APP.Bm,$APP.x(b))?$APP.ne(b):null},a)},
gva=function(a){a=fva($APP.Jd(a));a=$APP.Wk.h(Wua,a);return $APP.Ut.h($APP.BF,$APP.Wk.h(function(b){return new $APP.G(null,$APP.Bm,new $APP.G(null,dva(b),null,1,null),2,null)},a))},hva=function(a){a=fva($APP.Jd(a));a=$APP.Wk.h(function(b){return new $APP.G(null,$APP.Bm,new $APP.G(null,b,null,1,null),2,null)},a);return $APP.u(a)?$APP.Ut.h($APP.tJ,a):null},EV=function(a){var b=$APP.q($APP.bf);return[$APP.m(b)?[$APP.n.g(b),":"].join(""):null,$APP.n.g($APP.No(a)),":",$APP.n.g($APP.Oo(a))].join("")},iva=
function(a){var b=$APP.ph(a);a=$APP.gf.h(b,$APP.Cv);b=$APP.gf.h(b,ORa);a=$APP.K.j(a,$APP.xv,!0);var c=$APP.hj([$APP.ef,$APP.q($APP.ef),$APP.bf,$APP.q($APP.bf),$APP.ov,$APP.zf]);$APP.jo(c);try{var d=$APP.u(b);b=null;for(var e=c=0;;)if(e<c){for(var h=b.fa(null,e),l=$APP.as(h);;){try{var p=$APP.Yy.j(a,l,new $APP.g(null,1,[$APP.qq,new $APP.lk(null,new $APP.g(null,2,[$APP.Zy,null,$APP.$y,null],null),null)],null))}catch(sa){console.log($APP.vm(sa)),p=console.error("[babashka]","Ignoring read error while assembling uberscript near",
EV(l))}if($APP.B.h($APP.gG,p))break;else if($APP.We(p)){var t=$APP.x(p),A=$APP.B.h($APP.Il,t)?eva(p):$APP.B.h($APP.BF,t)?gva(p):$APP.B.h($APP.tJ,t)?hva(p):null;if($APP.m(A))try{$APP.qy(a,A)}catch(sa){console.log(sa),console.error("[babashka]","Ignoring read error while assembling uberscript near",EV(l))}}}e+=1}else{var y=$APP.u(d);if(y){var D=y;if($APP.Oe(D)){var v=$APP.dd(D),J=$APP.fd(D);D=v;var P=$APP.ie(v);d=J;b=D;c=P}else{h=$APP.x(D);for(var W=$APP.as(h);;){try{var Z=$APP.Yy.j(a,W,new $APP.g(null,
1,[$APP.qq,new $APP.lk(null,new $APP.g(null,2,[$APP.Zy,null,$APP.$y,null],null),null)],null))}catch(sa){console.log($APP.vm(sa)),Z=console.error("[babashka]","Ignoring read error while assembling uberscript near",EV(W))}if($APP.B.h($APP.gG,Z))break;else if($APP.We(Z)){var na=$APP.x(Z),pa=$APP.B.h($APP.Il,na)?eva(Z):$APP.B.h($APP.BF,na)?gva(Z):$APP.B.h($APP.tJ,na)?hva(Z):null;if($APP.m(pa))try{$APP.qy(a,pa)}catch(sa){console.log(sa),console.error("[babashka]","Ignoring read error while assembling uberscript near",
EV(W))}}}d=$APP.z(D);b=null;c=0}e=0}else break}}finally{$APP.lo()}},ORa=new $APP.k(null,"expressions","expressions",255689909);(function(){function a(ub){return $APP.Dl.h(A,function(yb){return[$APP.n.g(yb),$APP.ik.h("",yb)?"\n":null,$APP.n.g(ub)].join("")})}var b=$APP.q($APP.hN);b=$APP.ph(b);b=$APP.gf.h(b,$APP.AH);var c=$APP.ph(b);b=$APP.gf.h(c,$APP.Gu);var d=$APP.gf.h(c,$APP.wF),e=$APP.gf.h(c,$APP.Vo);c=$APP.LD.g(b);var h=function(){var ub=$APP.x(d);return $APP.m(ub)?ub:$APP.x(e)}(),l=$APP.Cl.g($APP.Id),p=$APP.Cl.g($APP.qi),t=$APP.Cl.g($APP.Id),A=$APP.Cl.g(""),y=$APP.ho(),D=$APP.qP(y,"(set (map ns-name (all-ns)))");y=$APP.oy(y,
new $APP.g(null,1,[$APP.zv,function(ub){ub=$APP.ph(ub);var yb=$APP.gf.h(ub,$APP.Av);ub=$APP.gf.h(ub,$APP.Cv);var Kb=$APP.gf.h($APP.Aoa,yb);"string"===typeof yb?$APP.Dl.j(l,$APP.Cg,$APP.x($APP.rn.j(yb,/\$/,2))):$APP.B.h($APP.qG,yb)?($APP.Dl.j(p,$APP.Cg,"./nbb_reagent.js"),$APP.Dl.j(l,$APP.Cg,"react")):$APP.B.h($APP.yI,yb)?$APP.Dl.j(p,$APP.Cg,"./nbb_reagent.js"):$APP.B.h($APP.tF,yb)?($APP.Dl.j(p,$APP.Cg,"./nbb_reagent_dom_server.js"),$APP.Dl.I(l,$APP.Cg,"react","react-dom/server")):$APP.m(Kb)?$APP.Dl.j(p,
$APP.Cg,Kb):yb instanceof $APP.r&&!$APP.jf(D,yb)&&(yb=$APP.jn($APP.jn($APP.n.g(yb),".","/"),"-","_"),yb=$APP.oo(yb),yb=esm_import$fs.readFileSync(yb,"utf-8"),$APP.Dl.j(t,$APP.Cg,yb),iva(new $APP.g(null,2,[$APP.Cv,ub,ORa,new $APP.H(null,1,5,$APP.I,[yb],null)],null)));return $APP.uh}],null));if($APP.m(c))return $APP.VA.l($APP.F(["\nBundle: produce single JS file for usage with bundlers.\n\nUsage:\n\n  nbb bundle \x3cinput.cljs\x3e [opts]\n\nOptions:\n\n -o, --out [file]  Write to file instead of stdout"]));
c=$APP.iR;$APP.iR=!0;try{var v=esm_import$fs.readFileSync(h,"utf-8");$APP.Dl.j(t,$APP.Cg,v);iva(new $APP.g(null,2,[$APP.Cv,y,ORa,new $APP.H(null,1,5,$APP.I,[v],null)],null));a($APP.R3("import { loadFile, loadString, registerModule } from '%s'",tMa()));var J=$APP.u($APP.IA.g($APP.q(l)));v=null;for(y=h=0;;)if(y<h){var P=v.fa(null,y),W=$APP.Wm(P),Z=$APP.jn($APP.n.g(W),".","_dot_");a($APP.R3("import * as %s from '%s'",Z,P));a($APP.R3("registerModule(%s, '%s')",Z,P));y+=1}else{var na=$APP.u(J);if(na){var pa=
na;if($APP.Oe(pa)){var sa=$APP.dd(pa),Ba=$APP.fd(pa);pa=sa;var za=$APP.ie(sa);J=Ba;v=pa;h=za}else{var ra=$APP.x(pa),w=$APP.Wm(ra),E=$APP.jn($APP.n.g(w),".","_dot_");a($APP.R3("import * as %s from '%s'",E,ra));a($APP.R3("registerModule(%s, '%s')",E,ra));J=$APP.z(pa);v=null;h=0}y=0}else break}var T=$APP.u($APP.IA.g($APP.q(p)));J=null;for(W=P=0;;)if(W<P){var X=J.fa(null,W);a($APP.R3("import '%s/lib/%s'",tMa(),X));W+=1}else{var Y=$APP.u(T);if(Y){Z=Y;if($APP.Oe(Z)){var qa=$APP.dd(Z),ua=$APP.fd(Z);Z=qa;
var va=$APP.ie(qa);T=ua;J=Z;P=va}else{var Fa=$APP.x(Z);a($APP.R3("import '%s/lib/%s'",tMa(),Fa));T=$APP.z(Z);J=null;P=0}W=0}else break}var Ha=$APP.u($APP.IA.g($APP.q(t)));T=null;for(Y=X=0;;)if(Y<X){var Ka=T.fa(null,Y);a($APP.R3("await loadString(%s)",$APP.yl.l($APP.F([Ka]))));Y+=1}else{var Na=$APP.u(Ha);if(Na){qa=Na;if($APP.Oe(qa)){var Za=$APP.dd(qa),cb=$APP.fd(qa);qa=Za;var fb=$APP.ie(Za);Ha=cb;T=qa;X=fb}else{var ab=$APP.x(qa);a($APP.R3("await loadString(%s)",$APP.yl.l($APP.F([ab]))));Ha=$APP.z(qa);
T=null;X=0}Y=0}else break}var ob=$APP.ECa.g(b);return $APP.m(ob)?esm_import$fs.writeFileSync(ob,$APP.q(A),"utf-8"):$APP.VA.l($APP.F([$APP.q(A)]))}finally{$APP.iR=c}})();