import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
import "./nbb_goog_string.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$node_fs from"node:fs";
var Efb=function(){return"@logseq/nbb-logseq"},Ffb=function(a){if(a instanceof $APP.q)return new $APP.h(null,1,[$APP.R,a],null);if($APP.Me(a)){a=$APP.x.h($APP.Ak,$APP.v(a))?$APP.ie(a):a;var b=$APP.r(a);a=$APP.v(b);b=$APP.w(b);a=new $APP.h(null,1,[$APP.R,a],null);for(b=$APP.r(b);;)if(b){var c=$APP.v(b);switch(c instanceof $APP.F?c.N:null){case "as":a=$APP.xi.j(a,$APP.no,$APP.ie(b));b=$APP.ne(b);continue;case "refer":c=$APP.ie(b);$APP.Me(c)?(a=$APP.xi.j(a,$APP.Sr,$APP.ie(b)),b=$APP.ne(b)):b=$APP.ne(b);
continue;default:b=$APP.ne(b)}}else return a}else return null},Gfb=function(a){var b=$APP.Xf(a);a=$APP.A.h(b,$APP.R);b=$APP.A.h(b,$APP.no);return new $APP.H(null,3,5,$APP.J,[a,$APP.no,b],null)},Hfb=function(a){return $APP.un.h(function(b){if($APP.Me(b)){var c=$APP.v(b);return $APP.x.h($APP.yn,c)?(b=$APP.un.h(Ffb,$APP.Ld(b)),b=$APP.fj.h(Gfb,b),$APP.Hs.h($APP.yn,b)):null}return b},a)},Ifb=function(a){return $APP.un.h(function(b){return $APP.Le(b)&&$APP.x.h($APP.Ak,$APP.v(b))?$APP.ie(b):null},a)},Jfb=
function(a){a=Ifb($APP.Ld(a));a=$APP.fj.h(Ffb,a);return $APP.Hs.h($APP.zF,$APP.fj.h(function(b){return new $APP.D(null,$APP.Ak,new $APP.D(null,Gfb(b),null,1,null),2,null)},a))},Kfb=function(a){a=Ifb($APP.Ld(a));a=$APP.fj.h(function(b){return new $APP.D(null,$APP.Ak,new $APP.D(null,b,null,1,null),2,null)},a);return $APP.r(a)?$APP.Hs.h($APP.EK,a):null},a0=function(a){var b=$APP.n($APP.wq);return[$APP.k(b)?[$APP.l.g(b),":"].join(""):null,$APP.l.g($APP.ul(a)),":",$APP.l.g($APP.vl(a))].join("")},Mfb=function(a){var b=
$APP.Xf(a);a=$APP.A.h(b,$APP.hs);b=$APP.A.h(b,Lfb);a=$APP.xi.j(a,$APP.ds,!0);var c=$APP.Vf([$APP.Nq,$APP.n($APP.Nq),$APP.wq,$APP.n($APP.wq),$APP.BL,$APP.gf]);$APP.bq(c);try{var d=$APP.r(b);b=null;for(var e=c=0;;)if(e<c){for(var f=b.ha(null,e),m=$APP.zp(f);;){try{var p=$APP.Ru.j(a,m,new $APP.h(null,1,[$APP.Lo,new $APP.Ai(null,new $APP.h(null,2,[$APP.Su,null,$APP.Tu,null],null),null)],null))}catch(ka){console.log($APP.gk(ka)),p=console.error("[babashka]","Ignoring read error while assembling uberscript near",
a0(m))}if($APP.x.h($APP.qG,p))break;else if($APP.Le(p)){var u=$APP.v(p),t=$APP.x.h($APP.qk,u)?Hfb(p):$APP.x.h($APP.zF,u)?Jfb(p):$APP.x.h($APP.EK,u)?Kfb(p):null;if($APP.k(t))try{$APP.mu(a,t)}catch(ka){console.log(ka),console.error("[babashka]","Ignoring read error while assembling uberscript near",a0(m))}}}e+=1}else{var B=$APP.r(d);if(B){var C=B;if($APP.Fe(C)){var E=$APP.ed(C),I=$APP.fd(C);C=E;var P=$APP.de(E);d=I;b=C;c=P}else{f=$APP.v(C);for(var S=$APP.zp(f);;){try{var V=$APP.Ru.j(a,S,new $APP.h(null,
1,[$APP.Lo,new $APP.Ai(null,new $APP.h(null,2,[$APP.Su,null,$APP.Tu,null],null),null)],null))}catch(ka){console.log($APP.gk(ka)),V=console.error("[babashka]","Ignoring read error while assembling uberscript near",a0(S))}if($APP.x.h($APP.qG,V))break;else if($APP.Le(V)){var aa=$APP.v(V),ca=$APP.x.h($APP.qk,aa)?Hfb(V):$APP.x.h($APP.zF,aa)?Jfb(V):$APP.x.h($APP.EK,aa)?Kfb(V):null;if($APP.k(ca))try{$APP.mu(a,ca)}catch(ka){console.log(ka),console.error("[babashka]","Ignoring read error while assembling uberscript near",
a0(S))}}}d=$APP.w(C);b=null;c=0}e=0}else break}}finally{$APP.dq()}},Lfb=new $APP.F(null,"expressions","expressions",255689909);(function(){function a(vb){return $APP.Aj.h(t,function(Ab){return[$APP.l.g(Ab),$APP.wi.h("",Ab)?"\n":null,$APP.l.g(vb)].join("")})}var b=$APP.n($APP.qN);b=$APP.Xf(b);b=$APP.A.h(b,$APP.hI);var c=$APP.Xf(b);b=$APP.A.h(c,$APP.Gn);var d=$APP.A.h(c,$APP.vn),e=$APP.A.h(c,$APP.dn);c=$APP.WC.g(b);var f=function(){var vb=$APP.v(d);return $APP.k(vb)?vb:$APP.v(e)}(),m=$APP.zj.g($APP.Kd),p=$APP.zj.g($APP.Sg),u=$APP.zj.g($APP.Kd),t=$APP.zj.g(""),B=$APP.Fp(),C=$APP.lu(B,"(set (map ns-name (all-ns)))");B=$APP.ju(B,
new $APP.h(null,1,[$APP.fs,function(vb){vb=$APP.Xf(vb);var Ab=$APP.A.h(vb,$APP.gs);vb=$APP.A.h(vb,$APP.hs);var Ib=$APP.A.h($APP.DJa,Ab);"string"===typeof Ab?$APP.Aj.j(m,$APP.xf,$APP.v($APP.fl.j(Ab,/\$/,2))):$APP.x.h($APP.LG,Ab)?($APP.Aj.j(p,$APP.xf,"./nbb_reagent.js"),$APP.Aj.j(m,$APP.xf,"react")):$APP.x.h($APP.tJ,Ab)?$APP.Aj.j(p,$APP.xf,"./nbb_reagent.js"):$APP.x.h($APP.sF,Ab)?($APP.Aj.j(p,$APP.xf,"./nbb_reagent_dom_server.js"),$APP.Aj.F(m,$APP.xf,"react","react-dom/server")):$APP.k(Ib)?$APP.Aj.j(p,
$APP.xf,Ib):Ab instanceof $APP.q&&!$APP.Ue(C,Ab)&&(Ab=$APP.$k($APP.$k($APP.l.g(Ab),".","/"),"-","_"),Ab=$APP.Tia(Ab),Ab=esm_import$node_fs.readFileSync(Ab,"utf-8"),$APP.Aj.j(u,$APP.xf,Ab),Mfb(new $APP.h(null,2,[$APP.hs,vb,Lfb,new $APP.H(null,1,5,$APP.J,[Ab],null)],null)));return $APP.Wf}],null));if($APP.k(c))return $APP.Wy.l($APP.z(["\nBundle: produce single JS file for usage with bundlers.\n\nUsage:\n\n  nbb bundle \x3cinput.cljs\x3e [opts]\n\nOptions:\n\n -o, --out [file]  Write to file instead of stdout"]));
c=$APP.wN;$APP.wN=!0;try{var E=esm_import$node_fs.readFileSync(f,"utf-8");$APP.Aj.j(u,$APP.xf,E);Mfb(new $APP.h(null,2,[$APP.hs,B,Lfb,new $APP.H(null,1,5,$APP.J,[E],null)],null));a($APP.YT("import { loadFile, loadString, registerModule } from '%s'",Efb()));var I=$APP.r($APP.Ky.g($APP.n(m)));E=null;for(B=f=0;;)if(B<f){var P=E.ha(null,B),S=$APP.Jk(P),V=$APP.$k($APP.l.g(S),".","_dot_");a($APP.YT("import * as %s from '%s'",V,P));a($APP.YT("registerModule(%s, '%s')",V,P));B+=1}else{var aa=$APP.r(I);if(aa){var ca=
aa;if($APP.Fe(ca)){var ka=$APP.ed(ca),ma=$APP.fd(ca);ca=ka;var ua=$APP.de(ka);I=ma;E=ca;f=ua}else{var Ea=$APP.v(ca),da=$APP.Jk(Ea),Z=$APP.$k($APP.l.g(da),".","_dot_");a($APP.YT("import * as %s from '%s'",Z,Ea));a($APP.YT("registerModule(%s, '%s')",Z,Ea));I=$APP.w(ca);E=null;f=0}B=0}else break}var Y=$APP.r($APP.Ky.g($APP.n(p)));I=null;for(S=P=0;;)if(S<P){var U=I.ha(null,S);a($APP.YT("import '%s/lib/%s'",Efb(),U));S+=1}else{var X=$APP.r(Y);if(X){V=X;if($APP.Fe(V)){var va=$APP.ed(V),Ga=$APP.fd(V);V=
va;var ia=$APP.de(va);Y=Ga;I=V;P=ia}else{var sa=$APP.v(V);a($APP.YT("import '%s/lib/%s'",Efb(),sa));Y=$APP.w(V);I=null;P=0}S=0}else break}var xa=$APP.r($APP.Ky.g($APP.n(u)));Y=null;for(X=U=0;;)if(X<U){var Ba=Y.ha(null,X);a($APP.YT("await loadString(%s, {disableConfig: true})",$APP.xj.l($APP.z([Ba]))));X+=1}else{var Sa=$APP.r(xa);if(Sa){va=Sa;if($APP.Fe(va)){var cb=$APP.ed(va),gb=$APP.fd(va);va=cb;var eb=$APP.de(cb);xa=gb;Y=va;U=eb}else{var db=$APP.v(va);a($APP.YT("await loadString(%s, {disableConfig: true})",
$APP.xj.l($APP.z([db]))));xa=$APP.w(va);Y=null;U=0}X=0}else break}var jb=$APP.XBa.g(b);return $APP.k(jb)?esm_import$node_fs.writeFileSync(jb,$APP.n(t),"utf-8"):$APP.Wy.l($APP.z([$APP.n(t)]))}finally{$APP.wN=c}})();