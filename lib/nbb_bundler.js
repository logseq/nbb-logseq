import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
import "./nbb_goog_string.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$fs from"fs";
var rY=function(){return"@logseq/nbb-logseq"},COa=function(a){if(a instanceof $APP.t)return new $APP.k(null,1,[$APP.S,a],null);if($APP.oe(a)){a=$APP.z.h($APP.Zj,$APP.v(a))?$APP.Md(a):a;var b=$APP.u(a);a=$APP.v(b);b=$APP.y(b);a=new $APP.k(null,1,[$APP.S,a],null);for(b=$APP.u(b);;)if(b){var c=$APP.v(b);switch(c instanceof $APP.G?c.S:null){case "as":a=$APP.$h.j(a,$APP.qn,$APP.Md(b));b=$APP.Qd(b);continue;case "refer":c=$APP.Md(b);$APP.oe(c)?(a=$APP.$h.j(a,$APP.Sq,$APP.Md(b)),b=$APP.Qd(b)):b=$APP.Qd(b);
continue;default:b=$APP.Qd(b)}}else return a}else return null},DOa=function(a){var b=$APP.xf(a);a=$APP.D.h(b,$APP.S);b=$APP.D.h(b,$APP.qn);return new $APP.H(null,3,5,$APP.I,[a,$APP.qn,b],null)},EOa=function(a){return $APP.Vm.h(function(b){if($APP.oe(b)){var c=$APP.v(b);return $APP.z.h($APP.Dm,c)?(b=$APP.Vm.h(COa,$APP.nd(b)),b=$APP.Ii.h(DOa,b),$APP.Kr.h($APP.Dm,b)):null}return b},a)},FOa=function(a){return $APP.Vm.h(function(b){return $APP.ne(b)&&$APP.z.h($APP.Zj,$APP.v(b))?$APP.Md(b):null},a)},GOa=
function(a){a=FOa($APP.nd(a));a=$APP.Ii.h(COa,a);return $APP.Kr.h($APP.sD,$APP.Ii.h(function(b){return new $APP.E(null,$APP.Zj,new $APP.E(null,DOa(b),null,1,null),2,null)},a))},HOa=function(a){a=FOa($APP.nd(a));a=$APP.Ii.h(function(b){return new $APP.E(null,$APP.Zj,new $APP.E(null,b,null,1,null),2,null)},a);return $APP.u(a)?$APP.Kr.h($APP.aM,a):null},sY=function(a){var b=$APP.q($APP.Bp);return[$APP.l(b)?[$APP.p.g(b),":"].join(""):null,$APP.p.g($APP.$k(a)),":",$APP.p.g($APP.al(a))].join("")},IOa=function(a){var b=
$APP.xf(a);a=$APP.D.h(b,$APP.hr);b=$APP.D.h(b,tY);a=$APP.$h.j(a,$APP.dr,!0);var c=$APP.vf([$APP.Pp,$APP.q($APP.Pp),$APP.Bp,$APP.q($APP.Bp),$APP.XM,$APP.He]);$APP.dp(c);try{var d=$APP.u(b);b=null;for(var e=c=0;;)if(e<c){for(var f=b.da(null,e),h=$APP.Do(f);;){try{var m=$APP.Rt.j(a,h,new $APP.k(null,1,[$APP.On,new $APP.ci(null,new $APP.k(null,2,[$APP.St,null,$APP.Tt,null],null),null)],null))}catch(ea){console.log($APP.Ij(ea)),m=console.error("[babashka]","Ignoring read error while assembling uberscript near",
sY(h))}if($APP.z.h($APP.OE,m))break;else if($APP.ne(m)){var r=$APP.v(m),n=$APP.z.h($APP.Sj,r)?EOa(m):$APP.z.h($APP.sD,r)?GOa(m):$APP.z.h($APP.aM,r)?HOa(m):null;if($APP.l(n))try{$APP.kt(a,n)}catch(ea){console.log(ea),console.error("[babashka]","Ignoring read error while assembling uberscript near",sY(h))}}}e+=1}else{var w=$APP.u(d);if(w){var x=w;if($APP.je(x)){var B=$APP.Kc(x),F=$APP.Lc(x);x=B;var M=$APP.Gd(B);d=F;b=x;c=M}else{f=$APP.v(x);for(var U=$APP.Do(f);;){try{var Y=$APP.Rt.j(a,U,new $APP.k(null,
1,[$APP.On,new $APP.ci(null,new $APP.k(null,2,[$APP.St,null,$APP.Tt,null],null),null)],null))}catch(ea){console.log($APP.Ij(ea)),Y=console.error("[babashka]","Ignoring read error while assembling uberscript near",sY(U))}if($APP.z.h($APP.OE,Y))break;else if($APP.ne(Y)){var ba=$APP.v(Y),ca=$APP.z.h($APP.Sj,ba)?EOa(Y):$APP.z.h($APP.sD,ba)?GOa(Y):$APP.z.h($APP.aM,ba)?HOa(Y):null;if($APP.l(ca))try{$APP.kt(a,ca)}catch(ea){console.log(ea),console.error("[babashka]","Ignoring read error while assembling uberscript near",
sY(U))}}}d=$APP.y(x);b=null;c=0}e=0}else break}}finally{$APP.fp()}},tY=new $APP.G(null,"expressions","expressions",255689909);(function(){function a(rb){return $APP.dj.h(n,function(ub){return[$APP.p.g(ub),$APP.Zh.h("",ub)?"\n":null,$APP.p.g(rb)].join("")})}var b=$APP.q($APP.MO);b=$APP.xf(b);b=$APP.D.h(b,$APP.cI);var c=$APP.xf(b);b=$APP.D.h(c,$APP.ir);var d=$APP.D.h(c,$APP.lD),e=$APP.D.h(c,$APP.Gm);c=$APP.Bz.g(b);var f=function(){var rb=$APP.v(d);return $APP.l(rb)?rb:$APP.v(e)}(),h=$APP.cj.g($APP.md),m=$APP.cj.g($APP.qg),r=$APP.cj.g($APP.md),n=$APP.cj.g(""),w=$APP.Ft(),x=$APP.it(w,"(set (map ns-name (all-ns)))");w=$APP.gt(w,
new $APP.k(null,1,[$APP.fr,function(rb){rb=$APP.xf(rb);var ub=$APP.D.h(rb,$APP.gr);rb=$APP.D.h(rb,$APP.hr);var Sb=$APP.D.h($APP.gAa,ub);"string"===typeof ub?$APP.dj.j(h,$APP.We,$APP.v($APP.Jk.j(ub,/\$/,2))):$APP.z.h($APP.FF,ub)?($APP.dj.j(m,$APP.We,"./nbb_reagent.js"),$APP.dj.j(h,$APP.We,"react")):$APP.z.h($APP.oK,ub)?$APP.dj.j(m,$APP.We,"./nbb_reagent.js"):$APP.z.h($APP.fD,ub)?($APP.dj.j(m,$APP.We,"./nbb_reagent_dom_server.js"),$APP.dj.F(h,$APP.We,"react","react-dom/server")):$APP.l(Sb)?$APP.dj.j(m,
$APP.We,Sb):ub instanceof $APP.t&&!$APP.ue(x,ub)&&(ub=$APP.Dk($APP.Dk($APP.p.g(ub),".","/"),"-","_"),ub=$APP.wka(ub),ub=esm_import$fs.readFileSync(ub,"utf-8"),$APP.dj.j(r,$APP.We,ub),IOa(new $APP.k(null,2,[$APP.hr,rb,tY,new $APP.H(null,1,5,$APP.I,[ub],null)],null)));return $APP.wf}],null));if($APP.l(c))return $APP.Pv.l($APP.C(["\nBundle: produce single JS file for usage with bundlers.\n\nUsage:\n\n  nbb bundle \x3cinput.cljs\x3e [opts]\n\nOptions:\n\n -o, --out [file]  Write to file instead of stdout"]));
c=$APP.SO;$APP.SO=!0;try{var B=esm_import$fs.readFileSync(f,"utf-8");$APP.dj.j(r,$APP.We,B);IOa(new $APP.k(null,2,[$APP.hr,w,tY,new $APP.H(null,1,5,$APP.I,[B],null)],null));a($APP.cV("import { loadFile, loadString, registerModule } from '%s'",rY()));var F=$APP.u($APP.Dv.g($APP.q(h)));B=null;for(w=f=0;;)if(w<f){var M=B.da(null,w),U=$APP.mk(M),Y=$APP.Dk($APP.p.g(U),".","_dot_");a($APP.cV("import * as %s from '%s'",Y,M));a($APP.cV("registerModule(%s, '%s')",Y,M));w+=1}else{var ba=$APP.u(F);if(ba){var ca=
ba;if($APP.je(ca)){var ea=$APP.Kc(ca),la=$APP.Lc(ca);ca=ea;var ta=$APP.Gd(ea);F=la;B=ca;f=ta}else{var pa=$APP.v(ca),V=$APP.mk(pa),P=$APP.Dk($APP.p.g(V),".","_dot_");a($APP.cV("import * as %s from '%s'",P,pa));a($APP.cV("registerModule(%s, '%s')",P,pa));F=$APP.y(ca);B=null;f=0}w=0}else break}var X=$APP.u($APP.Dv.g($APP.q(m)));F=null;for(U=M=0;;)if(U<M){var R=F.da(null,U);a($APP.cV("import '%s/lib/%s'",rY(),R));U+=1}else{var W=$APP.u(X);if(W){Y=W;if($APP.je(Y)){var ja=$APP.Kc(Y),na=$APP.Lc(Y);Y=ja;
var oa=$APP.Gd(ja);X=na;F=Y;M=oa}else{var wa=$APP.v(Y);a($APP.cV("import '%s/lib/%s'",rY(),wa));X=$APP.y(Y);F=null;M=0}U=0}else break}var Ca=$APP.u($APP.Dv.g($APP.q(r)));X=null;for(W=R=0;;)if(W<R){var La=X.da(null,W);a($APP.cV("await loadString(%s)",$APP.aj.l($APP.C([La]))));W+=1}else{var Ra=$APP.u(Ca);if(Ra){ja=Ra;if($APP.je(ja)){var $a=$APP.Kc(ja),jb=$APP.Lc(ja);ja=$a;var nb=$APP.Gd($a);Ca=jb;X=ja;R=nb}else{var db=$APP.v(ja);a($APP.cV("await loadString(%s)",$APP.aj.l($APP.C([db]))));Ca=$APP.y(ja);
X=null;R=0}W=0}else break}var hb=$APP.oua.g(b);return $APP.l(hb)?esm_import$fs.writeFileSync(hb,$APP.q(n),"utf-8"):$APP.Pv.l($APP.C([$APP.q(n)]))}finally{$APP.SO=c}})();