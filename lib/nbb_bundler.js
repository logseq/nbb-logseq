import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
import "./nbb_goog_string.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$node_fs from"node:fs";
var wfb=function(){return"@logseq/nbb-logseq"},xfb=function(a){if(a instanceof $APP.q)return new $APP.h(null,1,[$APP.P,a],null);if($APP.Ke(a)){a=$APP.x.h($APP.Ak,$APP.v(a))?$APP.ge(a):a;var b=$APP.r(a);a=$APP.v(b);b=$APP.w(b);a=new $APP.h(null,1,[$APP.P,a],null);for(b=$APP.r(b);;)if(b){var c=$APP.v(b);switch(c instanceof $APP.F?c.N:null){case "as":a=$APP.ui.j(a,$APP.lo,$APP.ge(b));b=$APP.ke(b);continue;case "refer":c=$APP.ge(b);$APP.Ke(c)?(a=$APP.ui.j(a,$APP.Rr,$APP.ge(b)),b=$APP.ke(b)):b=$APP.ke(b);
continue;default:b=$APP.ke(b)}}else return a}else return null},yfb=function(a){var b=$APP.Vf(a);a=$APP.B.h(b,$APP.P);b=$APP.B.h(b,$APP.lo);return new $APP.G(null,3,5,$APP.H,[a,$APP.lo,b],null)},zfb=function(a){return $APP.tn.h(function(b){if($APP.Ke(b)){var c=$APP.v(b);return $APP.x.h($APP.xn,c)?(b=$APP.tn.h(xfb,$APP.Id(b)),b=$APP.ej.h(yfb,b),$APP.Gs.h($APP.xn,b)):null}return b},a)},Afb=function(a){return $APP.tn.h(function(b){return $APP.Je(b)&&$APP.x.h($APP.Ak,$APP.v(b))?$APP.ge(b):null},a)},Bfb=
function(a){a=Afb($APP.Id(a));a=$APP.ej.h(xfb,a);return $APP.Gs.h($APP.BF,$APP.ej.h(function(b){return new $APP.D(null,$APP.Ak,new $APP.D(null,yfb(b),null,1,null),2,null)},a))},Cfb=function(a){a=Afb($APP.Id(a));a=$APP.ej.h(function(b){return new $APP.D(null,$APP.Ak,new $APP.D(null,b,null,1,null),2,null)},a);return $APP.r(a)?$APP.Gs.h($APP.FK,a):null},a0=function(a){var b=$APP.n($APP.vq);return[$APP.k(b)?[$APP.l.g(b),":"].join(""):null,$APP.l.g($APP.ul(a)),":",$APP.l.g($APP.vl(a))].join("")},Efb=function(a){var b=
$APP.Vf(a);a=$APP.B.h(b,$APP.gs);b=$APP.B.h(b,Dfb);a=$APP.ui.j(a,$APP.cs,!0);var c=$APP.Tf([$APP.Nq,$APP.n($APP.Nq),$APP.vq,$APP.n($APP.vq),$APP.CL,$APP.ef]);$APP.Yp(c);try{var d=$APP.r(b);b=null;for(var e=c=0;;)if(e<c){for(var f=b.ha(null,e),m=$APP.xp(f);;){try{var p=$APP.Pu.j(a,m,new $APP.h(null,1,[$APP.Jo,new $APP.xi(null,new $APP.h(null,2,[$APP.Qu,null,$APP.Ru,null],null),null)],null))}catch(ja){console.log($APP.gk(ja)),p=console.error("[babashka]","Ignoring read error while assembling uberscript near",
a0(m))}if($APP.x.h($APP.tG,p))break;else if($APP.Je(p)){var u=$APP.v(p),t=$APP.x.h($APP.qk,u)?zfb(p):$APP.x.h($APP.BF,u)?Bfb(p):$APP.x.h($APP.FK,u)?Cfb(p):null;if($APP.k(t))try{$APP.hu(a,t)}catch(ja){console.log(ja),console.error("[babashka]","Ignoring read error while assembling uberscript near",a0(m))}}}e+=1}else{var A=$APP.r(d);if(A){var C=A;if($APP.Ee(C)){var E=$APP.cd(C),I=$APP.dd(C);C=E;var Q=$APP.be(E);d=I;b=C;c=Q}else{f=$APP.v(C);for(var T=$APP.xp(f);;){try{var Z=$APP.Pu.j(a,T,new $APP.h(null,
1,[$APP.Jo,new $APP.xi(null,new $APP.h(null,2,[$APP.Qu,null,$APP.Ru,null],null),null)],null))}catch(ja){console.log($APP.gk(ja)),Z=console.error("[babashka]","Ignoring read error while assembling uberscript near",a0(T))}if($APP.x.h($APP.tG,Z))break;else if($APP.Je(Z)){var ba=$APP.v(Z),da=$APP.x.h($APP.qk,ba)?zfb(Z):$APP.x.h($APP.BF,ba)?Bfb(Z):$APP.x.h($APP.FK,ba)?Cfb(Z):null;if($APP.k(da))try{$APP.hu(a,da)}catch(ja){console.log(ja),console.error("[babashka]","Ignoring read error while assembling uberscript near",
a0(T))}}}d=$APP.w(C);b=null;c=0}e=0}else break}}finally{$APP.$p()}},Dfb=new $APP.F(null,"expressions","expressions",255689909);(function(){function a(ib){return $APP.Bj.h(t,function(nb){return[$APP.l.g(nb),$APP.ti.h("",nb)?"\n":null,$APP.l.g(ib)].join("")})}var b=$APP.n($APP.qN);b=$APP.Vf(b);b=$APP.B.h(b,$APP.kI);var c=$APP.Vf(b);b=$APP.B.h(c,$APP.Fn);var d=$APP.B.h(c,$APP.un),e=$APP.B.h(c,$APP.cn);c=$APP.RC.g(b);var f=function(){var ib=$APP.v(d);return $APP.k(ib)?ib:$APP.v(e)}(),m=$APP.yj.g($APP.Hd),p=$APP.yj.g($APP.Sg),u=$APP.yj.g($APP.Hd),t=$APP.yj.g(""),A=$APP.Cu(),C=$APP.fu(A,"(set (map ns-name (all-ns)))");A=$APP.du(A,
new $APP.h(null,1,[$APP.es,function(ib){ib=$APP.Vf(ib);var nb=$APP.B.h(ib,$APP.fs);ib=$APP.B.h(ib,$APP.gs);var Gb=$APP.B.h($APP.xJa,nb);"string"===typeof nb?$APP.Bj.j(m,$APP.vf,$APP.v($APP.fl.j(nb,/\$/,2))):$APP.x.h($APP.OG,nb)?($APP.Bj.j(p,$APP.vf,"./nbb_reagent.js"),$APP.Bj.j(m,$APP.vf,"react")):$APP.x.h($APP.xJ,nb)?$APP.Bj.j(p,$APP.vf,"./nbb_reagent.js"):$APP.x.h($APP.uF,nb)?($APP.Bj.j(p,$APP.vf,"./nbb_reagent_dom_server.js"),$APP.Bj.F(m,$APP.vf,"react","react-dom/server")):$APP.k(Gb)?$APP.Bj.j(p,
$APP.vf,Gb):nb instanceof $APP.q&&!$APP.Re(C,nb)&&(nb=$APP.$k($APP.$k($APP.l.g(nb),".","/"),"-","_"),nb=$APP.Wia(nb),nb=esm_import$node_fs.readFileSync(nb,"utf-8"),$APP.Bj.j(u,$APP.vf,nb),Efb(new $APP.h(null,2,[$APP.gs,ib,Dfb,new $APP.G(null,1,5,$APP.H,[nb],null)],null)));return $APP.Uf}],null));if($APP.k(c))return $APP.Uy.l($APP.z(["\nBundle: produce single JS file for usage with bundlers.\n\nUsage:\n\n  nbb bundle \x3cinput.cljs\x3e [opts]\n\nOptions:\n\n -o, --out [file]  Write to file instead of stdout"]));
c=$APP.wN;$APP.wN=!0;try{var E=esm_import$node_fs.readFileSync(f,"utf-8");$APP.Bj.j(u,$APP.vf,E);Efb(new $APP.h(null,2,[$APP.gs,A,Dfb,new $APP.G(null,1,5,$APP.H,[E],null)],null));a($APP.YT("import { loadFile, loadString, registerModule } from '%s'",wfb()));var I=$APP.r($APP.Iy.g($APP.n(m)));E=null;for(A=f=0;;)if(A<f){var Q=E.ha(null,A),T=$APP.Jk(Q),Z=$APP.$k($APP.l.g(T),".","_dot_");a($APP.YT("import * as %s from '%s'",Z,Q));a($APP.YT("registerModule(%s, '%s')",Z,Q));A+=1}else{var ba=$APP.r(I);if(ba){var da=
ba;if($APP.Ee(da)){var ja=$APP.cd(da),la=$APP.dd(da);da=ja;var xa=$APP.be(ja);I=la;E=da;f=xa}else{var sa=$APP.v(da),X=$APP.Jk(sa),S=$APP.$k($APP.l.g(X),".","_dot_");a($APP.YT("import * as %s from '%s'",S,sa));a($APP.YT("registerModule(%s, '%s')",S,sa));I=$APP.w(da);E=null;f=0}A=0}else break}var W=$APP.r($APP.Iy.g($APP.n(p)));I=null;for(T=Q=0;;)if(T<Q){var V=I.ha(null,T);a($APP.YT("import '%s/lib/%s'",wfb(),V));T+=1}else{var Y=$APP.r(W);if(Y){Z=Y;if($APP.Ee(Z)){var oa=$APP.cd(Z),za=$APP.dd(Z);Z=oa;
var ha=$APP.be(oa);W=za;I=Z;Q=ha}else{var qa=$APP.v(Z);a($APP.YT("import '%s/lib/%s'",wfb(),qa));W=$APP.w(Z);I=null;Q=0}T=0}else break}var ua=$APP.r($APP.Iy.g($APP.n(u)));W=null;for(Y=V=0;;)if(Y<V){var ya=W.ha(null,Y);a($APP.YT("await loadString(%s, {disableConfig: true})",$APP.wj.l($APP.z([ya]))));Y+=1}else{var Oa=$APP.r(ua);if(Oa){oa=Oa;if($APP.Ee(oa)){var Za=$APP.cd(oa),db=$APP.dd(oa);oa=Za;var gb=$APP.be(Za);ua=db;W=oa;V=gb}else{var eb=$APP.v(oa);a($APP.YT("await loadString(%s, {disableConfig: true})",
$APP.wj.l($APP.z([eb]))));ua=$APP.w(oa);W=null;V=0}Y=0}else break}var lb=$APP.UBa.g(b);return $APP.k(lb)?esm_import$node_fs.writeFileSync(lb,$APP.n(t),"utf-8"):$APP.Uy.l($APP.z([$APP.n(t)]))}finally{$APP.wN=c}})();