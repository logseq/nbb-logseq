import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
import "./nbb_api.js";
import "./nbb_impl_main.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$node_process from"node:process";import*as esm_import$node_path from"node:path";
var A9a=function(a){var b=$APP.lj.g(a),c=$APP.Cf(b);return $APP.$k("\n(require '[babashka.cli])\n(require '$1)\n(let [the-var (resolve '$2)\n      the-var-meta (meta the-var)\n      ns (:ns (meta the-var))\n      ns-meta (meta ns)\n      cli-opts (babashka.cli/merge-opts (:org.babashka/cli ns-meta)\n                                        (:org.babashka/cli the-var-meta))\n      opts (babashka.cli/parse-opts *command-line-args* cli-opts)]\n  (the-var opts))\n",/\$(\d)/,function(d){d=$APP.ie(d);switch(d){case "1":return c;
case "2":return b;default:throw Error(["No matching clause: ",$APP.l.g(d)].join(""));}})},B9a=function(a){a=$APP.lj.g(a);var b=$APP.Ef(a)?$APP.lj.h($APP.l.g(a),"-main"):a,c=$APP.Cf(b);return $APP.$k("(require '$1) (apply $2 *command-line-args*)",/\$(\d)/,function(d){d=$APP.ie(d);switch(d){case "1":return c;case "2":return b;default:throw Error(["No matching clause: ",$APP.l.g(d)].join(""));}})},C9a=function(a){for(var b=$APP.Wf,c=a;;)if($APP.k(c)){var d=$APP.v(c);a=$APP.w(c);switch(d){case "--help":case "-h":return $APP.xi.j(b,
$APP.WC,!0);case "--version":case "-v":return $APP.xi.j(b,$APP.TXa,!0);case "-e":b=$APP.xi.j(b,$APP.Qo,$APP.v(a));c=a=$APP.w(a);continue;case "-m":case "--main":return $APP.xi.l(b,$APP.Qo,B9a($APP.v(a)),$APP.z([$APP.dn,$APP.w(a)]));case "-x":case "--exec":return $APP.xi.l(b,$APP.Qo,A9a($APP.v(a)),$APP.z([$APP.dn,$APP.w(a)]));case "-cp":case "--classpath":b=$APP.xi.j(b,$APP.WO,$APP.v(a));c=a=$APP.w(a);continue;case "--config":b=$APP.xi.j(b,$APP.HB,$APP.v(a));c=a=$APP.w(a);continue;case "--debug":b=
$APP.xi.j(b,$APP.Eu,!0);c=a;continue;case "nrepl-server":b=$APP.xi.j(b,$APP.PXa,!0);c=a;continue;case "socket-repl":b=$APP.xi.j(b,$APP.QXa,!0);c=a;continue;case ":port":case "--port":b=$APP.xi.j(b,$APP.UF,$APP.v(a));c=a=$APP.w(a);continue;case ":host":case "--host":b=$APP.xi.j(b,$APP.eK,$APP.v(a));c=a=$APP.w(a);continue;case "repl":b=$APP.xi.j(b,$APP.SXa,!0);c=a;continue;case "bundle":return $APP.xi.j(b,$APP.hI,$APP.Dn.h(a,new $APP.h(null,1,[$APP.mo,new $APP.h(null,2,[$APP.UXa,$APP.XBa,$APP.VXa,$APP.WC],
null)],null)));default:if($APP.Cb($APP.Qo.g(c)))return $APP.xi.l(b,$APP.RXa,d,$APP.z([$APP.dn,$APP.w(c)]));throw $APP.Zl.h(["Unrecognized options:",$APP.l.g(c)].join(""),$APP.Wf);}}else return b};if($APP.k(esm_import$node_process.on))esm_import$node_process.on("unhandledRejection",function(a){console.error($APP.gk(a));return process.exitCode=1});(function(){var a=$APP.r(function(){var m=globalThis.nbb_args;return $APP.k(m)?m:esm_import$node_process.argv}());$APP.v(a);a=$APP.w(a);$APP.v(a);a=$APP.w(a);var b=C9a(a);$APP.vg($APP.WXa,b);var c=$APP.RXa.g(b),d=$APP.Qo.g(b);a=$APP.WO.g(b);$APP.k(a)&&$APP.Cp(a);a=$APP.PXa.g(b);var e=function(){var m=$APP.SXa.g(b);if($APP.k(m))return m;m=$APP.QXa.g(b);return $APP.k(m)?m:$APP.xe($APP.Ll.l(b,$APP.WO,$APP.z([$APP.Eu,$APP.HB])))}(),f=$APP.hI.g(b);$APP.k($APP.WC.g(b))&&($APP.Wy.l($APP.z([$APP.Ta("nbb-logseq"),
"version:",$APP.lv()])),$APP.Wy.l($APP.z(["\nHelp:\n\n -h / --help: print this help text and exit.\n -v / --version: print the current version of nbb.\n\nGlobal options:\n\n --debug: print additional debug info.\n -cp / --classpath: set the classpath.\n\nEvaluation:\n\n -e: execute expression\n -m / --main: execute main function\n -x / --exec: execute function using babashka.cli\n\nREPL:\n\n repl: start console REPL.\n nrepl-server: start nrepl server. [1,2]\n socket-repl: start socket repl server. [1]\n\n 1: Provide :port \x3cport\x3e to specify port\n 2: Provide :host \x3chost\x3e to specify host\n\nTooling:\n\n  bundle: produce single JS file for usage with bundlers.\n"])),
esm_import$node_process.exit(0));$APP.k($APP.TXa.g(b))&&($APP.Wy.l($APP.z([["nbb-logseq v",$APP.lv()].join("")])),esm_import$node_process.exit(0));return $APP.k($APP.k(c)?c:$APP.k(d)?d:$APP.k(a)?a:$APP.k(e)?e:f)?($APP.gN.h($APP.AJa,$APP.tg($APP.dn.g(b))),Promise.resolve($APP.VO($APP.k(e)?esm_import$node_path.resolve("script.cljs"):c,b)).then(function(){return($APP.k(c)?$APP.XO.g(c):$APP.k(d)?$APP.YO.g(d):$APP.k($APP.PXa.g(b))?shadow_esm_import("./nbb_nrepl_server.js").then(function(){var m=$APP.A.h($APP.A.h($APP.Kq.g($APP.n($APP.Fq.g($APP.Fp()))),
$APP.lA),$APP.GMa);return m.g?m.g(b):m.call(null,b)}):$APP.k($APP.k(e)?$APP.QXa.g(b):e)?shadow_esm_import("./nbb_repl.js").then(function(){var m=new $APP.h(null,1,[$APP.UF,$APP.UF.g(b)],null),p=$APP.A.h($APP.A.h($APP.Kq.g($APP.n($APP.Fq.g($APP.Fp()))),$APP.qz),$APP.EMa);return p.g?p.g(m):p.call(null,m)}):$APP.k($APP.hI.g(b))?shadow_esm_import("./nbb_bundler.js"):$APP.k(e)?shadow_esm_import("./nbb_repl.js").then(function(){var m=$APP.A.h($APP.A.h($APP.Kq.g($APP.n($APP.Fq.g($APP.Fp()))),$APP.qz),$APP.FMa);
return m.D?m.D():m.call(null)}):null).then(function(m){$APP.k($APP.k(d)?null!=m:d)&&$APP.Du.l($APP.z([m]));return m}).catch(function(m){$APP.Kia(m,b);$APP.k($APP.Eu.g(b))&&console.error(m);throw Error($APP.gk(m));})})):console.error("Usage: nbb-logseq \x3cscript\x3e or nbb -e \x3cexpr\x3e.")})();