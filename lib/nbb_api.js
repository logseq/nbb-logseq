import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$node_process from"node:process";import*as esm_import$node_module from"node:module";import*as esm_import$node_fs from"node:fs";import*as esm_import$import_meta_resolve from"import-meta-resolve";import*as esm_import$node_path from"node:path";import*as esm_import$node_url from"node:url";var RKa,TKa,KKa,JKa,SKa,OKa,UKa,PKa,VKa;
$APP.IKa=function(a){a=$APP.Id(a);a=$APP.gs.h($APP.zf,a);a=$APP.on.h(function(d){return $APP.fu($APP.Cu(),d)},a);var b=$APP.n($APP.Lq),c=$APP.n($APP.xq);return $APP.Gu(a,new $APP.h(null,2,[$APP.Q,b,$APP.Vl,c],null))};$APP.LKa=function(a,b){return JKa(KKa,a,b)};
$APP.tQ=function(a,b){return Promise.resolve($APP.k($APP.n(MKa))?null:function(){var c=esm_import$node_path.resolve($APP.k(a)?a:"script.cljs"),d=$APP.k($APP.AB.g(b))?$APP.ui.j(b,$APP.AB,$APP.kM.g(esm_import$node_fs.readFileSync($APP.AB.g(b),"utf8"))):function(){var l;a:for(l=c;;){var p=esm_import$node_fs.existsSync(l);p=$APP.k(p)?esm_import$node_fs.lstatSync(l).isDirectory():p;if($APP.k(p)){p=esm_import$node_path.resolve(l,"nbb.edn");if($APP.k(esm_import$node_fs.existsSync(p))){l=p;break a}p=esm_import$node_path.dirname(l)}else p=
esm_import$node_path.dirname(l);if($APP.x.h(p,l)){l=null;break a}l=p}return $APP.k(l)?(p=$APP.kM.g(esm_import$node_fs.readFileSync(l,"utf8")),$APP.ui.l(b,$APP.AB,p,$APP.z([$APP.TK,esm_import$node_path.dirname(l)]))):b}(),e=NKa.g?NKa.g(c):NKa.call(null,c),f=$APP.m.g(esm_import$node_url.pathToFileURL(c));$APP.Iu.require=e;$APP.Bj.F($APP.Ku,$APP.ui,$APP.wn,e);$APP.Bj.F($APP.Ku,$APP.ui,$APP.Lu,function(l){return esm_import$import_meta_resolve.resolve(l,f)});$APP.vg($APP.KO,d);return Promise.resolve(function(){var l=
function(){var E=$APP.Cb(OKa.g(d));return E?$APP.AB.g(d):E}();if($APP.k(l)){l=PKa.g(l);if($APP.k(l)){l=$APP.r(l);for(var p=null,u=0,t=0;;)if(t<u){var A=p.ea(null,t);$APP.Cb(esm_import$node_path.isAbsolute(A))?$APP.zp(function(){var E=$APP.TK.g(d);return $APP.k(E)?esm_import$node_path.resolve(E,A):A}()):$APP.zp(A);t+=1}else if(l=$APP.r(l)){p=l;if($APP.Ee(p))l=$APP.cd(p),t=$APP.dd(p),p=l,u=$APP.be(l),l=t;else{var B=$APP.v(p);$APP.Cb(esm_import$node_path.isAbsolute(B))?$APP.zp(function(){var E=$APP.TK.g(d);
return $APP.k(E)?esm_import$node_path.resolve(E,B):B}()):$APP.zp(B);l=$APP.w(p);p=null;u=0}t=0}else break}else $APP.zp(esm_import$node_process.cwd());return shadow_esm_import("./nbb_deps.js")}return $APP.zp(esm_import$node_process.cwd())}()).then(function(){return $APP.vg(MKa,!0)})}())};$APP.QKa=function(a,b){return $APP.Kt(a,b)};
RKa=function(a,b){b=$APP.du(a,$APP.$k("(keys (ns-map '%s))","%s",b));b=$APP.ej.h(function(c){return["`",$APP.m.g(c)].join("")},b);b=["[",$APP.mn.h(" ",b),"]"].join("");a=$APP.du(a,b);return $APP.gs.h(function(c){return $APP.il($APP.m.g(c),"nbb.internal")},a)};
TKa=function(a,b){var c=$APP.Cu();b=$APP.fl.h(b,/\//);$APP.y.j(b,0,null);var d=$APP.y.j(b,1,null),e=$APP.du(c,$APP.yj.l($APP.z([$APP.R.g($APP.r($APP.K.l(new $APP.D(null,$APP.Pq,null,1,null),new $APP.D(null,$APP.cf($APP.R.g($APP.r($APP.K.h(new $APP.D(null,SKa,null,1,null),new $APP.D(null,$APP.R.g($APP.r($APP.K.h(new $APP.D(null,$APP.JE,null,1,null),new $APP.D(null,$APP.R.g($APP.r($APP.K.h(new $APP.D(null,$APP.Ak,null,1,null),new $APP.D(null,a,null,1,null)))),null,1,null)))),null,1,null))))),null,1,
null),$APP.z([new $APP.D(null,$APP.R.g($APP.r($APP.K.l(new $APP.D(null,$APP.KK,null,1,null),new $APP.D(null,$APP.R.g($APP.r($APP.K.h(new $APP.D(null,$APP.Hsa,null,1,null),new $APP.D(null,SKa,null,1,null)))),null,1,null),$APP.z([new $APP.D(null,SKa,null,1,null)])))),null,1,null)]))))])));if($APP.k(e)&&(c=$APP.k(d)?function(){var p=$APP.Fa(d,"."),u=$APP.fl.h(d,/\./);p=p?u:$APP.Ei(u);return new $APP.H(null,2,5,$APP.I,[[$APP.m.g(a),"/",$APP.r(p)?[$APP.mn.h(".",p),"."].join(""):null].join(""),$APP.qg.j($APP.Ka,
e,p)],null)}():new $APP.H(null,2,5,$APP.I,[[$APP.m.g(a),"/"].join(""),e],null),$APP.k(c))){var f=$APP.y.j(c,0,null),l=$APP.y.j(c,1,null);c=function(){for(var p=l,u=$APP.Sg;;)if($APP.k(p)){var t=Object.getPrototypeOf(p);u=$APP.Eh.h(u,Object.getOwnPropertyNames(p));p=t}else return u}();return $APP.ej.h(function(p){return new $APP.H(null,2,5,$APP.I,[null,[$APP.m.g(f),$APP.m.g(p)].join("")],null)},c)}return null};
$APP.WKa=function(a){var b=$APP.Yf(a);a=$APP.C.h(b,$APP.Q);try{var c=$APP.Cu(),d=$APP.k(a)?$APP.QKa(c,$APP.kj.g(a)):null,e=$APP.Wf([$APP.Lq,$APP.k(d)?d:$APP.n($APP.Lq)]);$APP.Xp(e);try{var f=function(){var ma=$APP.zm.g(b);return $APP.k(ma)?ma:$APP.zI.g(b)}();if($APP.k(f)){var l=$APP.Ha(f,"/"),p=l?function(){var ma=$APP.fl.h(f,/\//);ma=null==ma?null:$APP.v(ma);return null==ma?null:$APP.kj.g(ma)}():null,u=RKa(c,$APP.du(c,"(ns-name *ns*)")),t=$APP.ej.h(function(ma){return new $APP.H(null,3,5,$APP.I,
[$APP.Bf(ma),$APP.Fi(ma),UKa],null)},u),A=$APP.du(c,"(let [m (ns-aliases *ns*)] (zipmap (keys m) (map ns-name (vals m))))"),B=$APP.Gi($APP.si(A),$APP.qi(A)),E=$APP.Qn.g($APP.Og.l(function(ma){var ya=$APP.C.h(A,ma);ma=$APP.du(c,$APP.$k("(keys (ns-publics '%s))","%s",ya));return $APP.ej.h(function(sa){return new $APP.H(null,3,5,$APP.I,[$APP.m.g(ya),$APP.m.g(sa),VKa],null)},ma)},$APP.z([$APP.qi(A)]))),G=$APP.ej.h(function(ma){return new $APP.H(null,3,5,$APP.I,[$APP.m.g(ma),null,VKa],null)},$APP.du(c,
"(all-ns)")),O=l?TKa(p,f):null,T=$APP.k(O)?null:l?function(){var ma=$APP.C.j(A,p,p),ya=$APP.du(c,$APP.$k("(and (find-ns '%s)\n                                                                                         (keys (ns-publics '%s)))","%s",ma));return $APP.ej.h(function(sa){return new $APP.H(null,3,5,$APP.I,[$APP.m.g(ma),$APP.m.g(sa),VKa],null)},ya)}():null,Z=$APP.K.l(t,E,$APP.z([G,T])),ba=$APP.sn.h(function(ma){var ya=$APP.y.j(ma,0,null);var sa=$APP.y.j(ma,1,null);ma=$APP.y.j(ma,2,null);ma=
$APP.x.h(UKa,ma)&&$APP.Ha(sa,f)?new $APP.H(null,2,5,$APP.I,[ya,sa],null):null;$APP.k(ma)?ya=ma:$APP.k(ya)?(ma=[$APP.m.g($APP.C.h(B,$APP.kj.g(ya))),"/",$APP.m.g(sa)].join(""),ma=$APP.Ha(ma,f)?new $APP.H(null,2,5,$APP.I,[ya,ma],null):null,$APP.k(ma)?ya=ma:(sa=[$APP.m.g(ya),"/",$APP.m.g(sa)].join(""),ya=$APP.Ha(sa,f)?new $APP.H(null,2,5,$APP.I,[ya,sa],null):null)):ya=null;return ya},Z),da=$APP.K.h(ba,O),ia=$APP.cf($APP.Fy.g($APP.ej.h(function(ma){var ya=$APP.y.j(ma,0,null);ma=$APP.y.j(ma,1,null);ma=
new $APP.h(null,1,["candidate",$APP.m.g(ma)],null);return $APP.k(ya)?$APP.ui.j(ma,"ns",$APP.m.g(ya)):ma},da)));return new $APP.h(null,2,["completions",ia,"status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}return new $APP.h(null,1,["status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}finally{$APP.Zp()}}catch(ma){return console.warn(ma),new $APP.h(null,2,["completions",$APP.Sg,"status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}};KKa={};
JKa=function JKa(a,b,c){for(;;){if(b instanceof Promise)return b;if(KKa===a){if($APP.Je(b))return $APP.OO(b,b,c,JKa);a=$APP.Qu(b,c)}else{b=Promise;var e=b.resolve;var f=$APP.dK.g(c);f=$APP.k(f)?f:$APP.ef;c=new $APP.h(null,1,[$APP.Q,$APP.Q.g(c)],null);c=f.h?f.h(a,c):f.call(null,a,c);return e.call(b,c)}}};SKa=new $APP.q(null,"resolved__34601__auto__","resolved__34601__auto__",35927701,null);$APP.XKa=new $APP.q(null,"socket-repl","socket-repl",-1615225633,null);
$APP.YKa=new $APP.q(null,"repl","repl",1605132860,null);OKa=new $APP.F(null,"disableConfig","disableConfig",844586790);UKa=new $APP.F(null,"unqualified","unqualified",-98904653);PKa=new $APP.F(null,"paths","paths",-1807389588);VKa=new $APP.F(null,"qualified","qualified",-2065109343);$APP.ZKa=new $APP.q(null,"start-server!","start-server!",203437330,null);$APP.uQ=new $APP.F(null,"classpath","classpath",299521985);var NKa,MKa;NKa=function(){var a=esm_import$node_module.createRequire;return $APP.k(a)?a:function(){return function(){throw Error("createRequire is not defined, this is a no-op");}}}();MKa=$APP.Aj.g(!1);$APP.vQ=function vQ(a){switch(arguments.length){case 1:return vQ.g(arguments[0]);case 2:return vQ.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};$APP.vQ.g=function(a){return $APP.vQ.h(a,null)};
$APP.vQ.h=function(a,b){b=$APP.bz.l(b,$APP.z([$APP.cz,!0]));var c=esm_import$node_path.resolve(a);$APP.vg($APP.cIa,c);return $APP.tQ(c,b).then(function(){return $APP.Vu(c)})};$APP.vQ.B=2;$APP.wQ=function wQ(a){switch(arguments.length){case 1:return wQ.g(arguments[0]);case 2:return wQ.h(arguments[0],arguments[1]);default:throw Error(["Invalid arity: ",$APP.m.g(arguments.length)].join(""));}};$APP.wQ.g=function(a){return $APP.wQ.h(a,null)};
$APP.wQ.h=function(a,b){b=$APP.bz.l(b,$APP.z([$APP.cz,!0]));return $APP.tQ(null,b).then(function(){return $APP.Tu(a)})};$APP.wQ.B=2;export const loadFile=$APP.vQ;export const loadString=$APP.wQ;export const getClassPath=function(){return $APP.yp()};export const addClassPath=function(a){return $APP.zp(a)};export const version=function(){return $APP.gv()};export const registerModule=function(a,b){b=$APP.Xia($APP.Jk(b));return $APP.Bj.F($APP.Ju,$APP.ui,b,a)};export const printErrorReport=$APP.PO;