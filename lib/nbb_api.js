import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$fs from"fs";import*as esm_import$import_meta_resolve from"import-meta-resolve";import*as esm_import$url from"url";import*as esm_import$path from"path";import*as esm_import$module from"module";var uCa,vCa,oCa,DQ,wCa,HQ,rCa,IQ;$APP.nCa=function(a){a=$APP.nd(a);a=$APP.Om.h(function(d){return $APP.jt($APP.Et(),d)},a);var b=$APP.q($APP.Np),c=$APP.q($APP.zp);return $APP.Jt(a,new $APP.k(null,2,[$APP.S,b,$APP.ul,c],null))};$APP.pCa=function(a,b){return DQ(oCa,a,b)};
$APP.FQ=function(a,b){return Promise.resolve($APP.l($APP.q(qCa))?null:function(){var c=esm_import$path.resolve($APP.l(a)?a:"script.cljs"),d=$APP.l($APP.iy.g(b))?$APP.Zh.j(b,$APP.iy,$APP.hM.g(esm_import$fs.readFileSync($APP.iy.g(b),"utf8"))):function(){var h;a:for(h=c;;){var m=esm_import$fs.existsSync(h);m=$APP.l(m)?esm_import$fs.lstatSync(h).isDirectory():m;if($APP.l(m)){m=esm_import$path.resolve(h,"nbb.edn");if($APP.l(esm_import$fs.existsSync(m))){h=m;break a}m=esm_import$path.dirname(h)}else m=
esm_import$path.dirname(h);if($APP.z.h(m,h)){h=null;break a}h=m}return $APP.l(h)?(m=$APP.hM.g(esm_import$fs.readFileSync(h,"utf8")),$APP.Zh.l(b,$APP.iy,m,$APP.B([$APP.eK,esm_import$path.dirname(h)]))):b}(),e=EQ.g?EQ.g(c):EQ.call(null,c),f=$APP.p.g(esm_import$url.pathToFileURL(c));$APP.Nt.require=e;$APP.dj.G($APP.Mt,$APP.Zh,$APP.Bm,e);$APP.dj.G($APP.Mt,$APP.Zh,$APP.Ot,function(h){return esm_import$import_meta_resolve.resolve(h,f)});$APP.Zf($APP.JO,d);return Promise.resolve(function(){var h=$APP.iy.g(d);
if($APP.l(h)){h=rCa.g(h);if($APP.l(h)){h=$APP.u(h);for(var m=null,r=0,n=0;;)if(n<r){var w=m.ea(null,n);$APP.jb(esm_import$path.isAbsolute(w))?$APP.Eo(function(){var D=$APP.eK.g(d);return $APP.l(D)?esm_import$path.resolve(D,w):w}()):$APP.Eo(w);n+=1}else if(h=$APP.u(h)){m=h;if($APP.he(m))h=$APP.Kc(m),n=$APP.Lc(m),m=h,r=$APP.Fd(h),h=n;else{var x=$APP.v(m);$APP.jb(esm_import$path.isAbsolute(x))?$APP.Eo(function(){var D=$APP.eK.g(d);return $APP.l(D)?esm_import$path.resolve(D,x):x}()):$APP.Eo(x);h=$APP.y(m);
m=null;r=0}n=0}else break}else $APP.Eo(process.cwd());return shadow_esm_import("./nbb_deps.js")}return $APP.Eo(process.cwd())}()).then(function(){return $APP.Zf(qCa,!0)})}())};$APP.sCa=function(a){var b=esm_import$path.resolve(a);$APP.Zf($APP.uAa,b);return $APP.FQ(b,null).then(function(){return $APP.Yt(b)})};$APP.tCa=function(a){return $APP.FQ(null,null).then(function(){return $APP.Wt(a)})};$APP.GQ=function(a,b){return $APP.Os(a,b)};
uCa=function(a,b){b=$APP.ht(a,$APP.Bk("(keys (ns-map '%s))","%s",b));b=$APP.Gi.h(function(c){return["`",$APP.p.g(c)].join("")},b);b=["[",$APP.Mm.h(" ",b),"]"].join("");a=$APP.ht(a,b);return $APP.jr.h(function(c){return $APP.Kk($APP.p.g(c),"nbb.internal")},a)};
vCa=function(a,b){var c=$APP.Et();b=$APP.Hk.h(b,/\//);$APP.A.j(b,0,null);var d=$APP.A.j(b,1,null),e=$APP.ht(c,$APP.aj.l($APP.B([$APP.T.g($APP.u($APP.K.l(new $APP.E(null,$APP.Rp,null,1,null),new $APP.E(null,$APP.Ce($APP.T.g($APP.u($APP.K.h(new $APP.E(null,HQ,null,1,null),new $APP.E(null,$APP.T.g($APP.u($APP.K.h(new $APP.E(null,$APP.Joa,null,1,null),new $APP.E(null,$APP.T.g($APP.u($APP.K.h(new $APP.E(null,$APP.Zj,null,1,null),new $APP.E(null,a,null,1,null)))),null,1,null)))),null,1,null))))),null,1,
null),$APP.B([new $APP.E(null,$APP.T.g($APP.u($APP.K.l(new $APP.E(null,$APP.SJ,null,1,null),new $APP.E(null,$APP.T.g($APP.u($APP.K.h(new $APP.E(null,$APP.vqa,null,1,null),new $APP.E(null,HQ,null,1,null)))),null,1,null),$APP.B([new $APP.E(null,HQ,null,1,null)])))),null,1,null)]))))])));if($APP.l(e)&&(c=$APP.l(d)?function(){var m=$APP.Aa(d,"."),r=$APP.Hk.h(d,/\./);m=m?r:$APP.gi(r);return new $APP.H(null,2,5,$APP.I,[[$APP.p.g(a),"/",$APP.u(m)?[$APP.Mm.h(".",m),"."].join(""):null].join(""),$APP.Vf.j($APP.Ga,
e,m)],null)}():new $APP.H(null,2,5,$APP.I,[[$APP.p.g(a),"/"].join(""),e],null),$APP.l(c))){var f=$APP.A.j(c,0,null),h=$APP.A.j(c,1,null);c=function(){for(var m=h,r=$APP.pg;;)if($APP.l(m)){var n=Object.getPrototypeOf(m);r=$APP.fh.h(r,Object.getOwnPropertyNames(m));m=n}else return r}();return $APP.Gi.h(function(m){return new $APP.H(null,2,5,$APP.I,[null,[$APP.p.g(f),$APP.p.g(m)].join("")],null)},c)}return null};
$APP.xCa=function(a){var b=$APP.xf(a);a=$APP.C.h(b,$APP.S);try{var c=$APP.Et(),d=$APP.l(a)?$APP.GQ(c,$APP.Mi.g(a)):null,e=$APP.vf([$APP.Np,$APP.l(d)?d:$APP.q($APP.Np)]);$APP.bp(e);try{var f=function(){var ma=$APP.am.g(b);return $APP.l(ma)?ma:$APP.XF.g(b)}();if($APP.l(f)){var h=-1!=f.indexOf("/"),m=h?function(){var ma=$APP.Hk.h(f,/\//);ma=null==ma?null:$APP.v(ma);return null==ma?null:$APP.Mi.g(ma)}():null,r=uCa(c,$APP.ht(c,"(ns-name *ns*)")),n=$APP.Gi.h(function(ma){return new $APP.H(null,3,5,$APP.I,
[$APP.af(ma),$APP.hi(ma),wCa],null)},r),w=$APP.ht(c,"(let [m (ns-aliases *ns*)] (zipmap (keys m) (map ns-name (vals m))))"),x=$APP.ii($APP.Xh(w),$APP.Vh(w)),D=$APP.Um.g($APP.mg.l(function(ma){var ta=$APP.C.h(w,ma);ma=$APP.ht(c,$APP.Bk("(keys (ns-publics '%s))","%s",ta));return $APP.Gi.h(function(pa){return new $APP.H(null,3,5,$APP.I,[$APP.p.g(ta),$APP.p.g(pa),IQ],null)},ma)},$APP.B([$APP.Vh(w)]))),G=$APP.Gi.h(function(ma){return new $APP.H(null,3,5,$APP.I,[$APP.p.g(ma),null,IQ],null)},$APP.ht(c,"(all-ns)")),
M=h?vCa(m,f):null,U=$APP.l(M)?null:h?function(){var ma=$APP.C.j(w,m,m),ta=$APP.ht(c,$APP.Bk("(and (find-ns '%s)\n                                                                                         (keys (ns-publics '%s)))","%s",ma));return $APP.Gi.h(function(pa){return new $APP.H(null,3,5,$APP.I,[$APP.p.g(ma),$APP.p.g(pa),IQ],null)},ta)}():null,Y=$APP.K.l(n,D,$APP.B([G,U])),ba=$APP.Rm.h(function(ma){var ta=$APP.A.j(ma,0,null);var pa=$APP.A.j(ma,1,null);ma=$APP.A.j(ma,2,null);ma=$APP.z.h(wCa,
ma)&&-1!=pa.indexOf(f)?new $APP.H(null,2,5,$APP.I,[ta,pa],null):null;$APP.l(ma)?ta=ma:$APP.l(ta)?(ma=[$APP.p.g($APP.C.h(x,$APP.Mi.g(ta))),"/",$APP.p.g(pa)].join(""),ma=-1!=ma.indexOf(f)?new $APP.H(null,2,5,$APP.I,[ta,ma],null):null,$APP.l(ma)?ta=ma:(pa=[$APP.p.g(ta),"/",$APP.p.g(pa)].join(""),ta=-1!=pa.indexOf(f)?new $APP.H(null,2,5,$APP.I,[ta,pa],null):null)):ta=null;return ta},Y),ca=$APP.K.h(ba,M),ea=$APP.Ce($APP.Cv.g($APP.Gi.h(function(ma){var ta=$APP.A.j(ma,0,null);ma=$APP.A.j(ma,1,null);ma=new $APP.k(null,
1,["candidate",$APP.p.g(ma)],null);return $APP.l(ta)?$APP.Zh.j(ma,"ns",$APP.p.g(ta)):ma},ca)));return new $APP.k(null,2,["completions",ea,"status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}return new $APP.k(null,1,["status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}finally{$APP.dp()}}catch(ma){return console.warn(ma),new $APP.k(null,2,["completions",$APP.pg,"status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}};oCa={};
DQ=function DQ(a,b,c){for(;;){if(b instanceof Promise)return b;if(oCa===a){if($APP.le(b))return $APP.NO(b,b,c,DQ);a=$APP.Tt(b,c)}else{b=Promise;var e=b.resolve;var f=$APP.KI.g(c);f=$APP.l(f)?f:$APP.Ee;c=new $APP.k(null,1,[$APP.S,$APP.S.g(c)],null);c=f.h?f.h(a,c):f.call(null,a,c);return e.call(b,c)}}};$APP.JQ=new $APP.t(null,"socket-repl","socket-repl",-1615225633,null);$APP.KQ=new $APP.t(null,"repl","repl",1605132860,null);wCa=new $APP.F(null,"unqualified","unqualified",-98904653);
HQ=new $APP.t(null,"resolved__33256__auto__","resolved__33256__auto__",84271472,null);rCa=new $APP.F(null,"paths","paths",-1807389588);IQ=new $APP.F(null,"qualified","qualified",-2065109343);$APP.LQ=new $APP.t(null,"start-server!","start-server!",203437330,null);$APP.MQ=new $APP.F(null,"port","port",1534937262);$APP.NQ=new $APP.F(null,"classpath","classpath",299521985);$APP.yCa=new $APP.F(null,"host","host",-1558485167);var EQ=function(){var a=esm_import$module.createRequire;return $APP.l(a)?a:function(){return function(){throw Error("createRequire is not defined, this is a no-op");}}}(),qCa=$APP.cj.g(!1);export let loadFile=$APP.sCa;export let loadString=$APP.tCa;export let getClassPath=function(){return $APP.Do()};export let addClassPath=function(a){return $APP.Eo(a)};export let version=function(){return $APP.lu()};export let registerModule=function(a,b){b=$APP.Cka($APP.kk(b));return $APP.dj.G($APP.Lt,$APP.Zh,b,a)};export let printErrorReport=$APP.OO;