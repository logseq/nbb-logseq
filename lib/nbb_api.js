import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$fs from"fs";import*as esm_import$import_meta_resolve from"import-meta-resolve";import*as esm_import$url from"url";import*as esm_import$path from"path";import*as esm_import$module from"module";var mCa,nCa,gCa,LQ,oCa,jCa,QQ,PQ;$APP.fCa=function(a){a=$APP.nd(a);a=$APP.Qm.h(function(d){return $APP.kt($APP.Ft(),d)},a);var b=$APP.q($APP.Pp),c=$APP.q($APP.Bp);return $APP.Kt(a,new $APP.k(null,2,[$APP.S,b,$APP.xl,c],null))};$APP.hCa=function(a,b){return LQ(gCa,a,b)};
$APP.NQ=function(a,b){return Promise.resolve($APP.l($APP.q(iCa))?null:function(){var c=esm_import$path.resolve($APP.l(a)?a:"script.cljs"),d=$APP.l($APP.sy.g(b))?$APP.$h.j(b,$APP.sy,$APP.kM.g(esm_import$fs.readFileSync($APP.sy.g(b),"utf8"))):function(){var h;a:for(h=c;;){var m=esm_import$fs.existsSync(h);m=$APP.l(m)?esm_import$fs.lstatSync(h).isDirectory():m;if($APP.l(m)){m=esm_import$path.resolve(h,"nbb.edn");if($APP.l(esm_import$fs.existsSync(m))){h=m;break a}m=esm_import$path.dirname(h)}else m=
esm_import$path.dirname(h);if($APP.z.h(m,h)){h=null;break a}h=m}return $APP.l(h)?(m=$APP.kM.g(esm_import$fs.readFileSync(h,"utf8")),$APP.$h.l(b,$APP.sy,m,$APP.C([$APP.gK,esm_import$path.dirname(h)]))):b}(),e=MQ.g?MQ.g(c):MQ.call(null,c),f=$APP.p.g(esm_import$url.pathToFileURL(c));$APP.Ot.require=e;$APP.dj.F($APP.Nt,$APP.$h,$APP.Dm,e);$APP.dj.F($APP.Nt,$APP.$h,$APP.Pt,function(h){return esm_import$import_meta_resolve.resolve(h,f)});$APP.ag($APP.MO,d);return Promise.resolve(function(){var h=$APP.sy.g(d);
if($APP.l(h)){h=jCa.g(h);if($APP.l(h)){h=$APP.u(h);for(var m=null,r=0,n=0;;)if(n<r){var w=m.da(null,n);$APP.ib(esm_import$path.isAbsolute(w))?$APP.Go(function(){var B=$APP.gK.g(d);return $APP.l(B)?esm_import$path.resolve(B,w):w}()):$APP.Go(w);n+=1}else if(h=$APP.u(h)){m=h;if($APP.je(m))h=$APP.Kc(m),n=$APP.Lc(m),m=h,r=$APP.Gd(h),h=n;else{var x=$APP.v(m);$APP.ib(esm_import$path.isAbsolute(x))?$APP.Go(function(){var B=$APP.gK.g(d);return $APP.l(B)?esm_import$path.resolve(B,x):x}()):$APP.Go(x);h=$APP.y(m);
m=null;r=0}n=0}else break}else $APP.Go(process.cwd());return shadow_esm_import("./nbb_deps.js")}return $APP.Go(process.cwd())}()).then(function(){return $APP.ag(iCa,!0)})}())};$APP.kCa=function(a){var b=esm_import$path.resolve(a);$APP.ag($APP.mAa,b);return $APP.NQ(b,null).then(function(){return $APP.Zt(b)})};$APP.lCa=function(a){return $APP.NQ(null,null).then(function(){return $APP.Xt(a)})};$APP.OQ=function(a,b){return $APP.Ps(a,b)};
mCa=function(a,b){b=$APP.it(a,$APP.Dk("(keys (ns-map '%s))","%s",b));b=$APP.Ii.h(function(c){return["`",$APP.p.g(c)].join("")},b);b=["[",$APP.Om.h(" ",b),"]"].join("");a=$APP.it(a,b);return $APP.kr.h(function(c){return $APP.Mk($APP.p.g(c),"nbb.internal")},a)};
nCa=function(a,b){var c=$APP.Ft();b=$APP.Jk.h(b,/\//);$APP.A.j(b,0,null);var d=$APP.A.j(b,1,null),e=$APP.it(c,$APP.aj.l($APP.C([$APP.T.g($APP.u($APP.K.l(new $APP.E(null,$APP.Tp,null,1,null),new $APP.E(null,$APP.Fe($APP.T.g($APP.u($APP.K.h(new $APP.E(null,PQ,null,1,null),new $APP.E(null,$APP.T.g($APP.u($APP.K.h(new $APP.E(null,$APP.Coa,null,1,null),new $APP.E(null,$APP.T.g($APP.u($APP.K.h(new $APP.E(null,$APP.Zj,null,1,null),new $APP.E(null,a,null,1,null)))),null,1,null)))),null,1,null))))),null,1,
null),$APP.C([new $APP.E(null,$APP.T.g($APP.u($APP.K.l(new $APP.E(null,$APP.UJ,null,1,null),new $APP.E(null,$APP.T.g($APP.u($APP.K.h(new $APP.E(null,$APP.rqa,null,1,null),new $APP.E(null,PQ,null,1,null)))),null,1,null),$APP.C([new $APP.E(null,PQ,null,1,null)])))),null,1,null)]))))])));if($APP.l(e)&&(c=$APP.l(d)?function(){var m=$APP.Ba(d,"."),r=$APP.Jk.h(d,/\./);m=m?r:$APP.hi(r);return new $APP.H(null,2,5,$APP.I,[[$APP.p.g(a),"/",$APP.u(m)?[$APP.Om.h(".",m),"."].join(""):null].join(""),$APP.Xf.j($APP.Ga,
e,m)],null)}():new $APP.H(null,2,5,$APP.I,[[$APP.p.g(a),"/"].join(""),e],null),$APP.l(c))){var f=$APP.A.j(c,0,null),h=$APP.A.j(c,1,null);c=function(){for(var m=h,r=$APP.qg;;)if($APP.l(m)){var n=Object.getPrototypeOf(m);r=$APP.fh.h(r,Object.getOwnPropertyNames(m));m=n}else return r}();return $APP.Ii.h(function(m){return new $APP.H(null,2,5,$APP.I,[null,[$APP.p.g(f),$APP.p.g(m)].join("")],null)},c)}return null};
$APP.pCa=function(a){var b=$APP.xf(a);a=$APP.D.h(b,$APP.S);try{var c=$APP.Ft(),d=$APP.l(a)?$APP.OQ(c,$APP.Oi.g(a)):null,e=$APP.vf([$APP.Pp,$APP.l(d)?d:$APP.q($APP.Pp)]);$APP.dp(e);try{var f=function(){var la=$APP.cm.g(b);return $APP.l(la)?la:$APP.ZF.g(b)}();if($APP.l(f)){var h=-1!=f.indexOf("/"),m=h?function(){var la=$APP.Jk.h(f,/\//);la=null==la?null:$APP.v(la);return null==la?null:$APP.Oi.g(la)}():null,r=mCa(c,$APP.it(c,"(ns-name *ns*)")),n=$APP.Ii.h(function(la){return new $APP.H(null,3,5,$APP.I,
[$APP.cf(la),$APP.ji(la),oCa],null)},r),w=$APP.it(c,"(let [m (ns-aliases *ns*)] (zipmap (keys m) (map ns-name (vals m))))"),x=$APP.ki($APP.Yh(w),$APP.Wh(w)),B=$APP.Wm.g($APP.ng.l(function(la){var ta=$APP.D.h(w,la);la=$APP.it(c,$APP.Dk("(keys (ns-publics '%s))","%s",ta));return $APP.Ii.h(function(pa){return new $APP.H(null,3,5,$APP.I,[$APP.p.g(ta),$APP.p.g(pa),QQ],null)},la)},$APP.C([$APP.Wh(w)]))),F=$APP.Ii.h(function(la){return new $APP.H(null,3,5,$APP.I,[$APP.p.g(la),null,QQ],null)},$APP.it(c,"(all-ns)")),
M=h?nCa(m,f):null,U=$APP.l(M)?null:h?function(){var la=$APP.D.j(w,m,m),ta=$APP.it(c,$APP.Dk("(and (find-ns '%s)\n                                                                                         (keys (ns-publics '%s)))","%s",la));return $APP.Ii.h(function(pa){return new $APP.H(null,3,5,$APP.I,[$APP.p.g(la),$APP.p.g(pa),QQ],null)},ta)}():null,Y=$APP.K.l(n,B,$APP.C([F,U])),ba=$APP.Vm.h(function(la){var ta=$APP.A.j(la,0,null);var pa=$APP.A.j(la,1,null);la=$APP.A.j(la,2,null);la=$APP.z.h(oCa,
la)&&-1!=pa.indexOf(f)?new $APP.H(null,2,5,$APP.I,[ta,pa],null):null;$APP.l(la)?ta=la:$APP.l(ta)?(la=[$APP.p.g($APP.D.h(x,$APP.Oi.g(ta))),"/",$APP.p.g(pa)].join(""),la=-1!=la.indexOf(f)?new $APP.H(null,2,5,$APP.I,[ta,la],null):null,$APP.l(la)?ta=la:(pa=[$APP.p.g(ta),"/",$APP.p.g(pa)].join(""),ta=-1!=pa.indexOf(f)?new $APP.H(null,2,5,$APP.I,[ta,pa],null):null)):ta=null;return ta},Y),ca=$APP.K.h(ba,M),ea=$APP.Fe($APP.Dv.g($APP.Ii.h(function(la){var ta=$APP.A.j(la,0,null);la=$APP.A.j(la,1,null);la=new $APP.k(null,
1,["candidate",$APP.p.g(la)],null);return $APP.l(ta)?$APP.$h.j(la,"ns",$APP.p.g(ta)):la},ca)));return new $APP.k(null,2,["completions",ea,"status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}return new $APP.k(null,1,["status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}finally{$APP.fp()}}catch(la){return console.warn(la),new $APP.k(null,2,["completions",$APP.qg,"status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}};gCa={};
LQ=function LQ(a,b,c){for(;;){if(b instanceof Promise)return b;if(gCa===a){if($APP.ne(b))return $APP.QO(b,b,c,LQ);a=$APP.Ut(b,c)}else{b=Promise;var e=b.resolve;var f=$APP.KI.g(c);f=$APP.l(f)?f:$APP.He;c=new $APP.k(null,1,[$APP.S,$APP.S.g(c)],null);c=f.h?f.h(a,c):f.call(null,a,c);return e.call(b,c)}}};$APP.RQ=new $APP.t(null,"socket-repl","socket-repl",-1615225633,null);$APP.SQ=new $APP.t(null,"repl","repl",1605132860,null);oCa=new $APP.G(null,"unqualified","unqualified",-98904653);
jCa=new $APP.G(null,"paths","paths",-1807389588);QQ=new $APP.G(null,"qualified","qualified",-2065109343);$APP.TQ=new $APP.t(null,"start-server!","start-server!",203437330,null);$APP.UQ=new $APP.G(null,"port","port",1534937262);$APP.VQ=new $APP.G(null,"classpath","classpath",299521985);PQ=new $APP.t(null,"resolved__33470__auto__","resolved__33470__auto__",1828698637,null);$APP.qCa=new $APP.G(null,"host","host",-1558485167);var MQ=function(){var a=esm_import$module.createRequire;return $APP.l(a)?a:function(){return function(){throw Error("createRequire is not defined, this is a no-op");}}}(),iCa=$APP.cj.g(!1);export let loadFile=$APP.kCa;export let loadString=$APP.lCa;export let getClassPath=function(){return $APP.Fo()};export let addClassPath=function(a){return $APP.Go(a)};export let version=function(){return $APP.lu()};export let registerModule=function(a,b){b=$APP.vka($APP.mk(b));return $APP.dj.F($APP.Mt,$APP.$h,b,a)};export let printErrorReport=$APP.RO;