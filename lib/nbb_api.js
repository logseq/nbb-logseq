import { $APP, shadow$provide, $jscomp } from "./nbb_core.js";
const shadow_esm_import = function(x) { return import(x) };
import*as esm_import$fs from"fs";import*as esm_import$import_meta_resolve from"import-meta-resolve";import*as esm_import$url from"url";import*as esm_import$path from"path";import*as esm_import$module from"module";var hha,iha,MCa,LCa,wDa,uDa,xDa,vDa;$APP.qP=function(a,b){return $APP.hy(a,b)};$APP.rP=function(a){a=$APP.Jd(a);a=$APP.lq.h(function(d){return $APP.qy($APP.ho(),d)},a);var b=$APP.q($APP.ef),c=$APP.q($APP.bf);return $APP.yy(a,new $APP.g(null,2,[$APP.O,b,$APP.Km,c],null))};
$APP.NCa=function(a,b){return LCa(MCa,a,b)};
$APP.wR=function(a,b){return Promise.resolve($APP.m($APP.q(yCa))?null:function(){var c=esm_import$path.resolve($APP.m(a)?a:"script.cljs"),d=$APP.m($APP.YC.g(b))?$APP.K.j(b,$APP.YC,$APP.m3.g(esm_import$fs.readFileSync($APP.YC.g(b),"utf8"))):function(){var l;a:for(l=c;;){var p=esm_import$fs.existsSync(l);p=$APP.m(p)?esm_import$fs.lstatSync(l).isDirectory():p;if($APP.m(p)){p=esm_import$path.resolve(l,"nbb.edn");if($APP.m(esm_import$fs.existsSync(p))){l=p;break a}p=esm_import$path.dirname(l)}else p=esm_import$path.dirname(l);
if($APP.B.h(p,l)){l=null;break a}l=p}return $APP.m(l)?(p=$APP.m3.g(esm_import$fs.readFileSync(l,"utf8")),$APP.K.l(b,$APP.YC,p,$APP.F([$APP.bK,esm_import$path.dirname(l)]))):b}(),e=tP.g?tP.g(c):tP.call(null,c),h=$APP.n.g(esm_import$url.pathToFileURL(c));$APP.Cy.require=e;$APP.Dl.I($APP.By,$APP.K,$APP.yo,e);$APP.Dl.I($APP.By,$APP.K,$APP.Gx,function(l){return esm_import$import_meta_resolve.resolve(l,h)});$APP.Th($APP.hN,d);return Promise.resolve(function(){var l=$APP.YC.g(d);if($APP.m(l)){l=uDa.g(l);
if($APP.m(l)){l=$APP.u(l);for(var p=null,t=0,A=0;;)if(A<t){var y=p.fa(null,A);$APP.qb(esm_import$path.isAbsolute(y))?$APP.Jn(function(){var v=$APP.bK.g(d);return $APP.m(v)?esm_import$path.resolve(v,y):y}()):$APP.Jn(y);A+=1}else if(l=$APP.u(l)){p=l;if($APP.Oe(p))l=$APP.dd(p),A=$APP.fd(p),p=l,t=$APP.ie(l),l=A;else{var D=$APP.x(p);$APP.qb(esm_import$path.isAbsolute(D))?$APP.Jn(function(){var v=$APP.bK.g(d);return $APP.m(v)?esm_import$path.resolve(v,D):D}()):$APP.Jn(D);l=$APP.z(p);p=null;t=0}A=0}else break}else $APP.Jn(process.cwd());
return shadow_esm_import("./nbb_deps.js")}return $APP.Jn(process.cwd())}()).then(function(){return $APP.Th(yCa,!0)})}())};$APP.vP=function(a){var b=esm_import$path.resolve(a);$APP.Th($APP.DCa,b);return $APP.wR(b,null).then(function(){return $APP.Vy(b)})};$APP.wP=function(a){return $APP.wR(null,null).then(function(){return $APP.Sy(a)})};$APP.xP=function(a,b){return $APP.Ix(a,b)};
hha=function(a,b){b=$APP.qP(a,$APP.jn("(keys (ns-map '%s))","%s",b));b=$APP.Wk.h(function(c){return["`",$APP.n.g(c)].join("")},b);b=["[",$APP.En.h(" ",b),"]"].join("");a=$APP.hy(a,b);return $APP.Rq.h(function(c){return $APP.Bn($APP.n.g(c),"nbb.internal")},a)};
iha=function(a,b){var c=$APP.ho();b=$APP.rn.h(b,/\//);$APP.C.j(b,0,null);var d=$APP.C.j(b,1,null),e=$APP.qP(c,$APP.yl.l($APP.F([$APP.ip.g($APP.u($APP.S.l(new $APP.G(null,$APP.it,null,1,null),new $APP.G(null,$APP.uf($APP.ip.g($APP.u($APP.S.h(new $APP.G(null,vDa,null,1,null),new $APP.G(null,$APP.ip.g($APP.u($APP.S.h(new $APP.G(null,$APP.Vla,null,1,null),new $APP.G(null,$APP.ip.g($APP.u($APP.S.h(new $APP.G(null,$APP.Bm,null,1,null),new $APP.G(null,a,null,1,null)))),null,1,null)))),null,1,null))))),null,
1,null),$APP.F([new $APP.G(null,$APP.ip.g($APP.u($APP.S.l(new $APP.G(null,$APP.UJ,null,1,null),new $APP.G(null,$APP.ip.g($APP.u($APP.S.h(new $APP.G(null,$APP.Nqa,null,1,null),new $APP.G(null,vDa,null,1,null)))),null,1,null),$APP.F([new $APP.G(null,vDa,null,1,null)])))),null,1,null)]))))])));if($APP.m(e)&&(c=$APP.m(d)?function(){var p=$APP.Da(d,"."),t=$APP.rn.h(d,/\./);p=p?t:$APP.rk(t);return new $APP.H(null,2,5,$APP.I,[[$APP.n.g(a),"/",$APP.u(p)?[$APP.En.h(".",p),"."].join(""):null].join(""),$APP.nh.j($APP.Ia,
e,p)],null)}():new $APP.H(null,2,5,$APP.I,[[$APP.n.g(a),"/"].join(""),e],null),$APP.m(c))){var h=$APP.C.j(c,0,null),l=$APP.C.j(c,1,null);c=function(){for(var p=l,t=$APP.qi;;)if($APP.m(p)){var A=Object.getPrototypeOf(p);t=$APP.In.h(t,Object.getOwnPropertyNames(p));p=A}else return t}();return $APP.Wk.h(function(p){return new $APP.H(null,2,5,$APP.I,[null,[$APP.n.g(h),$APP.n.g(p)].join("")],null)},c)}return null};
$APP.yP=function(a){var b=$APP.ph(a);a=$APP.gf.h(b,$APP.O);try{var c=$APP.ho(),d=$APP.m(a)?$APP.xP(c,$APP.fl.g(a)):null,e=$APP.hj([$APP.ef,$APP.m(d)?d:$APP.q($APP.ef)]);$APP.jo(e);try{var h=function(){var Ba=$APP.wn.g(b);return $APP.m(Ba)?Ba:$APP.bI.g(b)}();if($APP.m(h)){var l=-1!=h.indexOf("/"),p=l?function(){var Ba=$APP.rn.h(h,/\//);Ba=null==Ba?null:$APP.x(Ba);return null==Ba?null:$APP.fl.g(Ba)}():null,t=hha(c,$APP.hy(c,"(ns-name *ns*)")),A=$APP.Wk.h(function(Ba){return new $APP.H(null,3,5,$APP.I,
[$APP.Jg(Ba),$APP.sk(Ba),wDa],null)},t),y=$APP.hy(c,"(let [m (ns-aliases *ns*)] (zipmap (keys m) (map ns-name (vals m))))"),D=$APP.tk($APP.hk(y),$APP.fk(y)),v=$APP.cv.g($APP.hi.l(function(Ba){var za=$APP.gf.h(y,Ba);Ba=$APP.qP(c,$APP.jn("(keys (ns-publics '%s))","%s",za));return $APP.Wk.h(function(ra){return new $APP.H(null,3,5,$APP.I,[$APP.n.g(za),$APP.n.g(ra),xDa],null)},Ba)},$APP.F([$APP.fk(y)]))),J=$APP.Wk.h(function(Ba){return new $APP.H(null,3,5,$APP.I,[$APP.n.g(Ba),null,xDa],null)},$APP.hy(c,
"(all-ns)")),P=l?iha(p,h):null,W=$APP.m(P)?null:l?function(){var Ba=$APP.gf.j(y,p,p),za=$APP.qP(c,$APP.jn("(and (find-ns '%s)\n                                                                                         (keys (ns-publics '%s)))","%s",Ba));return $APP.Wk.h(function(ra){return new $APP.H(null,3,5,$APP.I,[$APP.n.g(Ba),$APP.n.g(ra),xDa],null)},za)}():null,Z=$APP.S.l(A,v,$APP.F([J,W])),na=$APP.Et.h(function(Ba){var za=$APP.C.j(Ba,0,null);var ra=$APP.C.j(Ba,1,null);Ba=$APP.C.j(Ba,2,null);Ba=
$APP.B.h(wDa,Ba)&&-1!=ra.indexOf(h)?new $APP.H(null,2,5,$APP.I,[za,ra],null):null;$APP.m(Ba)?za=Ba:$APP.m(za)?(Ba=[$APP.n.g($APP.gf.h(D,$APP.fl.g(za))),"/",$APP.n.g(ra)].join(""),Ba=-1!=Ba.indexOf(h)?new $APP.H(null,2,5,$APP.I,[za,Ba],null):null,$APP.m(Ba)?za=Ba:(ra=[$APP.n.g(za),"/",$APP.n.g(ra)].join(""),za=-1!=ra.indexOf(h)?new $APP.H(null,2,5,$APP.I,[za,ra],null):null)):za=null;return za},Z),pa=$APP.S.h(na,P),sa=$APP.uf($APP.IA.g($APP.Wk.h(function(Ba){var za=$APP.C.j(Ba,0,null);Ba=$APP.C.j(Ba,
1,null);Ba=new $APP.g(null,1,["candidate",$APP.n.g(Ba)],null);return $APP.m(za)?$APP.K.j(Ba,"ns",$APP.n.g(za)):Ba},pa)));return new $APP.g(null,2,["completions",sa,"status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}return new $APP.g(null,1,["status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}finally{$APP.lo()}}catch(Ba){return console.warn(Ba),new $APP.g(null,2,["completions",$APP.qi,"status",new $APP.H(null,1,5,$APP.I,["done"],null)],null)}};MCa={};
LCa=function LCa(a,b,c){for(;;){if(b instanceof Promise)return b;if(MCa===a){if($APP.We(b))return $APP.Oy(b,b,c,LCa);a=$APP.my(b,c)}else{b=Promise;var e=b.resolve;var h=$APP.uJ.g(c);h=$APP.m(h)?h:$APP.zf;c=new $APP.g(null,1,[$APP.O,$APP.O.g(c)],null);c=h.h?h.h(a,c):h.call(null,a,c);return e.call(b,c)}}};$APP.yDa=new $APP.r(null,"socket-repl","socket-repl",-1615225633,null);$APP.zDa=new $APP.r(null,"repl","repl",1605132860,null);wDa=new $APP.k(null,"unqualified","unqualified",-98904653);
uDa=new $APP.k(null,"paths","paths",-1807389588);xDa=new $APP.k(null,"qualified","qualified",-2065109343);$APP.ADa=new $APP.r(null,"start-server!","start-server!",203437330,null);$APP.zP=new $APP.k(null,"port","port",1534937262);$APP.AP=new $APP.k(null,"classpath","classpath",299521985);$APP.BDa=new $APP.k(null,"host","host",-1558485167);vDa=new $APP.r(null,"resolved__29315__auto__","resolved__29315__auto__",-1305853338,null);var tP=function(){var a=esm_import$module.createRequire;return $APP.m(a)?a:function(){return function(){throw Error("createRequire is not defined, this is a no-op");}}}(),yCa=$APP.Cl.g(!1);export let loadFile=$APP.vP;export let loadString=$APP.wP;export let getClassPath=function(){return $APP.Hn()};export let addClassPath=function(a){return $APP.Jn(a)};export let version=function(){return $APP.jz()};export let registerModule=function(a,b){b=$APP.om($APP.Wm(b));return $APP.Dl.I($APP.Ay,$APP.K,b,a)};export let printErrorReport=$APP.fP;